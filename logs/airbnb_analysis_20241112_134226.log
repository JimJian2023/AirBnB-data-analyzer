2024-11-12 13:42:26,252 [INFO] advanced_analyzer.py:220 - === 开始Airbnb数据收集程序 ===
2024-11-12 13:42:26,431 [INFO] advanced_analyzer.py:36 - 成功读取 6 个房间ID
2024-11-12 13:42:26,431 [INFO] advanced_analyzer.py:231 - 生成 6 个URL
2024-11-12 13:42:26,431 [INFO] advanced_analyzer.py:235 - 创建数据目录: data/airbnb_data_20241112_134226
2024-11-12 13:42:26,431 [INFO] advanced_analyzer.py:122 - === 开始批量分析房源 ===
2024-11-12 13:42:28,177 [INFO] advanced_analyzer.py:80 - Chrome WebDriver 初始化成功
2024-11-12 13:42:28,178 [INFO] advanced_analyzer.py:135 - 
处理第 1/6 个房源
2024-11-12 13:42:28,178 [INFO] advanced_analyzer.py:87 - 
开始分析房源: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-12 13:42:28,178 [INFO] airbnb_calendar_checker.py:70 - 开始检查房源日历: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-12 13:42:30,294 [INFO] airbnb_calendar_checker.py:75 - 页面加载中...
2024-11-12 13:42:30,297 [INFO] airbnb_calendar_checker.py:82 - 页面基本加载完成
2024-11-12 13:42:45,489 [INFO] airbnb_calendar_checker.py:120 - 找到日历按钮: //button[contains(@aria-label, 'Choose')]
2024-11-12 13:42:45,492 [INFO] airbnb_calendar_checker.py:134 - 已滚动到日历按钮位置
2024-11-12 13:42:46,493 [INFO] airbnb_calendar_checker.py:139 - 日历按钮已准备就绪
2024-11-12 13:42:46,603 [INFO] airbnb_calendar_checker.py:148 - 直接点击日历按钮成功
2024-11-12 13:42:56,819 [INFO] airbnb_calendar_checker.py:184 - 日历内容已加载: //div[contains(@data-testid, 'calendar')]
2024-11-12 13:42:56,831 [INFO] airbnb_calendar_checker.py:199 - 找到 123 个日期单元格
2024-11-12 13:42:56,927 [INFO] airbnb_calendar_checker.py:211 - 找到 123 个日期单元格
2024-11-12 13:42:56,928 [INFO] airbnb_calendar_checker.py:256 - 原始单元格数量: 123
2024-11-12 13:42:56,928 [INFO] airbnb_calendar_checker.py:257 - 去重后数据条数: 123
2024-11-12 13:42:56,928 [INFO] airbnb_calendar_checker.py:258 - 处理的唯一日期数: 123
2024-11-12 13:42:56,928 [INFO] airbnb_calendar_checker.py:262 - 收集到 123 条有效日历数据
2024-11-12 13:42:56,928 [INFO] airbnb_calendar_checker.py:22 - 开始导出数据到Excel...
2024-11-12 13:42:56,928 [INFO] airbnb_calendar_checker.py:32 - 处理房源ID: 837352260137971048
2024-11-12 13:42:56,929 [INFO] airbnb_calendar_checker.py:37 - 将创建文件: data/airbnb_calendar_837352260137971048_20241112_134256.xlsx
2024-11-12 13:42:56,929 [INFO] airbnb_calendar_checker.py:41 - 创建DataFrame，共 123 行数据
2024-11-12 13:42:56,954 [INFO] airbnb_calendar_checker.py:52 - 数据已成功导出到Excel文件: data/airbnb_calendar_837352260137971048_20241112_134256.xlsx
2024-11-12 13:42:56,955 [INFO] airbnb_calendar_checker.py:57 - 文件创建成功，大小: 9.12 KB
2024-11-12 13:42:56,955 [INFO] airbnb_calendar_checker.py:265 - 日历数据已成功导出到: data/airbnb_calendar_837352260137971048_20241112_134256.xlsx
2024-11-12 13:42:56,955 [INFO] advanced_analyzer.py:96 - 成功获取日历数据: 123 条记录
2024-11-12 13:42:56,955 [INFO] price_checker.py:500 - 开始检查房源价格: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-12 13:42:56,955 [INFO] price_checker.py:493 - 找到 37 个可预订日期
2024-11-12 13:42:56,955 [INFO] price_checker.py:516 - [1/37] 处理日期: 18/11/2024
2024-11-12 13:42:56,955 [INFO] price_checker.py:234 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-12 13:42:56,955 [INFO] price_checker.py:235 - 入住日期: 18/11/2024
2024-11-12 13:43:02,115 [INFO] price_checker.py:251 - 开始检查日期 18/11/2024 的最小入住要求...
2024-11-12 13:43:02,119 [INFO] price_checker.py:156 - 初始元素HTML: <td class="_sl5yz7r" role="button" aria-disabled="false" aria-label="18, Monday, November 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="0" style="width: 42px; height: 42px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-18/11/2024" data-is-day-blocked="false" style="width: 42px; height: 42px;">18</div></td>
2024-11-12 13:43:02,120 [INFO] price_checker.py:159 - 移动到日期元素...
2024-11-12 13:43:03,406 [ERROR] price_checker.py:225 - 检查最小入住天数时出错: 'NoneType' object has no attribute 'replace'
2024-11-12 13:43:03,406 [ERROR] price_checker.py:226 - 错误类型: AttributeError
2024-11-12 13:43:03,407 [ERROR] price_checker.py:227 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 165, in min_nights_check
    date_str = date_element.get_attribute('data-testid').replace('calendar-day-', '')
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'replace'

2024-11-12 13:43:03,407 [WARNING] price_checker.py:228 - 使用默认值1晚
2024-11-12 13:43:03,407 [INFO] price_checker.py:253 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-12 13:43:03,407 [INFO] price_checker.py:276 - 访问URL: https://www.airbnb.co.nz/rooms/837352260137971048?check_in=2024-11-18&check_out=2024-11-19&adults=3&children=0&infants=0
2024-11-12 13:43:08,518 [INFO] price_checker.py:283 - 检查页面状态...
2024-11-12 13:43:08,522 [INFO] price_checker.py:285 - 页面状态: complete
2024-11-12 13:43:10,535 [INFO] price_checker.py:298 - 价格容器已加载并可见
2024-11-12 13:43:10,535 [INFO] price_checker.py:307 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-12 13:43:10,543 [INFO] price_checker.py:312 - 找到 0 个价格元素
2024-11-12 13:43:10,543 [INFO] price_checker.py:307 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-12 13:43:10,549 [INFO] price_checker.py:312 - 找到 0 个价格元素
2024-11-12 13:43:10,549 [INFO] price_checker.py:307 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-12 13:43:10,555 [INFO] price_checker.py:312 - 找到 0 个价格元素
2024-11-12 13:43:10,555 [INFO] price_checker.py:307 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w ._11jcbg2
2024-11-12 13:43:10,561 [INFO] price_checker.py:312 - 找到 0 个价格元素
2024-11-12 13:43:10,561 [INFO] price_checker.py:307 - 尝试价格选择器: xpath - //div[contains(@class, '_wgmchy')]//span[contains(text(), '$') and contains(text(), 'NZD')]
2024-11-12 13:43:10,568 [INFO] price_checker.py:312 - 找到 0 个价格元素
2024-11-12 13:43:10,568 [INFO] price_checker.py:349 - 开始获取价格详情...
2024-11-12 13:43:20,662 [WARNING] price_checker.py:363 - 等待价格详情容器超时
2024-11-12 13:43:20,663 [INFO] price_checker.py:368 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-12 13:43:25,719 [WARNING] price_checker.py:402 - 等待选择器超时: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-12 13:43:25,719 [INFO] price_checker.py:368 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-12 13:43:30,774 [WARNING] price_checker.py:402 - 等待选择器超时: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-12 13:43:30,775 [INFO] price_checker.py:368 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-12 13:43:35,829 [WARNING] price_checker.py:402 - 等待选择器超时: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-12 13:43:35,829 [INFO] price_checker.py:368 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Special offer']]//span[contains(@class, '_1rc8xn5')]
2024-11-12 13:43:40,885 [WARNING] price_checker.py:402 - 等待选择器超时: //div[contains(@class, '_14omvfj')][.//div[text()='Special offer']]//span[contains(@class, '_1rc8xn5')]
2024-11-12 13:43:40,885 [INFO] price_checker.py:368 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-12 13:43:45,943 [WARNING] price_checker.py:402 - 等待选择器超时: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-12 13:43:45,943 [INFO] price_checker.py:409 - 验证价格信息完整性:
2024-11-12 13:43:45,943 [WARNING] price_checker.py:415 - ✗ cleaning_fee 未获取到
2024-11-12 13:43:45,943 [WARNING] price_checker.py:415 - ✗ service_fee 未获取到
2024-11-12 13:43:45,943 [WARNING] price_checker.py:415 - ✗ taxes 未获取到
2024-11-12 13:43:45,943 [WARNING] price_checker.py:415 - ✗ total 未获取到
2024-11-12 13:43:45,944 [INFO] price_checker.py:418 - 终价格信息获取结果:
2024-11-12 13:43:45,944 [INFO] price_checker.py:420 - check_in: 18/11/2024
2024-11-12 13:43:45,944 [INFO] price_checker.py:420 - check_out: 19/11/2024
2024-11-12 13:43:45,944 [INFO] price_checker.py:420 - min_nights: 1
2024-11-12 13:43:45,944 [INFO] price_checker.py:420 - guests: 3
2024-11-12 13:43:45,944 [INFO] price_checker.py:420 - nightly_price: None
2024-11-12 13:43:45,944 [INFO] price_checker.py:420 - cleaning_fee: None
2024-11-12 13:43:45,944 [INFO] price_checker.py:420 - service_fee: None
2024-11-12 13:43:45,944 [INFO] price_checker.py:420 - taxes: None
2024-11-12 13:43:45,945 [INFO] price_checker.py:420 - total: None
2024-11-12 13:43:45,945 [INFO] price_checker.py:522 - ✓ 成功获取 18/11/2024 的价格信息
2024-11-12 13:43:45,945 [INFO] price_checker.py:516 - [2/37] 处理日期: 27/11/2024
2024-11-12 13:43:45,945 [INFO] price_checker.py:234 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-12 13:43:45,945 [INFO] price_checker.py:235 - 入住日期: 27/11/2024
2024-11-12 13:43:51,067 [INFO] price_checker.py:251 - 开始检查日期 27/11/2024 的最小入住要求...
2024-11-12 13:43:51,071 [INFO] price_checker.py:156 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="27, Wednesday, November 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 42px; height: 42px;"><div class="_697u988 notranslate" data-testid="calendar-day-27/11/2024" data-is-day-blocked="false" style="width: 42px; height: 42px;">27</div></td>
2024-11-12 13:43:51,072 [INFO] price_checker.py:159 - 移动到日期元素...
2024-11-12 13:43:52,345 [ERROR] price_checker.py:225 - 检查最小入住天数时出错: 'NoneType' object has no attribute 'replace'
2024-11-12 13:43:52,345 [ERROR] price_checker.py:226 - 错误类型: AttributeError
2024-11-12 13:43:52,346 [ERROR] price_checker.py:227 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 165, in min_nights_check
    date_str = date_element.get_attribute('data-testid').replace('calendar-day-', '')
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'replace'

2024-11-12 13:43:52,346 [WARNING] price_checker.py:228 - 使用默认值1晚
2024-11-12 13:43:52,346 [INFO] price_checker.py:253 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-12 13:43:52,346 [INFO] price_checker.py:276 - 访问URL: https://www.airbnb.co.nz/rooms/837352260137971048?check_in=2024-11-27&check_out=2024-11-28&adults=3&children=0&infants=0
2024-11-12 13:43:57,444 [INFO] price_checker.py:283 - 检查页面状态...
2024-11-12 13:43:57,446 [INFO] price_checker.py:285 - 页面状态: complete
2024-11-12 13:43:59,454 [INFO] price_checker.py:298 - 价格容器已加载并可见
2024-11-12 13:43:59,454 [INFO] price_checker.py:307 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-12 13:43:59,460 [INFO] price_checker.py:312 - 找到 0 个价格元素
2024-11-12 13:43:59,460 [INFO] price_checker.py:307 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-12 13:43:59,465 [INFO] price_checker.py:312 - 找到 0 个价格元素
2024-11-12 13:43:59,465 [INFO] price_checker.py:307 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-12 13:43:59,468 [INFO] price_checker.py:312 - 找到 0 个价格元素
2024-11-12 13:43:59,468 [INFO] price_checker.py:307 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w ._11jcbg2
2024-11-12 13:43:59,472 [INFO] price_checker.py:312 - 找到 0 个价格元素
2024-11-12 13:43:59,472 [INFO] price_checker.py:307 - 尝试价格选择器: xpath - //div[contains(@class, '_wgmchy')]//span[contains(text(), '$') and contains(text(), 'NZD')]
2024-11-12 13:43:59,477 [INFO] price_checker.py:312 - 找到 0 个价格元素
2024-11-12 13:43:59,477 [INFO] price_checker.py:349 - 开始获取价格详情...
2024-11-12 13:44:09,580 [WARNING] price_checker.py:363 - 等待价格详情容器超时
2024-11-12 13:44:09,580 [INFO] price_checker.py:368 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-12 13:44:14,633 [WARNING] price_checker.py:402 - 等待选择器超时: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-12 13:44:14,633 [INFO] price_checker.py:368 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-12 13:44:19,694 [WARNING] price_checker.py:402 - 等待选择器超时: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-12 13:44:19,694 [INFO] price_checker.py:368 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-12 13:44:24,751 [WARNING] price_checker.py:402 - 等待选择器超时: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-12 13:44:24,751 [INFO] price_checker.py:368 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Special offer']]//span[contains(@class, '_1rc8xn5')]
2024-11-12 13:44:29,804 [WARNING] price_checker.py:402 - 等待选择器超时: //div[contains(@class, '_14omvfj')][.//div[text()='Special offer']]//span[contains(@class, '_1rc8xn5')]
2024-11-12 13:44:29,805 [INFO] price_checker.py:368 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-12 13:44:34,857 [WARNING] price_checker.py:402 - 等待选择器超时: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-12 13:44:34,857 [INFO] price_checker.py:409 - 验证价格信息完整性:
2024-11-12 13:44:34,857 [WARNING] price_checker.py:415 - ✗ cleaning_fee 未获取到
2024-11-12 13:44:34,857 [WARNING] price_checker.py:415 - ✗ service_fee 未获取到
2024-11-12 13:44:34,857 [WARNING] price_checker.py:415 - ✗ taxes 未获取到
2024-11-12 13:44:34,857 [WARNING] price_checker.py:415 - ✗ total 未获取到
2024-11-12 13:44:34,857 [INFO] price_checker.py:418 - 终价格信息获取结果:
2024-11-12 13:44:34,857 [INFO] price_checker.py:420 - check_in: 27/11/2024
2024-11-12 13:44:34,857 [INFO] price_checker.py:420 - check_out: 28/11/2024
2024-11-12 13:44:34,858 [INFO] price_checker.py:420 - min_nights: 1
2024-11-12 13:44:34,858 [INFO] price_checker.py:420 - guests: 3
2024-11-12 13:44:34,858 [INFO] price_checker.py:420 - nightly_price: None
2024-11-12 13:44:34,858 [INFO] price_checker.py:420 - cleaning_fee: None
2024-11-12 13:44:34,858 [INFO] price_checker.py:420 - service_fee: None
2024-11-12 13:44:34,858 [INFO] price_checker.py:420 - taxes: None
2024-11-12 13:44:34,858 [INFO] price_checker.py:420 - total: None
2024-11-12 13:44:34,858 [INFO] price_checker.py:522 - ✓ 成功获取 27/11/2024 的价格信息
2024-11-12 13:44:34,858 [INFO] price_checker.py:516 - [3/37] 处理日期: 28/11/2024
2024-11-12 13:44:34,858 [INFO] price_checker.py:234 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-12 13:44:34,858 [INFO] price_checker.py:235 - 入住日期: 28/11/2024
2024-11-12 13:44:39,968 [INFO] price_checker.py:251 - 开始检查日期 28/11/2024 的最小入住要求...
2024-11-12 13:44:39,972 [INFO] price_checker.py:156 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="28, Thursday, November 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 42px; height: 42px;"><div class="_697u988 notranslate" data-testid="calendar-day-28/11/2024" data-is-day-blocked="false" style="width: 42px; height: 42px;">28</div></td>
2024-11-12 13:44:39,972 [INFO] price_checker.py:159 - 移动到日期元素...
2024-11-12 13:44:41,258 [ERROR] price_checker.py:225 - 检查最小入住天数时出错: 'NoneType' object has no attribute 'replace'
2024-11-12 13:44:41,258 [ERROR] price_checker.py:226 - 错误类型: AttributeError
2024-11-12 13:44:41,259 [ERROR] price_checker.py:227 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 165, in min_nights_check
    date_str = date_element.get_attribute('data-testid').replace('calendar-day-', '')
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'replace'

2024-11-12 13:44:41,259 [WARNING] price_checker.py:228 - 使用默认值1晚
2024-11-12 13:44:41,259 [INFO] price_checker.py:253 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-12 13:44:41,260 [INFO] price_checker.py:276 - 访问URL: https://www.airbnb.co.nz/rooms/837352260137971048?check_in=2024-11-28&check_out=2024-11-29&adults=3&children=0&infants=0
2024-11-12 13:44:46,371 [INFO] price_checker.py:283 - 检查页面状态...
2024-11-12 13:44:46,373 [INFO] price_checker.py:285 - 页面状态: complete
2024-11-12 13:44:48,381 [INFO] price_checker.py:298 - 价格容器已加载并可见
2024-11-12 13:44:48,381 [INFO] price_checker.py:307 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-12 13:44:48,387 [INFO] price_checker.py:312 - 找到 0 个价格元素
2024-11-12 13:44:48,387 [INFO] price_checker.py:307 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-12 13:44:48,391 [INFO] price_checker.py:312 - 找到 0 个价格元素
2024-11-12 13:44:48,392 [INFO] price_checker.py:307 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-12 13:44:48,396 [INFO] price_checker.py:312 - 找到 0 个价格元素
2024-11-12 13:44:48,396 [INFO] price_checker.py:307 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w ._11jcbg2
2024-11-12 13:44:48,399 [INFO] price_checker.py:312 - 找到 0 个价格元素
2024-11-12 13:44:48,399 [INFO] price_checker.py:307 - 尝试价格选择器: xpath - //div[contains(@class, '_wgmchy')]//span[contains(text(), '$') and contains(text(), 'NZD')]
2024-11-12 13:44:48,404 [INFO] price_checker.py:312 - 找到 0 个价格元素
2024-11-12 13:44:48,404 [INFO] price_checker.py:349 - 开始获取价格详情...
2024-11-12 13:44:58,500 [WARNING] price_checker.py:363 - 等待价格详情容器超时
2024-11-12 13:44:58,500 [INFO] price_checker.py:368 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-12 13:45:03,555 [WARNING] price_checker.py:402 - 等待选择器超时: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-12 13:45:03,555 [INFO] price_checker.py:368 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-12 13:45:08,609 [WARNING] price_checker.py:402 - 等待选择器超时: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-12 13:45:08,609 [INFO] price_checker.py:368 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-12 13:45:13,663 [WARNING] price_checker.py:402 - 等待选择器超时: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-12 13:45:13,663 [INFO] price_checker.py:368 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Special offer']]//span[contains(@class, '_1rc8xn5')]
2024-11-12 13:45:18,718 [WARNING] price_checker.py:402 - 等待选择器超时: //div[contains(@class, '_14omvfj')][.//div[text()='Special offer']]//span[contains(@class, '_1rc8xn5')]
2024-11-12 13:45:18,718 [INFO] price_checker.py:368 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-12 13:45:23,770 [WARNING] price_checker.py:402 - 等待选择器超时: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-12 13:45:23,771 [INFO] price_checker.py:409 - 验证价格信息完整性:
2024-11-12 13:45:23,771 [WARNING] price_checker.py:415 - ✗ cleaning_fee 未获取到
2024-11-12 13:45:23,771 [WARNING] price_checker.py:415 - ✗ service_fee 未获取到
2024-11-12 13:45:23,771 [WARNING] price_checker.py:415 - ✗ taxes 未获取到
2024-11-12 13:45:23,771 [WARNING] price_checker.py:415 - ✗ total 未获取到
2024-11-12 13:45:23,771 [INFO] price_checker.py:418 - 终价格信息获取结果:
2024-11-12 13:45:23,771 [INFO] price_checker.py:420 - check_in: 28/11/2024
2024-11-12 13:45:23,771 [INFO] price_checker.py:420 - check_out: 29/11/2024
2024-11-12 13:45:23,771 [INFO] price_checker.py:420 - min_nights: 1
2024-11-12 13:45:23,771 [INFO] price_checker.py:420 - guests: 3
2024-11-12 13:45:23,771 [INFO] price_checker.py:420 - nightly_price: None
2024-11-12 13:45:23,771 [INFO] price_checker.py:420 - cleaning_fee: None
2024-11-12 13:45:23,771 [INFO] price_checker.py:420 - service_fee: None
2024-11-12 13:45:23,771 [INFO] price_checker.py:420 - taxes: None
2024-11-12 13:45:23,772 [INFO] price_checker.py:420 - total: None
2024-11-12 13:45:23,772 [INFO] price_checker.py:522 - ✓ 成功获取 28/11/2024 的价格信息
2024-11-12 13:45:23,772 [INFO] price_checker.py:516 - [4/37] 处理日期: 29/11/2024
2024-11-12 13:45:23,772 [INFO] price_checker.py:234 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-12 13:45:23,772 [INFO] price_checker.py:235 - 入住日期: 29/11/2024
2024-11-12 13:45:28,884 [INFO] price_checker.py:251 - 开始检查日期 29/11/2024 的最小入住要求...
2024-11-12 13:45:28,887 [INFO] price_checker.py:156 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="29, Friday, November 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 42px; height: 42px;"><div class="_697u988 notranslate" data-testid="calendar-day-29/11/2024" data-is-day-blocked="false" style="width: 42px; height: 42px;">29</div></td>
2024-11-12 13:45:28,887 [INFO] price_checker.py:159 - 移动到日期元素...
2024-11-12 13:45:30,162 [ERROR] price_checker.py:225 - 检查最小入住天数时出错: 'NoneType' object has no attribute 'replace'
2024-11-12 13:45:30,162 [ERROR] price_checker.py:226 - 错误类型: AttributeError
2024-11-12 13:45:30,163 [ERROR] price_checker.py:227 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 165, in min_nights_check
    date_str = date_element.get_attribute('data-testid').replace('calendar-day-', '')
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'replace'

2024-11-12 13:45:30,163 [WARNING] price_checker.py:228 - 使用默认值1晚
2024-11-12 13:45:30,163 [INFO] price_checker.py:253 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-12 13:45:30,164 [INFO] price_checker.py:276 - 访问URL: https://www.airbnb.co.nz/rooms/837352260137971048?check_in=2024-11-29&check_out=2024-11-30&adults=3&children=0&infants=0
2024-11-12 13:45:35,243 [INFO] price_checker.py:283 - 检查页面状态...
2024-11-12 13:45:35,247 [INFO] price_checker.py:285 - 页面状态: complete
2024-11-12 13:45:37,255 [INFO] price_checker.py:298 - 价格容器已加载并可见
2024-11-12 13:45:37,256 [INFO] price_checker.py:307 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-12 13:45:37,261 [INFO] price_checker.py:312 - 找到 0 个价格元素
2024-11-12 13:45:37,261 [INFO] price_checker.py:307 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-12 13:45:37,265 [INFO] price_checker.py:312 - 找到 0 个价格元素
2024-11-12 13:45:37,266 [INFO] price_checker.py:307 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-12 13:45:37,269 [INFO] price_checker.py:312 - 找到 0 个价格元素
2024-11-12 13:45:37,270 [INFO] price_checker.py:307 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w ._11jcbg2
2024-11-12 13:45:37,273 [INFO] price_checker.py:312 - 找到 0 个价格元素
2024-11-12 13:45:37,273 [INFO] price_checker.py:307 - 尝试价格选择器: xpath - //div[contains(@class, '_wgmchy')]//span[contains(text(), '$') and contains(text(), 'NZD')]
2024-11-12 13:45:37,278 [INFO] price_checker.py:312 - 找到 0 个价格元素
2024-11-12 13:45:37,278 [INFO] price_checker.py:349 - 开始获取价格详情...
2024-11-12 13:45:47,383 [WARNING] price_checker.py:363 - 等待价格详情容器超时
2024-11-12 13:45:47,384 [INFO] price_checker.py:368 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-12 13:45:52,439 [WARNING] price_checker.py:402 - 等待选择器超时: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-12 13:45:52,439 [INFO] price_checker.py:368 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-12 13:45:59,404 [INFO] advanced_analyzer.py:290 - === 程序执行完成 ===
