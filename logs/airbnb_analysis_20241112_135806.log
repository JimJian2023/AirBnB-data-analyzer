2024-11-12 13:58:06,774 [INFO] advanced_analyzer.py:220 - === 开始Airbnb数据收集程序 ===
2024-11-12 13:58:06,951 [INFO] advanced_analyzer.py:36 - 成功读取 5 个房间ID
2024-11-12 13:58:06,951 [INFO] advanced_analyzer.py:231 - 生成 5 个URL
2024-11-12 13:58:06,952 [INFO] advanced_analyzer.py:235 - 创建数据目录: data/airbnb_data_20241112_135806
2024-11-12 13:58:06,952 [INFO] advanced_analyzer.py:122 - === 开始批量分析房源 ===
2024-11-12 13:58:08,730 [INFO] advanced_analyzer.py:80 - Chrome WebDriver 初始化成功
2024-11-12 13:58:08,730 [INFO] advanced_analyzer.py:135 - 
处理第 1/5 个房源
2024-11-12 13:58:08,730 [INFO] advanced_analyzer.py:87 - 
开始分析房源: https://www.airbnb.co.nz/rooms/43435162
2024-11-12 13:58:08,730 [INFO] airbnb_calendar_checker.py:70 - 开始检查房源日历: https://www.airbnb.co.nz/rooms/43435162
2024-11-12 13:58:09,853 [INFO] airbnb_calendar_checker.py:75 - 页面加载中...
2024-11-12 13:58:09,856 [INFO] airbnb_calendar_checker.py:82 - 页面基本加载完成
2024-11-12 13:58:25,039 [INFO] airbnb_calendar_checker.py:120 - 找到日历按钮: //button[contains(@aria-label, 'Choose')]
2024-11-12 13:58:25,042 [INFO] airbnb_calendar_checker.py:134 - 已滚动到日历按钮位置
2024-11-12 13:58:26,043 [INFO] airbnb_calendar_checker.py:139 - 日历按钮已准备就绪
2024-11-12 13:58:26,157 [INFO] airbnb_calendar_checker.py:148 - 直接点击日历按钮成功
2024-11-12 13:58:36,356 [INFO] airbnb_calendar_checker.py:184 - 日历内容已加载: //div[contains(@data-testid, 'calendar')]
2024-11-12 13:58:36,368 [INFO] airbnb_calendar_checker.py:199 - 找到 123 个日期单元格
2024-11-12 13:58:36,463 [INFO] airbnb_calendar_checker.py:211 - 找到 123 个日期单元格
2024-11-12 13:58:36,464 [INFO] airbnb_calendar_checker.py:256 - 原始单元格数量: 123
2024-11-12 13:58:36,464 [INFO] airbnb_calendar_checker.py:257 - 去重后数据条数: 123
2024-11-12 13:58:36,464 [INFO] airbnb_calendar_checker.py:258 - 处理的唯一日期数: 123
2024-11-12 13:58:36,464 [INFO] airbnb_calendar_checker.py:262 - 收集到 123 条有效日历数据
2024-11-12 13:58:36,464 [INFO] airbnb_calendar_checker.py:22 - 开始导出数据到Excel...
2024-11-12 13:58:36,465 [INFO] airbnb_calendar_checker.py:32 - 处理房源ID: 43435162
2024-11-12 13:58:36,465 [INFO] airbnb_calendar_checker.py:37 - 将创建文件: data/airbnb_calendar_43435162_20241112_135836.xlsx
2024-11-12 13:58:36,465 [INFO] airbnb_calendar_checker.py:41 - 创建DataFrame，共 123 行数据
2024-11-12 13:58:36,490 [INFO] airbnb_calendar_checker.py:52 - 数据已成功导出到Excel文件: data/airbnb_calendar_43435162_20241112_135836.xlsx
2024-11-12 13:58:36,491 [INFO] airbnb_calendar_checker.py:57 - 文件创建成功，大小: 9.09 KB
2024-11-12 13:58:36,491 [INFO] airbnb_calendar_checker.py:265 - 日历数据已成功导出到: data/airbnb_calendar_43435162_20241112_135836.xlsx
2024-11-12 13:58:36,491 [INFO] advanced_analyzer.py:96 - 成功获取日历数据: 123 条记录
2024-11-12 13:58:36,491 [INFO] price_checker.py:519 - 开始检查房源价格: https://www.airbnb.co.nz/rooms/43435162
2024-11-12 13:58:36,491 [INFO] price_checker.py:512 - 找到 39 个可预订日期
2024-11-12 13:58:36,491 [INFO] price_checker.py:535 - [1/39] 处理日期: 17/11/2024
2024-11-12 13:58:36,491 [INFO] price_checker.py:253 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/43435162
2024-11-12 13:58:36,491 [INFO] price_checker.py:254 - 入住日期: 17/11/2024
2024-11-12 13:58:41,671 [INFO] price_checker.py:270 - 开始检查日期 17/11/2024 的最小入住要求...
2024-11-12 13:58:41,675 [INFO] price_checker.py:151 - 初始元素HTML: <td class="_1mv3p4vt" role="button" aria-disabled="false" aria-label="17, Sunday, November 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="0" style="width: 42px; height: 42px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-17/11/2024" data-is-day-blocked="false" style="width: 42px; height: 42px;">17</div></td>
2024-11-12 13:58:41,685 [INFO] price_checker.py:157 - 找到日期: 17/11/2024
2024-11-12 13:58:41,685 [INFO] price_checker.py:163 - 点击日期元素...
2024-11-12 13:58:42,850 [INFO] price_checker.py:173 - 移动到日期元素...
2024-11-12 13:58:44,137 [INFO] price_checker.py:209 - 更新后元素HTML: <td class="_ubf03zg" role="button" aria-disabled="true" aria-label="17, Sunday, November 2024. Selected check-in date There is a 2 night minimum stay requirement. " tabindex="0" style="width: 42px; height: 42px;"><div class="_h84ua7"><div class="_d82cel" style="transform: translate(-100%, -100%) translate(42px, -12px);"><div class="_1mslrl4"><div class="_u7azij">2-night minimum</div><svg role="presentation" focusable="false" class="_8c7xtno" style="right: 10px;"><path class="_1s2t3cl" d="M0,0 20,0 10,10z"></path><path class="_c3dsty" d="M0,0 10,10 20,0"></path></svg></div></div><div class="_17slido1 notranslate" data-testid="calendar-day-17/11/2024" data-is-day-blocked="true" style="width: 42px; height: 42px;">17</div></div></td>
2024-11-12 13:58:44,145 [INFO] price_checker.py:216 - 更新后元素属性:
2024-11-12 13:58:44,145 [INFO] price_checker.py:217 - - aria-label: 17, Sunday, November 2024. Selected check-in date There is a 2 night minimum stay requirement. 
2024-11-12 13:58:44,146 [INFO] price_checker.py:218 - - aria-disabled: true
2024-11-12 13:58:44,146 [INFO] price_checker.py:219 - - data-is-day-blocked: None
2024-11-12 13:58:44,146 [INFO] price_checker.py:234 - ✓ 成功找到最小入住要求: 2晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-12 13:58:44,146 [INFO] price_checker.py:272 - 最终使用的最小入住天数: 2晚 (自动检测)
2024-11-12 13:58:44,146 [INFO] price_checker.py:295 - 访问URL: https://www.airbnb.co.nz/rooms/43435162?check_in=2024-11-17&check_out=2024-11-19&adults=3&children=0&infants=0
2024-11-12 13:58:49,247 [INFO] price_checker.py:302 - 检查页面状态...
2024-11-12 13:58:49,250 [INFO] price_checker.py:304 - 页面状态: complete
2024-11-12 13:58:51,265 [INFO] price_checker.py:317 - 价格容器已加载并可见
2024-11-12 13:58:51,266 [INFO] price_checker.py:326 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-12 13:58:51,273 [INFO] price_checker.py:331 - 找到 0 个价格元素
2024-11-12 13:58:51,274 [INFO] price_checker.py:326 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-12 13:58:51,280 [INFO] price_checker.py:331 - 找到 0 个价格元素
2024-11-12 13:58:51,281 [INFO] price_checker.py:326 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-12 13:58:51,286 [INFO] price_checker.py:331 - 找到 1 个价格元素
2024-11-12 13:58:51,301 [INFO] price_checker.py:336 - 找到可见价格元素: $305 NZD 
night
$305 NZD per night
2024-11-12 13:58:51,307 [INFO] price_checker.py:349 - 找到每晚价格元素: $305 NZD 
night
$305 NZD per night
2024-11-12 13:58:51,307 [INFO] price_checker.py:355 - 成功解析折扣价格: $305 NZD
2024-11-12 13:58:51,307 [INFO] price_checker.py:368 - 开始获取价格详情...
2024-11-12 13:58:51,313 [INFO] price_checker.py:375 - 价格详情容器已加载
2024-11-12 13:58:51,316 [INFO] price_checker.py:387 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-12 13:58:51,323 [INFO] price_checker.py:396 - 找到 1 个匹配元素
2024-11-12 13:58:51,328 [INFO] price_checker.py:401 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-12 13:58:51,328 [INFO] price_checker.py:406 - ✓ 成功设置清洁费: $90 NZD
2024-11-12 13:58:51,328 [INFO] price_checker.py:387 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-12 13:58:56,395 [WARNING] price_checker.py:421 - 等待选择器超时: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-12 13:58:56,395 [INFO] price_checker.py:387 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-12 13:59:01,450 [WARNING] price_checker.py:421 - 等待选择器超时: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-12 13:59:01,450 [INFO] price_checker.py:387 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Special offer']]//span[contains(@class, '_1rc8xn5')]
2024-11-12 13:59:06,507 [WARNING] price_checker.py:421 - 等待选择器超时: //div[contains(@class, '_14omvfj')][.//div[text()='Special offer']]//span[contains(@class, '_1rc8xn5')]
2024-11-12 13:59:06,507 [INFO] price_checker.py:387 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-12 13:59:06,514 [INFO] price_checker.py:396 - 找到 1 个匹配元素
2024-11-12 13:59:06,520 [INFO] price_checker.py:401 - 找到价格元素: $700 NZD (HTML: <span class="_j1kt73">$700&nbsp;NZD</span>)
2024-11-12 13:59:06,520 [INFO] price_checker.py:415 - ✓ 成功设置总价: $700 NZD
2024-11-12 13:59:06,520 [INFO] price_checker.py:428 - 验证价格信息完整性:
2024-11-12 13:59:06,520 [INFO] price_checker.py:432 - ✓ cleaning_fee: $90 NZD
2024-11-12 13:59:06,520 [WARNING] price_checker.py:434 - ✗ service_fee 未获取到
2024-11-12 13:59:06,520 [WARNING] price_checker.py:434 - ✗ taxes 未获取到
2024-11-12 13:59:06,521 [INFO] price_checker.py:432 - ✓ total: $700 NZD
2024-11-12 13:59:06,521 [INFO] price_checker.py:437 - 终价格信息获取结果:
2024-11-12 13:59:06,521 [INFO] price_checker.py:439 - check_in: 17/11/2024
2024-11-12 13:59:06,521 [INFO] price_checker.py:439 - check_out: 19/11/2024
2024-11-12 13:59:06,521 [INFO] price_checker.py:439 - min_nights: 2
2024-11-12 13:59:06,521 [INFO] price_checker.py:439 - guests: 3
2024-11-12 13:59:06,521 [INFO] price_checker.py:439 - nightly_price: $305 NZD
2024-11-12 13:59:06,521 [INFO] price_checker.py:439 - cleaning_fee: $90 NZD
2024-11-12 13:59:06,521 [INFO] price_checker.py:439 - service_fee: None
2024-11-12 13:59:06,521 [INFO] price_checker.py:439 - taxes: None
2024-11-12 13:59:06,521 [INFO] price_checker.py:439 - total: $700 NZD
2024-11-12 13:59:06,521 [INFO] price_checker.py:541 - ✓ 成功获取 17/11/2024 的价格信息
2024-11-12 13:59:06,521 [INFO] price_checker.py:547 - 根据最小入住要求(2晚)跳过接下来的 1 天
2024-11-12 13:59:06,521 [INFO] price_checker.py:535 - [2/39] 处理日期: 18/11/2024
2024-11-12 13:59:06,521 [INFO] price_checker.py:253 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/43435162
2024-11-12 13:59:06,522 [INFO] price_checker.py:254 - 入住日期: 18/11/2024
2024-11-12 13:59:11,627 [INFO] price_checker.py:270 - 开始检查日期 18/11/2024 的最小入住要求...
2024-11-12 13:59:11,630 [INFO] price_checker.py:151 - 初始元素HTML: <td class="_sl5yz7r" role="button" aria-disabled="false" aria-label="18, Monday, November 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 42px; height: 42px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-18/11/2024" data-is-day-blocked="false" style="width: 42px; height: 42px;">18</div></td>
2024-11-12 13:59:11,640 [INFO] price_checker.py:157 - 找到日期: 18/11/2024
2024-11-12 13:59:11,641 [INFO] price_checker.py:163 - 点击日期元素...
2024-11-12 13:59:12,762 [INFO] price_checker.py:173 - 移动到日期元素...
2024-11-12 13:59:14,051 [INFO] price_checker.py:209 - 更新后元素HTML: <td class="_5v1jabe" role="button" aria-disabled="true" aria-label="18, Monday, November 2024. Selected check-in date There is a 2 night minimum stay requirement. " tabindex="-1" style="width: 42px; height: 42px;"><div class="_h84ua7"><div class="_d82cel" style="transform: translateY(-100%) translateY(-12px);"><div class="_1mslrl4"><div class="_u7azij">2-night minimum</div><svg role="presentation" focusable="false" class="_8c7xtno" style="left: 10px;"><path class="_1s2t3cl" d="M0,0 20,0 10,10z"></path><path class="_c3dsty" d="M0,0 10,10 20,0"></path></svg></div></div><div class="_17slido1 notranslate" data-testid="calendar-day-18/11/2024" data-is-day-blocked="true" style="width: 42px; height: 42px;">18</div></div></td>
2024-11-12 13:59:14,060 [INFO] price_checker.py:216 - 更新后元素属性:
2024-11-12 13:59:14,060 [INFO] price_checker.py:217 - - aria-label: 18, Monday, November 2024. Selected check-in date There is a 2 night minimum stay requirement. 
2024-11-12 13:59:14,060 [INFO] price_checker.py:218 - - aria-disabled: true
2024-11-12 13:59:14,060 [INFO] price_checker.py:219 - - data-is-day-blocked: None
2024-11-12 13:59:14,060 [INFO] price_checker.py:234 - ✓ 成功找到最小入住要求: 2晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-12 13:59:14,060 [INFO] price_checker.py:272 - 最终使用的最小入住天数: 2晚 (自动检测)
2024-11-12 13:59:14,060 [INFO] price_checker.py:295 - 访问URL: https://www.airbnb.co.nz/rooms/43435162?check_in=2024-11-18&check_out=2024-11-20&adults=3&children=0&infants=0
2024-11-12 13:59:19,156 [INFO] price_checker.py:302 - 检查页面状态...
2024-11-12 13:59:19,159 [INFO] price_checker.py:304 - 页面状态: complete
2024-11-12 13:59:21,167 [INFO] price_checker.py:317 - 价格容器已加载并可见
2024-11-12 13:59:21,167 [INFO] price_checker.py:326 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-12 13:59:21,173 [INFO] price_checker.py:331 - 找到 0 个价格元素
2024-11-12 13:59:21,173 [INFO] price_checker.py:326 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-12 13:59:21,178 [INFO] price_checker.py:331 - 找到 0 个价格元素
2024-11-12 13:59:21,178 [INFO] price_checker.py:326 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-12 13:59:21,182 [INFO] price_checker.py:331 - 找到 1 个价格元素
2024-11-12 13:59:21,194 [INFO] price_checker.py:336 - 找到可见价格元素: $305 NZD 
night
$305 NZD per night
2024-11-12 13:59:21,206 [INFO] price_checker.py:349 - 找到每晚价格元素: $305 NZD 
night
$305 NZD per night
2024-11-12 13:59:21,206 [INFO] price_checker.py:355 - 成功解析折扣价格: $305 NZD
2024-11-12 13:59:21,206 [INFO] price_checker.py:368 - 开始获取价格详情...
2024-11-12 13:59:21,211 [INFO] price_checker.py:375 - 价格详情容器已加载
2024-11-12 13:59:21,216 [INFO] price_checker.py:387 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-12 13:59:21,222 [INFO] price_checker.py:396 - 找到 1 个匹配元素
2024-11-12 13:59:21,229 [INFO] price_checker.py:401 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-12 13:59:21,229 [INFO] price_checker.py:406 - ✓ 成功设置清洁费: $90 NZD
2024-11-12 13:59:21,229 [INFO] price_checker.py:387 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-12 13:59:26,296 [WARNING] price_checker.py:421 - 等待选择器超时: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-12 13:59:26,296 [INFO] price_checker.py:387 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-12 13:59:31,351 [WARNING] price_checker.py:421 - 等待选择器超时: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-12 13:59:31,351 [INFO] price_checker.py:387 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Special offer']]//span[contains(@class, '_1rc8xn5')]
2024-11-12 13:59:36,406 [WARNING] price_checker.py:421 - 等待选择器超时: //div[contains(@class, '_14omvfj')][.//div[text()='Special offer']]//span[contains(@class, '_1rc8xn5')]
2024-11-12 13:59:36,406 [INFO] price_checker.py:387 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-12 13:59:36,414 [INFO] price_checker.py:396 - 找到 1 个匹配元素
2024-11-12 13:59:36,419 [INFO] price_checker.py:401 - 找到价格元素: $700 NZD (HTML: <span class="_j1kt73">$700&nbsp;NZD</span>)
2024-11-12 13:59:36,419 [INFO] price_checker.py:415 - ✓ 成功设置总价: $700 NZD
2024-11-12 13:59:36,419 [INFO] price_checker.py:428 - 验证价格信息完整性:
2024-11-12 13:59:36,419 [INFO] price_checker.py:432 - ✓ cleaning_fee: $90 NZD
2024-11-12 13:59:36,419 [WARNING] price_checker.py:434 - ✗ service_fee 未获取到
2024-11-12 13:59:36,420 [WARNING] price_checker.py:434 - ✗ taxes 未获取到
2024-11-12 13:59:36,420 [INFO] price_checker.py:432 - ✓ total: $700 NZD
2024-11-12 13:59:36,420 [INFO] price_checker.py:437 - 终价格信息获取结果:
2024-11-12 13:59:36,420 [INFO] price_checker.py:439 - check_in: 18/11/2024
2024-11-12 13:59:36,420 [INFO] price_checker.py:439 - check_out: 20/11/2024
2024-11-12 13:59:36,420 [INFO] price_checker.py:439 - min_nights: 2
2024-11-12 13:59:36,420 [INFO] price_checker.py:439 - guests: 3
2024-11-12 13:59:36,420 [INFO] price_checker.py:439 - nightly_price: $305 NZD
2024-11-12 13:59:36,420 [INFO] price_checker.py:439 - cleaning_fee: $90 NZD
2024-11-12 13:59:36,420 [INFO] price_checker.py:439 - service_fee: None
2024-11-12 13:59:36,420 [INFO] price_checker.py:439 - taxes: None
2024-11-12 13:59:36,420 [INFO] price_checker.py:439 - total: $700 NZD
2024-11-12 13:59:36,420 [INFO] price_checker.py:541 - ✓ 成功获取 18/11/2024 的价格信息
2024-11-12 13:59:36,420 [INFO] price_checker.py:547 - 根据最小入住要求(2晚)跳过接下来的 1 天
2024-11-12 13:59:36,420 [INFO] price_checker.py:535 - [3/39] 处理日期: 19/11/2024
2024-11-12 13:59:36,421 [INFO] price_checker.py:253 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/43435162
2024-11-12 13:59:36,421 [INFO] price_checker.py:254 - 入住日期: 19/11/2024
2024-11-12 13:59:41,530 [INFO] price_checker.py:270 - 开始检查日期 19/11/2024 的最小入住要求...
2024-11-12 13:59:41,535 [INFO] price_checker.py:151 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="19, Tuesday, November 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 42px; height: 42px;"><div class="_697u988 notranslate" data-testid="calendar-day-19/11/2024" data-is-day-blocked="false" style="width: 42px; height: 42px;">19</div></td>
2024-11-12 13:59:41,546 [INFO] price_checker.py:157 - 找到日期: 19/11/2024
2024-11-12 13:59:41,546 [INFO] price_checker.py:163 - 点击日期元素...
2024-11-12 13:59:42,715 [INFO] price_checker.py:173 - 移动到日期元素...
2024-11-12 13:59:43,996 [INFO] price_checker.py:209 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="19, Tuesday, November 2024. Selected check-in date There is a 2 night minimum stay requirement. " tabindex="-1" style="width: 42px; height: 42px;"><div class="_h84ua7"><div class="_d82cel" style="transform: translateY(-100%) translateY(-12px);"><div class="_1mslrl4"><div class="_u7azij">2-night minimum</div><svg role="presentation" focusable="false" class="_8c7xtno" style="left: 10px;"><path class="_1s2t3cl" d="M0,0 20,0 10,10z"></path><path class="_c3dsty" d="M0,0 10,10 20,0"></path></svg></div></div><div class="_194zlzjz notranslate" data-testid="calendar-day-19/11/2024" data-is-day-blocked="true" style="width: 42px; height: 42px;">19</div></div></td>
2024-11-12 13:59:44,004 [INFO] price_checker.py:216 - 更新后元素属性:
2024-11-12 13:59:44,004 [INFO] price_checker.py:217 - - aria-label: 19, Tuesday, November 2024. Selected check-in date There is a 2 night minimum stay requirement. 
2024-11-12 13:59:44,004 [INFO] price_checker.py:218 - - aria-disabled: true
2024-11-12 13:59:44,005 [INFO] price_checker.py:219 - - data-is-day-blocked: None
2024-11-12 13:59:44,005 [INFO] price_checker.py:234 - ✓ 成功找到最小入住要求: 2晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-12 13:59:44,005 [INFO] price_checker.py:272 - 最终使用的最小入住天数: 2晚 (自动检测)
2024-11-12 13:59:44,005 [INFO] price_checker.py:295 - 访问URL: https://www.airbnb.co.nz/rooms/43435162?check_in=2024-11-19&check_out=2024-11-21&adults=3&children=0&infants=0
2024-11-12 13:59:49,103 [INFO] price_checker.py:302 - 检查页面状态...
2024-11-12 13:59:49,106 [INFO] price_checker.py:304 - 页面状态: complete
2024-11-12 13:59:51,114 [INFO] price_checker.py:317 - 价格容器已加载并可见
2024-11-12 13:59:51,114 [INFO] price_checker.py:326 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-12 13:59:51,123 [INFO] price_checker.py:331 - 找到 0 个价格元素
2024-11-12 13:59:51,123 [INFO] price_checker.py:326 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-12 13:59:51,129 [INFO] price_checker.py:331 - 找到 0 个价格元素
2024-11-12 13:59:51,129 [INFO] price_checker.py:326 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-12 13:59:51,136 [INFO] price_checker.py:331 - 找到 1 个价格元素
2024-11-12 13:59:51,148 [INFO] price_checker.py:336 - 找到可见价格元素: $305 NZD 
night
$305 NZD per night
2024-11-12 13:59:51,154 [INFO] price_checker.py:349 - 找到每晚价格元素: $305 NZD 
night
$305 NZD per night
2024-11-12 13:59:51,155 [INFO] price_checker.py:355 - 成功解析折扣价格: $305 NZD
2024-11-12 13:59:51,155 [INFO] price_checker.py:368 - 开始获取价格详情...
2024-11-12 13:59:51,160 [INFO] price_checker.py:375 - 价格详情容器已加载
2024-11-12 13:59:51,164 [INFO] price_checker.py:387 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-12 13:59:51,171 [INFO] price_checker.py:396 - 找到 1 个匹配元素
2024-11-12 13:59:51,176 [INFO] price_checker.py:401 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-12 13:59:51,177 [INFO] price_checker.py:406 - ✓ 成功设置清洁费: $90 NZD
2024-11-12 13:59:51,177 [INFO] price_checker.py:387 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-12 13:59:56,230 [WARNING] price_checker.py:421 - 等待选择器超时: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-12 13:59:56,230 [INFO] price_checker.py:387 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-12 14:00:16,348 [INFO] advanced_analyzer.py:184 - 浏览器已关闭
2024-11-12 14:00:16,348 [INFO] advanced_analyzer.py:290 - === 程序执行完成 ===
