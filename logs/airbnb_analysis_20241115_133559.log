2024-11-15 13:35:59,499 [INFO] advanced_analyzer.py:391 - === 开始Airbnb数据收集程序 ===
2024-11-15 13:35:59,674 [INFO] advanced_analyzer.py:100 - 成功读取 6 个房间ID
2024-11-15 13:35:59,674 [INFO] advanced_analyzer.py:402 - 生成 6 个URL
2024-11-15 13:35:59,675 [INFO] advanced_analyzer.py:406 - 创建数据目录: data/airbnb_data_20241115_133559
2024-11-15 13:35:59,675 [INFO] advanced_analyzer.py:232 - === 开始批量分析房源 ===
2024-11-15 13:35:59,675 [INFO] advanced_analyzer.py:241 - 设置并发线程数: 3
2024-11-15 13:35:59,703 [INFO] bit_browser_manager.py:38 - 活动浏览器响应: {
  "success": true,
  "data": {
    "fa23ba7669ce4064b2fafb611daa22a3": 23592,
    "cf51683770d94ff3931408fce73c90f3": 38604,
    "cd272b4525344db49309c826255465b8": 26068
  }
}
2024-11-15 13:36:03,517 [INFO] bit_browser_manager.py:63 - 找到 3 个活动浏览器
2024-11-15 13:36:03,517 [INFO] advanced_analyzer.py:257 - 
=== 可用的浏览器实例 ===
2024-11-15 13:36:03,517 [INFO] advanced_analyzer.py:259 - ID: fa23ba7669ce4064b2fafb611daa22a3
2024-11-15 13:36:03,517 [INFO] advanced_analyzer.py:260 - 名称: _1
2024-11-15 13:36:03,517 [INFO] advanced_analyzer.py:261 - 备注: 
2024-11-15 13:36:03,517 [INFO] advanced_analyzer.py:262 - PID: 23592

2024-11-15 13:36:03,517 [INFO] advanced_analyzer.py:259 - ID: cf51683770d94ff3931408fce73c90f3
2024-11-15 13:36:03,517 [INFO] advanced_analyzer.py:260 - 名称: 
2024-11-15 13:36:03,518 [INFO] advanced_analyzer.py:261 - 备注: 
2024-11-15 13:36:03,518 [INFO] advanced_analyzer.py:262 - PID: 38604

2024-11-15 13:36:03,518 [INFO] advanced_analyzer.py:259 - ID: cd272b4525344db49309c826255465b8
2024-11-15 13:36:03,518 [INFO] advanced_analyzer.py:260 - 名称: _2
2024-11-15 13:36:03,518 [INFO] advanced_analyzer.py:261 - 备注: 
2024-11-15 13:36:03,518 [INFO] advanced_analyzer.py:262 - PID: 26068

2024-11-15 13:36:03,518 [INFO] advanced_analyzer.py:275 - 线程 41216 使用浏览器 fa23ba7669ce4064b2fafb611daa22a3
2024-11-15 13:36:03,518 [INFO] advanced_analyzer.py:275 - 线程 36928 使用浏览器 cf51683770d94ff3931408fce73c90f3
2024-11-15 13:36:03,519 [INFO] advanced_analyzer.py:275 - 线程 7212 使用浏览器 cd272b4525344db49309c826255465b8
2024-11-15 13:36:04,659 [INFO] bit_browser_manager.py:187 - 正在导航到: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 13:36:04,660 [INFO] bit_browser_manager.py:187 - 正在导航到: https://www.airbnb.co.nz/rooms/43435162
2024-11-15 13:36:04,660 [INFO] bit_browser_manager.py:187 - 正在导航到: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-15 13:36:04,808 [INFO] bit_browser_manager.py:195 - 成功加载页面: https://www.airbnb.co.nz/rooms/43435162
2024-11-15 13:36:04,808 [INFO] advanced_analyzer.py:197 - 
开始分析房源: https://www.airbnb.co.nz/rooms/43435162
2024-11-15 13:36:04,808 [INFO] airbnb_calendar_checker.py:70 - 开始检查房源日历: https://www.airbnb.co.nz/rooms/43435162
2024-11-15 13:36:04,839 [INFO] bit_browser_manager.py:195 - 成功加载页面: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 13:36:04,840 [INFO] advanced_analyzer.py:197 - 
开始分析房源: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 13:36:04,840 [INFO] airbnb_calendar_checker.py:70 - 开始检查房源日历: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 13:36:04,877 [INFO] bit_browser_manager.py:195 - 成功加载页面: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-15 13:36:04,877 [INFO] advanced_analyzer.py:197 - 
开始分析房源: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-15 13:36:04,877 [INFO] airbnb_calendar_checker.py:70 - 开始检查房源日历: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-15 13:36:04,932 [INFO] airbnb_calendar_checker.py:75 - 页面加载中...
2024-11-15 13:36:04,983 [INFO] airbnb_calendar_checker.py:82 - 页面基本加载完成
2024-11-15 13:36:04,991 [INFO] airbnb_calendar_checker.py:75 - 页面加载中...
2024-11-15 13:36:04,995 [INFO] airbnb_calendar_checker.py:82 - 页面基本加载完成
2024-11-15 13:36:05,021 [INFO] airbnb_calendar_checker.py:75 - 页面加载中...
2024-11-15 13:36:05,023 [INFO] airbnb_calendar_checker.py:82 - 页面基本加载完成
2024-11-15 13:37:05,209 [INFO] airbnb_calendar_checker.py:120 - 找到日历按钮: //button[contains(@aria-label, 'Choose')]
2024-11-15 13:37:05,209 [INFO] airbnb_calendar_checker.py:120 - 找到日历按钮: //button[contains(@aria-label, 'Choose')]
2024-11-15 13:37:05,212 [INFO] airbnb_calendar_checker.py:134 - 已滚动到日历按钮位置
2024-11-15 13:37:05,213 [INFO] airbnb_calendar_checker.py:134 - 已滚动到日历按钮位置
2024-11-15 13:37:05,239 [INFO] airbnb_calendar_checker.py:120 - 找到日历按钮: //button[contains(@aria-label, 'Choose')]
2024-11-15 13:37:05,242 [INFO] airbnb_calendar_checker.py:134 - 已滚动到日历按钮位置
2024-11-15 13:37:06,213 [INFO] airbnb_calendar_checker.py:139 - 日历按钮已准备就绪
2024-11-15 13:37:06,214 [INFO] airbnb_calendar_checker.py:139 - 日历按钮已准备就绪
2024-11-15 13:37:06,242 [INFO] airbnb_calendar_checker.py:139 - 日历按钮已准备就绪
2024-11-15 13:37:06,294 [INFO] airbnb_calendar_checker.py:148 - 直接点击日历按钮成功
2024-11-15 13:37:06,354 [INFO] airbnb_calendar_checker.py:148 - 直接点击日历按钮成功
2024-11-15 13:37:06,388 [INFO] airbnb_calendar_checker.py:148 - 直接点击日历按钮成功
2024-11-15 13:37:26,384 [INFO] airbnb_calendar_checker.py:184 - 日历内容已加载: //div[contains(@data-testid, 'calendar')]
2024-11-15 13:37:26,396 [INFO] airbnb_calendar_checker.py:199 - 找到 123 个日期单元格
2024-11-15 13:37:26,502 [INFO] airbnb_calendar_checker.py:211 - 找到 123 个日期单元格
2024-11-15 13:37:26,504 [INFO] airbnb_calendar_checker.py:256 - 原始单元格数量: 123
2024-11-15 13:37:26,504 [INFO] airbnb_calendar_checker.py:257 - 去重后数据条数: 123
2024-11-15 13:37:26,504 [INFO] airbnb_calendar_checker.py:258 - 处理的唯一日期数: 123
2024-11-15 13:37:26,504 [INFO] airbnb_calendar_checker.py:262 - 收集到 123 条有效日历数据
2024-11-15 13:37:26,504 [INFO] airbnb_calendar_checker.py:22 - 开始导出数据到Excel...
2024-11-15 13:37:26,504 [INFO] airbnb_calendar_checker.py:32 - 处理房源ID: 43435162
2024-11-15 13:37:26,504 [INFO] airbnb_calendar_checker.py:37 - 将创建文件: data/airbnb_calendar_43435162_20241115_133726.xlsx
2024-11-15 13:37:26,505 [INFO] airbnb_calendar_checker.py:41 - 创建DataFrame，共 123 行数据
2024-11-15 13:37:26,513 [INFO] airbnb_calendar_checker.py:184 - 日历内容已加载: //div[contains(@data-testid, 'calendar')]
2024-11-15 13:37:26,526 [INFO] airbnb_calendar_checker.py:199 - 找到 123 个日期单元格
2024-11-15 13:37:26,529 [INFO] airbnb_calendar_checker.py:184 - 日历内容已加载: //div[contains(@data-testid, 'calendar')]
2024-11-15 13:37:26,533 [INFO] airbnb_calendar_checker.py:52 - 数据已成功导出到Excel文件: data/airbnb_calendar_43435162_20241115_133726.xlsx
2024-11-15 13:37:26,533 [INFO] airbnb_calendar_checker.py:57 - 文件创建成功，大小: 9.09 KB
2024-11-15 13:37:26,534 [INFO] airbnb_calendar_checker.py:265 - 日历数据已成功导出到: data/airbnb_calendar_43435162_20241115_133726.xlsx
2024-11-15 13:37:26,534 [INFO] advanced_analyzer.py:206 - 成功获取日历数据: 123 条记录
2024-11-15 13:37:26,534 [INFO] price_checker.py:537 - 开始检查房源价格: https://www.airbnb.co.nz/rooms/43435162
2024-11-15 13:37:26,534 [INFO] price_checker.py:530 - 找到 39 个可预订日期
2024-11-15 13:37:26,534 [INFO] price_checker.py:553 - [1/39] 处理日期: 17/11/2024
2024-11-15 13:37:26,534 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/43435162
2024-11-15 13:37:26,534 [INFO] price_checker.py:255 - 入住日期: 17/11/2024
2024-11-15 13:37:26,544 [INFO] airbnb_calendar_checker.py:199 - 找到 123 个日期单元格
2024-11-15 13:37:26,632 [INFO] airbnb_calendar_checker.py:211 - 找到 123 个日期单元格
2024-11-15 13:37:26,656 [INFO] airbnb_calendar_checker.py:256 - 原始单元格数量: 123
2024-11-15 13:37:26,685 [INFO] airbnb_calendar_checker.py:257 - 去重后数据条数: 123
2024-11-15 13:37:26,707 [INFO] airbnb_calendar_checker.py:211 - 找到 123 个日期单元格
2024-11-15 13:37:26,708 [INFO] airbnb_calendar_checker.py:258 - 处理的唯一日期数: 123
2024-11-15 13:37:26,709 [INFO] airbnb_calendar_checker.py:256 - 原始单元格数量: 123
2024-11-15 13:37:26,709 [INFO] airbnb_calendar_checker.py:262 - 收集到 123 条有效日历数据
2024-11-15 13:37:26,709 [INFO] airbnb_calendar_checker.py:257 - 去重后数据条数: 123
2024-11-15 13:37:26,709 [INFO] airbnb_calendar_checker.py:22 - 开始导出数据到Excel...
2024-11-15 13:37:26,709 [INFO] airbnb_calendar_checker.py:258 - 处理的唯一日期数: 123
2024-11-15 13:37:26,709 [INFO] airbnb_calendar_checker.py:262 - 收集到 123 条有效日历数据
2024-11-15 13:37:26,709 [INFO] airbnb_calendar_checker.py:32 - 处理房源ID: 830193102361409290
2024-11-15 13:37:26,709 [INFO] airbnb_calendar_checker.py:22 - 开始导出数据到Excel...
2024-11-15 13:37:26,709 [INFO] airbnb_calendar_checker.py:37 - 将创建文件: data/airbnb_calendar_830193102361409290_20241115_133726.xlsx
2024-11-15 13:37:26,710 [INFO] airbnb_calendar_checker.py:32 - 处理房源ID: 837352260137971048
2024-11-15 13:37:26,710 [INFO] airbnb_calendar_checker.py:41 - 创建DataFrame，共 123 行数据
2024-11-15 13:37:26,710 [INFO] airbnb_calendar_checker.py:37 - 将创建文件: data/airbnb_calendar_837352260137971048_20241115_133726.xlsx
2024-11-15 13:37:26,711 [INFO] airbnb_calendar_checker.py:41 - 创建DataFrame，共 123 行数据
2024-11-15 13:37:26,746 [INFO] airbnb_calendar_checker.py:52 - 数据已成功导出到Excel文件: data/airbnb_calendar_830193102361409290_20241115_133726.xlsx
2024-11-15 13:37:26,746 [INFO] airbnb_calendar_checker.py:52 - 数据已成功导出到Excel文件: data/airbnb_calendar_837352260137971048_20241115_133726.xlsx
2024-11-15 13:37:26,746 [INFO] airbnb_calendar_checker.py:57 - 文件创建成功，大小: 8.84 KB
2024-11-15 13:37:26,746 [INFO] airbnb_calendar_checker.py:57 - 文件创建成功，大小: 9.12 KB
2024-11-15 13:37:26,746 [INFO] airbnb_calendar_checker.py:265 - 日历数据已成功导出到: data/airbnb_calendar_830193102361409290_20241115_133726.xlsx
2024-11-15 13:37:26,746 [INFO] airbnb_calendar_checker.py:265 - 日历数据已成功导出到: data/airbnb_calendar_837352260137971048_20241115_133726.xlsx
2024-11-15 13:37:26,747 [INFO] advanced_analyzer.py:206 - 成功获取日历数据: 123 条记录
2024-11-15 13:37:26,747 [INFO] advanced_analyzer.py:206 - 成功获取日历数据: 123 条记录
2024-11-15 13:37:26,747 [INFO] price_checker.py:537 - 开始检查房源价格: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 13:37:26,747 [INFO] price_checker.py:537 - 开始检查房源价格: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-15 13:37:26,747 [INFO] price_checker.py:530 - 找到 72 个可预订日期
2024-11-15 13:37:26,747 [INFO] price_checker.py:530 - 找到 37 个可预订日期
2024-11-15 13:37:26,747 [INFO] price_checker.py:553 - [1/72] 处理日期: 18/11/2024
2024-11-15 13:37:26,747 [INFO] price_checker.py:553 - [1/37] 处理日期: 18/11/2024
2024-11-15 13:37:26,747 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 13:37:26,747 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-15 13:37:26,747 [INFO] price_checker.py:255 - 入住日期: 18/11/2024
2024-11-15 13:37:26,747 [INFO] price_checker.py:255 - 入住日期: 18/11/2024
2024-11-15 13:37:31,709 [INFO] price_checker.py:271 - 开始检查日期 17/11/2024 的最小入住要求...
2024-11-15 13:37:31,713 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_1mv3p4vt" role="button" aria-disabled="false" aria-label="17, Sunday, November 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="0" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-17/11/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">17</div></td>
2024-11-15 13:37:31,723 [INFO] price_checker.py:158 - 找到日期: 17/11/2024
2024-11-15 13:37:31,723 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:37:31,876 [INFO] price_checker.py:271 - 开始检查日期 18/11/2024 的最小入住要求...
2024-11-15 13:37:31,880 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_sl5yz7r" role="button" aria-disabled="false" aria-label="18, Monday, November 2024. Available Select start date " tabindex="0" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-18/11/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">18</div></td>
2024-11-15 13:37:31,889 [INFO] price_checker.py:158 - 找到日期: 18/11/2024
2024-11-15 13:37:31,890 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:37:31,903 [INFO] price_checker.py:271 - 开始检查日期 18/11/2024 的最小入住要求...
2024-11-15 13:37:31,907 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_sl5yz7r" role="button" aria-disabled="false" aria-label="18, Monday, November 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="0" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-18/11/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">18</div></td>
2024-11-15 13:37:31,917 [INFO] price_checker.py:158 - 找到日期: 18/11/2024
2024-11-15 13:37:31,918 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:37:32,851 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:37:33,035 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:37:33,044 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:37:34,160 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_ubf03zg" role="button" aria-disabled="true" aria-label="17, Sunday, November 2024. Selected check-in date There is a 2 night minimum stay requirement. " tabindex="0" style="width: 41px; height: 41px;"><div class="_h84ua7"><div class="_d82cel" style="transform: translate(-100%, -100%) translate(41px, -12px);"><div class="_1mslrl4"><div class="_u7azij">2-night minimum</div><svg role="presentation" focusable="false" class="_8c7xtno" style="right: 9.5px;"><path class="_1s2t3cl" d="M0,0 20,0 10,10z"></path><path class="_c3dsty" d="M0,0 10,10 20,0"></path></svg></div></div><div class="_17slido1 notranslate" data-testid="calendar-day-17/11/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">17</div></div></td>
2024-11-15 13:37:34,169 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:37:34,169 [INFO] price_checker.py:218 - - aria-label: 17, Sunday, November 2024. Selected check-in date There is a 2 night minimum stay requirement. 
2024-11-15 13:37:34,169 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:37:34,169 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:37:34,169 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 2晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:37:34,169 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 2晚 (自动检测)
2024-11-15 13:37:34,169 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/43435162?check_in=2024-11-17&check_out=2024-11-19&adults=3&children=0&infants=0
2024-11-15 13:37:34,331 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_5v1jabe" role="button" aria-disabled="true" aria-label="18, Monday, November 2024. Selected check-in date There is a 2 night minimum stay requirement. " tabindex="0" style="width: 41px; height: 41px;"><div class="_h84ua7"><div class="_d82cel" style="transform: translateY(-100%) translateY(-12px);"><div class="_1mslrl4"><div class="_u7azij">2-night minimum</div><svg role="presentation" focusable="false" class="_8c7xtno" style="left: 9.5px;"><path class="_1s2t3cl" d="M0,0 20,0 10,10z"></path><path class="_c3dsty" d="M0,0 10,10 20,0"></path></svg></div></div><div class="_17slido1 notranslate" data-testid="calendar-day-18/11/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">18</div></div></td>
2024-11-15 13:37:34,332 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_5v1jabe" role="button" aria-disabled="true" aria-label="18, Monday, November 2024. Selected check-in date, 1 night minimum stay " tabindex="0" style="width: 41px; height: 41px;"><div class="_1qis3zbj notranslate" data-testid="calendar-day-18/11/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">18</div></td>
2024-11-15 13:37:34,342 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:37:34,342 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:37:34,342 [INFO] price_checker.py:218 - - aria-label: 18, Monday, November 2024. Selected check-in date There is a 2 night minimum stay requirement. 
2024-11-15 13:37:34,343 [INFO] price_checker.py:218 - - aria-label: 18, Monday, November 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 13:37:34,343 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:37:34,343 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:37:34,343 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:37:34,343 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:37:34,343 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 2晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:37:34,343 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:37:34,343 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 2晚 (自动检测)
2024-11-15 13:37:34,343 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 13:37:34,343 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/837352260137971048?check_in=2024-11-18&check_out=2024-11-20&adults=3&children=0&infants=0
2024-11-15 13:37:34,343 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2024-11-18&check_out=2024-11-19&adults=3&children=0&infants=0
2024-11-15 13:37:39,297 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:37:39,301 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:37:39,455 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:37:39,457 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:37:39,458 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:37:39,460 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:37:41,315 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:37:41,315 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:37:41,472 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:37:41,472 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:37:41,473 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:37:41,473 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:37:51,321 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:37:51,321 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:37:51,491 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:37:51,491 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:37:51,492 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:37:51,492 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:38:01,359 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:38:01,359 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:38:01,365 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:38:01,381 [INFO] price_checker.py:337 - 找到可见价格元素: $305 NZD 
night
$305 NZD per night
2024-11-15 13:38:01,387 [INFO] price_checker.py:350 - 找到每晚价格元素: $305 NZD 
night
$305 NZD per night
2024-11-15 13:38:01,388 [INFO] price_checker.py:356 - 成功解析折扣价格: $305 NZD
2024-11-15 13:38:01,388 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:38:01,394 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 13:38:01,528 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:38:01,528 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:38:01,529 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:38:01,529 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:38:01,535 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:38:01,535 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:38:01,551 [INFO] price_checker.py:337 - 找到可见价格元素: $155 NZD 
night
$155 NZD per night
2024-11-15 13:38:01,551 [INFO] price_checker.py:337 - 找到可见价格元素: $324 NZD 
$283 NZD 
night
$283 NZD per night, originally $324 NZD
2024-11-15 13:38:01,558 [INFO] price_checker.py:350 - 找到每晚价格元素: $324 NZD 
$283 NZD 
night
$283 NZD per night, originally $324 NZD
2024-11-15 13:38:01,558 [INFO] price_checker.py:356 - 成功解析折扣价格: $283 NZD
2024-11-15 13:38:01,559 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:38:01,560 [INFO] price_checker.py:350 - 找到每晚价格元素: $155 NZD 
night
$155 NZD per night
2024-11-15 13:38:01,560 [INFO] price_checker.py:356 - 成功解析折扣价格: $155 NZD
2024-11-15 13:38:01,560 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:38:01,564 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 13:38:01,898 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:38:01,905 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:38:01,916 [INFO] price_checker.py:403 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-15 13:38:01,916 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $90 NZD
2024-11-15 13:38:01,916 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:38:01,924 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:38:01,934 [INFO] price_checker.py:403 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-15 13:38:01,934 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $90 NZD
2024-11-15 13:38:01,934 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:38:02,067 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:38:02,075 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:38:02,082 [INFO] price_checker.py:403 - 找到价格元素: $59 NZD (HTML: <span class="_1k4xcdh">$59&nbsp;NZD</span>)
2024-11-15 13:38:02,082 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $59 NZD
2024-11-15 13:38:02,082 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:38:02,091 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:38:02,098 [INFO] price_checker.py:403 - 找到价格元素: $59 NZD (HTML: <span class="_1k4xcdh">$59&nbsp;NZD</span>)
2024-11-15 13:38:02,098 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $59 NZD
2024-11-15 13:38:02,098 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:38:02,110 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:38:02,116 [INFO] price_checker.py:403 - 找到价格元素: $87 NZD (HTML: <span class="_1k4xcdh">$87&nbsp;NZD</span>)
2024-11-15 13:38:02,116 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $87 NZD
2024-11-15 13:38:02,116 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:38:02,123 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:38:02,128 [INFO] price_checker.py:403 - 找到价格元素: $87 NZD (HTML: <span class="_1k4xcdh">$87&nbsp;NZD</span>)
2024-11-15 13:38:02,129 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $87 NZD
2024-11-15 13:38:02,129 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:38:02,135 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:38:02,141 [INFO] price_checker.py:403 - 找到价格元素: $81 NZD (HTML: <span class="_1k4xcdh">$81&nbsp;NZD</span>)
2024-11-15 13:38:02,141 [INFO] price_checker.py:416 - ✓ 成功设置税费: $81 NZD
2024-11-15 13:38:02,141 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:38:11,598 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 13:38:11,598 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:38:11,605 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:38:11,612 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 13:38:11,612 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 13:38:11,612 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:38:11,618 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:38:11,623 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 13:38:11,623 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 13:38:11,623 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:38:11,631 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:38:11,636 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 13:38:11,636 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 13:38:11,636 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:38:11,643 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:38:11,648 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 13:38:11,648 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 13:38:11,648 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:38:11,654 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:38:11,660 [INFO] price_checker.py:403 - 找到价格元素: $26 NZD (HTML: <span class="_1k4xcdh">$26&nbsp;NZD</span>)
2024-11-15 13:38:11,660 [INFO] price_checker.py:416 - ✓ 成功设置税费: $26 NZD
2024-11-15 13:38:11,660 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:38:11,976 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:38:12,193 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:38:12,200 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:38:12,205 [INFO] price_checker.py:403 - 找到价格元素: $705 NZD (HTML: <span class="_j1kt73">$705&nbsp;NZD</span>)
2024-11-15 13:38:12,205 [INFO] price_checker.py:420 - ✓ 成功设置总价: $705 NZD
2024-11-15 13:38:12,205 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:38:12,212 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:38:12,217 [INFO] price_checker.py:403 - 找到价格元素: $705 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$705&nbsp;NZD</span></span>)
2024-11-15 13:38:12,217 [INFO] price_checker.py:420 - ✓ 成功设置总价: $705 NZD
2024-11-15 13:38:12,222 [INFO] price_checker.py:403 - 找到价格元素: $705 NZD (HTML: <span class="_j1kt73">$705&nbsp;NZD</span>)
2024-11-15 13:38:12,222 [INFO] price_checker.py:420 - ✓ 成功设置总价: $705 NZD
2024-11-15 13:38:12,228 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:38:12,228 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:38:12,228 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:38:12,228 [INFO] price_checker.py:450 - ✓ cleaning_fee: $59 NZD
2024-11-15 13:38:12,228 [INFO] price_checker.py:450 - ✓ service_fee: $87 NZD
2024-11-15 13:38:12,228 [INFO] price_checker.py:450 - ✓ taxes: $81 NZD
2024-11-15 13:38:12,228 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:38:12,228 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:38:12,228 [INFO] price_checker.py:457 - check_in: 18/11/2024
2024-11-15 13:38:12,229 [INFO] price_checker.py:457 - check_out: 20/11/2024
2024-11-15 13:38:12,229 [INFO] price_checker.py:457 - min_nights: 2
2024-11-15 13:38:12,229 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:38:12,229 [INFO] price_checker.py:457 - nightly_price: $283 NZD
2024-11-15 13:38:12,229 [INFO] price_checker.py:457 - cleaning_fee: $59 NZD
2024-11-15 13:38:12,229 [INFO] price_checker.py:457 - service_fee: $87 NZD
2024-11-15 13:38:12,229 [INFO] price_checker.py:457 - taxes: $81 NZD
2024-11-15 13:38:12,229 [INFO] price_checker.py:457 - total: 
2024-11-15 13:38:12,229 [INFO] price_checker.py:559 - ✓ 成功获取 18/11/2024 的价格信息
2024-11-15 13:38:12,229 [INFO] price_checker.py:565 - 根据最小入住要求(2晚)跳过接下来的 1 天
2024-11-15 13:38:12,229 [INFO] price_checker.py:553 - [2/37] 处理日期: 27/11/2024
2024-11-15 13:38:12,229 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-15 13:38:12,230 [INFO] price_checker.py:255 - 入住日期: 27/11/2024
2024-11-15 13:38:17,347 [INFO] price_checker.py:271 - 开始检查日期 27/11/2024 的最小入住要求...
2024-11-15 13:38:17,349 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="27, Wednesday, November 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-27/11/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">27</div></td>
2024-11-15 13:38:17,358 [INFO] price_checker.py:158 - 找到日期: 27/11/2024
2024-11-15 13:38:17,359 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:38:18,491 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:38:19,786 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="27, Wednesday, November 2024. Selected check-in date There is a 3 night minimum stay requirement. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_h84ua7"><div class="_d82cel" style="transform: translate(-50%, -100%) translate(20.5px, -12px);"><div class="_1mslrl4"><div class="_u7azij">3-night minimum</div><svg role="presentation" focusable="false" class="_1mjga4hj"><path class="_1s2t3cl" d="M0,0 20,0 10,10z"></path><path class="_c3dsty" d="M0,0 10,10 20,0"></path></svg></div></div><div class="_194zlzjz notranslate" data-testid="calendar-day-27/11/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">27</div></div></td>
2024-11-15 13:38:19,795 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:38:19,795 [INFO] price_checker.py:218 - - aria-label: 27, Wednesday, November 2024. Selected check-in date There is a 3 night minimum stay requirement. 
2024-11-15 13:38:19,795 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:38:19,795 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:38:19,795 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 3晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:38:19,795 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 3晚 (自动检测)
2024-11-15 13:38:19,795 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/837352260137971048?check_in=2024-11-27&check_out=2024-11-30&adults=3&children=0&infants=0
2024-11-15 13:38:21,682 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:38:21,689 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:38:21,694 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span class="_j1kt73">$231&nbsp;NZD</span>)
2024-11-15 13:38:21,694 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 13:38:21,694 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:38:21,701 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:38:21,706 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$231&nbsp;NZD</span></span>)
2024-11-15 13:38:21,706 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 13:38:21,711 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span class="_j1kt73">$231&nbsp;NZD</span>)
2024-11-15 13:38:21,711 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 13:38:21,716 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:38:21,716 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:38:21,716 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:38:21,716 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 13:38:21,717 [INFO] price_checker.py:450 - ✓ service_fee: $29 NZD
2024-11-15 13:38:21,717 [INFO] price_checker.py:450 - ✓ taxes: $26 NZD
2024-11-15 13:38:21,717 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:38:21,717 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:38:21,717 [INFO] price_checker.py:457 - check_in: 18/11/2024
2024-11-15 13:38:21,717 [INFO] price_checker.py:457 - check_out: 19/11/2024
2024-11-15 13:38:21,717 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 13:38:21,717 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:38:21,717 [INFO] price_checker.py:457 - nightly_price: $155 NZD
2024-11-15 13:38:21,717 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 13:38:21,717 [INFO] price_checker.py:457 - service_fee: $29 NZD
2024-11-15 13:38:21,717 [INFO] price_checker.py:457 - taxes: $26 NZD
2024-11-15 13:38:21,717 [INFO] price_checker.py:457 - total: 
2024-11-15 13:38:21,717 [INFO] price_checker.py:559 - ✓ 成功获取 18/11/2024 的价格信息
2024-11-15 13:38:21,717 [INFO] price_checker.py:553 - [2/72] 处理日期: 19/11/2024
2024-11-15 13:38:21,718 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 13:38:21,718 [INFO] price_checker.py:255 - 入住日期: 19/11/2024
2024-11-15 13:38:21,996 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:38:24,891 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:38:24,894 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:38:26,841 [INFO] price_checker.py:271 - 开始检查日期 19/11/2024 的最小入住要求...
2024-11-15 13:38:26,849 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="19, Tuesday, November 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-19/11/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">19</div></td>
2024-11-15 13:38:26,863 [INFO] price_checker.py:158 - 找到日期: 19/11/2024
2024-11-15 13:38:26,863 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:38:26,905 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:38:26,905 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:38:27,993 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:38:29,281 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="19, Tuesday, November 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_ox7af8h notranslate" data-testid="calendar-day-19/11/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">19</div></td>
2024-11-15 13:38:29,292 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:38:29,292 [INFO] price_checker.py:218 - - aria-label: 19, Tuesday, November 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 13:38:29,292 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:38:29,292 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:38:29,292 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:38:29,292 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 13:38:29,293 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2024-11-19&check_out=2024-11-20&adults=3&children=0&infants=0
2024-11-15 13:38:32,008 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:38:34,385 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:38:34,389 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:38:36,400 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:38:36,400 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:38:36,951 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:38:36,952 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:38:42,047 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:38:42,054 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:38:42,061 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span class="_j1kt73">$700&nbsp;NZD</span>)
2024-11-15 13:38:42,061 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 13:38:42,061 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:38:42,068 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:38:42,073 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$700&nbsp;NZD</span></span>)
2024-11-15 13:38:42,073 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 13:38:42,079 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span class="_j1kt73">$700&nbsp;NZD</span>)
2024-11-15 13:38:42,079 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 13:38:42,083 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:38:42,083 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:38:42,084 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:38:42,084 [INFO] price_checker.py:450 - ✓ cleaning_fee: $90 NZD
2024-11-15 13:38:42,084 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 13:38:42,084 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 13:38:42,084 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:38:42,084 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:38:42,084 [INFO] price_checker.py:457 - check_in: 17/11/2024
2024-11-15 13:38:42,084 [INFO] price_checker.py:457 - check_out: 19/11/2024
2024-11-15 13:38:42,084 [INFO] price_checker.py:457 - min_nights: 2
2024-11-15 13:38:42,084 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:38:42,084 [INFO] price_checker.py:457 - nightly_price: $305 NZD
2024-11-15 13:38:42,084 [INFO] price_checker.py:457 - cleaning_fee: $90 NZD
2024-11-15 13:38:42,084 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 13:38:42,085 [INFO] price_checker.py:457 - taxes: None
2024-11-15 13:38:42,085 [INFO] price_checker.py:457 - total: 
2024-11-15 13:38:42,085 [INFO] price_checker.py:559 - ✓ 成功获取 17/11/2024 的价格信息
2024-11-15 13:38:42,085 [INFO] price_checker.py:565 - 根据最小入住要求(2晚)跳过接下来的 1 天
2024-11-15 13:38:42,085 [INFO] price_checker.py:553 - [2/39] 处理日期: 18/11/2024
2024-11-15 13:38:42,085 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/43435162
2024-11-15 13:38:42,085 [INFO] price_checker.py:255 - 入住日期: 18/11/2024
2024-11-15 13:38:46,432 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:38:46,432 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:38:46,976 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:38:46,976 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:38:46,982 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:38:46,999 [INFO] price_checker.py:337 - 找到可见价格元素: $339 NZD 
$312 NZD 
night
$312 NZD per night, originally $339 NZD
2024-11-15 13:38:47,005 [INFO] price_checker.py:350 - 找到每晚价格元素: $339 NZD 
$312 NZD 
night
$312 NZD per night, originally $339 NZD
2024-11-15 13:38:47,005 [INFO] price_checker.py:356 - 成功解析折扣价格: $312 NZD
2024-11-15 13:38:47,005 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:38:47,011 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 13:38:47,207 [INFO] price_checker.py:271 - 开始检查日期 18/11/2024 的最小入住要求...
2024-11-15 13:38:47,210 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_sl5yz7r" role="button" aria-disabled="false" aria-label="18, Monday, November 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-18/11/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">18</div></td>
2024-11-15 13:38:47,220 [INFO] price_checker.py:158 - 找到日期: 18/11/2024
2024-11-15 13:38:47,220 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:38:47,514 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:38:47,522 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:38:47,528 [INFO] price_checker.py:403 - 找到价格元素: $59 NZD (HTML: <span class="_1k4xcdh">$59&nbsp;NZD</span>)
2024-11-15 13:38:47,529 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $59 NZD
2024-11-15 13:38:47,529 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:38:47,535 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:38:47,540 [INFO] price_checker.py:403 - 找到价格元素: $59 NZD (HTML: <span class="_1k4xcdh">$59&nbsp;NZD</span>)
2024-11-15 13:38:47,540 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $59 NZD
2024-11-15 13:38:47,540 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:38:47,547 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:38:47,552 [INFO] price_checker.py:403 - 找到价格元素: $139 NZD (HTML: <span class="_1k4xcdh">$139&nbsp;NZD</span>)
2024-11-15 13:38:47,552 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $139 NZD
2024-11-15 13:38:47,553 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:38:47,559 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:38:47,564 [INFO] price_checker.py:403 - 找到价格元素: $139 NZD (HTML: <span class="_1k4xcdh">$139&nbsp;NZD</span>)
2024-11-15 13:38:47,564 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $139 NZD
2024-11-15 13:38:47,564 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:38:47,571 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:38:47,576 [INFO] price_checker.py:403 - 找到价格元素: $128 NZD (HTML: <span class="_1k4xcdh">$128&nbsp;NZD</span>)
2024-11-15 13:38:47,576 [INFO] price_checker.py:416 - ✓ 成功设置税费: $128 NZD
2024-11-15 13:38:47,576 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:38:48,341 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:38:49,641 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_5v1jabe" role="button" aria-disabled="true" aria-label="18, Monday, November 2024. Selected check-in date There is a 2 night minimum stay requirement. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_h84ua7"><div class="_d82cel" style="transform: translateY(-100%) translateY(-12px);"><div class="_1mslrl4"><div class="_u7azij">2-night minimum</div><svg role="presentation" focusable="false" class="_8c7xtno" style="left: 9.5px;"><path class="_1s2t3cl" d="M0,0 20,0 10,10z"></path><path class="_c3dsty" d="M0,0 10,10 20,0"></path></svg></div></div><div class="_17slido1 notranslate" data-testid="calendar-day-18/11/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">18</div></div></td>
2024-11-15 13:38:49,650 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:38:49,650 [INFO] price_checker.py:218 - - aria-label: 18, Monday, November 2024. Selected check-in date There is a 2 night minimum stay requirement. 
2024-11-15 13:38:49,650 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:38:49,650 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:38:49,650 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 2晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:38:49,650 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 2晚 (自动检测)
2024-11-15 13:38:49,651 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/43435162?check_in=2024-11-18&check_out=2024-11-20&adults=3&children=0&infants=0
2024-11-15 13:38:54,744 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:38:54,746 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:38:56,461 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:38:56,461 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:38:56,467 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:38:56,482 [INFO] price_checker.py:337 - 找到可见价格元素: $156 NZD 
night
$156 NZD per night
2024-11-15 13:38:56,489 [INFO] price_checker.py:350 - 找到每晚价格元素: $156 NZD 
night
$156 NZD per night
2024-11-15 13:38:56,489 [INFO] price_checker.py:356 - 成功解析折扣价格: $156 NZD
2024-11-15 13:38:56,489 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:38:56,758 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:38:56,758 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:38:57,614 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:38:57,621 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:38:57,626 [INFO] price_checker.py:403 - 找到价格元素: $1,123 NZD (HTML: <span class="_j1kt73">$1,123&nbsp;NZD</span>)
2024-11-15 13:38:57,626 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,123 NZD
2024-11-15 13:38:57,626 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:38:57,633 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:38:57,638 [INFO] price_checker.py:403 - 找到价格元素: $1,123 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$1,123&nbsp;NZD</span></span>)
2024-11-15 13:38:57,638 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,123 NZD
2024-11-15 13:38:57,643 [INFO] price_checker.py:403 - 找到价格元素: $1,123 NZD (HTML: <span class="_j1kt73">$1,123&nbsp;NZD</span>)
2024-11-15 13:38:57,643 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,123 NZD
2024-11-15 13:38:57,648 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:38:57,648 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:38:57,648 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:38:57,648 [INFO] price_checker.py:450 - ✓ cleaning_fee: $59 NZD
2024-11-15 13:38:57,648 [INFO] price_checker.py:450 - ✓ service_fee: $139 NZD
2024-11-15 13:38:57,648 [INFO] price_checker.py:450 - ✓ taxes: $128 NZD
2024-11-15 13:38:57,648 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:38:57,648 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:38:57,648 [INFO] price_checker.py:457 - check_in: 27/11/2024
2024-11-15 13:38:57,648 [INFO] price_checker.py:457 - check_out: 30/11/2024
2024-11-15 13:38:57,648 [INFO] price_checker.py:457 - min_nights: 3
2024-11-15 13:38:57,648 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:38:57,649 [INFO] price_checker.py:457 - nightly_price: $312 NZD
2024-11-15 13:38:57,649 [INFO] price_checker.py:457 - cleaning_fee: $59 NZD
2024-11-15 13:38:57,649 [INFO] price_checker.py:457 - service_fee: $139 NZD
2024-11-15 13:38:57,649 [INFO] price_checker.py:457 - taxes: $128 NZD
2024-11-15 13:38:57,649 [INFO] price_checker.py:457 - total: 
2024-11-15 13:38:57,649 [INFO] price_checker.py:559 - ✓ 成功获取 27/11/2024 的价格信息
2024-11-15 13:38:57,649 [INFO] price_checker.py:565 - 根据最小入住要求(3晚)跳过接下来的 2 天
2024-11-15 13:38:57,649 [INFO] price_checker.py:553 - [3/37] 处理日期: 28/11/2024
2024-11-15 13:38:57,649 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-15 13:38:57,649 [INFO] price_checker.py:255 - 入住日期: 28/11/2024
2024-11-15 13:39:02,794 [INFO] price_checker.py:271 - 开始检查日期 28/11/2024 的最小入住要求...
2024-11-15 13:39:02,797 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="28, Thursday, November 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-28/11/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">28</div></td>
2024-11-15 13:39:02,808 [INFO] price_checker.py:158 - 找到日期: 28/11/2024
2024-11-15 13:39:02,808 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:39:03,938 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:39:05,235 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="28, Thursday, November 2024. Selected check-in date There is a 3 night minimum stay requirement. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_h84ua7"><div class="_d82cel" style="transform: translate(-50%, -100%) translate(20.5px, -12px);"><div class="_1mslrl4"><div class="_u7azij">3-night minimum</div><svg role="presentation" focusable="false" class="_1mjga4hj"><path class="_1s2t3cl" d="M0,0 20,0 10,10z"></path><path class="_c3dsty" d="M0,0 10,10 20,0"></path></svg></div></div><div class="_194zlzjz notranslate" data-testid="calendar-day-28/11/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">28</div></div></td>
2024-11-15 13:39:05,246 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:39:05,246 [INFO] price_checker.py:218 - - aria-label: 28, Thursday, November 2024. Selected check-in date There is a 3 night minimum stay requirement. 
2024-11-15 13:39:05,246 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:39:05,246 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:39:05,246 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 3晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:39:05,246 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 3晚 (自动检测)
2024-11-15 13:39:05,246 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/837352260137971048?check_in=2024-11-28&check_out=2024-12-01&adults=3&children=0&infants=0
2024-11-15 13:39:06,513 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 13:39:06,514 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:39:06,520 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:39:06,528 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 13:39:06,528 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 13:39:06,528 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:39:06,534 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:39:06,540 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 13:39:06,540 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 13:39:06,541 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:39:06,547 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:39:06,552 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 13:39:06,552 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 13:39:06,552 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:39:06,559 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:39:06,564 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 13:39:06,564 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 13:39:06,565 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:39:06,571 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:39:06,577 [INFO] price_checker.py:403 - 找到价格元素: $27 NZD (HTML: <span class="_1k4xcdh">$27&nbsp;NZD</span>)
2024-11-15 13:39:06,577 [INFO] price_checker.py:416 - ✓ 成功设置税费: $27 NZD
2024-11-15 13:39:06,577 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:39:06,778 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:39:06,778 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:39:10,342 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:39:10,345 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:39:12,356 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:39:12,356 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:39:16,603 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:39:16,610 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:39:16,616 [INFO] price_checker.py:403 - 找到价格元素: $233 NZD (HTML: <span class="_j1kt73">$233&nbsp;NZD</span>)
2024-11-15 13:39:16,617 [INFO] price_checker.py:420 - ✓ 成功设置总价: $233 NZD
2024-11-15 13:39:16,617 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:39:16,623 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:39:16,629 [INFO] price_checker.py:403 - 找到价格元素: $233 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$233&nbsp;NZD</span></span>)
2024-11-15 13:39:16,629 [INFO] price_checker.py:420 - ✓ 成功设置总价: $233 NZD
2024-11-15 13:39:16,635 [INFO] price_checker.py:403 - 找到价格元素: $233 NZD (HTML: <span class="_j1kt73">$233&nbsp;NZD</span>)
2024-11-15 13:39:16,635 [INFO] price_checker.py:420 - ✓ 成功设置总价: $233 NZD
2024-11-15 13:39:16,640 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:39:16,640 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:39:16,640 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:39:16,640 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 13:39:16,640 [INFO] price_checker.py:450 - ✓ service_fee: $29 NZD
2024-11-15 13:39:16,640 [INFO] price_checker.py:450 - ✓ taxes: $27 NZD
2024-11-15 13:39:16,640 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:39:16,640 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:39:16,640 [INFO] price_checker.py:457 - check_in: 19/11/2024
2024-11-15 13:39:16,640 [INFO] price_checker.py:457 - check_out: 20/11/2024
2024-11-15 13:39:16,640 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 13:39:16,640 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:39:16,641 [INFO] price_checker.py:457 - nightly_price: $156 NZD
2024-11-15 13:39:16,641 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 13:39:16,641 [INFO] price_checker.py:457 - service_fee: $29 NZD
2024-11-15 13:39:16,641 [INFO] price_checker.py:457 - taxes: $27 NZD
2024-11-15 13:39:16,641 [INFO] price_checker.py:457 - total: 
2024-11-15 13:39:16,641 [INFO] price_checker.py:559 - ✓ 成功获取 19/11/2024 的价格信息
2024-11-15 13:39:16,641 [INFO] price_checker.py:553 - [3/72] 处理日期: 20/11/2024
2024-11-15 13:39:16,641 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 13:39:16,641 [INFO] price_checker.py:255 - 入住日期: 20/11/2024
2024-11-15 13:39:16,804 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:39:16,804 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:39:16,811 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:39:16,825 [INFO] price_checker.py:337 - 找到可见价格元素: $305 NZD 
night
$305 NZD per night
2024-11-15 13:39:16,832 [INFO] price_checker.py:350 - 找到每晚价格元素: $305 NZD 
night
$305 NZD per night
2024-11-15 13:39:16,832 [INFO] price_checker.py:356 - 成功解析折扣价格: $305 NZD
2024-11-15 13:39:16,832 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:39:16,838 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 13:39:17,341 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:39:17,349 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:39:17,356 [INFO] price_checker.py:403 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-15 13:39:17,356 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $90 NZD
2024-11-15 13:39:17,356 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:39:17,364 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:39:17,369 [INFO] price_checker.py:403 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-15 13:39:17,369 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $90 NZD
2024-11-15 13:39:17,369 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:39:21,765 [INFO] price_checker.py:271 - 开始检查日期 20/11/2024 的最小入住要求...
2024-11-15 13:39:21,768 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="20, Wednesday, November 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-20/11/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">20</div></td>
2024-11-15 13:39:21,780 [INFO] price_checker.py:158 - 找到日期: 20/11/2024
2024-11-15 13:39:21,780 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:39:22,384 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:39:22,385 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:39:22,892 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:39:24,185 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="20, Wednesday, November 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_ox7af8h notranslate" data-testid="calendar-day-20/11/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">20</div></td>
2024-11-15 13:39:24,194 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:39:24,194 [INFO] price_checker.py:218 - - aria-label: 20, Wednesday, November 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 13:39:24,194 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:39:24,194 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:39:24,195 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:39:24,195 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 13:39:24,195 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2024-11-20&check_out=2024-11-21&adults=3&children=0&infants=0
2024-11-15 13:39:27,378 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:39:29,322 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:39:29,325 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:39:31,337 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:39:31,337 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:39:32,387 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:39:32,387 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:39:32,393 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:39:32,410 [INFO] price_checker.py:337 - 找到可见价格元素: $340 NZD 
$316 NZD 
night
$316 NZD per night, originally $340 NZD
2024-11-15 13:39:32,416 [INFO] price_checker.py:350 - 找到每晚价格元素: $340 NZD 
$316 NZD 
night
$316 NZD per night, originally $340 NZD
2024-11-15 13:39:32,416 [INFO] price_checker.py:356 - 成功解析折扣价格: $316 NZD
2024-11-15 13:39:32,417 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:39:32,423 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 13:39:32,927 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:39:32,934 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:39:32,941 [INFO] price_checker.py:403 - 找到价格元素: $59 NZD (HTML: <span class="_1k4xcdh">$59&nbsp;NZD</span>)
2024-11-15 13:39:32,941 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $59 NZD
2024-11-15 13:39:32,941 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:39:32,948 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:39:32,953 [INFO] price_checker.py:403 - 找到价格元素: $59 NZD (HTML: <span class="_1k4xcdh">$59&nbsp;NZD</span>)
2024-11-15 13:39:32,953 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $59 NZD
2024-11-15 13:39:32,954 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:39:32,960 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:39:32,966 [INFO] price_checker.py:403 - 找到价格元素: $141 NZD (HTML: <span class="_1k4xcdh">$141&nbsp;NZD</span>)
2024-11-15 13:39:32,966 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $141 NZD
2024-11-15 13:39:32,966 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:39:32,973 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:39:32,977 [INFO] price_checker.py:403 - 找到价格元素: $141 NZD (HTML: <span class="_1k4xcdh">$141&nbsp;NZD</span>)
2024-11-15 13:39:32,977 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $141 NZD
2024-11-15 13:39:32,977 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:39:32,984 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:39:32,990 [INFO] price_checker.py:403 - 找到价格元素: $130 NZD (HTML: <span class="_1k4xcdh">$130&nbsp;NZD</span>)
2024-11-15 13:39:32,990 [INFO] price_checker.py:416 - ✓ 成功设置税费: $130 NZD
2024-11-15 13:39:32,990 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:39:37,401 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:39:41,365 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:39:41,365 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:39:43,014 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:39:43,021 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:39:43,026 [INFO] price_checker.py:403 - 找到价格元素: $1,137 NZD (HTML: <span class="_j1kt73">$1,137&nbsp;NZD</span>)
2024-11-15 13:39:43,026 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,137 NZD
2024-11-15 13:39:43,027 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:39:43,033 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:39:43,038 [INFO] price_checker.py:403 - 找到价格元素: $1,137 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$1,137&nbsp;NZD</span></span>)
2024-11-15 13:39:43,038 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,137 NZD
2024-11-15 13:39:43,043 [INFO] price_checker.py:403 - 找到价格元素: $1,137 NZD (HTML: <span class="_j1kt73">$1,137&nbsp;NZD</span>)
2024-11-15 13:39:43,043 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,137 NZD
2024-11-15 13:39:43,048 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:39:43,048 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:39:43,048 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:39:43,048 [INFO] price_checker.py:450 - ✓ cleaning_fee: $59 NZD
2024-11-15 13:39:43,048 [INFO] price_checker.py:450 - ✓ service_fee: $141 NZD
2024-11-15 13:39:43,048 [INFO] price_checker.py:450 - ✓ taxes: $130 NZD
2024-11-15 13:39:43,048 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:39:43,049 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:39:43,049 [INFO] price_checker.py:457 - check_in: 28/11/2024
2024-11-15 13:39:43,049 [INFO] price_checker.py:457 - check_out: 01/12/2024
2024-11-15 13:39:43,049 [INFO] price_checker.py:457 - min_nights: 3
2024-11-15 13:39:43,049 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:39:43,049 [INFO] price_checker.py:457 - nightly_price: $316 NZD
2024-11-15 13:39:43,049 [INFO] price_checker.py:457 - cleaning_fee: $59 NZD
2024-11-15 13:39:43,049 [INFO] price_checker.py:457 - service_fee: $141 NZD
2024-11-15 13:39:43,049 [INFO] price_checker.py:457 - taxes: $130 NZD
2024-11-15 13:39:43,049 [INFO] price_checker.py:457 - total: 
2024-11-15 13:39:43,049 [INFO] price_checker.py:559 - ✓ 成功获取 28/11/2024 的价格信息
2024-11-15 13:39:43,049 [INFO] price_checker.py:565 - 根据最小入住要求(3晚)跳过接下来的 2 天
2024-11-15 13:39:43,049 [INFO] price_checker.py:573 - 已完成 5/37 个日期的处理
2024-11-15 13:39:47,413 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:39:51,372 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:39:51,372 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:39:51,378 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:39:51,394 [INFO] price_checker.py:337 - 找到可见价格元素: $155 NZD 
night
$155 NZD per night
2024-11-15 13:39:51,401 [INFO] price_checker.py:350 - 找到每晚价格元素: $155 NZD 
night
$155 NZD per night
2024-11-15 13:39:51,401 [INFO] price_checker.py:356 - 成功解析折扣价格: $155 NZD
2024-11-15 13:39:51,401 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:39:53,050 [INFO] price_checker.py:553 - [4/37] 处理日期: 29/11/2024
2024-11-15 13:39:53,050 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-15 13:39:53,050 [INFO] price_checker.py:255 - 入住日期: 29/11/2024
2024-11-15 13:39:57,419 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:39:57,427 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:39:57,436 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span class="_j1kt73">$700&nbsp;NZD</span>)
2024-11-15 13:39:57,436 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 13:39:57,436 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:39:57,443 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:39:57,449 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$700&nbsp;NZD</span></span>)
2024-11-15 13:39:57,449 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 13:39:57,455 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span class="_j1kt73">$700&nbsp;NZD</span>)
2024-11-15 13:39:57,455 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 13:39:57,460 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:39:57,460 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:39:57,460 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:39:57,460 [INFO] price_checker.py:450 - ✓ cleaning_fee: $90 NZD
2024-11-15 13:39:57,460 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 13:39:57,460 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 13:39:57,461 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:39:57,461 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:39:57,461 [INFO] price_checker.py:457 - check_in: 18/11/2024
2024-11-15 13:39:57,461 [INFO] price_checker.py:457 - check_out: 20/11/2024
2024-11-15 13:39:57,461 [INFO] price_checker.py:457 - min_nights: 2
2024-11-15 13:39:57,461 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:39:57,461 [INFO] price_checker.py:457 - nightly_price: $305 NZD
2024-11-15 13:39:57,461 [INFO] price_checker.py:457 - cleaning_fee: $90 NZD
2024-11-15 13:39:57,461 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 13:39:57,461 [INFO] price_checker.py:457 - taxes: None
2024-11-15 13:39:57,461 [INFO] price_checker.py:457 - total: 
2024-11-15 13:39:57,462 [INFO] price_checker.py:559 - ✓ 成功获取 18/11/2024 的价格信息
2024-11-15 13:39:57,462 [INFO] price_checker.py:565 - 根据最小入住要求(2晚)跳过接下来的 1 天
2024-11-15 13:39:57,462 [INFO] price_checker.py:553 - [3/39] 处理日期: 19/11/2024
2024-11-15 13:39:57,462 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/43435162
2024-11-15 13:39:57,462 [INFO] price_checker.py:255 - 入住日期: 19/11/2024
2024-11-15 13:39:58,182 [INFO] price_checker.py:271 - 开始检查日期 29/11/2024 的最小入住要求...
2024-11-15 13:39:58,184 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="29, Friday, November 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-29/11/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">29</div></td>
2024-11-15 13:39:58,194 [INFO] price_checker.py:158 - 找到日期: 29/11/2024
2024-11-15 13:39:58,194 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:39:59,343 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:40:00,644 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="29, Friday, November 2024. Selected check-in date There is a 3 night minimum stay requirement. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_h84ua7"><div class="_d82cel" style="transform: translate(-50%, -100%) translate(20.5px, -12px);"><div class="_1mslrl4"><div class="_u7azij">3-night minimum</div><svg role="presentation" focusable="false" class="_1mjga4hj"><path class="_1s2t3cl" d="M0,0 20,0 10,10z"></path><path class="_c3dsty" d="M0,0 10,10 20,0"></path></svg></div></div><div class="_194zlzjz notranslate" data-testid="calendar-day-29/11/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">29</div></div></td>
2024-11-15 13:40:00,654 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:40:00,654 [INFO] price_checker.py:218 - - aria-label: 29, Friday, November 2024. Selected check-in date There is a 3 night minimum stay requirement. 
2024-11-15 13:40:00,654 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:40:00,655 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:40:00,655 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 3晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:40:00,655 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 3晚 (自动检测)
2024-11-15 13:40:00,655 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/837352260137971048?check_in=2024-11-29&check_out=2024-12-02&adults=3&children=0&infants=0
2024-11-15 13:40:01,413 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 13:40:01,413 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:40:01,421 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:40:01,427 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 13:40:01,427 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 13:40:01,427 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:40:01,434 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:40:01,439 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 13:40:01,439 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 13:40:01,439 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:40:01,446 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:40:01,452 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 13:40:01,452 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 13:40:01,452 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:40:01,460 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:40:01,465 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 13:40:01,465 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 13:40:01,466 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:40:01,473 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:40:01,478 [INFO] price_checker.py:403 - 找到价格元素: $26 NZD (HTML: <span class="_1k4xcdh">$26&nbsp;NZD</span>)
2024-11-15 13:40:01,478 [INFO] price_checker.py:416 - ✓ 成功设置税费: $26 NZD
2024-11-15 13:40:01,478 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:40:02,590 [INFO] price_checker.py:271 - 开始检查日期 19/11/2024 的最小入住要求...
2024-11-15 13:40:02,593 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="19, Tuesday, November 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-19/11/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">19</div></td>
2024-11-15 13:40:02,604 [INFO] price_checker.py:158 - 找到日期: 19/11/2024
2024-11-15 13:40:02,604 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:40:03,794 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:40:05,089 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="19, Tuesday, November 2024. Selected check-in date There is a 2 night minimum stay requirement. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_h84ua7"><div class="_d82cel" style="transform: translateY(-100%) translateY(-12px);"><div class="_1mslrl4"><div class="_u7azij">2-night minimum</div><svg role="presentation" focusable="false" class="_8c7xtno" style="left: 9.5px;"><path class="_1s2t3cl" d="M0,0 20,0 10,10z"></path><path class="_c3dsty" d="M0,0 10,10 20,0"></path></svg></div></div><div class="_194zlzjz notranslate" data-testid="calendar-day-19/11/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">19</div></div></td>
2024-11-15 13:40:05,102 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:40:05,102 [INFO] price_checker.py:218 - - aria-label: 19, Tuesday, November 2024. Selected check-in date There is a 2 night minimum stay requirement. 
2024-11-15 13:40:05,103 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:40:05,103 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:40:05,103 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 2晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:40:05,103 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 2晚 (自动检测)
2024-11-15 13:40:05,103 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/43435162?check_in=2024-11-19&check_out=2024-11-21&adults=3&children=0&infants=0
2024-11-15 13:40:05,743 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:40:05,745 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:40:07,757 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:40:07,757 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:40:10,228 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:40:10,230 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:40:11,484 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:40:11,492 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:40:11,497 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span class="_j1kt73">$231&nbsp;NZD</span>)
2024-11-15 13:40:11,497 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 13:40:11,497 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:40:11,504 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:40:11,510 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$231&nbsp;NZD</span></span>)
2024-11-15 13:40:11,510 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 13:40:11,515 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span class="_j1kt73">$231&nbsp;NZD</span>)
2024-11-15 13:40:11,515 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 13:40:11,520 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:40:11,520 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:40:11,520 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:40:11,520 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 13:40:11,520 [INFO] price_checker.py:450 - ✓ service_fee: $29 NZD
2024-11-15 13:40:11,521 [INFO] price_checker.py:450 - ✓ taxes: $26 NZD
2024-11-15 13:40:11,521 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:40:11,521 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:40:11,521 [INFO] price_checker.py:457 - check_in: 20/11/2024
2024-11-15 13:40:11,521 [INFO] price_checker.py:457 - check_out: 21/11/2024
2024-11-15 13:40:11,521 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 13:40:11,521 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:40:11,521 [INFO] price_checker.py:457 - nightly_price: $155 NZD
2024-11-15 13:40:11,521 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 13:40:11,521 [INFO] price_checker.py:457 - service_fee: $29 NZD
2024-11-15 13:40:11,521 [INFO] price_checker.py:457 - taxes: $26 NZD
2024-11-15 13:40:11,521 [INFO] price_checker.py:457 - total: 
2024-11-15 13:40:11,521 [INFO] price_checker.py:559 - ✓ 成功获取 20/11/2024 的价格信息
2024-11-15 13:40:11,522 [INFO] price_checker.py:553 - [4/72] 处理日期: 21/11/2024
2024-11-15 13:40:11,522 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 13:40:11,522 [INFO] price_checker.py:255 - 入住日期: 21/11/2024
2024-11-15 13:40:12,247 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:40:12,247 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:40:16,649 [INFO] price_checker.py:271 - 开始检查日期 21/11/2024 的最小入住要求...
2024-11-15 13:40:16,652 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="21, Thursday, November 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-21/11/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">21</div></td>
2024-11-15 13:40:16,661 [INFO] price_checker.py:158 - 找到日期: 21/11/2024
2024-11-15 13:40:16,661 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:40:17,771 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:40:17,771 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:40:17,794 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:40:19,079 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="21, Thursday, November 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_ox7af8h notranslate" data-testid="calendar-day-21/11/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">21</div></td>
2024-11-15 13:40:19,088 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:40:19,088 [INFO] price_checker.py:218 - - aria-label: 21, Thursday, November 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 13:40:19,088 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:40:19,088 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:40:19,088 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:40:19,088 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 13:40:19,088 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2024-11-21&check_out=2024-11-22&adults=3&children=0&infants=0
2024-11-15 13:40:22,269 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:40:22,269 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:40:24,191 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:40:24,194 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:40:26,205 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:40:26,205 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:40:27,832 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:40:27,832 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:40:27,838 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:40:27,854 [INFO] price_checker.py:337 - 找到可见价格元素: $340 NZD 
$316 NZD 
night
$316 NZD per night, originally $340 NZD
2024-11-15 13:40:27,864 [INFO] price_checker.py:350 - 找到每晚价格元素: $340 NZD 
$316 NZD 
night
$316 NZD per night, originally $340 NZD
2024-11-15 13:40:27,864 [INFO] price_checker.py:356 - 成功解析折扣价格: $316 NZD
2024-11-15 13:40:27,864 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:40:27,876 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 13:40:28,380 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:40:28,388 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:40:28,393 [INFO] price_checker.py:403 - 找到价格元素: $59 NZD (HTML: <span class="_1k4xcdh">$59&nbsp;NZD</span>)
2024-11-15 13:40:28,394 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $59 NZD
2024-11-15 13:40:28,394 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:40:28,400 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:40:28,406 [INFO] price_checker.py:403 - 找到价格元素: $59 NZD (HTML: <span class="_1k4xcdh">$59&nbsp;NZD</span>)
2024-11-15 13:40:28,406 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $59 NZD
2024-11-15 13:40:28,406 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:40:28,412 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:40:28,418 [INFO] price_checker.py:403 - 找到价格元素: $141 NZD (HTML: <span class="_1k4xcdh">$141&nbsp;NZD</span>)
2024-11-15 13:40:28,418 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $141 NZD
2024-11-15 13:40:28,418 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:40:28,425 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:40:28,430 [INFO] price_checker.py:403 - 找到价格元素: $141 NZD (HTML: <span class="_1k4xcdh">$141&nbsp;NZD</span>)
2024-11-15 13:40:28,430 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $141 NZD
2024-11-15 13:40:28,430 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:40:28,438 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:40:28,443 [INFO] price_checker.py:403 - 找到价格元素: $130 NZD (HTML: <span class="_1k4xcdh">$130&nbsp;NZD</span>)
2024-11-15 13:40:28,443 [INFO] price_checker.py:416 - ✓ 成功设置税费: $130 NZD
2024-11-15 13:40:28,443 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:40:32,283 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:40:32,283 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:40:32,289 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:40:32,304 [INFO] price_checker.py:337 - 找到可见价格元素: $305 NZD 
night
$305 NZD per night
2024-11-15 13:40:32,311 [INFO] price_checker.py:350 - 找到每晚价格元素: $305 NZD 
night
$305 NZD per night
2024-11-15 13:40:32,311 [INFO] price_checker.py:356 - 成功解析折扣价格: $305 NZD
2024-11-15 13:40:32,311 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:40:32,317 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 13:40:32,820 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:40:32,828 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:40:32,837 [INFO] price_checker.py:403 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-15 13:40:32,837 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $90 NZD
2024-11-15 13:40:32,837 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:40:32,844 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:40:32,849 [INFO] price_checker.py:403 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-15 13:40:32,849 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $90 NZD
2024-11-15 13:40:32,849 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:40:36,237 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:40:36,237 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:40:38,478 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:40:38,488 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:40:38,496 [INFO] price_checker.py:403 - 找到价格元素: $1,137 NZD (HTML: <span class="_j1kt73">$1,137&nbsp;NZD</span>)
2024-11-15 13:40:38,497 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,137 NZD
2024-11-15 13:40:38,497 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:40:38,509 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:40:38,514 [INFO] price_checker.py:403 - 找到价格元素: $1,137 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$1,137&nbsp;NZD</span></span>)
2024-11-15 13:40:38,514 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,137 NZD
2024-11-15 13:40:38,519 [INFO] price_checker.py:403 - 找到价格元素: $1,137 NZD (HTML: <span class="_j1kt73">$1,137&nbsp;NZD</span>)
2024-11-15 13:40:38,519 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,137 NZD
2024-11-15 13:40:38,524 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:40:38,525 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:40:38,525 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:40:38,525 [INFO] price_checker.py:450 - ✓ cleaning_fee: $59 NZD
2024-11-15 13:40:38,525 [INFO] price_checker.py:450 - ✓ service_fee: $141 NZD
2024-11-15 13:40:38,525 [INFO] price_checker.py:450 - ✓ taxes: $130 NZD
2024-11-15 13:40:38,525 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:40:38,525 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:40:38,525 [INFO] price_checker.py:457 - check_in: 29/11/2024
2024-11-15 13:40:38,525 [INFO] price_checker.py:457 - check_out: 02/12/2024
2024-11-15 13:40:38,525 [INFO] price_checker.py:457 - min_nights: 3
2024-11-15 13:40:38,525 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:40:38,525 [INFO] price_checker.py:457 - nightly_price: $316 NZD
2024-11-15 13:40:38,525 [INFO] price_checker.py:457 - cleaning_fee: $59 NZD
2024-11-15 13:40:38,526 [INFO] price_checker.py:457 - service_fee: $141 NZD
2024-11-15 13:40:38,526 [INFO] price_checker.py:457 - taxes: $130 NZD
2024-11-15 13:40:38,526 [INFO] price_checker.py:457 - total: 
2024-11-15 13:40:38,526 [INFO] price_checker.py:559 - ✓ 成功获取 29/11/2024 的价格信息
2024-11-15 13:40:38,526 [INFO] price_checker.py:565 - 根据最小入住要求(3晚)跳过接下来的 2 天
2024-11-15 13:40:38,526 [INFO] price_checker.py:553 - [5/37] 处理日期: 30/11/2024
2024-11-15 13:40:38,526 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-15 13:40:38,526 [INFO] price_checker.py:255 - 入住日期: 30/11/2024
2024-11-15 13:40:42,879 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:40:43,651 [INFO] price_checker.py:271 - 开始检查日期 30/11/2024 的最小入住要求...
2024-11-15 13:40:43,654 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_1qvi71ld" role="button" aria-disabled="false" aria-label="30, Saturday, November 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-30/11/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">30</div></td>
2024-11-15 13:40:43,664 [INFO] price_checker.py:158 - 找到日期: 30/11/2024
2024-11-15 13:40:43,664 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:40:44,796 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:40:46,085 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1jaqd3t0" role="button" aria-disabled="true" aria-label="30, Saturday, November 2024. Selected check-in date There is a 3 night minimum stay requirement. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_h84ua7"><div class="_d82cel" style="transform: translate(-100%, -100%) translate(41px, -12px);"><div class="_1mslrl4"><div class="_u7azij">3-night minimum</div><svg role="presentation" focusable="false" class="_8c7xtno" style="right: 9.5px;"><path class="_1s2t3cl" d="M0,0 20,0 10,10z"></path><path class="_c3dsty" d="M0,0 10,10 20,0"></path></svg></div></div><div class="_17slido1 notranslate" data-testid="calendar-day-30/11/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">30</div></div></td>
2024-11-15 13:40:46,095 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:40:46,095 [INFO] price_checker.py:218 - - aria-label: 30, Saturday, November 2024. Selected check-in date There is a 3 night minimum stay requirement. 
2024-11-15 13:40:46,095 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:40:46,096 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:40:46,096 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 3晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:40:46,096 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 3晚 (自动检测)
2024-11-15 13:40:46,096 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/837352260137971048?check_in=2024-11-30&check_out=2024-12-03&adults=3&children=0&infants=0
2024-11-15 13:40:46,288 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:40:46,288 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:40:46,294 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:40:46,312 [INFO] price_checker.py:337 - 找到可见价格元素: $155 NZD 
night
$155 NZD per night
2024-11-15 13:40:46,318 [INFO] price_checker.py:350 - 找到每晚价格元素: $155 NZD 
night
$155 NZD per night
2024-11-15 13:40:46,318 [INFO] price_checker.py:356 - 成功解析折扣价格: $155 NZD
2024-11-15 13:40:46,318 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:40:51,194 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:40:51,197 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:40:52,901 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:40:53,208 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:40:53,208 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:40:56,346 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 13:40:56,346 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:40:56,353 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:40:56,359 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 13:40:56,359 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 13:40:56,359 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:40:56,366 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:40:56,370 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 13:40:56,371 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 13:40:56,371 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:40:56,378 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:40:56,383 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 13:40:56,383 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 13:40:56,383 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:40:56,390 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:40:56,395 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 13:40:56,395 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 13:40:56,396 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:40:56,402 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:40:56,408 [INFO] price_checker.py:403 - 找到价格元素: $26 NZD (HTML: <span class="_1k4xcdh">$26&nbsp;NZD</span>)
2024-11-15 13:40:56,408 [INFO] price_checker.py:416 - ✓ 成功设置税费: $26 NZD
2024-11-15 13:40:56,408 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:41:02,939 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:41:03,252 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:41:03,252 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:41:06,449 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:41:06,457 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:41:06,462 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span class="_j1kt73">$231&nbsp;NZD</span>)
2024-11-15 13:41:06,462 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 13:41:06,462 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:41:06,469 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:41:06,474 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$231&nbsp;NZD</span></span>)
2024-11-15 13:41:06,474 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 13:41:06,479 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span class="_j1kt73">$231&nbsp;NZD</span>)
2024-11-15 13:41:06,479 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 13:41:06,484 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:41:06,484 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:41:06,484 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:41:06,484 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 13:41:06,484 [INFO] price_checker.py:450 - ✓ service_fee: $29 NZD
2024-11-15 13:41:06,484 [INFO] price_checker.py:450 - ✓ taxes: $26 NZD
2024-11-15 13:41:06,484 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:41:06,485 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:41:06,485 [INFO] price_checker.py:457 - check_in: 21/11/2024
2024-11-15 13:41:06,485 [INFO] price_checker.py:457 - check_out: 22/11/2024
2024-11-15 13:41:06,485 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 13:41:06,485 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:41:06,485 [INFO] price_checker.py:457 - nightly_price: $155 NZD
2024-11-15 13:41:06,485 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 13:41:06,485 [INFO] price_checker.py:457 - service_fee: $29 NZD
2024-11-15 13:41:06,485 [INFO] price_checker.py:457 - taxes: $26 NZD
2024-11-15 13:41:06,485 [INFO] price_checker.py:457 - total: 
2024-11-15 13:41:06,485 [INFO] price_checker.py:559 - ✓ 成功获取 21/11/2024 的价格信息
2024-11-15 13:41:06,485 [INFO] price_checker.py:553 - [5/72] 处理日期: 22/11/2024
2024-11-15 13:41:06,485 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 13:41:06,486 [INFO] price_checker.py:255 - 入住日期: 22/11/2024
2024-11-15 13:41:11,788 [INFO] price_checker.py:271 - 开始检查日期 22/11/2024 的最小入住要求...
2024-11-15 13:41:11,791 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="22, Friday, November 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-22/11/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">22</div></td>
2024-11-15 13:41:11,801 [INFO] price_checker.py:158 - 找到日期: 22/11/2024
2024-11-15 13:41:11,801 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:41:12,930 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:41:12,969 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:41:12,975 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:41:12,982 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span class="_j1kt73">$700&nbsp;NZD</span>)
2024-11-15 13:41:12,983 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 13:41:12,983 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:41:12,990 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:41:12,994 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$700&nbsp;NZD</span></span>)
2024-11-15 13:41:12,995 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 13:41:13,000 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span class="_j1kt73">$700&nbsp;NZD</span>)
2024-11-15 13:41:13,000 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 13:41:13,005 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:41:13,005 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:41:13,005 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:41:13,005 [INFO] price_checker.py:450 - ✓ cleaning_fee: $90 NZD
2024-11-15 13:41:13,005 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 13:41:13,006 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 13:41:13,006 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:41:13,006 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:41:13,006 [INFO] price_checker.py:457 - check_in: 19/11/2024
2024-11-15 13:41:13,006 [INFO] price_checker.py:457 - check_out: 21/11/2024
2024-11-15 13:41:13,006 [INFO] price_checker.py:457 - min_nights: 2
2024-11-15 13:41:13,006 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:41:13,006 [INFO] price_checker.py:457 - nightly_price: $305 NZD
2024-11-15 13:41:13,006 [INFO] price_checker.py:457 - cleaning_fee: $90 NZD
2024-11-15 13:41:13,006 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 13:41:13,006 [INFO] price_checker.py:457 - taxes: None
2024-11-15 13:41:13,006 [INFO] price_checker.py:457 - total: 
2024-11-15 13:41:13,006 [INFO] price_checker.py:559 - ✓ 成功获取 19/11/2024 的价格信息
2024-11-15 13:41:13,006 [INFO] price_checker.py:565 - 根据最小入住要求(2晚)跳过接下来的 1 天
2024-11-15 13:41:13,007 [INFO] price_checker.py:553 - [4/39] 处理日期: 20/11/2024
2024-11-15 13:41:13,007 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/43435162
2024-11-15 13:41:13,007 [INFO] price_checker.py:255 - 入住日期: 20/11/2024
2024-11-15 13:41:13,278 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:41:13,278 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:41:13,284 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:41:13,299 [INFO] price_checker.py:337 - 找到可见价格元素: $340 NZD 
$316 NZD 
night
$316 NZD per night, originally $340 NZD
2024-11-15 13:41:13,306 [INFO] price_checker.py:350 - 找到每晚价格元素: $340 NZD 
$316 NZD 
night
$316 NZD per night, originally $340 NZD
2024-11-15 13:41:13,306 [INFO] price_checker.py:356 - 成功解析折扣价格: $316 NZD
2024-11-15 13:41:13,306 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:41:13,312 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 13:41:13,815 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:41:13,823 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:41:13,829 [INFO] price_checker.py:403 - 找到价格元素: $59 NZD (HTML: <span class="_1k4xcdh">$59&nbsp;NZD</span>)
2024-11-15 13:41:13,829 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $59 NZD
2024-11-15 13:41:13,829 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:41:13,836 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:41:13,841 [INFO] price_checker.py:403 - 找到价格元素: $59 NZD (HTML: <span class="_1k4xcdh">$59&nbsp;NZD</span>)
2024-11-15 13:41:13,841 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $59 NZD
2024-11-15 13:41:13,841 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:41:13,848 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:41:13,852 [INFO] price_checker.py:403 - 找到价格元素: $141 NZD (HTML: <span class="_1k4xcdh">$141&nbsp;NZD</span>)
2024-11-15 13:41:13,852 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $141 NZD
2024-11-15 13:41:13,853 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:41:13,859 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:41:13,864 [INFO] price_checker.py:403 - 找到价格元素: $141 NZD (HTML: <span class="_1k4xcdh">$141&nbsp;NZD</span>)
2024-11-15 13:41:13,864 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $141 NZD
2024-11-15 13:41:13,864 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:41:13,872 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:41:13,881 [INFO] price_checker.py:403 - 找到价格元素: $130 NZD (HTML: <span class="_1k4xcdh">$130&nbsp;NZD</span>)
2024-11-15 13:41:13,882 [INFO] price_checker.py:416 - ✓ 成功设置税费: $130 NZD
2024-11-15 13:41:13,882 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:41:14,214 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="22, Friday, November 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_ox7af8h notranslate" data-testid="calendar-day-22/11/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">22</div></td>
2024-11-15 13:41:14,222 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:41:14,222 [INFO] price_checker.py:218 - - aria-label: 22, Friday, November 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 13:41:14,222 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:41:14,222 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:41:14,222 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:41:14,222 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 13:41:14,223 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2024-11-22&check_out=2024-11-23&adults=3&children=0&infants=0
2024-11-15 13:41:18,130 [INFO] price_checker.py:271 - 开始检查日期 20/11/2024 的最小入住要求...
2024-11-15 13:41:18,133 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="20, Wednesday, November 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-20/11/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">20</div></td>
2024-11-15 13:41:18,144 [INFO] price_checker.py:158 - 找到日期: 20/11/2024
2024-11-15 13:41:18,144 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:41:19,265 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:41:19,314 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:41:19,318 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:41:20,548 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="20, Wednesday, November 2024. Selected check-in date There is a 2 night minimum stay requirement. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_h84ua7"><div class="_d82cel" style="transform: translate(-50%, -100%) translate(20.5px, -12px);"><div class="_1mslrl4"><div class="_u7azij">2-night minimum</div><svg role="presentation" focusable="false" class="_1mjga4hj"><path class="_1s2t3cl" d="M0,0 20,0 10,10z"></path><path class="_c3dsty" d="M0,0 10,10 20,0"></path></svg></div></div><div class="_194zlzjz notranslate" data-testid="calendar-day-20/11/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">20</div></div></td>
2024-11-15 13:41:20,555 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:41:20,556 [INFO] price_checker.py:218 - - aria-label: 20, Wednesday, November 2024. Selected check-in date There is a 2 night minimum stay requirement. 
2024-11-15 13:41:20,556 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:41:20,556 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:41:20,556 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 2晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:41:20,556 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 2晚 (自动检测)
2024-11-15 13:41:20,556 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/43435162?check_in=2024-11-20&check_out=2024-11-22&adults=3&children=0&infants=0
2024-11-15 13:41:21,330 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:41:21,330 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:41:23,942 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:41:23,949 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:41:23,955 [INFO] price_checker.py:403 - 找到价格元素: $1,137 NZD (HTML: <span class="_j1kt73">$1,137&nbsp;NZD</span>)
2024-11-15 13:41:23,955 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,137 NZD
2024-11-15 13:41:23,955 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:41:23,962 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:41:23,967 [INFO] price_checker.py:403 - 找到价格元素: $1,137 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$1,137&nbsp;NZD</span></span>)
2024-11-15 13:41:23,967 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,137 NZD
2024-11-15 13:41:23,972 [INFO] price_checker.py:403 - 找到价格元素: $1,137 NZD (HTML: <span class="_j1kt73">$1,137&nbsp;NZD</span>)
2024-11-15 13:41:23,972 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,137 NZD
2024-11-15 13:41:23,977 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:41:23,977 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:41:23,977 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:41:23,977 [INFO] price_checker.py:450 - ✓ cleaning_fee: $59 NZD
2024-11-15 13:41:23,977 [INFO] price_checker.py:450 - ✓ service_fee: $141 NZD
2024-11-15 13:41:23,978 [INFO] price_checker.py:450 - ✓ taxes: $130 NZD
2024-11-15 13:41:23,978 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:41:23,978 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:41:23,978 [INFO] price_checker.py:457 - check_in: 30/11/2024
2024-11-15 13:41:23,978 [INFO] price_checker.py:457 - check_out: 03/12/2024
2024-11-15 13:41:23,978 [INFO] price_checker.py:457 - min_nights: 3
2024-11-15 13:41:23,978 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:41:23,978 [INFO] price_checker.py:457 - nightly_price: $316 NZD
2024-11-15 13:41:23,978 [INFO] price_checker.py:457 - cleaning_fee: $59 NZD
2024-11-15 13:41:23,978 [INFO] price_checker.py:457 - service_fee: $141 NZD
2024-11-15 13:41:23,978 [INFO] price_checker.py:457 - taxes: $130 NZD
2024-11-15 13:41:23,978 [INFO] price_checker.py:457 - total: 
2024-11-15 13:41:23,978 [INFO] price_checker.py:559 - ✓ 成功获取 30/11/2024 的价格信息
2024-11-15 13:41:23,978 [INFO] price_checker.py:565 - 根据最小入住要求(3晚)跳过接下来的 2 天
2024-11-15 13:41:23,979 [INFO] price_checker.py:553 - [6/37] 处理日期: 01/12/2024
2024-11-15 13:41:23,979 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-15 13:41:23,979 [INFO] price_checker.py:255 - 入住日期: 01/12/2024
2024-11-15 13:41:25,681 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:41:25,684 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:41:27,696 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:41:27,696 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:41:29,098 [INFO] price_checker.py:271 - 开始检查日期 01/12/2024 的最小入住要求...
2024-11-15 13:41:29,102 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_11r6uykv" role="button" aria-disabled="false" aria-label="1, Sunday, December 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_5nf23wc notranslate" data-testid="calendar-day-01/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">1</div></td>
2024-11-15 13:41:29,113 [INFO] price_checker.py:158 - 找到日期: 01/12/2024
2024-11-15 13:41:29,113 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:41:30,239 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:41:31,361 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:41:31,361 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:41:31,519 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_x0oa30i" role="button" aria-disabled="true" aria-label="1, Sunday, December 2024. Selected check-in date There is a 3 night minimum stay requirement. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_h84ua7"><div class="_1bf91cf3 notranslate" data-testid="calendar-day-01/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">1</div><div class="_dg17u6n" style="transform: translateX(-100%) translate(42px, 12px);"><div class="_1mslrl4"><div class="_u7azij">3-night minimum</div><svg role="presentation" focusable="false" class="_17sgn78l" style="right: 9.5px;"><path class="_1s2t3cl" d="M0,10 20,10 10,0z"></path><path class="_c3dsty" d="M0,10 10,0 20,10"></path></svg></div></div></div></td>
2024-11-15 13:41:31,529 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:41:31,530 [INFO] price_checker.py:218 - - aria-label: 1, Sunday, December 2024. Selected check-in date There is a 3 night minimum stay requirement. 
2024-11-15 13:41:31,530 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:41:31,530 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:41:31,530 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 3晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:41:31,530 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 3晚 (自动检测)
2024-11-15 13:41:31,530 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/837352260137971048?check_in=2024-12-01&check_out=2024-12-04&adults=3&children=0&infants=0
2024-11-15 13:41:36,628 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:41:36,632 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:41:37,726 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:41:37,726 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:41:38,644 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:41:38,644 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:41:41,383 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:41:41,383 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:41:41,389 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:41:41,404 [INFO] price_checker.py:337 - 找到可见价格元素: $158 NZD 
night
$158 NZD per night
2024-11-15 13:41:41,410 [INFO] price_checker.py:350 - 找到每晚价格元素: $158 NZD 
night
$158 NZD per night
2024-11-15 13:41:41,410 [INFO] price_checker.py:356 - 成功解析折扣价格: $158 NZD
2024-11-15 13:41:41,410 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:41:47,754 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:41:47,755 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:41:47,763 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:41:47,785 [INFO] price_checker.py:337 - 找到可见价格元素: $305 NZD 
night
$305 NZD per night
2024-11-15 13:41:47,790 [INFO] price_checker.py:350 - 找到每晚价格元素: $305 NZD 
night
$305 NZD per night
2024-11-15 13:41:47,790 [INFO] price_checker.py:356 - 成功解析折扣价格: $305 NZD
2024-11-15 13:41:47,791 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:41:47,797 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 13:41:48,300 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:41:48,308 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:41:48,315 [INFO] price_checker.py:403 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-15 13:41:48,315 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $90 NZD
2024-11-15 13:41:48,315 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:41:48,321 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:41:48,327 [INFO] price_checker.py:403 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-15 13:41:48,327 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $90 NZD
2024-11-15 13:41:48,327 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:41:48,673 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:41:48,674 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:41:51,447 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 13:41:51,447 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:41:51,454 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:41:51,460 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 13:41:51,461 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 13:41:51,461 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:41:51,467 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:41:51,472 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 13:41:51,472 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 13:41:51,472 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:41:51,479 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:41:51,484 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 13:41:51,484 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 13:41:51,484 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:41:51,491 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:41:51,496 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 13:41:51,496 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 13:41:51,496 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:41:51,503 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:41:51,508 [INFO] price_checker.py:403 - 找到价格元素: $27 NZD (HTML: <span class="_1k4xcdh">$27&nbsp;NZD</span>)
2024-11-15 13:41:51,509 [INFO] price_checker.py:416 - ✓ 成功设置税费: $27 NZD
2024-11-15 13:41:51,509 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:41:58,350 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:41:58,693 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:41:58,693 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:41:58,699 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:41:58,714 [INFO] price_checker.py:337 - 找到可见价格元素: $340 NZD 
$316 NZD 
night
$316 NZD per night, originally $340 NZD
2024-11-15 13:41:58,721 [INFO] price_checker.py:350 - 找到每晚价格元素: $340 NZD 
$316 NZD 
night
$316 NZD per night, originally $340 NZD
2024-11-15 13:41:58,721 [INFO] price_checker.py:356 - 成功解析折扣价格: $316 NZD
2024-11-15 13:41:58,721 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:41:58,727 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 13:41:59,230 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:41:59,238 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:41:59,243 [INFO] price_checker.py:403 - 找到价格元素: $59 NZD (HTML: <span class="_1k4xcdh">$59&nbsp;NZD</span>)
2024-11-15 13:41:59,243 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $59 NZD
2024-11-15 13:41:59,244 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:41:59,251 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:41:59,256 [INFO] price_checker.py:403 - 找到价格元素: $59 NZD (HTML: <span class="_1k4xcdh">$59&nbsp;NZD</span>)
2024-11-15 13:41:59,256 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $59 NZD
2024-11-15 13:41:59,256 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:41:59,263 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:41:59,268 [INFO] price_checker.py:403 - 找到价格元素: $141 NZD (HTML: <span class="_1k4xcdh">$141&nbsp;NZD</span>)
2024-11-15 13:41:59,268 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $141 NZD
2024-11-15 13:41:59,268 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:41:59,275 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:41:59,280 [INFO] price_checker.py:403 - 找到价格元素: $141 NZD (HTML: <span class="_1k4xcdh">$141&nbsp;NZD</span>)
2024-11-15 13:41:59,280 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $141 NZD
2024-11-15 13:41:59,281 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:41:59,287 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:41:59,292 [INFO] price_checker.py:403 - 找到价格元素: $130 NZD (HTML: <span class="_1k4xcdh">$130&nbsp;NZD</span>)
2024-11-15 13:41:59,292 [INFO] price_checker.py:416 - ✓ 成功设置税费: $130 NZD
2024-11-15 13:41:59,292 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:42:01,530 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:42:01,536 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:42:01,542 [INFO] price_checker.py:403 - 找到价格元素: $235 NZD (HTML: <span class="_j1kt73">$235&nbsp;NZD</span>)
2024-11-15 13:42:01,542 [INFO] price_checker.py:420 - ✓ 成功设置总价: $235 NZD
2024-11-15 13:42:01,542 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:42:01,549 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:42:01,554 [INFO] price_checker.py:403 - 找到价格元素: $235 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$235&nbsp;NZD</span></span>)
2024-11-15 13:42:01,554 [INFO] price_checker.py:420 - ✓ 成功设置总价: $235 NZD
2024-11-15 13:42:01,558 [INFO] price_checker.py:403 - 找到价格元素: $235 NZD (HTML: <span class="_j1kt73">$235&nbsp;NZD</span>)
2024-11-15 13:42:01,559 [INFO] price_checker.py:420 - ✓ 成功设置总价: $235 NZD
2024-11-15 13:42:01,563 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:42:01,563 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:42:01,564 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:42:01,564 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 13:42:01,564 [INFO] price_checker.py:450 - ✓ service_fee: $29 NZD
2024-11-15 13:42:01,564 [INFO] price_checker.py:450 - ✓ taxes: $27 NZD
2024-11-15 13:42:01,564 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:42:01,564 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:42:01,564 [INFO] price_checker.py:457 - check_in: 22/11/2024
2024-11-15 13:42:01,564 [INFO] price_checker.py:457 - check_out: 23/11/2024
2024-11-15 13:42:01,564 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 13:42:01,564 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:42:01,564 [INFO] price_checker.py:457 - nightly_price: $158 NZD
2024-11-15 13:42:01,564 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 13:42:01,564 [INFO] price_checker.py:457 - service_fee: $29 NZD
2024-11-15 13:42:01,564 [INFO] price_checker.py:457 - taxes: $27 NZD
2024-11-15 13:42:01,565 [INFO] price_checker.py:457 - total: 
2024-11-15 13:42:01,565 [INFO] price_checker.py:559 - ✓ 成功获取 22/11/2024 的价格信息
2024-11-15 13:42:01,565 [INFO] price_checker.py:573 - 已完成 5/72 个日期的处理
2024-11-15 13:42:08,372 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:42:09,322 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:42:09,328 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:42:09,333 [INFO] price_checker.py:403 - 找到价格元素: $1,137 NZD (HTML: <span class="_j1kt73">$1,137&nbsp;NZD</span>)
2024-11-15 13:42:09,334 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,137 NZD
2024-11-15 13:42:09,334 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:42:09,341 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:42:09,345 [INFO] price_checker.py:403 - 找到价格元素: $1,137 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$1,137&nbsp;NZD</span></span>)
2024-11-15 13:42:09,345 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,137 NZD
2024-11-15 13:42:09,351 [INFO] price_checker.py:403 - 找到价格元素: $1,137 NZD (HTML: <span class="_j1kt73">$1,137&nbsp;NZD</span>)
2024-11-15 13:42:09,351 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,137 NZD
2024-11-15 13:42:09,356 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:42:09,356 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:42:09,356 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:42:09,356 [INFO] price_checker.py:450 - ✓ cleaning_fee: $59 NZD
2024-11-15 13:42:09,356 [INFO] price_checker.py:450 - ✓ service_fee: $141 NZD
2024-11-15 13:42:09,356 [INFO] price_checker.py:450 - ✓ taxes: $130 NZD
2024-11-15 13:42:09,356 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:42:09,357 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:42:09,357 [INFO] price_checker.py:457 - check_in: 01/12/2024
2024-11-15 13:42:09,357 [INFO] price_checker.py:457 - check_out: 04/12/2024
2024-11-15 13:42:09,357 [INFO] price_checker.py:457 - min_nights: 3
2024-11-15 13:42:09,357 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:42:09,357 [INFO] price_checker.py:457 - nightly_price: $316 NZD
2024-11-15 13:42:09,357 [INFO] price_checker.py:457 - cleaning_fee: $59 NZD
2024-11-15 13:42:09,357 [INFO] price_checker.py:457 - service_fee: $141 NZD
2024-11-15 13:42:09,357 [INFO] price_checker.py:457 - taxes: $130 NZD
2024-11-15 13:42:09,357 [INFO] price_checker.py:457 - total: 
2024-11-15 13:42:09,357 [INFO] price_checker.py:559 - ✓ 成功获取 01/12/2024 的价格信息
2024-11-15 13:42:09,357 [INFO] price_checker.py:565 - 根据最小入住要求(3晚)跳过接下来的 2 天
2024-11-15 13:42:09,357 [INFO] price_checker.py:553 - [7/37] 处理日期: 02/12/2024
2024-11-15 13:42:09,357 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-15 13:42:09,358 [INFO] price_checker.py:255 - 入住日期: 02/12/2024
2024-11-15 13:42:11,565 [INFO] price_checker.py:553 - [6/72] 处理日期: 24/11/2024
2024-11-15 13:42:11,565 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 13:42:11,565 [INFO] price_checker.py:255 - 入住日期: 24/11/2024
2024-11-15 13:42:14,481 [INFO] price_checker.py:271 - 开始检查日期 02/12/2024 的最小入住要求...
2024-11-15 13:42:14,485 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_sl5yz7r" role="button" aria-disabled="false" aria-label="2, Monday, December 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-02/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">2</div></td>
2024-11-15 13:42:14,495 [INFO] price_checker.py:158 - 找到日期: 02/12/2024
2024-11-15 13:42:14,496 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:42:15,618 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:42:16,691 [INFO] price_checker.py:271 - 开始检查日期 24/11/2024 的最小入住要求...
2024-11-15 13:42:16,693 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_1mv3p4vt" role="button" aria-disabled="false" aria-label="24, Sunday, November 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-24/11/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">24</div></td>
2024-11-15 13:42:16,703 [INFO] price_checker.py:158 - 找到日期: 24/11/2024
2024-11-15 13:42:16,703 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:42:16,908 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_5v1jabe" role="button" aria-disabled="true" aria-label="2, Monday, December 2024. Selected check-in date There is a 3 night minimum stay requirement. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_h84ua7"><div class="_d82cel" style="transform: translateY(-100%) translateY(-12px);"><div class="_1mslrl4"><div class="_u7azij">3-night minimum</div><svg role="presentation" focusable="false" class="_8c7xtno" style="left: 9.5px;"><path class="_1s2t3cl" d="M0,0 20,0 10,10z"></path><path class="_c3dsty" d="M0,0 10,10 20,0"></path></svg></div></div><div class="_17slido1 notranslate" data-testid="calendar-day-02/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">2</div></div></td>
2024-11-15 13:42:16,916 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:42:16,916 [INFO] price_checker.py:218 - - aria-label: 2, Monday, December 2024. Selected check-in date There is a 3 night minimum stay requirement. 
2024-11-15 13:42:16,916 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:42:16,916 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:42:16,917 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 3晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:42:16,917 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 3晚 (自动检测)
2024-11-15 13:42:16,917 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/837352260137971048?check_in=2024-12-02&check_out=2024-12-05&adults=3&children=0&infants=0
2024-11-15 13:42:17,846 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:42:18,379 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:42:19,127 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_ubf03zg" role="button" aria-disabled="true" aria-label="24, Sunday, November 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1qis3zbj notranslate" data-testid="calendar-day-24/11/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">24</div></td>
2024-11-15 13:42:19,135 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:42:19,135 [INFO] price_checker.py:218 - - aria-label: 24, Sunday, November 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 13:42:19,135 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:42:19,135 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:42:19,135 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:42:19,136 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 13:42:19,136 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2024-11-24&check_out=2024-11-25&adults=3&children=0&infants=0
2024-11-15 13:42:22,019 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:42:22,022 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:42:24,034 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:42:24,034 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:42:24,259 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:42:24,262 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:42:26,274 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:42:26,274 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:42:28,393 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:42:28,400 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:42:28,407 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span class="_j1kt73">$700&nbsp;NZD</span>)
2024-11-15 13:42:28,408 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 13:42:28,408 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:42:28,414 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:42:28,419 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$700&nbsp;NZD</span></span>)
2024-11-15 13:42:28,419 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 13:42:28,424 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span class="_j1kt73">$700&nbsp;NZD</span>)
2024-11-15 13:42:28,424 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 13:42:28,429 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:42:28,429 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:42:28,429 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:42:28,430 [INFO] price_checker.py:450 - ✓ cleaning_fee: $90 NZD
2024-11-15 13:42:28,430 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 13:42:28,430 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 13:42:28,430 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:42:28,430 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:42:28,430 [INFO] price_checker.py:457 - check_in: 20/11/2024
2024-11-15 13:42:28,430 [INFO] price_checker.py:457 - check_out: 22/11/2024
2024-11-15 13:42:28,430 [INFO] price_checker.py:457 - min_nights: 2
2024-11-15 13:42:28,430 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:42:28,430 [INFO] price_checker.py:457 - nightly_price: $305 NZD
2024-11-15 13:42:28,430 [INFO] price_checker.py:457 - cleaning_fee: $90 NZD
2024-11-15 13:42:28,430 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 13:42:28,430 [INFO] price_checker.py:457 - taxes: None
2024-11-15 13:42:28,430 [INFO] price_checker.py:457 - total: 
2024-11-15 13:42:28,431 [INFO] price_checker.py:559 - ✓ 成功获取 20/11/2024 的价格信息
2024-11-15 13:42:28,431 [INFO] price_checker.py:565 - 根据最小入住要求(2晚)跳过接下来的 1 天
2024-11-15 13:42:28,431 [INFO] price_checker.py:573 - 已完成 5/39 个日期的处理
2024-11-15 13:42:34,078 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:42:34,078 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:42:36,305 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:42:36,305 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:42:38,431 [INFO] price_checker.py:553 - [5/39] 处理日期: 21/11/2024
2024-11-15 13:42:38,431 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/43435162
2024-11-15 13:42:38,432 [INFO] price_checker.py:255 - 入住日期: 21/11/2024
2024-11-15 13:42:43,564 [INFO] price_checker.py:271 - 开始检查日期 21/11/2024 的最小入住要求...
2024-11-15 13:42:43,566 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="21, Thursday, November 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-21/11/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">21</div></td>
2024-11-15 13:42:43,576 [INFO] price_checker.py:158 - 找到日期: 21/11/2024
2024-11-15 13:42:43,576 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:42:44,094 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:42:44,094 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:42:44,100 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:42:44,115 [INFO] price_checker.py:337 - 找到可见价格元素: $340 NZD 
$316 NZD 
night
$316 NZD per night, originally $340 NZD
2024-11-15 13:42:44,122 [INFO] price_checker.py:350 - 找到每晚价格元素: $340 NZD 
$316 NZD 
night
$316 NZD per night, originally $340 NZD
2024-11-15 13:42:44,122 [INFO] price_checker.py:356 - 成功解析折扣价格: $316 NZD
2024-11-15 13:42:44,123 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:42:44,128 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 13:42:44,631 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:42:44,639 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:42:44,646 [INFO] price_checker.py:403 - 找到价格元素: $59 NZD (HTML: <span class="_1k4xcdh">$59&nbsp;NZD</span>)
2024-11-15 13:42:44,646 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $59 NZD
2024-11-15 13:42:44,646 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:42:44,654 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:42:44,659 [INFO] price_checker.py:403 - 找到价格元素: $59 NZD (HTML: <span class="_1k4xcdh">$59&nbsp;NZD</span>)
2024-11-15 13:42:44,659 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $59 NZD
2024-11-15 13:42:44,659 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:42:44,666 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:42:44,671 [INFO] price_checker.py:403 - 找到价格元素: $141 NZD (HTML: <span class="_1k4xcdh">$141&nbsp;NZD</span>)
2024-11-15 13:42:44,672 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $141 NZD
2024-11-15 13:42:44,672 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:42:44,678 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:42:44,683 [INFO] price_checker.py:403 - 找到价格元素: $141 NZD (HTML: <span class="_1k4xcdh">$141&nbsp;NZD</span>)
2024-11-15 13:42:44,683 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $141 NZD
2024-11-15 13:42:44,683 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:42:44,690 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:42:44,694 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:42:44,695 [INFO] price_checker.py:403 - 找到价格元素: $130 NZD (HTML: <span class="_1k4xcdh">$130&nbsp;NZD</span>)
2024-11-15 13:42:44,695 [INFO] price_checker.py:416 - ✓ 成功设置税费: $130 NZD
2024-11-15 13:42:44,695 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:42:45,975 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="21, Thursday, November 2024. Selected check-in date There is a 2 night minimum stay requirement. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_h84ua7"><div class="_d82cel" style="transform: translate(-50%, -100%) translate(20.5px, -12px);"><div class="_1mslrl4"><div class="_u7azij">2-night minimum</div><svg role="presentation" focusable="false" class="_1mjga4hj"><path class="_1s2t3cl" d="M0,0 20,0 10,10z"></path><path class="_c3dsty" d="M0,0 10,10 20,0"></path></svg></div></div><div class="_194zlzjz notranslate" data-testid="calendar-day-21/11/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">21</div></div></td>
2024-11-15 13:42:45,984 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:42:45,984 [INFO] price_checker.py:218 - - aria-label: 21, Thursday, November 2024. Selected check-in date There is a 2 night minimum stay requirement. 
2024-11-15 13:42:45,984 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:42:45,984 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:42:45,984 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 2晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:42:45,985 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 2晚 (自动检测)
2024-11-15 13:42:45,985 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/43435162?check_in=2024-11-21&check_out=2024-11-23&adults=3&children=0&infants=0
2024-11-15 13:42:46,312 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:42:46,312 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:42:46,318 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:42:46,333 [INFO] price_checker.py:337 - 找到可见价格元素: $155 NZD 
night
$155 NZD per night
2024-11-15 13:42:46,340 [INFO] price_checker.py:350 - 找到每晚价格元素: $155 NZD 
night
$155 NZD per night
2024-11-15 13:42:46,340 [INFO] price_checker.py:356 - 成功解析折扣价格: $155 NZD
2024-11-15 13:42:46,340 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:42:51,083 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:42:51,086 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:42:53,099 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:42:53,099 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:42:54,699 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:42:54,707 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:42:54,713 [INFO] price_checker.py:403 - 找到价格元素: $1,137 NZD (HTML: <span class="_j1kt73">$1,137&nbsp;NZD</span>)
2024-11-15 13:42:54,713 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,137 NZD
2024-11-15 13:42:54,713 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:42:54,723 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:42:54,734 [INFO] price_checker.py:403 - 找到价格元素: $1,137 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$1,137&nbsp;NZD</span></span>)
2024-11-15 13:42:54,734 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,137 NZD
2024-11-15 13:42:54,746 [INFO] price_checker.py:403 - 找到价格元素: $1,137 NZD (HTML: <span class="_j1kt73">$1,137&nbsp;NZD</span>)
2024-11-15 13:42:54,747 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,137 NZD
2024-11-15 13:42:54,752 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:42:54,752 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:42:54,752 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:42:54,752 [INFO] price_checker.py:450 - ✓ cleaning_fee: $59 NZD
2024-11-15 13:42:54,753 [INFO] price_checker.py:450 - ✓ service_fee: $141 NZD
2024-11-15 13:42:54,753 [INFO] price_checker.py:450 - ✓ taxes: $130 NZD
2024-11-15 13:42:54,753 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:42:54,753 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:42:54,753 [INFO] price_checker.py:457 - check_in: 02/12/2024
2024-11-15 13:42:54,753 [INFO] price_checker.py:457 - check_out: 05/12/2024
2024-11-15 13:42:54,753 [INFO] price_checker.py:457 - min_nights: 3
2024-11-15 13:42:54,753 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:42:54,753 [INFO] price_checker.py:457 - nightly_price: $316 NZD
2024-11-15 13:42:54,753 [INFO] price_checker.py:457 - cleaning_fee: $59 NZD
2024-11-15 13:42:54,753 [INFO] price_checker.py:457 - service_fee: $141 NZD
2024-11-15 13:42:54,753 [INFO] price_checker.py:457 - taxes: $130 NZD
2024-11-15 13:42:54,753 [INFO] price_checker.py:457 - total: 
2024-11-15 13:42:54,754 [INFO] price_checker.py:559 - ✓ 成功获取 02/12/2024 的价格信息
2024-11-15 13:42:54,754 [INFO] price_checker.py:565 - 根据最小入住要求(3晚)跳过接下来的 2 天
2024-11-15 13:42:54,754 [INFO] price_checker.py:553 - [8/37] 处理日期: 03/12/2024
2024-11-15 13:42:54,754 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-15 13:42:54,754 [INFO] price_checker.py:255 - 入住日期: 03/12/2024
2024-11-15 13:42:56,343 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 13:42:56,343 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:42:56,350 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:42:56,356 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 13:42:56,356 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 13:42:56,356 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:42:56,363 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:42:56,368 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 13:42:56,368 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 13:42:56,368 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:42:56,375 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:42:56,381 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 13:42:56,381 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 13:42:56,381 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:42:56,388 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:42:56,393 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 13:42:56,393 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 13:42:56,393 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:42:56,400 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:42:56,405 [INFO] price_checker.py:403 - 找到价格元素: $26 NZD (HTML: <span class="_1k4xcdh">$26&nbsp;NZD</span>)
2024-11-15 13:42:56,405 [INFO] price_checker.py:416 - ✓ 成功设置税费: $26 NZD
2024-11-15 13:42:56,405 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:42:59,874 [INFO] price_checker.py:271 - 开始检查日期 03/12/2024 的最小入住要求...
2024-11-15 13:42:59,877 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="3, Tuesday, December 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-03/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">3</div></td>
2024-11-15 13:42:59,886 [INFO] price_checker.py:158 - 找到日期: 03/12/2024
2024-11-15 13:42:59,886 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:43:01,041 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:43:02,333 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="3, Tuesday, December 2024. Selected check-in date There is a 3 night minimum stay requirement. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_h84ua7"><div class="_d82cel" style="transform: translateY(-100%) translateY(-12px);"><div class="_1mslrl4"><div class="_u7azij">3-night minimum</div><svg role="presentation" focusable="false" class="_8c7xtno" style="left: 9.5px;"><path class="_1s2t3cl" d="M0,0 20,0 10,10z"></path><path class="_c3dsty" d="M0,0 10,10 20,0"></path></svg></div></div><div class="_194zlzjz notranslate" data-testid="calendar-day-03/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">3</div></div></td>
2024-11-15 13:43:02,342 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:43:02,342 [INFO] price_checker.py:218 - - aria-label: 3, Tuesday, December 2024. Selected check-in date There is a 3 night minimum stay requirement. 
2024-11-15 13:43:02,342 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:43:02,342 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:43:02,342 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 3晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:43:02,342 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 3晚 (自动检测)
2024-11-15 13:43:02,342 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/837352260137971048?check_in=2024-12-03&check_out=2024-12-06&adults=3&children=0&infants=0
2024-11-15 13:43:03,125 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:43:03,125 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:43:06,430 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:43:06,437 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:43:06,443 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span class="_j1kt73">$231&nbsp;NZD</span>)
2024-11-15 13:43:06,443 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 13:43:06,443 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:43:06,450 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:43:06,455 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$231&nbsp;NZD</span></span>)
2024-11-15 13:43:06,455 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 13:43:06,460 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span class="_j1kt73">$231&nbsp;NZD</span>)
2024-11-15 13:43:06,460 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 13:43:06,466 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:43:06,466 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:43:06,466 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:43:06,466 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 13:43:06,466 [INFO] price_checker.py:450 - ✓ service_fee: $29 NZD
2024-11-15 13:43:06,466 [INFO] price_checker.py:450 - ✓ taxes: $26 NZD
2024-11-15 13:43:06,466 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:43:06,466 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:43:06,466 [INFO] price_checker.py:457 - check_in: 24/11/2024
2024-11-15 13:43:06,466 [INFO] price_checker.py:457 - check_out: 25/11/2024
2024-11-15 13:43:06,466 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 13:43:06,466 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:43:06,467 [INFO] price_checker.py:457 - nightly_price: $155 NZD
2024-11-15 13:43:06,467 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 13:43:06,467 [INFO] price_checker.py:457 - service_fee: $29 NZD
2024-11-15 13:43:06,467 [INFO] price_checker.py:457 - taxes: $26 NZD
2024-11-15 13:43:06,467 [INFO] price_checker.py:457 - total: 
2024-11-15 13:43:06,467 [INFO] price_checker.py:559 - ✓ 成功获取 24/11/2024 的价格信息
2024-11-15 13:43:06,467 [INFO] price_checker.py:553 - [7/72] 处理日期: 25/11/2024
2024-11-15 13:43:06,467 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 13:43:06,467 [INFO] price_checker.py:255 - 入住日期: 25/11/2024
2024-11-15 13:43:07,443 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:43:07,446 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:43:09,458 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:43:09,458 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:43:11,594 [INFO] price_checker.py:271 - 开始检查日期 25/11/2024 的最小入住要求...
2024-11-15 13:43:11,596 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_sl5yz7r" role="button" aria-disabled="false" aria-label="25, Monday, November 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-25/11/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">25</div></td>
2024-11-15 13:43:11,606 [INFO] price_checker.py:158 - 找到日期: 25/11/2024
2024-11-15 13:43:11,606 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:43:12,762 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:43:13,147 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:43:13,147 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:43:13,153 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:43:13,168 [INFO] price_checker.py:337 - 找到可见价格元素: $305 NZD 
night
$305 NZD per night
2024-11-15 13:43:13,174 [INFO] price_checker.py:350 - 找到每晚价格元素: $305 NZD 
night
$305 NZD per night
2024-11-15 13:43:13,174 [INFO] price_checker.py:356 - 成功解析折扣价格: $305 NZD
2024-11-15 13:43:13,174 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:43:13,179 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 13:43:13,682 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:43:13,690 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:43:13,700 [INFO] price_checker.py:403 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-15 13:43:13,700 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $90 NZD
2024-11-15 13:43:13,700 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:43:13,712 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:43:13,718 [INFO] price_checker.py:403 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-15 13:43:13,719 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $90 NZD
2024-11-15 13:43:13,719 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:43:14,050 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_5v1jabe" role="button" aria-disabled="true" aria-label="25, Monday, November 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1qis3zbj notranslate" data-testid="calendar-day-25/11/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">25</div></td>
2024-11-15 13:43:14,058 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:43:14,059 [INFO] price_checker.py:218 - - aria-label: 25, Monday, November 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 13:43:14,059 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:43:14,059 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:43:14,059 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:43:14,059 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 13:43:14,059 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2024-11-25&check_out=2024-11-26&adults=3&children=0&infants=0
2024-11-15 13:43:19,145 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:43:19,148 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:43:19,466 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:43:19,466 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:43:21,161 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:43:21,161 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:43:23,727 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:43:29,485 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:43:29,485 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:43:29,491 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:43:29,507 [INFO] price_checker.py:337 - 找到可见价格元素: $340 NZD 
$316 NZD 
night
$316 NZD per night, originally $340 NZD
2024-11-15 13:43:29,514 [INFO] price_checker.py:350 - 找到每晚价格元素: $340 NZD 
$316 NZD 
night
$316 NZD per night, originally $340 NZD
2024-11-15 13:43:29,514 [INFO] price_checker.py:356 - 成功解析折扣价格: $316 NZD
2024-11-15 13:43:29,514 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:43:29,520 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 13:43:30,023 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:43:30,032 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:43:30,040 [INFO] price_checker.py:403 - 找到价格元素: $59 NZD (HTML: <span class="_1k4xcdh">$59&nbsp;NZD</span>)
2024-11-15 13:43:30,041 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $59 NZD
2024-11-15 13:43:30,041 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:43:30,053 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:43:30,059 [INFO] price_checker.py:403 - 找到价格元素: $59 NZD (HTML: <span class="_1k4xcdh">$59&nbsp;NZD</span>)
2024-11-15 13:43:30,059 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $59 NZD
2024-11-15 13:43:30,059 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:43:30,066 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:43:30,071 [INFO] price_checker.py:403 - 找到价格元素: $141 NZD (HTML: <span class="_1k4xcdh">$141&nbsp;NZD</span>)
2024-11-15 13:43:30,071 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $141 NZD
2024-11-15 13:43:30,071 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:43:30,078 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:43:30,083 [INFO] price_checker.py:403 - 找到价格元素: $141 NZD (HTML: <span class="_1k4xcdh">$141&nbsp;NZD</span>)
2024-11-15 13:43:30,083 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $141 NZD
2024-11-15 13:43:30,083 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:43:30,090 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:43:30,095 [INFO] price_checker.py:403 - 找到价格元素: $130 NZD (HTML: <span class="_1k4xcdh">$130&nbsp;NZD</span>)
2024-11-15 13:43:30,095 [INFO] price_checker.py:416 - ✓ 成功设置税费: $130 NZD
2024-11-15 13:43:30,095 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:43:31,197 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:43:31,198 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:43:33,747 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:43:40,110 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:43:40,117 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:43:40,123 [INFO] price_checker.py:403 - 找到价格元素: $1,137 NZD (HTML: <span class="_j1kt73">$1,137&nbsp;NZD</span>)
2024-11-15 13:43:40,123 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,137 NZD
2024-11-15 13:43:40,123 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:43:40,130 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:43:40,135 [INFO] price_checker.py:403 - 找到价格元素: $1,137 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$1,137&nbsp;NZD</span></span>)
2024-11-15 13:43:40,135 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,137 NZD
2024-11-15 13:43:40,140 [INFO] price_checker.py:403 - 找到价格元素: $1,137 NZD (HTML: <span class="_j1kt73">$1,137&nbsp;NZD</span>)
2024-11-15 13:43:40,140 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,137 NZD
2024-11-15 13:43:40,144 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:43:40,144 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:43:40,145 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:43:40,145 [INFO] price_checker.py:450 - ✓ cleaning_fee: $59 NZD
2024-11-15 13:43:40,145 [INFO] price_checker.py:450 - ✓ service_fee: $141 NZD
2024-11-15 13:43:40,145 [INFO] price_checker.py:450 - ✓ taxes: $130 NZD
2024-11-15 13:43:40,145 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:43:40,145 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:43:40,145 [INFO] price_checker.py:457 - check_in: 03/12/2024
2024-11-15 13:43:40,145 [INFO] price_checker.py:457 - check_out: 06/12/2024
2024-11-15 13:43:40,145 [INFO] price_checker.py:457 - min_nights: 3
2024-11-15 13:43:40,145 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:43:40,145 [INFO] price_checker.py:457 - nightly_price: $316 NZD
2024-11-15 13:43:40,145 [INFO] price_checker.py:457 - cleaning_fee: $59 NZD
2024-11-15 13:43:40,145 [INFO] price_checker.py:457 - service_fee: $141 NZD
2024-11-15 13:43:40,145 [INFO] price_checker.py:457 - taxes: $130 NZD
2024-11-15 13:43:40,146 [INFO] price_checker.py:457 - total: 
2024-11-15 13:43:40,146 [INFO] price_checker.py:559 - ✓ 成功获取 03/12/2024 的价格信息
2024-11-15 13:43:40,146 [INFO] price_checker.py:565 - 根据最小入住要求(3晚)跳过接下来的 2 天
2024-11-15 13:43:40,146 [INFO] price_checker.py:573 - 已完成 10/37 个日期的处理
2024-11-15 13:43:41,214 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:43:41,214 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:43:41,221 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:43:41,237 [INFO] price_checker.py:337 - 找到可见价格元素: $155 NZD 
night
$155 NZD per night
2024-11-15 13:43:41,243 [INFO] price_checker.py:350 - 找到每晚价格元素: $155 NZD 
night
$155 NZD per night
2024-11-15 13:43:41,244 [INFO] price_checker.py:356 - 成功解析折扣价格: $155 NZD
2024-11-15 13:43:41,244 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:43:43,779 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:43:50,146 [INFO] price_checker.py:553 - [9/37] 处理日期: 04/12/2024
2024-11-15 13:43:50,146 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-15 13:43:50,146 [INFO] price_checker.py:255 - 入住日期: 04/12/2024
2024-11-15 13:43:51,261 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 13:43:51,261 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:43:51,270 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:43:51,277 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 13:43:51,277 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 13:43:51,278 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:43:51,284 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:43:51,290 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 13:43:51,290 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 13:43:51,290 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:43:51,296 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:43:51,301 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 13:43:51,301 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 13:43:51,301 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:43:51,309 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:43:51,313 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 13:43:51,313 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 13:43:51,314 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:43:51,321 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:43:51,327 [INFO] price_checker.py:403 - 找到价格元素: $26 NZD (HTML: <span class="_1k4xcdh">$26&nbsp;NZD</span>)
2024-11-15 13:43:51,327 [INFO] price_checker.py:416 - ✓ 成功设置税费: $26 NZD
2024-11-15 13:43:51,327 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:43:53,796 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:43:53,803 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:43:53,810 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span class="_j1kt73">$700&nbsp;NZD</span>)
2024-11-15 13:43:53,811 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 13:43:53,811 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:43:53,817 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:43:53,822 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$700&nbsp;NZD</span></span>)
2024-11-15 13:43:53,823 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 13:43:53,828 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span class="_j1kt73">$700&nbsp;NZD</span>)
2024-11-15 13:43:53,828 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 13:43:53,833 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:43:53,833 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:43:53,833 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:43:53,833 [INFO] price_checker.py:450 - ✓ cleaning_fee: $90 NZD
2024-11-15 13:43:53,833 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 13:43:53,834 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 13:43:53,834 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:43:53,834 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:43:53,834 [INFO] price_checker.py:457 - check_in: 21/11/2024
2024-11-15 13:43:53,834 [INFO] price_checker.py:457 - check_out: 23/11/2024
2024-11-15 13:43:53,834 [INFO] price_checker.py:457 - min_nights: 2
2024-11-15 13:43:53,834 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:43:53,834 [INFO] price_checker.py:457 - nightly_price: $305 NZD
2024-11-15 13:43:53,834 [INFO] price_checker.py:457 - cleaning_fee: $90 NZD
2024-11-15 13:43:53,834 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 13:43:53,834 [INFO] price_checker.py:457 - taxes: None
2024-11-15 13:43:53,835 [INFO] price_checker.py:457 - total: 
2024-11-15 13:43:53,835 [INFO] price_checker.py:559 - ✓ 成功获取 21/11/2024 的价格信息
2024-11-15 13:43:53,835 [INFO] price_checker.py:565 - 根据最小入住要求(2晚)跳过接下来的 1 天
2024-11-15 13:43:53,835 [INFO] price_checker.py:553 - [6/39] 处理日期: 22/11/2024
2024-11-15 13:43:53,835 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/43435162
2024-11-15 13:43:53,835 [INFO] price_checker.py:255 - 入住日期: 22/11/2024
2024-11-15 13:43:55,276 [INFO] price_checker.py:271 - 开始检查日期 04/12/2024 的最小入住要求...
2024-11-15 13:43:55,279 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="4, Wednesday, December 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-04/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">4</div></td>
2024-11-15 13:43:55,289 [INFO] price_checker.py:158 - 找到日期: 04/12/2024
2024-11-15 13:43:55,289 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:43:56,433 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:43:57,725 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="4, Wednesday, December 2024. Selected check-in date There is a 3 night minimum stay requirement. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_h84ua7"><div class="_d82cel" style="transform: translate(-50%, -100%) translate(20.5px, -12px);"><div class="_1mslrl4"><div class="_u7azij">3-night minimum</div><svg role="presentation" focusable="false" class="_1mjga4hj"><path class="_1s2t3cl" d="M0,0 20,0 10,10z"></path><path class="_c3dsty" d="M0,0 10,10 20,0"></path></svg></div></div><div class="_194zlzjz notranslate" data-testid="calendar-day-04/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">4</div></div></td>
2024-11-15 13:43:57,734 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:43:57,734 [INFO] price_checker.py:218 - - aria-label: 4, Wednesday, December 2024. Selected check-in date There is a 3 night minimum stay requirement. 
2024-11-15 13:43:57,734 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:43:57,734 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:43:57,734 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 3晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:43:57,734 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 3晚 (自动检测)
2024-11-15 13:43:57,735 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/837352260137971048?check_in=2024-12-04&check_out=2024-12-07&adults=3&children=0&infants=0
2024-11-15 13:43:58,960 [INFO] price_checker.py:271 - 开始检查日期 22/11/2024 的最小入住要求...
2024-11-15 13:43:58,964 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="22, Friday, November 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-22/11/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">22</div></td>
2024-11-15 13:43:58,977 [INFO] price_checker.py:158 - 找到日期: 22/11/2024
2024-11-15 13:43:58,978 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:44:00,125 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:44:01,338 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:44:01,345 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:44:01,352 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span class="_j1kt73">$231&nbsp;NZD</span>)
2024-11-15 13:44:01,352 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 13:44:01,352 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:44:01,360 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:44:01,365 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$231&nbsp;NZD</span></span>)
2024-11-15 13:44:01,365 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 13:44:01,371 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span class="_j1kt73">$231&nbsp;NZD</span>)
2024-11-15 13:44:01,371 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 13:44:01,377 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:44:01,377 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:44:01,377 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:44:01,377 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 13:44:01,377 [INFO] price_checker.py:450 - ✓ service_fee: $29 NZD
2024-11-15 13:44:01,377 [INFO] price_checker.py:450 - ✓ taxes: $26 NZD
2024-11-15 13:44:01,377 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:44:01,377 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:44:01,377 [INFO] price_checker.py:457 - check_in: 25/11/2024
2024-11-15 13:44:01,377 [INFO] price_checker.py:457 - check_out: 26/11/2024
2024-11-15 13:44:01,377 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 13:44:01,377 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:44:01,377 [INFO] price_checker.py:457 - nightly_price: $155 NZD
2024-11-15 13:44:01,378 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 13:44:01,378 [INFO] price_checker.py:457 - service_fee: $29 NZD
2024-11-15 13:44:01,378 [INFO] price_checker.py:457 - taxes: $26 NZD
2024-11-15 13:44:01,378 [INFO] price_checker.py:457 - total: 
2024-11-15 13:44:01,378 [INFO] price_checker.py:559 - ✓ 成功获取 25/11/2024 的价格信息
2024-11-15 13:44:01,378 [INFO] price_checker.py:553 - [8/72] 处理日期: 26/11/2024
2024-11-15 13:44:01,378 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 13:44:01,378 [INFO] price_checker.py:255 - 入住日期: 26/11/2024
2024-11-15 13:44:01,421 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="22, Friday, November 2024. Selected check-in date There is a 2 night minimum stay requirement. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_h84ua7"><div class="_d82cel" style="transform: translate(-50%, -100%) translate(20.5px, -12px);"><div class="_1mslrl4"><div class="_u7azij">2-night minimum</div><svg role="presentation" focusable="false" class="_1mjga4hj"><path class="_1s2t3cl" d="M0,0 20,0 10,10z"></path><path class="_c3dsty" d="M0,0 10,10 20,0"></path></svg></div></div><div class="_194zlzjz notranslate" data-testid="calendar-day-22/11/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">22</div></div></td>
2024-11-15 13:44:01,431 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:44:01,432 [INFO] price_checker.py:218 - - aria-label: 22, Friday, November 2024. Selected check-in date There is a 2 night minimum stay requirement. 
2024-11-15 13:44:01,432 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:44:01,432 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:44:01,432 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 2晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:44:01,432 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 2晚 (自动检测)
2024-11-15 13:44:01,432 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/43435162?check_in=2024-11-22&check_out=2024-11-24&adults=3&children=0&infants=0
2024-11-15 13:44:02,821 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:44:02,824 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:44:04,835 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:44:04,836 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:44:06,531 [INFO] price_checker.py:271 - 开始检查日期 26/11/2024 的最小入住要求...
2024-11-15 13:44:06,534 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="26, Tuesday, November 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-26/11/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">26</div></td>
2024-11-15 13:44:06,544 [INFO] price_checker.py:158 - 找到日期: 26/11/2024
2024-11-15 13:44:06,545 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:44:06,570 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:44:06,574 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:44:07,679 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:44:08,586 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:44:08,586 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:44:08,966 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="26, Tuesday, November 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_ox7af8h notranslate" data-testid="calendar-day-26/11/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">26</div></td>
2024-11-15 13:44:08,974 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:44:08,974 [INFO] price_checker.py:218 - - aria-label: 26, Tuesday, November 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 13:44:08,974 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:44:08,974 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:44:08,974 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:44:08,974 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 13:44:08,974 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2024-11-26&check_out=2024-11-27&adults=3&children=0&infants=0
2024-11-15 13:44:14,066 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:44:14,069 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:44:14,850 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:44:14,851 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:44:16,080 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:44:16,080 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:44:18,598 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:44:18,598 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:44:24,872 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:44:24,873 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:44:24,878 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:44:24,894 [INFO] price_checker.py:337 - 找到可见价格元素: $340 NZD 
$316 NZD 
night
$316 NZD per night, originally $340 NZD
2024-11-15 13:44:24,900 [INFO] price_checker.py:350 - 找到每晚价格元素: $340 NZD 
$316 NZD 
night
$316 NZD per night, originally $340 NZD
2024-11-15 13:44:24,900 [INFO] price_checker.py:356 - 成功解析折扣价格: $316 NZD
2024-11-15 13:44:24,900 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:44:24,908 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 13:44:25,411 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:44:25,418 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:44:25,424 [INFO] price_checker.py:403 - 找到价格元素: $59 NZD (HTML: <span class="_1k4xcdh">$59&nbsp;NZD</span>)
2024-11-15 13:44:25,424 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $59 NZD
2024-11-15 13:44:25,424 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:44:25,431 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:44:25,436 [INFO] price_checker.py:403 - 找到价格元素: $59 NZD (HTML: <span class="_1k4xcdh">$59&nbsp;NZD</span>)
2024-11-15 13:44:25,436 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $59 NZD
2024-11-15 13:44:25,436 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:44:25,443 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:44:25,448 [INFO] price_checker.py:403 - 找到价格元素: $141 NZD (HTML: <span class="_1k4xcdh">$141&nbsp;NZD</span>)
2024-11-15 13:44:25,449 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $141 NZD
2024-11-15 13:44:25,449 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:44:25,458 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:44:25,464 [INFO] price_checker.py:403 - 找到价格元素: $141 NZD (HTML: <span class="_1k4xcdh">$141&nbsp;NZD</span>)
2024-11-15 13:44:25,464 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $141 NZD
2024-11-15 13:44:25,465 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:44:25,472 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:44:25,478 [INFO] price_checker.py:403 - 找到价格元素: $130 NZD (HTML: <span class="_1k4xcdh">$130&nbsp;NZD</span>)
2024-11-15 13:44:25,479 [INFO] price_checker.py:416 - ✓ 成功设置税费: $130 NZD
2024-11-15 13:44:25,479 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:44:26,120 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:44:26,120 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:44:28,632 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:44:28,632 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:44:28,638 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:44:28,653 [INFO] price_checker.py:337 - 找到可见价格元素: $305 NZD 
night
$305 NZD per night
2024-11-15 13:44:28,659 [INFO] price_checker.py:350 - 找到每晚价格元素: $305 NZD 
night
$305 NZD per night
2024-11-15 13:44:28,659 [INFO] price_checker.py:356 - 成功解析折扣价格: $305 NZD
2024-11-15 13:44:28,659 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:44:28,665 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 13:44:29,168 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:44:29,176 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:44:29,182 [INFO] price_checker.py:403 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-15 13:44:29,183 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $90 NZD
2024-11-15 13:44:29,183 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:44:29,189 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:44:29,195 [INFO] price_checker.py:403 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-15 13:44:29,195 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $90 NZD
2024-11-15 13:44:29,195 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:44:35,533 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:44:35,540 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:44:35,546 [INFO] price_checker.py:403 - 找到价格元素: $1,137 NZD (HTML: <span class="_j1kt73">$1,137&nbsp;NZD</span>)
2024-11-15 13:44:35,546 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,137 NZD
2024-11-15 13:44:35,546 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:44:35,553 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:44:35,558 [INFO] price_checker.py:403 - 找到价格元素: $1,137 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$1,137&nbsp;NZD</span></span>)
2024-11-15 13:44:35,558 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,137 NZD
2024-11-15 13:44:35,564 [INFO] price_checker.py:403 - 找到价格元素: $1,137 NZD (HTML: <span class="_j1kt73">$1,137&nbsp;NZD</span>)
2024-11-15 13:44:35,564 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,137 NZD
2024-11-15 13:44:35,569 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:44:35,569 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:44:35,569 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:44:35,569 [INFO] price_checker.py:450 - ✓ cleaning_fee: $59 NZD
2024-11-15 13:44:35,569 [INFO] price_checker.py:450 - ✓ service_fee: $141 NZD
2024-11-15 13:44:35,569 [INFO] price_checker.py:450 - ✓ taxes: $130 NZD
2024-11-15 13:44:35,569 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:44:35,569 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:44:35,570 [INFO] price_checker.py:457 - check_in: 04/12/2024
2024-11-15 13:44:35,570 [INFO] price_checker.py:457 - check_out: 07/12/2024
2024-11-15 13:44:35,570 [INFO] price_checker.py:457 - min_nights: 3
2024-11-15 13:44:35,570 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:44:35,570 [INFO] price_checker.py:457 - nightly_price: $316 NZD
2024-11-15 13:44:35,570 [INFO] price_checker.py:457 - cleaning_fee: $59 NZD
2024-11-15 13:44:35,570 [INFO] price_checker.py:457 - service_fee: $141 NZD
2024-11-15 13:44:35,570 [INFO] price_checker.py:457 - taxes: $130 NZD
2024-11-15 13:44:35,570 [INFO] price_checker.py:457 - total: 
2024-11-15 13:44:35,570 [INFO] price_checker.py:559 - ✓ 成功获取 04/12/2024 的价格信息
2024-11-15 13:44:35,570 [INFO] price_checker.py:565 - 根据最小入住要求(3晚)跳过接下来的 2 天
2024-11-15 13:44:35,570 [INFO] price_checker.py:553 - [10/37] 处理日期: 05/12/2024
2024-11-15 13:44:35,571 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-15 13:44:35,571 [INFO] price_checker.py:255 - 入住日期: 05/12/2024
2024-11-15 13:44:36,172 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:44:36,173 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:44:36,179 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:44:36,196 [INFO] price_checker.py:337 - 找到可见价格元素: $155 NZD 
night
$155 NZD per night
2024-11-15 13:44:36,201 [INFO] price_checker.py:350 - 找到每晚价格元素: $155 NZD 
night
$155 NZD per night
2024-11-15 13:44:36,201 [INFO] price_checker.py:356 - 成功解析折扣价格: $155 NZD
2024-11-15 13:44:36,201 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:44:39,249 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:44:40,688 [INFO] price_checker.py:271 - 开始检查日期 05/12/2024 的最小入住要求...
2024-11-15 13:44:40,691 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="5, Thursday, December 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-05/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">5</div></td>
2024-11-15 13:44:40,700 [INFO] price_checker.py:158 - 找到日期: 05/12/2024
2024-11-15 13:44:40,700 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:44:41,823 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:44:43,126 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="5, Thursday, December 2024. Selected check-in date There is a 3 night minimum stay requirement. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_h84ua7"><div class="_d82cel" style="transform: translate(-50%, -100%) translate(20.5px, -12px);"><div class="_1mslrl4"><div class="_u7azij">3-night minimum</div><svg role="presentation" focusable="false" class="_1mjga4hj"><path class="_1s2t3cl" d="M0,0 20,0 10,10z"></path><path class="_c3dsty" d="M0,0 10,10 20,0"></path></svg></div></div><div class="_194zlzjz notranslate" data-testid="calendar-day-05/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">5</div></div></td>
2024-11-15 13:44:43,135 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:44:43,135 [INFO] price_checker.py:218 - - aria-label: 5, Thursday, December 2024. Selected check-in date There is a 3 night minimum stay requirement. 
2024-11-15 13:44:43,135 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:44:43,135 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:44:43,135 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 3晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:44:43,135 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 3晚 (自动检测)
2024-11-15 13:44:43,135 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/837352260137971048?check_in=2024-12-05&check_out=2024-12-08&adults=3&children=0&infants=0
2024-11-15 13:44:46,217 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 13:44:46,217 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:44:46,224 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:44:46,231 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 13:44:46,231 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 13:44:46,231 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:44:46,238 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:44:46,243 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 13:44:46,243 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 13:44:46,243 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:44:46,250 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:44:46,255 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 13:44:46,255 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 13:44:46,255 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:44:46,262 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:44:46,267 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 13:44:46,268 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 13:44:46,268 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:44:46,274 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:44:46,280 [INFO] price_checker.py:403 - 找到价格元素: $26 NZD (HTML: <span class="_1k4xcdh">$26&nbsp;NZD</span>)
2024-11-15 13:44:46,280 [INFO] price_checker.py:416 - ✓ 成功设置税费: $26 NZD
2024-11-15 13:44:46,280 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:44:48,224 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:44:48,226 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:44:49,264 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:44:50,238 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:44:50,238 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:44:56,308 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:44:56,315 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:44:56,320 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span class="_j1kt73">$231&nbsp;NZD</span>)
2024-11-15 13:44:56,321 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 13:44:56,321 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:44:56,328 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:44:56,332 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$231&nbsp;NZD</span></span>)
2024-11-15 13:44:56,333 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 13:44:56,338 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span class="_j1kt73">$231&nbsp;NZD</span>)
2024-11-15 13:44:56,338 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 13:44:56,342 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:44:56,343 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:44:56,343 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:44:56,343 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 13:44:56,343 [INFO] price_checker.py:450 - ✓ service_fee: $29 NZD
2024-11-15 13:44:56,343 [INFO] price_checker.py:450 - ✓ taxes: $26 NZD
2024-11-15 13:44:56,343 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:44:56,343 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:44:56,343 [INFO] price_checker.py:457 - check_in: 26/11/2024
2024-11-15 13:44:56,343 [INFO] price_checker.py:457 - check_out: 27/11/2024
2024-11-15 13:44:56,343 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 13:44:56,343 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:44:56,343 [INFO] price_checker.py:457 - nightly_price: $155 NZD
2024-11-15 13:44:56,343 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 13:44:56,344 [INFO] price_checker.py:457 - service_fee: $29 NZD
2024-11-15 13:44:56,344 [INFO] price_checker.py:457 - taxes: $26 NZD
2024-11-15 13:44:56,344 [INFO] price_checker.py:457 - total: 
2024-11-15 13:44:56,344 [INFO] price_checker.py:559 - ✓ 成功获取 26/11/2024 的价格信息
2024-11-15 13:44:56,344 [INFO] price_checker.py:553 - [9/72] 处理日期: 27/11/2024
2024-11-15 13:44:56,344 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 13:44:56,344 [INFO] price_checker.py:255 - 入住日期: 27/11/2024
2024-11-15 13:44:59,291 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:45:00,265 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:45:00,265 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:45:01,468 [INFO] price_checker.py:271 - 开始检查日期 27/11/2024 的最小入住要求...
2024-11-15 13:45:01,471 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="27, Wednesday, November 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-27/11/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">27</div></td>
2024-11-15 13:45:01,481 [INFO] price_checker.py:158 - 找到日期: 27/11/2024
2024-11-15 13:45:01,481 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:45:02,609 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:45:03,896 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="27, Wednesday, November 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_ox7af8h notranslate" data-testid="calendar-day-27/11/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">27</div></td>
2024-11-15 13:45:03,904 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:45:03,904 [INFO] price_checker.py:218 - - aria-label: 27, Wednesday, November 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 13:45:03,904 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:45:03,904 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:45:03,904 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:45:03,904 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 13:45:03,905 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2024-11-27&check_out=2024-11-28&adults=3&children=0&infants=0
2024-11-15 13:45:09,007 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:45:09,009 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:45:09,300 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:45:09,306 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:45:09,314 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span class="_j1kt73">$700&nbsp;NZD</span>)
2024-11-15 13:45:09,315 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 13:45:09,315 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:45:09,321 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:45:09,326 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$700&nbsp;NZD</span></span>)
2024-11-15 13:45:09,326 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 13:45:09,332 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span class="_j1kt73">$700&nbsp;NZD</span>)
2024-11-15 13:45:09,332 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 13:45:09,337 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:45:09,337 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:45:09,337 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:45:09,337 [INFO] price_checker.py:450 - ✓ cleaning_fee: $90 NZD
2024-11-15 13:45:09,337 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 13:45:09,337 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 13:45:09,337 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:45:09,337 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:45:09,337 [INFO] price_checker.py:457 - check_in: 22/11/2024
2024-11-15 13:45:09,337 [INFO] price_checker.py:457 - check_out: 24/11/2024
2024-11-15 13:45:09,337 [INFO] price_checker.py:457 - min_nights: 2
2024-11-15 13:45:09,337 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:45:09,338 [INFO] price_checker.py:457 - nightly_price: $305 NZD
2024-11-15 13:45:09,338 [INFO] price_checker.py:457 - cleaning_fee: $90 NZD
2024-11-15 13:45:09,338 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 13:45:09,338 [INFO] price_checker.py:457 - taxes: None
2024-11-15 13:45:09,338 [INFO] price_checker.py:457 - total: 
2024-11-15 13:45:09,338 [INFO] price_checker.py:559 - ✓ 成功获取 22/11/2024 的价格信息
2024-11-15 13:45:09,338 [INFO] price_checker.py:565 - 根据最小入住要求(2晚)跳过接下来的 1 天
2024-11-15 13:45:09,338 [INFO] price_checker.py:553 - [7/39] 处理日期: 23/11/2024
2024-11-15 13:45:09,338 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/43435162
2024-11-15 13:45:09,338 [INFO] price_checker.py:255 - 入住日期: 23/11/2024
2024-11-15 13:45:10,283 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:45:10,283 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:45:10,290 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:45:10,308 [INFO] price_checker.py:337 - 找到可见价格元素: $340 NZD 
$316 NZD 
night
$316 NZD per night, originally $340 NZD
2024-11-15 13:45:10,315 [INFO] price_checker.py:350 - 找到每晚价格元素: $340 NZD 
$316 NZD 
night
$316 NZD per night, originally $340 NZD
2024-11-15 13:45:10,315 [INFO] price_checker.py:356 - 成功解析折扣价格: $316 NZD
2024-11-15 13:45:10,315 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:45:10,320 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 13:45:10,823 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:45:10,831 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:45:10,838 [INFO] price_checker.py:403 - 找到价格元素: $59 NZD (HTML: <span class="_1k4xcdh">$59&nbsp;NZD</span>)
2024-11-15 13:45:10,838 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $59 NZD
2024-11-15 13:45:10,838 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:45:10,845 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:45:10,850 [INFO] price_checker.py:403 - 找到价格元素: $59 NZD (HTML: <span class="_1k4xcdh">$59&nbsp;NZD</span>)
2024-11-15 13:45:10,850 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $59 NZD
2024-11-15 13:45:10,850 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:45:10,857 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:45:10,862 [INFO] price_checker.py:403 - 找到价格元素: $141 NZD (HTML: <span class="_1k4xcdh">$141&nbsp;NZD</span>)
2024-11-15 13:45:10,863 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $141 NZD
2024-11-15 13:45:10,863 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:45:10,870 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:45:10,875 [INFO] price_checker.py:403 - 找到价格元素: $141 NZD (HTML: <span class="_1k4xcdh">$141&nbsp;NZD</span>)
2024-11-15 13:45:10,875 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $141 NZD
2024-11-15 13:45:10,875 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:45:10,882 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:45:10,887 [INFO] price_checker.py:403 - 找到价格元素: $130 NZD (HTML: <span class="_1k4xcdh">$130&nbsp;NZD</span>)
2024-11-15 13:45:10,887 [INFO] price_checker.py:416 - ✓ 成功设置税费: $130 NZD
2024-11-15 13:45:10,887 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:45:11,021 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:45:11,021 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:45:14,459 [INFO] price_checker.py:271 - 开始检查日期 23/11/2024 的最小入住要求...
2024-11-15 13:45:14,461 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="23, Saturday, November 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-23/11/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">23</div></td>
2024-11-15 13:45:14,471 [INFO] price_checker.py:158 - 找到日期: 23/11/2024
2024-11-15 13:45:14,471 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:45:15,614 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:45:16,901 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="23, Saturday, November 2024. Selected check-in date There is a 2 night minimum stay requirement. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_h84ua7"><div class="_d82cel" style="transform: translate(-100%, -100%) translate(41px, -12px);"><div class="_1mslrl4"><div class="_u7azij">2-night minimum</div><svg role="presentation" focusable="false" class="_8c7xtno" style="right: 9.5px;"><path class="_1s2t3cl" d="M0,0 20,0 10,10z"></path><path class="_c3dsty" d="M0,0 10,10 20,0"></path></svg></div></div><div class="_194zlzjz notranslate" data-testid="calendar-day-23/11/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">23</div></div></td>
2024-11-15 13:45:16,909 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:45:16,909 [INFO] price_checker.py:218 - - aria-label: 23, Saturday, November 2024. Selected check-in date There is a 2 night minimum stay requirement. 
2024-11-15 13:45:16,910 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:45:16,910 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:45:16,910 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 2晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:45:16,910 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 2晚 (自动检测)
2024-11-15 13:45:16,910 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/43435162?check_in=2024-11-23&check_out=2024-11-25&adults=3&children=0&infants=0
2024-11-15 13:45:20,907 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:45:20,914 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:45:20,919 [INFO] price_checker.py:403 - 找到价格元素: $1,137 NZD (HTML: <span class="_j1kt73">$1,137&nbsp;NZD</span>)
2024-11-15 13:45:20,919 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,137 NZD
2024-11-15 13:45:20,919 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:45:20,926 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:45:20,931 [INFO] price_checker.py:403 - 找到价格元素: $1,137 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$1,137&nbsp;NZD</span></span>)
2024-11-15 13:45:20,931 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,137 NZD
2024-11-15 13:45:20,936 [INFO] price_checker.py:403 - 找到价格元素: $1,137 NZD (HTML: <span class="_j1kt73">$1,137&nbsp;NZD</span>)
2024-11-15 13:45:20,937 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,137 NZD
2024-11-15 13:45:20,941 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:45:20,942 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:45:20,942 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:45:20,942 [INFO] price_checker.py:450 - ✓ cleaning_fee: $59 NZD
2024-11-15 13:45:20,942 [INFO] price_checker.py:450 - ✓ service_fee: $141 NZD
2024-11-15 13:45:20,942 [INFO] price_checker.py:450 - ✓ taxes: $130 NZD
2024-11-15 13:45:20,942 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:45:20,942 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:45:20,942 [INFO] price_checker.py:457 - check_in: 05/12/2024
2024-11-15 13:45:20,942 [INFO] price_checker.py:457 - check_out: 08/12/2024
2024-11-15 13:45:20,942 [INFO] price_checker.py:457 - min_nights: 3
2024-11-15 13:45:20,942 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:45:20,942 [INFO] price_checker.py:457 - nightly_price: $316 NZD
2024-11-15 13:45:20,943 [INFO] price_checker.py:457 - cleaning_fee: $59 NZD
2024-11-15 13:45:20,943 [INFO] price_checker.py:457 - service_fee: $141 NZD
2024-11-15 13:45:20,943 [INFO] price_checker.py:457 - taxes: $130 NZD
2024-11-15 13:45:20,943 [INFO] price_checker.py:457 - total: 
2024-11-15 13:45:20,943 [INFO] price_checker.py:559 - ✓ 成功获取 05/12/2024 的价格信息
2024-11-15 13:45:20,943 [INFO] price_checker.py:565 - 根据最小入住要求(3晚)跳过接下来的 2 天
2024-11-15 13:45:20,943 [INFO] price_checker.py:553 - [11/37] 处理日期: 06/12/2024
2024-11-15 13:45:20,943 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-15 13:45:20,943 [INFO] price_checker.py:255 - 入住日期: 06/12/2024
2024-11-15 13:45:21,048 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:45:21,048 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:45:22,018 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:45:22,032 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:45:24,044 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:45:24,044 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:45:26,062 [INFO] price_checker.py:271 - 开始检查日期 06/12/2024 的最小入住要求...
2024-11-15 13:45:26,065 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="6, Friday, December 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-06/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">6</div></td>
2024-11-15 13:45:26,075 [INFO] price_checker.py:158 - 找到日期: 06/12/2024
2024-11-15 13:45:26,075 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:45:27,195 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:45:28,481 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="6, Friday, December 2024. Selected check-in date There is a 3 night minimum stay requirement. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_h84ua7"><div class="_d82cel" style="transform: translate(-50%, -100%) translate(20.5px, -12px);"><div class="_1mslrl4"><div class="_u7azij">3-night minimum</div><svg role="presentation" focusable="false" class="_1mjga4hj"><path class="_1s2t3cl" d="M0,0 20,0 10,10z"></path><path class="_c3dsty" d="M0,0 10,10 20,0"></path></svg></div></div><div class="_194zlzjz notranslate" data-testid="calendar-day-06/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">6</div></div></td>
2024-11-15 13:45:28,490 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:45:28,490 [INFO] price_checker.py:218 - - aria-label: 6, Friday, December 2024. Selected check-in date There is a 3 night minimum stay requirement. 
2024-11-15 13:45:28,490 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:45:28,490 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:45:28,490 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 3晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:45:28,491 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 3晚 (自动检测)
2024-11-15 13:45:28,491 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/837352260137971048?check_in=2024-12-06&check_out=2024-12-09&adults=3&children=0&infants=0
2024-11-15 13:45:31,108 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:45:31,108 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:45:31,114 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:45:31,131 [INFO] price_checker.py:337 - 找到可见价格元素: $155 NZD 
night
$155 NZD per night
2024-11-15 13:45:31,137 [INFO] price_checker.py:350 - 找到每晚价格元素: $155 NZD 
night
$155 NZD per night
2024-11-15 13:45:31,137 [INFO] price_checker.py:356 - 成功解析折扣价格: $155 NZD
2024-11-15 13:45:31,137 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:45:33,584 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:45:33,587 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:45:34,069 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:45:34,069 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:45:35,598 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:45:35,598 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:45:41,165 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 13:45:41,165 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:45:41,172 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:45:41,179 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 13:45:41,179 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 13:45:41,179 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:45:41,186 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:45:41,191 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 13:45:41,191 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 13:45:41,191 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:45:41,197 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:45:41,203 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 13:45:41,203 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 13:45:41,203 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:45:41,210 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:45:41,215 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 13:45:41,215 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 13:45:41,215 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:45:41,222 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:45:41,227 [INFO] price_checker.py:403 - 找到价格元素: $26 NZD (HTML: <span class="_1k4xcdh">$26&nbsp;NZD</span>)
2024-11-15 13:45:41,227 [INFO] price_checker.py:416 - ✓ 成功设置税费: $26 NZD
2024-11-15 13:45:41,227 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:45:44,094 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:45:44,094 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:45:44,100 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:45:44,118 [INFO] price_checker.py:337 - 找到可见价格元素: $305 NZD 
night
$305 NZD per night
2024-11-15 13:45:44,124 [INFO] price_checker.py:350 - 找到每晚价格元素: $305 NZD 
night
$305 NZD per night
2024-11-15 13:45:44,124 [INFO] price_checker.py:356 - 成功解析折扣价格: $305 NZD
2024-11-15 13:45:44,124 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:45:44,130 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 13:45:44,633 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:45:44,640 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:45:44,647 [INFO] price_checker.py:403 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-15 13:45:44,647 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $90 NZD
2024-11-15 13:45:44,647 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:45:44,654 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:45:44,660 [INFO] price_checker.py:403 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-15 13:45:44,660 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $90 NZD
2024-11-15 13:45:44,660 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:45:45,638 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:45:45,638 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:45:51,265 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:45:51,273 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:45:51,279 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span class="_j1kt73">$231&nbsp;NZD</span>)
2024-11-15 13:45:51,279 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 13:45:51,279 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:45:51,287 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:45:51,293 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$231&nbsp;NZD</span></span>)
2024-11-15 13:45:51,293 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 13:45:51,299 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span class="_j1kt73">$231&nbsp;NZD</span>)
2024-11-15 13:45:51,299 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 13:45:51,305 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:45:51,305 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:45:51,305 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:45:51,305 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 13:45:51,305 [INFO] price_checker.py:450 - ✓ service_fee: $29 NZD
2024-11-15 13:45:51,305 [INFO] price_checker.py:450 - ✓ taxes: $26 NZD
2024-11-15 13:45:51,305 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:45:51,305 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:45:51,305 [INFO] price_checker.py:457 - check_in: 27/11/2024
2024-11-15 13:45:51,305 [INFO] price_checker.py:457 - check_out: 28/11/2024
2024-11-15 13:45:51,305 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 13:45:51,306 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:45:51,306 [INFO] price_checker.py:457 - nightly_price: $155 NZD
2024-11-15 13:45:51,306 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 13:45:51,306 [INFO] price_checker.py:457 - service_fee: $29 NZD
2024-11-15 13:45:51,306 [INFO] price_checker.py:457 - taxes: $26 NZD
2024-11-15 13:45:51,306 [INFO] price_checker.py:457 - total: 
2024-11-15 13:45:51,306 [INFO] price_checker.py:559 - ✓ 成功获取 27/11/2024 的价格信息
2024-11-15 13:45:51,306 [INFO] price_checker.py:553 - [10/72] 处理日期: 28/11/2024
2024-11-15 13:45:51,306 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 13:45:51,306 [INFO] price_checker.py:255 - 入住日期: 28/11/2024
2024-11-15 13:45:54,688 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:45:55,651 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:45:55,651 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:45:55,657 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:45:55,673 [INFO] price_checker.py:337 - 找到可见价格元素: $340 NZD 
$316 NZD 
night
$316 NZD per night, originally $340 NZD
2024-11-15 13:45:55,679 [INFO] price_checker.py:350 - 找到每晚价格元素: $340 NZD 
$316 NZD 
night
$316 NZD per night, originally $340 NZD
2024-11-15 13:45:55,680 [INFO] price_checker.py:356 - 成功解析折扣价格: $316 NZD
2024-11-15 13:45:55,680 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:45:55,686 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 13:45:56,190 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:45:56,199 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:45:56,207 [INFO] price_checker.py:403 - 找到价格元素: $59 NZD (HTML: <span class="_1k4xcdh">$59&nbsp;NZD</span>)
2024-11-15 13:45:56,207 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $59 NZD
2024-11-15 13:45:56,207 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:45:56,214 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:45:56,219 [INFO] price_checker.py:403 - 找到价格元素: $59 NZD (HTML: <span class="_1k4xcdh">$59&nbsp;NZD</span>)
2024-11-15 13:45:56,219 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $59 NZD
2024-11-15 13:45:56,219 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:45:56,226 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:45:56,231 [INFO] price_checker.py:403 - 找到价格元素: $141 NZD (HTML: <span class="_1k4xcdh">$141&nbsp;NZD</span>)
2024-11-15 13:45:56,231 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $141 NZD
2024-11-15 13:45:56,231 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:45:56,237 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:45:56,243 [INFO] price_checker.py:403 - 找到价格元素: $141 NZD (HTML: <span class="_1k4xcdh">$141&nbsp;NZD</span>)
2024-11-15 13:45:56,243 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $141 NZD
2024-11-15 13:45:56,243 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:45:56,249 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:45:56,254 [INFO] price_checker.py:403 - 找到价格元素: $130 NZD (HTML: <span class="_1k4xcdh">$130&nbsp;NZD</span>)
2024-11-15 13:45:56,254 [INFO] price_checker.py:416 - ✓ 成功设置税费: $130 NZD
2024-11-15 13:45:56,254 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:45:56,431 [INFO] price_checker.py:271 - 开始检查日期 28/11/2024 的最小入住要求...
2024-11-15 13:45:56,433 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="28, Thursday, November 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-28/11/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">28</div></td>
2024-11-15 13:45:56,444 [INFO] price_checker.py:158 - 找到日期: 28/11/2024
2024-11-15 13:45:56,444 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:45:57,564 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:45:58,858 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="28, Thursday, November 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_ox7af8h notranslate" data-testid="calendar-day-28/11/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">28</div></td>
2024-11-15 13:45:58,866 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:45:58,867 [INFO] price_checker.py:218 - - aria-label: 28, Thursday, November 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 13:45:58,867 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:45:58,867 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:45:58,867 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:45:58,867 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 13:45:58,867 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2024-11-28&check_out=2024-11-29&adults=3&children=0&infants=0
2024-11-15 13:46:03,963 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:46:03,966 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:46:04,750 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:46:05,978 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:46:05,978 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:46:06,260 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:46:06,267 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:46:06,273 [INFO] price_checker.py:403 - 找到价格元素: $1,137 NZD (HTML: <span class="_j1kt73">$1,137&nbsp;NZD</span>)
2024-11-15 13:46:06,273 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,137 NZD
2024-11-15 13:46:06,273 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:46:06,279 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:46:06,284 [INFO] price_checker.py:403 - 找到价格元素: $1,137 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$1,137&nbsp;NZD</span></span>)
2024-11-15 13:46:06,284 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,137 NZD
2024-11-15 13:46:06,290 [INFO] price_checker.py:403 - 找到价格元素: $1,137 NZD (HTML: <span class="_j1kt73">$1,137&nbsp;NZD</span>)
2024-11-15 13:46:06,290 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,137 NZD
2024-11-15 13:46:06,295 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:46:06,295 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:46:06,295 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:46:06,296 [INFO] price_checker.py:450 - ✓ cleaning_fee: $59 NZD
2024-11-15 13:46:06,296 [INFO] price_checker.py:450 - ✓ service_fee: $141 NZD
2024-11-15 13:46:06,296 [INFO] price_checker.py:450 - ✓ taxes: $130 NZD
2024-11-15 13:46:06,296 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:46:06,296 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:46:06,296 [INFO] price_checker.py:457 - check_in: 06/12/2024
2024-11-15 13:46:06,296 [INFO] price_checker.py:457 - check_out: 09/12/2024
2024-11-15 13:46:06,296 [INFO] price_checker.py:457 - min_nights: 3
2024-11-15 13:46:06,296 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:46:06,296 [INFO] price_checker.py:457 - nightly_price: $316 NZD
2024-11-15 13:46:06,296 [INFO] price_checker.py:457 - cleaning_fee: $59 NZD
2024-11-15 13:46:06,296 [INFO] price_checker.py:457 - service_fee: $141 NZD
2024-11-15 13:46:06,296 [INFO] price_checker.py:457 - taxes: $130 NZD
2024-11-15 13:46:06,297 [INFO] price_checker.py:457 - total: 
2024-11-15 13:46:06,297 [INFO] price_checker.py:559 - ✓ 成功获取 06/12/2024 的价格信息
2024-11-15 13:46:06,297 [INFO] price_checker.py:565 - 根据最小入住要求(3晚)跳过接下来的 2 天
2024-11-15 13:46:06,297 [INFO] price_checker.py:553 - [12/37] 处理日期: 07/12/2024
2024-11-15 13:46:06,297 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-15 13:46:06,297 [INFO] price_checker.py:255 - 入住日期: 07/12/2024
2024-11-15 13:46:11,420 [INFO] price_checker.py:271 - 开始检查日期 07/12/2024 的最小入住要求...
2024-11-15 13:46:11,423 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="7, Saturday, December 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-07/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">7</div></td>
2024-11-15 13:46:11,442 [INFO] price_checker.py:158 - 找到日期: 07/12/2024
2024-11-15 13:46:11,442 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:46:12,609 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:46:13,901 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="7, Saturday, December 2024. Selected check-in date There is a 3 night minimum stay requirement. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_h84ua7"><div class="_d82cel" style="transform: translate(-100%, -100%) translate(41px, -12px);"><div class="_1mslrl4"><div class="_u7azij">3-night minimum</div><svg role="presentation" focusable="false" class="_8c7xtno" style="right: 9.5px;"><path class="_1s2t3cl" d="M0,0 20,0 10,10z"></path><path class="_c3dsty" d="M0,0 10,10 20,0"></path></svg></div></div><div class="_194zlzjz notranslate" data-testid="calendar-day-07/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">7</div></div></td>
2024-11-15 13:46:13,909 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:46:13,910 [INFO] price_checker.py:218 - - aria-label: 7, Saturday, December 2024. Selected check-in date There is a 3 night minimum stay requirement. 
2024-11-15 13:46:13,910 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:46:13,910 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:46:13,910 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 3晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:46:13,910 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 3晚 (自动检测)
2024-11-15 13:46:13,910 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/837352260137971048?check_in=2024-12-07&check_out=2024-12-10&adults=3&children=0&infants=0
2024-11-15 13:46:14,759 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:46:15,985 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:46:15,985 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:46:19,031 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:46:19,034 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:46:21,045 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:46:21,045 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:46:24,779 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:46:24,787 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:46:24,794 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span class="_j1kt73">$700&nbsp;NZD</span>)
2024-11-15 13:46:24,794 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 13:46:24,794 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:46:24,801 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:46:24,806 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$700&nbsp;NZD</span></span>)
2024-11-15 13:46:24,806 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 13:46:24,811 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span class="_j1kt73">$700&nbsp;NZD</span>)
2024-11-15 13:46:24,811 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 13:46:24,816 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:46:24,816 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:46:24,816 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:46:24,816 [INFO] price_checker.py:450 - ✓ cleaning_fee: $90 NZD
2024-11-15 13:46:24,816 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 13:46:24,816 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 13:46:24,816 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:46:24,816 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:46:24,816 [INFO] price_checker.py:457 - check_in: 23/11/2024
2024-11-15 13:46:24,816 [INFO] price_checker.py:457 - check_out: 25/11/2024
2024-11-15 13:46:24,817 [INFO] price_checker.py:457 - min_nights: 2
2024-11-15 13:46:24,817 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:46:24,817 [INFO] price_checker.py:457 - nightly_price: $305 NZD
2024-11-15 13:46:24,817 [INFO] price_checker.py:457 - cleaning_fee: $90 NZD
2024-11-15 13:46:24,817 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 13:46:24,817 [INFO] price_checker.py:457 - taxes: None
2024-11-15 13:46:24,817 [INFO] price_checker.py:457 - total: 
2024-11-15 13:46:24,817 [INFO] price_checker.py:559 - ✓ 成功获取 23/11/2024 的价格信息
2024-11-15 13:46:24,817 [INFO] price_checker.py:565 - 根据最小入住要求(2晚)跳过接下来的 1 天
2024-11-15 13:46:24,817 [INFO] price_checker.py:553 - [8/39] 处理日期: 29/11/2024
2024-11-15 13:46:24,817 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/43435162
2024-11-15 13:46:24,817 [INFO] price_checker.py:255 - 入住日期: 29/11/2024
2024-11-15 13:46:26,006 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:46:26,006 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:46:26,012 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:46:26,028 [INFO] price_checker.py:337 - 找到可见价格元素: $157 NZD 
night
$157 NZD per night
2024-11-15 13:46:26,034 [INFO] price_checker.py:350 - 找到每晚价格元素: $157 NZD 
night
$157 NZD per night
2024-11-15 13:46:26,034 [INFO] price_checker.py:356 - 成功解析折扣价格: $157 NZD
2024-11-15 13:46:26,034 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:46:29,938 [INFO] price_checker.py:271 - 开始检查日期 29/11/2024 的最小入住要求...
2024-11-15 13:46:29,942 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="29, Friday, November 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-29/11/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">29</div></td>
2024-11-15 13:46:29,950 [INFO] price_checker.py:158 - 找到日期: 29/11/2024
2024-11-15 13:46:29,951 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:46:31,076 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:46:31,077 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:46:31,096 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:46:32,385 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="29, Friday, November 2024. Selected check-in date There is a 2 night minimum stay requirement. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_h84ua7"><div class="_d82cel" style="transform: translate(-50%, -100%) translate(20.5px, -12px);"><div class="_1mslrl4"><div class="_u7azij">2-night minimum</div><svg role="presentation" focusable="false" class="_1mjga4hj"><path class="_1s2t3cl" d="M0,0 20,0 10,10z"></path><path class="_c3dsty" d="M0,0 10,10 20,0"></path></svg></div></div><div class="_194zlzjz notranslate" data-testid="calendar-day-29/11/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">29</div></div></td>
2024-11-15 13:46:32,393 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:46:32,394 [INFO] price_checker.py:218 - - aria-label: 29, Friday, November 2024. Selected check-in date There is a 2 night minimum stay requirement. 
2024-11-15 13:46:32,394 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:46:32,394 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:46:32,394 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 2晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:46:32,394 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 2晚 (自动检测)
2024-11-15 13:46:32,394 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/43435162?check_in=2024-11-29&check_out=2024-12-01&adults=3&children=0&infants=0
2024-11-15 13:46:36,041 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 13:46:36,041 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:46:36,047 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:46:36,054 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 13:46:36,054 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 13:46:36,054 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:46:36,061 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:46:36,066 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 13:46:36,066 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 13:46:36,066 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:46:36,073 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:46:36,078 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 13:46:36,078 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 13:46:36,078 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:46:36,085 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:46:36,090 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 13:46:36,090 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 13:46:36,090 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:46:36,097 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:46:36,102 [INFO] price_checker.py:403 - 找到价格元素: $27 NZD (HTML: <span class="_1k4xcdh">$27&nbsp;NZD</span>)
2024-11-15 13:46:36,102 [INFO] price_checker.py:416 - ✓ 成功设置税费: $27 NZD
2024-11-15 13:46:36,102 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:46:37,484 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:46:37,486 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:46:39,499 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:46:39,499 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:46:41,085 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:46:41,085 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:46:41,091 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:46:41,107 [INFO] price_checker.py:337 - 找到可见价格元素: $340 NZD 
$316 NZD 
night
$316 NZD per night, originally $340 NZD
2024-11-15 13:46:41,113 [INFO] price_checker.py:350 - 找到每晚价格元素: $340 NZD 
$316 NZD 
night
$316 NZD per night, originally $340 NZD
2024-11-15 13:46:41,114 [INFO] price_checker.py:356 - 成功解析折扣价格: $316 NZD
2024-11-15 13:46:41,114 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:46:41,119 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 13:46:41,622 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:46:41,630 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:46:41,636 [INFO] price_checker.py:403 - 找到价格元素: $59 NZD (HTML: <span class="_1k4xcdh">$59&nbsp;NZD</span>)
2024-11-15 13:46:41,636 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $59 NZD
2024-11-15 13:46:41,636 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:46:41,643 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:46:41,648 [INFO] price_checker.py:403 - 找到价格元素: $59 NZD (HTML: <span class="_1k4xcdh">$59&nbsp;NZD</span>)
2024-11-15 13:46:41,648 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $59 NZD
2024-11-15 13:46:41,649 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:46:41,655 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:46:41,661 [INFO] price_checker.py:403 - 找到价格元素: $141 NZD (HTML: <span class="_1k4xcdh">$141&nbsp;NZD</span>)
2024-11-15 13:46:41,661 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $141 NZD
2024-11-15 13:46:41,661 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:46:41,667 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:46:41,672 [INFO] price_checker.py:403 - 找到价格元素: $141 NZD (HTML: <span class="_1k4xcdh">$141&nbsp;NZD</span>)
2024-11-15 13:46:41,672 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $141 NZD
2024-11-15 13:46:41,672 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:46:41,679 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:46:41,684 [INFO] price_checker.py:403 - 找到价格元素: $130 NZD (HTML: <span class="_1k4xcdh">$130&nbsp;NZD</span>)
2024-11-15 13:46:41,684 [INFO] price_checker.py:416 - ✓ 成功设置税费: $130 NZD
2024-11-15 13:46:41,684 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:46:46,129 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:46:46,136 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:46:46,142 [INFO] price_checker.py:403 - 找到价格元素: $234 NZD (HTML: <span class="_j1kt73">$234&nbsp;NZD</span>)
2024-11-15 13:46:46,142 [INFO] price_checker.py:420 - ✓ 成功设置总价: $234 NZD
2024-11-15 13:46:46,142 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:46:46,149 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:46:46,154 [INFO] price_checker.py:403 - 找到价格元素: $234 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$234&nbsp;NZD</span></span>)
2024-11-15 13:46:46,154 [INFO] price_checker.py:420 - ✓ 成功设置总价: $234 NZD
2024-11-15 13:46:46,159 [INFO] price_checker.py:403 - 找到价格元素: $234 NZD (HTML: <span class="_j1kt73">$234&nbsp;NZD</span>)
2024-11-15 13:46:46,159 [INFO] price_checker.py:420 - ✓ 成功设置总价: $234 NZD
2024-11-15 13:46:46,164 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:46:46,164 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:46:46,164 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:46:46,164 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 13:46:46,164 [INFO] price_checker.py:450 - ✓ service_fee: $29 NZD
2024-11-15 13:46:46,164 [INFO] price_checker.py:450 - ✓ taxes: $27 NZD
2024-11-15 13:46:46,164 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:46:46,164 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:46:46,165 [INFO] price_checker.py:457 - check_in: 28/11/2024
2024-11-15 13:46:46,165 [INFO] price_checker.py:457 - check_out: 29/11/2024
2024-11-15 13:46:46,165 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 13:46:46,165 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:46:46,165 [INFO] price_checker.py:457 - nightly_price: $157 NZD
2024-11-15 13:46:46,165 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 13:46:46,165 [INFO] price_checker.py:457 - service_fee: $29 NZD
2024-11-15 13:46:46,165 [INFO] price_checker.py:457 - taxes: $27 NZD
2024-11-15 13:46:46,165 [INFO] price_checker.py:457 - total: 
2024-11-15 13:46:46,165 [INFO] price_checker.py:559 - ✓ 成功获取 28/11/2024 的价格信息
2024-11-15 13:46:46,165 [INFO] price_checker.py:573 - 已完成 10/72 个日期的处理
2024-11-15 13:46:49,542 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:46:49,542 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:46:51,718 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:46:51,725 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:46:51,730 [INFO] price_checker.py:403 - 找到价格元素: $1,137 NZD (HTML: <span class="_j1kt73">$1,137&nbsp;NZD</span>)
2024-11-15 13:46:51,730 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,137 NZD
2024-11-15 13:46:51,731 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:46:51,737 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:46:51,742 [INFO] price_checker.py:403 - 找到价格元素: $1,137 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$1,137&nbsp;NZD</span></span>)
2024-11-15 13:46:51,742 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,137 NZD
2024-11-15 13:46:51,747 [INFO] price_checker.py:403 - 找到价格元素: $1,137 NZD (HTML: <span class="_j1kt73">$1,137&nbsp;NZD</span>)
2024-11-15 13:46:51,747 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,137 NZD
2024-11-15 13:46:51,752 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:46:51,752 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:46:51,753 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:46:51,753 [INFO] price_checker.py:450 - ✓ cleaning_fee: $59 NZD
2024-11-15 13:46:51,753 [INFO] price_checker.py:450 - ✓ service_fee: $141 NZD
2024-11-15 13:46:51,753 [INFO] price_checker.py:450 - ✓ taxes: $130 NZD
2024-11-15 13:46:51,753 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:46:51,753 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:46:51,753 [INFO] price_checker.py:457 - check_in: 07/12/2024
2024-11-15 13:46:51,753 [INFO] price_checker.py:457 - check_out: 10/12/2024
2024-11-15 13:46:51,753 [INFO] price_checker.py:457 - min_nights: 3
2024-11-15 13:46:51,753 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:46:51,753 [INFO] price_checker.py:457 - nightly_price: $316 NZD
2024-11-15 13:46:51,753 [INFO] price_checker.py:457 - cleaning_fee: $59 NZD
2024-11-15 13:46:51,753 [INFO] price_checker.py:457 - service_fee: $141 NZD
2024-11-15 13:46:51,753 [INFO] price_checker.py:457 - taxes: $130 NZD
2024-11-15 13:46:51,754 [INFO] price_checker.py:457 - total: 
2024-11-15 13:46:51,754 [INFO] price_checker.py:559 - ✓ 成功获取 07/12/2024 的价格信息
2024-11-15 13:46:51,754 [INFO] price_checker.py:565 - 根据最小入住要求(3晚)跳过接下来的 2 天
2024-11-15 13:46:51,754 [INFO] price_checker.py:553 - [13/37] 处理日期: 08/12/2024
2024-11-15 13:46:51,754 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-15 13:46:51,754 [INFO] price_checker.py:255 - 入住日期: 08/12/2024
2024-11-15 13:46:56,165 [INFO] price_checker.py:553 - [11/72] 处理日期: 29/11/2024
2024-11-15 13:46:56,166 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 13:46:56,166 [INFO] price_checker.py:255 - 入住日期: 29/11/2024
2024-11-15 13:46:56,874 [INFO] price_checker.py:271 - 开始检查日期 08/12/2024 的最小入住要求...
2024-11-15 13:46:56,878 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_1mv3p4vt" role="button" aria-disabled="false" aria-label="8, Sunday, December 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-08/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">8</div></td>
2024-11-15 13:46:56,889 [INFO] price_checker.py:158 - 找到日期: 08/12/2024
2024-11-15 13:46:56,890 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:46:58,013 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:46:59,303 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_ubf03zg" role="button" aria-disabled="true" aria-label="8, Sunday, December 2024. Selected check-in date There is a 3 night minimum stay requirement. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_h84ua7"><div class="_d82cel" style="transform: translate(-100%, -100%) translate(41px, -12px);"><div class="_1mslrl4"><div class="_u7azij">3-night minimum</div><svg role="presentation" focusable="false" class="_8c7xtno" style="right: 9.5px;"><path class="_1s2t3cl" d="M0,0 20,0 10,10z"></path><path class="_c3dsty" d="M0,0 10,10 20,0"></path></svg></div></div><div class="_17slido1 notranslate" data-testid="calendar-day-08/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">8</div></div></td>
2024-11-15 13:46:59,312 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:46:59,312 [INFO] price_checker.py:218 - - aria-label: 8, Sunday, December 2024. Selected check-in date There is a 3 night minimum stay requirement. 
2024-11-15 13:46:59,312 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:46:59,312 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:46:59,312 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 3晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:46:59,312 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 3晚 (自动检测)
2024-11-15 13:46:59,313 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/837352260137971048?check_in=2024-12-08&check_out=2024-12-11&adults=3&children=0&infants=0
2024-11-15 13:46:59,603 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:46:59,603 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:46:59,610 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:46:59,626 [INFO] price_checker.py:337 - 找到可见价格元素: $305 NZD 
night
$305 NZD per night
2024-11-15 13:46:59,633 [INFO] price_checker.py:350 - 找到每晚价格元素: $305 NZD 
night
$305 NZD per night
2024-11-15 13:46:59,633 [INFO] price_checker.py:356 - 成功解析折扣价格: $305 NZD
2024-11-15 13:46:59,633 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:46:59,643 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 13:47:00,148 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:47:00,156 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:47:00,163 [INFO] price_checker.py:403 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-15 13:47:00,163 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $90 NZD
2024-11-15 13:47:00,163 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:47:00,170 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:47:00,175 [INFO] price_checker.py:403 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-15 13:47:00,175 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $90 NZD
2024-11-15 13:47:00,175 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:47:01,295 [INFO] price_checker.py:271 - 开始检查日期 29/11/2024 的最小入住要求...
2024-11-15 13:47:01,300 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="29, Friday, November 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-29/11/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">29</div></td>
2024-11-15 13:47:01,313 [INFO] price_checker.py:158 - 找到日期: 29/11/2024
2024-11-15 13:47:01,313 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:47:02,458 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:47:03,740 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="29, Friday, November 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_ox7af8h notranslate" data-testid="calendar-day-29/11/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">29</div></td>
2024-11-15 13:47:03,748 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:47:03,748 [INFO] price_checker.py:218 - - aria-label: 29, Friday, November 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 13:47:03,748 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:47:03,748 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:47:03,749 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:47:03,749 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 13:47:03,749 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2024-11-29&check_out=2024-11-30&adults=3&children=0&infants=0
2024-11-15 13:47:04,412 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:47:04,415 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:47:06,426 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:47:06,426 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:47:08,852 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:47:08,855 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:47:10,193 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:47:10,867 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:47:10,867 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:47:16,449 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:47:16,449 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:47:20,217 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:47:20,901 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:47:20,901 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:47:26,476 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:47:26,476 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:47:26,483 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:47:26,504 [INFO] price_checker.py:337 - 找到可见价格元素: $340 NZD 
$316 NZD 
night
$316 NZD per night, originally $340 NZD
2024-11-15 13:47:26,514 [INFO] price_checker.py:350 - 找到每晚价格元素: $340 NZD 
$316 NZD 
night
$316 NZD per night, originally $340 NZD
2024-11-15 13:47:26,514 [INFO] price_checker.py:356 - 成功解析折扣价格: $316 NZD
2024-11-15 13:47:26,514 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:47:26,521 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 13:47:27,024 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:47:27,033 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:47:27,041 [INFO] price_checker.py:403 - 找到价格元素: $59 NZD (HTML: <span class="_1k4xcdh">$59&nbsp;NZD</span>)
2024-11-15 13:47:27,041 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $59 NZD
2024-11-15 13:47:27,041 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:47:27,048 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:47:27,054 [INFO] price_checker.py:403 - 找到价格元素: $59 NZD (HTML: <span class="_1k4xcdh">$59&nbsp;NZD</span>)
2024-11-15 13:47:27,054 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $59 NZD
2024-11-15 13:47:27,054 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:47:27,061 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:47:27,067 [INFO] price_checker.py:403 - 找到价格元素: $141 NZD (HTML: <span class="_1k4xcdh">$141&nbsp;NZD</span>)
2024-11-15 13:47:27,067 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $141 NZD
2024-11-15 13:47:27,067 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:47:27,074 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:47:27,079 [INFO] price_checker.py:403 - 找到价格元素: $141 NZD (HTML: <span class="_1k4xcdh">$141&nbsp;NZD</span>)
2024-11-15 13:47:27,079 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $141 NZD
2024-11-15 13:47:27,079 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:47:27,086 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:47:27,091 [INFO] price_checker.py:403 - 找到价格元素: $130 NZD (HTML: <span class="_1k4xcdh">$130&nbsp;NZD</span>)
2024-11-15 13:47:27,091 [INFO] price_checker.py:416 - ✓ 成功设置税费: $130 NZD
2024-11-15 13:47:27,092 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:47:30,245 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:47:30,932 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:47:30,932 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:47:30,938 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:47:30,954 [INFO] price_checker.py:337 - 找到可见价格元素: $155 NZD 
night
$155 NZD per night
2024-11-15 13:47:30,960 [INFO] price_checker.py:350 - 找到每晚价格元素: $155 NZD 
night
$155 NZD per night
2024-11-15 13:47:30,960 [INFO] price_checker.py:356 - 成功解析折扣价格: $155 NZD
2024-11-15 13:47:30,960 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:47:37,139 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:47:37,146 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:47:37,151 [INFO] price_checker.py:403 - 找到价格元素: $1,137 NZD (HTML: <span class="_j1kt73">$1,137&nbsp;NZD</span>)
2024-11-15 13:47:37,151 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,137 NZD
2024-11-15 13:47:37,152 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:47:37,159 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:47:37,163 [INFO] price_checker.py:403 - 找到价格元素: $1,137 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$1,137&nbsp;NZD</span></span>)
2024-11-15 13:47:37,164 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,137 NZD
2024-11-15 13:47:37,168 [INFO] price_checker.py:403 - 找到价格元素: $1,137 NZD (HTML: <span class="_j1kt73">$1,137&nbsp;NZD</span>)
2024-11-15 13:47:37,169 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,137 NZD
2024-11-15 13:47:37,174 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:47:37,174 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:47:37,174 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:47:37,174 [INFO] price_checker.py:450 - ✓ cleaning_fee: $59 NZD
2024-11-15 13:47:37,174 [INFO] price_checker.py:450 - ✓ service_fee: $141 NZD
2024-11-15 13:47:37,174 [INFO] price_checker.py:450 - ✓ taxes: $130 NZD
2024-11-15 13:47:37,174 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:47:37,174 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:47:37,174 [INFO] price_checker.py:457 - check_in: 08/12/2024
2024-11-15 13:47:37,174 [INFO] price_checker.py:457 - check_out: 11/12/2024
2024-11-15 13:47:37,174 [INFO] price_checker.py:457 - min_nights: 3
2024-11-15 13:47:37,175 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:47:37,175 [INFO] price_checker.py:457 - nightly_price: $316 NZD
2024-11-15 13:47:37,175 [INFO] price_checker.py:457 - cleaning_fee: $59 NZD
2024-11-15 13:47:37,175 [INFO] price_checker.py:457 - service_fee: $141 NZD
2024-11-15 13:47:37,175 [INFO] price_checker.py:457 - taxes: $130 NZD
2024-11-15 13:47:37,175 [INFO] price_checker.py:457 - total: 
2024-11-15 13:47:37,175 [INFO] price_checker.py:559 - ✓ 成功获取 08/12/2024 的价格信息
2024-11-15 13:47:37,175 [INFO] price_checker.py:565 - 根据最小入住要求(3晚)跳过接下来的 2 天
2024-11-15 13:47:37,175 [INFO] price_checker.py:573 - 已完成 15/37 个日期的处理
2024-11-15 13:47:40,283 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:47:40,290 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:47:40,297 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span class="_j1kt73">$700&nbsp;NZD</span>)
2024-11-15 13:47:40,297 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 13:47:40,297 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:47:40,303 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:47:40,309 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$700&nbsp;NZD</span></span>)
2024-11-15 13:47:40,309 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 13:47:40,315 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span class="_j1kt73">$700&nbsp;NZD</span>)
2024-11-15 13:47:40,315 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 13:47:40,319 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:47:40,319 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:47:40,320 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:47:40,320 [INFO] price_checker.py:450 - ✓ cleaning_fee: $90 NZD
2024-11-15 13:47:40,320 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 13:47:40,320 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 13:47:40,320 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:47:40,320 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:47:40,320 [INFO] price_checker.py:457 - check_in: 29/11/2024
2024-11-15 13:47:40,320 [INFO] price_checker.py:457 - check_out: 01/12/2024
2024-11-15 13:47:40,320 [INFO] price_checker.py:457 - min_nights: 2
2024-11-15 13:47:40,320 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:47:40,320 [INFO] price_checker.py:457 - nightly_price: $305 NZD
2024-11-15 13:47:40,320 [INFO] price_checker.py:457 - cleaning_fee: $90 NZD
2024-11-15 13:47:40,320 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 13:47:40,320 [INFO] price_checker.py:457 - taxes: None
2024-11-15 13:47:40,321 [INFO] price_checker.py:457 - total: 
2024-11-15 13:47:40,321 [INFO] price_checker.py:559 - ✓ 成功获取 29/11/2024 的价格信息
2024-11-15 13:47:40,321 [INFO] price_checker.py:565 - 根据最小入住要求(2晚)跳过接下来的 1 天
2024-11-15 13:47:40,321 [INFO] price_checker.py:553 - [9/39] 处理日期: 30/11/2024
2024-11-15 13:47:40,321 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/43435162
2024-11-15 13:47:40,321 [INFO] price_checker.py:255 - 入住日期: 30/11/2024
2024-11-15 13:47:40,995 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 13:47:40,996 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:47:41,002 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:47:41,009 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 13:47:41,010 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 13:47:41,010 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:47:41,016 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:47:41,021 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 13:47:41,021 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 13:47:41,021 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:47:41,028 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:47:41,033 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 13:47:41,033 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 13:47:41,033 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:47:41,040 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:47:41,045 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 13:47:41,045 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 13:47:41,045 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:47:41,051 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:47:41,057 [INFO] price_checker.py:403 - 找到价格元素: $26 NZD (HTML: <span class="_1k4xcdh">$26&nbsp;NZD</span>)
2024-11-15 13:47:41,057 [INFO] price_checker.py:416 - ✓ 成功设置税费: $26 NZD
2024-11-15 13:47:41,057 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:47:45,445 [INFO] price_checker.py:271 - 开始检查日期 30/11/2024 的最小入住要求...
2024-11-15 13:47:45,448 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_1qvi71ld" role="button" aria-disabled="false" aria-label="30, Saturday, November 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-30/11/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">30</div></td>
2024-11-15 13:47:45,458 [INFO] price_checker.py:158 - 找到日期: 30/11/2024
2024-11-15 13:47:45,458 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:47:46,599 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:47:47,176 [INFO] price_checker.py:553 - [14/37] 处理日期: 09/12/2024
2024-11-15 13:47:47,176 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-15 13:47:47,176 [INFO] price_checker.py:255 - 入住日期: 09/12/2024
2024-11-15 13:47:47,884 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1jaqd3t0" role="button" aria-disabled="true" aria-label="30, Saturday, November 2024. Selected check-in date There is a 2 night minimum stay requirement. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_h84ua7"><div class="_d82cel" style="transform: translate(-100%, -100%) translate(41px, -12px);"><div class="_1mslrl4"><div class="_u7azij">2-night minimum</div><svg role="presentation" focusable="false" class="_8c7xtno" style="right: 9.5px;"><path class="_1s2t3cl" d="M0,0 20,0 10,10z"></path><path class="_c3dsty" d="M0,0 10,10 20,0"></path></svg></div></div><div class="_17slido1 notranslate" data-testid="calendar-day-30/11/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">30</div></div></td>
2024-11-15 13:47:47,893 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:47:47,893 [INFO] price_checker.py:218 - - aria-label: 30, Saturday, November 2024. Selected check-in date There is a 2 night minimum stay requirement. 
2024-11-15 13:47:47,893 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:47:47,893 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:47:47,893 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 2晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:47:47,893 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 2晚 (自动检测)
2024-11-15 13:47:47,893 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/43435162?check_in=2024-11-30&check_out=2024-12-02&adults=3&children=0&infants=0
2024-11-15 13:47:51,061 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:47:51,068 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:47:51,074 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span class="_j1kt73">$231&nbsp;NZD</span>)
2024-11-15 13:47:51,074 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 13:47:51,074 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:47:51,082 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:47:51,087 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$231&nbsp;NZD</span></span>)
2024-11-15 13:47:51,087 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 13:47:51,093 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span class="_j1kt73">$231&nbsp;NZD</span>)
2024-11-15 13:47:51,093 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 13:47:51,098 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:47:51,099 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:47:51,099 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:47:51,099 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 13:47:51,099 [INFO] price_checker.py:450 - ✓ service_fee: $29 NZD
2024-11-15 13:47:51,099 [INFO] price_checker.py:450 - ✓ taxes: $26 NZD
2024-11-15 13:47:51,099 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:47:51,099 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:47:51,099 [INFO] price_checker.py:457 - check_in: 29/11/2024
2024-11-15 13:47:51,099 [INFO] price_checker.py:457 - check_out: 30/11/2024
2024-11-15 13:47:51,099 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 13:47:51,099 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:47:51,099 [INFO] price_checker.py:457 - nightly_price: $155 NZD
2024-11-15 13:47:51,099 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 13:47:51,100 [INFO] price_checker.py:457 - service_fee: $29 NZD
2024-11-15 13:47:51,100 [INFO] price_checker.py:457 - taxes: $26 NZD
2024-11-15 13:47:51,100 [INFO] price_checker.py:457 - total: 
2024-11-15 13:47:51,100 [INFO] price_checker.py:559 - ✓ 成功获取 29/11/2024 的价格信息
2024-11-15 13:47:51,100 [INFO] price_checker.py:553 - [12/72] 处理日期: 30/11/2024
2024-11-15 13:47:51,100 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 13:47:51,100 [INFO] price_checker.py:255 - 入住日期: 30/11/2024
2024-11-15 13:47:52,308 [INFO] price_checker.py:271 - 开始检查日期 09/12/2024 的最小入住要求...
2024-11-15 13:47:52,311 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_sl5yz7r" role="button" aria-disabled="false" aria-label="9, Monday, December 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-09/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">9</div></td>
2024-11-15 13:47:52,321 [INFO] price_checker.py:158 - 找到日期: 09/12/2024
2024-11-15 13:47:52,321 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:47:53,017 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:47:53,020 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:47:53,440 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:47:54,738 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_5v1jabe" role="button" aria-disabled="true" aria-label="9, Monday, December 2024. Selected check-in date There is a 3 night minimum stay requirement. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_h84ua7"><div class="_d82cel" style="transform: translateY(-100%) translateY(-12px);"><div class="_1mslrl4"><div class="_u7azij">3-night minimum</div><svg role="presentation" focusable="false" class="_8c7xtno" style="left: 9.5px;"><path class="_1s2t3cl" d="M0,0 20,0 10,10z"></path><path class="_c3dsty" d="M0,0 10,10 20,0"></path></svg></div></div><div class="_17slido1 notranslate" data-testid="calendar-day-09/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">9</div></div></td>
2024-11-15 13:47:54,747 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:47:54,747 [INFO] price_checker.py:218 - - aria-label: 9, Monday, December 2024. Selected check-in date There is a 3 night minimum stay requirement. 
2024-11-15 13:47:54,747 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:47:54,747 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:47:54,747 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 3晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:47:54,747 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 3晚 (自动检测)
2024-11-15 13:47:54,748 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/837352260137971048?check_in=2024-12-09&check_out=2024-12-12&adults=3&children=0&infants=0
2024-11-15 13:47:55,032 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:47:55,032 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:47:56,220 [INFO] price_checker.py:271 - 开始检查日期 30/11/2024 的最小入住要求...
2024-11-15 13:47:56,223 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_1qvi71ld" role="button" aria-disabled="false" aria-label="30, Saturday, November 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-30/11/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">30</div></td>
2024-11-15 13:47:56,233 [INFO] price_checker.py:158 - 找到日期: 30/11/2024
2024-11-15 13:47:56,233 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:47:57,420 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:47:58,709 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1jaqd3t0" role="button" aria-disabled="true" aria-label="30, Saturday, November 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1qis3zbj notranslate" data-testid="calendar-day-30/11/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">30</div></td>
2024-11-15 13:47:58,721 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:47:58,721 [INFO] price_checker.py:218 - - aria-label: 30, Saturday, November 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 13:47:58,721 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:47:58,721 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:47:58,721 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:47:58,721 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 13:47:58,721 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2024-11-30&check_out=2024-12-01&adults=3&children=0&infants=0
2024-11-15 13:47:59,868 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:47:59,871 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:48:01,882 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:48:01,882 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:48:03,813 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:48:03,816 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:48:05,052 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:48:05,053 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:48:05,828 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:48:05,828 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:48:11,916 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:48:11,916 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:48:15,073 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:48:15,073 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:48:15,079 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:48:15,095 [INFO] price_checker.py:337 - 找到可见价格元素: $305 NZD 
night
$305 NZD per night
2024-11-15 13:48:15,101 [INFO] price_checker.py:350 - 找到每晚价格元素: $305 NZD 
night
$305 NZD per night
2024-11-15 13:48:15,101 [INFO] price_checker.py:356 - 成功解析折扣价格: $305 NZD
2024-11-15 13:48:15,101 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:48:15,107 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 13:48:15,611 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:48:15,618 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:48:15,625 [INFO] price_checker.py:403 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-15 13:48:15,625 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $90 NZD
2024-11-15 13:48:15,625 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:48:15,632 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:48:15,637 [INFO] price_checker.py:403 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-15 13:48:15,637 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $90 NZD
2024-11-15 13:48:15,637 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:48:15,853 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:48:15,853 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:48:21,934 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:48:21,934 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:48:21,940 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:48:21,955 [INFO] price_checker.py:337 - 找到可见价格元素: $340 NZD 
$316 NZD 
night
$316 NZD per night, originally $340 NZD
2024-11-15 13:48:21,962 [INFO] price_checker.py:350 - 找到每晚价格元素: $340 NZD 
$316 NZD 
night
$316 NZD per night, originally $340 NZD
2024-11-15 13:48:21,962 [INFO] price_checker.py:356 - 成功解析折扣价格: $316 NZD
2024-11-15 13:48:21,962 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:48:21,968 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 13:48:22,471 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:48:22,479 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:48:22,485 [INFO] price_checker.py:403 - 找到价格元素: $59 NZD (HTML: <span class="_1k4xcdh">$59&nbsp;NZD</span>)
2024-11-15 13:48:22,486 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $59 NZD
2024-11-15 13:48:22,486 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:48:22,493 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:48:22,498 [INFO] price_checker.py:403 - 找到价格元素: $59 NZD (HTML: <span class="_1k4xcdh">$59&nbsp;NZD</span>)
2024-11-15 13:48:22,498 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $59 NZD
2024-11-15 13:48:22,498 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:48:22,505 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:48:22,511 [INFO] price_checker.py:403 - 找到价格元素: $141 NZD (HTML: <span class="_1k4xcdh">$141&nbsp;NZD</span>)
2024-11-15 13:48:22,511 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $141 NZD
2024-11-15 13:48:22,511 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:48:22,517 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:48:22,522 [INFO] price_checker.py:403 - 找到价格元素: $141 NZD (HTML: <span class="_1k4xcdh">$141&nbsp;NZD</span>)
2024-11-15 13:48:22,522 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $141 NZD
2024-11-15 13:48:22,522 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:48:22,530 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:48:22,535 [INFO] price_checker.py:403 - 找到价格元素: $130 NZD (HTML: <span class="_1k4xcdh">$130&nbsp;NZD</span>)
2024-11-15 13:48:22,535 [INFO] price_checker.py:416 - ✓ 成功设置税费: $130 NZD
2024-11-15 13:48:22,535 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:48:25,663 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:48:25,866 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:48:25,866 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:48:25,872 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:48:25,900 [INFO] price_checker.py:337 - 找到可见价格元素: $162 NZD 
night
$162 NZD per night
2024-11-15 13:48:25,917 [INFO] price_checker.py:350 - 找到每晚价格元素: $162 NZD 
night
$162 NZD per night
2024-11-15 13:48:25,917 [INFO] price_checker.py:356 - 成功解析折扣价格: $162 NZD
2024-11-15 13:48:25,917 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:48:32,556 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:48:32,562 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:48:32,568 [INFO] price_checker.py:403 - 找到价格元素: $1,137 NZD (HTML: <span class="_j1kt73">$1,137&nbsp;NZD</span>)
2024-11-15 13:48:32,568 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,137 NZD
2024-11-15 13:48:32,569 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:48:32,575 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:48:32,580 [INFO] price_checker.py:403 - 找到价格元素: $1,137 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$1,137&nbsp;NZD</span></span>)
2024-11-15 13:48:32,581 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,137 NZD
2024-11-15 13:48:32,586 [INFO] price_checker.py:403 - 找到价格元素: $1,137 NZD (HTML: <span class="_j1kt73">$1,137&nbsp;NZD</span>)
2024-11-15 13:48:32,586 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,137 NZD
2024-11-15 13:48:32,591 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:48:32,591 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:48:32,591 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:48:32,592 [INFO] price_checker.py:450 - ✓ cleaning_fee: $59 NZD
2024-11-15 13:48:32,592 [INFO] price_checker.py:450 - ✓ service_fee: $141 NZD
2024-11-15 13:48:32,592 [INFO] price_checker.py:450 - ✓ taxes: $130 NZD
2024-11-15 13:48:32,592 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:48:32,592 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:48:32,592 [INFO] price_checker.py:457 - check_in: 09/12/2024
2024-11-15 13:48:32,592 [INFO] price_checker.py:457 - check_out: 12/12/2024
2024-11-15 13:48:32,592 [INFO] price_checker.py:457 - min_nights: 3
2024-11-15 13:48:32,592 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:48:32,592 [INFO] price_checker.py:457 - nightly_price: $316 NZD
2024-11-15 13:48:32,592 [INFO] price_checker.py:457 - cleaning_fee: $59 NZD
2024-11-15 13:48:32,592 [INFO] price_checker.py:457 - service_fee: $141 NZD
2024-11-15 13:48:32,592 [INFO] price_checker.py:457 - taxes: $130 NZD
2024-11-15 13:48:32,592 [INFO] price_checker.py:457 - total: 
2024-11-15 13:48:32,593 [INFO] price_checker.py:559 - ✓ 成功获取 09/12/2024 的价格信息
2024-11-15 13:48:32,593 [INFO] price_checker.py:565 - 根据最小入住要求(3晚)跳过接下来的 2 天
2024-11-15 13:48:32,593 [INFO] price_checker.py:553 - [15/37] 处理日期: 10/12/2024
2024-11-15 13:48:32,593 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-15 13:48:32,593 [INFO] price_checker.py:255 - 入住日期: 10/12/2024
2024-11-15 13:48:35,686 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:48:35,950 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 13:48:35,950 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:48:35,957 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:48:35,965 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 13:48:35,965 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 13:48:35,965 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:48:35,972 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:48:35,977 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 13:48:35,977 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 13:48:35,978 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:48:35,984 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:48:35,990 [INFO] price_checker.py:403 - 找到价格元素: $30 NZD (HTML: <span class="_1k4xcdh">$30&nbsp;NZD</span>)
2024-11-15 13:48:35,990 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $30 NZD
2024-11-15 13:48:35,990 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:48:35,997 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:48:36,003 [INFO] price_checker.py:403 - 找到价格元素: $30 NZD (HTML: <span class="_1k4xcdh">$30&nbsp;NZD</span>)
2024-11-15 13:48:36,003 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $30 NZD
2024-11-15 13:48:36,003 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:48:36,010 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:48:36,015 [INFO] price_checker.py:403 - 找到价格元素: $27 NZD (HTML: <span class="_1k4xcdh">$27&nbsp;NZD</span>)
2024-11-15 13:48:36,015 [INFO] price_checker.py:416 - ✓ 成功设置税费: $27 NZD
2024-11-15 13:48:36,015 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:48:37,714 [INFO] price_checker.py:271 - 开始检查日期 10/12/2024 的最小入住要求...
2024-11-15 13:48:37,717 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="10, Tuesday, December 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-10/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">10</div></td>
2024-11-15 13:48:37,726 [INFO] price_checker.py:158 - 找到日期: 10/12/2024
2024-11-15 13:48:37,726 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:48:38,848 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:48:40,135 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="10, Tuesday, December 2024. Selected check-in date There is a 3 night minimum stay requirement. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_h84ua7"><div class="_d82cel" style="transform: translateY(-100%) translateY(-12px);"><div class="_1mslrl4"><div class="_u7azij">3-night minimum</div><svg role="presentation" focusable="false" class="_8c7xtno" style="left: 9.5px;"><path class="_1s2t3cl" d="M0,0 20,0 10,10z"></path><path class="_c3dsty" d="M0,0 10,10 20,0"></path></svg></div></div><div class="_194zlzjz notranslate" data-testid="calendar-day-10/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">10</div></div></td>
2024-11-15 13:48:40,144 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:48:40,144 [INFO] price_checker.py:218 - - aria-label: 10, Tuesday, December 2024. Selected check-in date There is a 3 night minimum stay requirement. 
2024-11-15 13:48:40,144 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:48:40,144 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:48:40,144 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 3晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:48:40,144 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 3晚 (自动检测)
2024-11-15 13:48:40,144 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/837352260137971048?check_in=2024-12-10&check_out=2024-12-13&adults=3&children=0&infants=0
2024-11-15 13:48:45,232 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:48:45,235 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:48:45,692 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:48:46,035 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:48:46,042 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:48:46,048 [INFO] price_checker.py:403 - 找到价格元素: $239 NZD (HTML: <span class="_j1kt73">$239&nbsp;NZD</span>)
2024-11-15 13:48:46,048 [INFO] price_checker.py:420 - ✓ 成功设置总价: $239 NZD
2024-11-15 13:48:46,048 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:48:46,054 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:48:46,060 [INFO] price_checker.py:403 - 找到价格元素: $239 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$239&nbsp;NZD</span></span>)
2024-11-15 13:48:46,060 [INFO] price_checker.py:420 - ✓ 成功设置总价: $239 NZD
2024-11-15 13:48:46,064 [INFO] price_checker.py:403 - 找到价格元素: $239 NZD (HTML: <span class="_j1kt73">$239&nbsp;NZD</span>)
2024-11-15 13:48:46,064 [INFO] price_checker.py:420 - ✓ 成功设置总价: $239 NZD
2024-11-15 13:48:46,069 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:48:46,069 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:48:46,069 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:48:46,069 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 13:48:46,069 [INFO] price_checker.py:450 - ✓ service_fee: $30 NZD
2024-11-15 13:48:46,069 [INFO] price_checker.py:450 - ✓ taxes: $27 NZD
2024-11-15 13:48:46,069 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:48:46,070 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:48:46,070 [INFO] price_checker.py:457 - check_in: 30/11/2024
2024-11-15 13:48:46,070 [INFO] price_checker.py:457 - check_out: 01/12/2024
2024-11-15 13:48:46,070 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 13:48:46,070 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:48:46,070 [INFO] price_checker.py:457 - nightly_price: $162 NZD
2024-11-15 13:48:46,070 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 13:48:46,070 [INFO] price_checker.py:457 - service_fee: $30 NZD
2024-11-15 13:48:46,070 [INFO] price_checker.py:457 - taxes: $27 NZD
2024-11-15 13:48:46,070 [INFO] price_checker.py:457 - total: 
2024-11-15 13:48:46,070 [INFO] price_checker.py:559 - ✓ 成功获取 30/11/2024 的价格信息
2024-11-15 13:48:46,070 [INFO] price_checker.py:553 - [13/72] 处理日期: 01/12/2024
2024-11-15 13:48:46,071 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 13:48:46,071 [INFO] price_checker.py:255 - 入住日期: 01/12/2024
2024-11-15 13:48:47,246 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:48:47,246 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:48:51,191 [INFO] price_checker.py:271 - 开始检查日期 01/12/2024 的最小入住要求...
2024-11-15 13:48:51,194 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_11r6uykv" role="button" aria-disabled="false" aria-label="1, Sunday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_5nf23wc notranslate" data-testid="calendar-day-01/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">1</div></td>
2024-11-15 13:48:51,203 [INFO] price_checker.py:158 - 找到日期: 01/12/2024
2024-11-15 13:48:51,203 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:48:52,322 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:48:53,619 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_x0oa30i" role="button" aria-disabled="true" aria-label="1, Sunday, December 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1k5zxj8l notranslate" data-testid="calendar-day-01/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">1</div></td>
2024-11-15 13:48:53,628 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:48:53,629 [INFO] price_checker.py:218 - - aria-label: 1, Sunday, December 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 13:48:53,629 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:48:53,629 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:48:53,629 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:48:53,629 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 13:48:53,629 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2024-12-01&check_out=2024-12-02&adults=3&children=0&infants=0
2024-11-15 13:48:55,745 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:48:55,752 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:48:55,759 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span class="_j1kt73">$700&nbsp;NZD</span>)
2024-11-15 13:48:55,759 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 13:48:55,759 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:48:55,767 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:48:55,772 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$700&nbsp;NZD</span></span>)
2024-11-15 13:48:55,772 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 13:48:55,777 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span class="_j1kt73">$700&nbsp;NZD</span>)
2024-11-15 13:48:55,777 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 13:48:55,783 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:48:55,783 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:48:55,783 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:48:55,783 [INFO] price_checker.py:450 - ✓ cleaning_fee: $90 NZD
2024-11-15 13:48:55,783 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 13:48:55,783 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 13:48:55,783 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:48:55,783 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:48:55,783 [INFO] price_checker.py:457 - check_in: 30/11/2024
2024-11-15 13:48:55,783 [INFO] price_checker.py:457 - check_out: 02/12/2024
2024-11-15 13:48:55,784 [INFO] price_checker.py:457 - min_nights: 2
2024-11-15 13:48:55,784 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:48:55,784 [INFO] price_checker.py:457 - nightly_price: $305 NZD
2024-11-15 13:48:55,784 [INFO] price_checker.py:457 - cleaning_fee: $90 NZD
2024-11-15 13:48:55,784 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 13:48:55,784 [INFO] price_checker.py:457 - taxes: None
2024-11-15 13:48:55,784 [INFO] price_checker.py:457 - total: 
2024-11-15 13:48:55,784 [INFO] price_checker.py:559 - ✓ 成功获取 30/11/2024 的价格信息
2024-11-15 13:48:55,784 [INFO] price_checker.py:565 - 根据最小入住要求(2晚)跳过接下来的 1 天
2024-11-15 13:48:55,784 [INFO] price_checker.py:573 - 已完成 10/39 个日期的处理
2024-11-15 13:48:57,275 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:48:57,276 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:48:58,759 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:48:58,762 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:49:00,773 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:49:00,773 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:49:05,785 [INFO] price_checker.py:553 - [10/39] 处理日期: 01/12/2024
2024-11-15 13:49:05,785 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/43435162
2024-11-15 13:49:05,785 [INFO] price_checker.py:255 - 入住日期: 01/12/2024
2024-11-15 13:49:07,336 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:49:07,336 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:49:07,342 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:49:07,357 [INFO] price_checker.py:337 - 找到可见价格元素: $340 NZD 
$316 NZD 
night
$316 NZD per night, originally $340 NZD
2024-11-15 13:49:07,364 [INFO] price_checker.py:350 - 找到每晚价格元素: $340 NZD 
$316 NZD 
night
$316 NZD per night, originally $340 NZD
2024-11-15 13:49:07,364 [INFO] price_checker.py:356 - 成功解析折扣价格: $316 NZD
2024-11-15 13:49:07,364 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:49:07,370 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 13:49:07,874 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:49:07,881 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:49:07,888 [INFO] price_checker.py:403 - 找到价格元素: $59 NZD (HTML: <span class="_1k4xcdh">$59&nbsp;NZD</span>)
2024-11-15 13:49:07,888 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $59 NZD
2024-11-15 13:49:07,888 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:49:07,895 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:49:07,900 [INFO] price_checker.py:403 - 找到价格元素: $59 NZD (HTML: <span class="_1k4xcdh">$59&nbsp;NZD</span>)
2024-11-15 13:49:07,900 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $59 NZD
2024-11-15 13:49:07,900 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:49:07,907 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:49:07,912 [INFO] price_checker.py:403 - 找到价格元素: $141 NZD (HTML: <span class="_1k4xcdh">$141&nbsp;NZD</span>)
2024-11-15 13:49:07,912 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $141 NZD
2024-11-15 13:49:07,912 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:49:07,919 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:49:07,924 [INFO] price_checker.py:403 - 找到价格元素: $141 NZD (HTML: <span class="_1k4xcdh">$141&nbsp;NZD</span>)
2024-11-15 13:49:07,925 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $141 NZD
2024-11-15 13:49:07,925 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:49:07,931 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:49:07,936 [INFO] price_checker.py:403 - 找到价格元素: $130 NZD (HTML: <span class="_1k4xcdh">$130&nbsp;NZD</span>)
2024-11-15 13:49:07,936 [INFO] price_checker.py:416 - ✓ 成功设置税费: $130 NZD
2024-11-15 13:49:07,936 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:49:10,778 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:49:10,778 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:49:11,060 [INFO] price_checker.py:271 - 开始检查日期 01/12/2024 的最小入住要求...
2024-11-15 13:49:11,102 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_11r6uykv" role="button" aria-disabled="false" aria-label="1, Sunday, December 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_5nf23wc notranslate" data-testid="calendar-day-01/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">1</div></td>
2024-11-15 13:49:11,113 [INFO] price_checker.py:158 - 找到日期: 01/12/2024
2024-11-15 13:49:11,113 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:49:12,235 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:49:13,528 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_x0oa30i" role="button" aria-disabled="true" aria-label="1, Sunday, December 2024. Selected check-in date There is a 2 night minimum stay requirement. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_h84ua7"><div class="_1bf91cf3 notranslate" data-testid="calendar-day-01/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">1</div><div class="_dg17u6n" style="transform: translateX(-100%) translate(42px, 12px);"><div class="_1mslrl4"><div class="_u7azij">2-night minimum</div><svg role="presentation" focusable="false" class="_17sgn78l" style="right: 9.5px;"><path class="_1s2t3cl" d="M0,10 20,10 10,0z"></path><path class="_c3dsty" d="M0,10 10,0 20,10"></path></svg></div></div></div></td>
2024-11-15 13:49:13,538 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:49:13,538 [INFO] price_checker.py:218 - - aria-label: 1, Sunday, December 2024. Selected check-in date There is a 2 night minimum stay requirement. 
2024-11-15 13:49:13,538 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:49:13,538 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:49:13,538 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 2晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:49:13,538 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 2晚 (自动检测)
2024-11-15 13:49:13,538 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/43435162?check_in=2024-12-01&check_out=2024-12-03&adults=3&children=0&infants=0
2024-11-15 13:49:17,999 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:49:18,006 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:49:18,012 [INFO] price_checker.py:403 - 找到价格元素: $1,137 NZD (HTML: <span class="_j1kt73">$1,137&nbsp;NZD</span>)
2024-11-15 13:49:18,012 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,137 NZD
2024-11-15 13:49:18,012 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:49:18,019 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:49:18,024 [INFO] price_checker.py:403 - 找到价格元素: $1,137 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$1,137&nbsp;NZD</span></span>)
2024-11-15 13:49:18,024 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,137 NZD
2024-11-15 13:49:18,030 [INFO] price_checker.py:403 - 找到价格元素: $1,137 NZD (HTML: <span class="_j1kt73">$1,137&nbsp;NZD</span>)
2024-11-15 13:49:18,030 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,137 NZD
2024-11-15 13:49:18,035 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:49:18,035 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:49:18,035 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:49:18,035 [INFO] price_checker.py:450 - ✓ cleaning_fee: $59 NZD
2024-11-15 13:49:18,035 [INFO] price_checker.py:450 - ✓ service_fee: $141 NZD
2024-11-15 13:49:18,035 [INFO] price_checker.py:450 - ✓ taxes: $130 NZD
2024-11-15 13:49:18,035 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:49:18,035 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:49:18,035 [INFO] price_checker.py:457 - check_in: 10/12/2024
2024-11-15 13:49:18,035 [INFO] price_checker.py:457 - check_out: 13/12/2024
2024-11-15 13:49:18,035 [INFO] price_checker.py:457 - min_nights: 3
2024-11-15 13:49:18,035 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:49:18,036 [INFO] price_checker.py:457 - nightly_price: $316 NZD
2024-11-15 13:49:18,036 [INFO] price_checker.py:457 - cleaning_fee: $59 NZD
2024-11-15 13:49:18,036 [INFO] price_checker.py:457 - service_fee: $141 NZD
2024-11-15 13:49:18,036 [INFO] price_checker.py:457 - taxes: $130 NZD
2024-11-15 13:49:18,036 [INFO] price_checker.py:457 - total: 
2024-11-15 13:49:18,036 [INFO] price_checker.py:559 - ✓ 成功获取 10/12/2024 的价格信息
2024-11-15 13:49:18,036 [INFO] price_checker.py:565 - 根据最小入住要求(3晚)跳过接下来的 2 天
2024-11-15 13:49:18,036 [INFO] price_checker.py:553 - [16/37] 处理日期: 11/12/2024
2024-11-15 13:49:18,036 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-15 13:49:18,036 [INFO] price_checker.py:255 - 入住日期: 11/12/2024
2024-11-15 13:49:18,669 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:49:18,672 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:49:20,684 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:49:20,684 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:49:20,838 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:49:20,838 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:49:20,844 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:49:20,860 [INFO] price_checker.py:337 - 找到可见价格元素: $165 NZD 
night
$165 NZD per night
2024-11-15 13:49:20,866 [INFO] price_checker.py:350 - 找到每晚价格元素: $165 NZD 
night
$165 NZD per night
2024-11-15 13:49:20,866 [INFO] price_checker.py:356 - 成功解析折扣价格: $165 NZD
2024-11-15 13:49:20,866 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:49:23,160 [INFO] price_checker.py:271 - 开始检查日期 11/12/2024 的最小入住要求...
2024-11-15 13:49:23,163 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="11, Wednesday, December 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-11/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">11</div></td>
2024-11-15 13:49:23,172 [INFO] price_checker.py:158 - 找到日期: 11/12/2024
2024-11-15 13:49:23,172 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:49:24,303 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:49:25,589 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="11, Wednesday, December 2024. Selected check-in date There is a 3 night minimum stay requirement. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_h84ua7"><div class="_d82cel" style="transform: translate(-50%, -100%) translate(20.5px, -12px);"><div class="_1mslrl4"><div class="_u7azij">3-night minimum</div><svg role="presentation" focusable="false" class="_1mjga4hj"><path class="_1s2t3cl" d="M0,0 20,0 10,10z"></path><path class="_c3dsty" d="M0,0 10,10 20,0"></path></svg></div></div><div class="_194zlzjz notranslate" data-testid="calendar-day-11/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">11</div></div></td>
2024-11-15 13:49:25,598 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:49:25,598 [INFO] price_checker.py:218 - - aria-label: 11, Wednesday, December 2024. Selected check-in date There is a 3 night minimum stay requirement. 
2024-11-15 13:49:25,598 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:49:25,598 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:49:25,599 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 3晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:49:25,599 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 3晚 (自动检测)
2024-11-15 13:49:25,599 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/837352260137971048?check_in=2024-12-11&check_out=2024-12-14&adults=3&children=0&infants=0
2024-11-15 13:49:30,688 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:49:30,690 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:49:30,690 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:49:30,691 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:49:30,873 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 13:49:30,873 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:49:30,881 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:49:30,888 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 13:49:30,888 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 13:49:30,888 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:49:30,894 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:49:30,899 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 13:49:30,899 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 13:49:30,899 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:49:30,906 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:49:30,911 [INFO] price_checker.py:403 - 找到价格元素: $30 NZD (HTML: <span class="_1k4xcdh">$30&nbsp;NZD</span>)
2024-11-15 13:49:30,911 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $30 NZD
2024-11-15 13:49:30,911 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:49:30,918 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:49:30,923 [INFO] price_checker.py:403 - 找到价格元素: $30 NZD (HTML: <span class="_1k4xcdh">$30&nbsp;NZD</span>)
2024-11-15 13:49:30,923 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $30 NZD
2024-11-15 13:49:30,923 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:49:30,930 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:49:30,935 [INFO] price_checker.py:403 - 找到价格元素: $28 NZD (HTML: <span class="_1k4xcdh">$28&nbsp;NZD</span>)
2024-11-15 13:49:30,935 [INFO] price_checker.py:416 - ✓ 成功设置税费: $28 NZD
2024-11-15 13:49:30,936 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:49:32,704 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:49:32,704 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:49:40,712 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:49:40,712 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:49:40,718 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:49:40,735 [INFO] price_checker.py:337 - 找到可见价格元素: $305 NZD 
night
$305 NZD per night
2024-11-15 13:49:40,741 [INFO] price_checker.py:350 - 找到每晚价格元素: $305 NZD 
night
$305 NZD per night
2024-11-15 13:49:40,741 [INFO] price_checker.py:356 - 成功解析折扣价格: $305 NZD
2024-11-15 13:49:40,741 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:49:40,747 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 13:49:40,943 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:49:40,951 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:49:40,957 [INFO] price_checker.py:403 - 找到价格元素: $243 NZD (HTML: <span class="_j1kt73">$243&nbsp;NZD</span>)
2024-11-15 13:49:40,957 [INFO] price_checker.py:420 - ✓ 成功设置总价: $243 NZD
2024-11-15 13:49:40,957 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:49:40,963 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:49:40,968 [INFO] price_checker.py:403 - 找到价格元素: $243 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$243&nbsp;NZD</span></span>)
2024-11-15 13:49:40,969 [INFO] price_checker.py:420 - ✓ 成功设置总价: $243 NZD
2024-11-15 13:49:40,974 [INFO] price_checker.py:403 - 找到价格元素: $243 NZD (HTML: <span class="_j1kt73">$243&nbsp;NZD</span>)
2024-11-15 13:49:40,974 [INFO] price_checker.py:420 - ✓ 成功设置总价: $243 NZD
2024-11-15 13:49:40,979 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:49:40,979 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:49:40,979 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:49:40,979 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 13:49:40,979 [INFO] price_checker.py:450 - ✓ service_fee: $30 NZD
2024-11-15 13:49:40,979 [INFO] price_checker.py:450 - ✓ taxes: $28 NZD
2024-11-15 13:49:40,979 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:49:40,979 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:49:40,979 [INFO] price_checker.py:457 - check_in: 01/12/2024
2024-11-15 13:49:40,979 [INFO] price_checker.py:457 - check_out: 02/12/2024
2024-11-15 13:49:40,979 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 13:49:40,979 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:49:40,979 [INFO] price_checker.py:457 - nightly_price: $165 NZD
2024-11-15 13:49:40,980 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 13:49:40,980 [INFO] price_checker.py:457 - service_fee: $30 NZD
2024-11-15 13:49:40,980 [INFO] price_checker.py:457 - taxes: $28 NZD
2024-11-15 13:49:40,980 [INFO] price_checker.py:457 - total: 
2024-11-15 13:49:40,980 [INFO] price_checker.py:559 - ✓ 成功获取 01/12/2024 的价格信息
2024-11-15 13:49:40,980 [INFO] price_checker.py:553 - [14/72] 处理日期: 02/12/2024
2024-11-15 13:49:40,980 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 13:49:40,980 [INFO] price_checker.py:255 - 入住日期: 02/12/2024
2024-11-15 13:49:41,249 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:49:41,257 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:49:41,265 [INFO] price_checker.py:403 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-15 13:49:41,265 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $90 NZD
2024-11-15 13:49:41,266 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:49:41,275 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:49:41,280 [INFO] price_checker.py:403 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-15 13:49:41,280 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $90 NZD
2024-11-15 13:49:41,280 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:49:42,762 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:49:42,762 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:49:46,102 [INFO] price_checker.py:271 - 开始检查日期 02/12/2024 的最小入住要求...
2024-11-15 13:49:46,105 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_sl5yz7r" role="button" aria-disabled="false" aria-label="2, Monday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-02/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">2</div></td>
2024-11-15 13:49:46,115 [INFO] price_checker.py:158 - 找到日期: 02/12/2024
2024-11-15 13:49:46,116 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:49:47,239 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:49:48,526 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_5v1jabe" role="button" aria-disabled="true" aria-label="2, Monday, December 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1qis3zbj notranslate" data-testid="calendar-day-02/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">2</div></td>
2024-11-15 13:49:48,534 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:49:48,534 [INFO] price_checker.py:218 - - aria-label: 2, Monday, December 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 13:49:48,534 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:49:48,534 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:49:48,534 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:49:48,534 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 13:49:48,534 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2024-12-02&check_out=2024-12-03&adults=3&children=0&infants=0
2024-11-15 13:49:51,331 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:49:52,763 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:49:52,763 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:49:52,769 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:49:52,785 [INFO] price_checker.py:337 - 找到可见价格元素: $340 NZD 
$316 NZD 
night
$316 NZD per night, originally $340 NZD
2024-11-15 13:49:52,792 [INFO] price_checker.py:350 - 找到每晚价格元素: $340 NZD 
$316 NZD 
night
$316 NZD per night, originally $340 NZD
2024-11-15 13:49:52,792 [INFO] price_checker.py:356 - 成功解析折扣价格: $316 NZD
2024-11-15 13:49:52,792 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:49:52,800 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 13:49:53,303 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:49:53,310 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:49:53,316 [INFO] price_checker.py:403 - 找到价格元素: $59 NZD (HTML: <span class="_1k4xcdh">$59&nbsp;NZD</span>)
2024-11-15 13:49:53,316 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $59 NZD
2024-11-15 13:49:53,316 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:49:53,323 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:49:53,331 [INFO] price_checker.py:403 - 找到价格元素: $59 NZD (HTML: <span class="_1k4xcdh">$59&nbsp;NZD</span>)
2024-11-15 13:49:53,331 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $59 NZD
2024-11-15 13:49:53,331 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:49:53,338 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:49:53,344 [INFO] price_checker.py:403 - 找到价格元素: $141 NZD (HTML: <span class="_1k4xcdh">$141&nbsp;NZD</span>)
2024-11-15 13:49:53,345 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $141 NZD
2024-11-15 13:49:53,345 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:49:53,352 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:49:53,357 [INFO] price_checker.py:403 - 找到价格元素: $141 NZD (HTML: <span class="_1k4xcdh">$141&nbsp;NZD</span>)
2024-11-15 13:49:53,357 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $141 NZD
2024-11-15 13:49:53,357 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:49:53,364 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:49:53,369 [INFO] price_checker.py:403 - 找到价格元素: $130 NZD (HTML: <span class="_1k4xcdh">$130&nbsp;NZD</span>)
2024-11-15 13:49:53,369 [INFO] price_checker.py:416 - ✓ 成功设置税费: $130 NZD
2024-11-15 13:49:53,369 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:49:53,639 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:49:53,643 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:49:55,656 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:49:55,656 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:50:01,345 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:50:03,388 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:50:03,395 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:50:03,402 [INFO] price_checker.py:403 - 找到价格元素: $1,137 NZD (HTML: <span class="_j1kt73">$1,137&nbsp;NZD</span>)
2024-11-15 13:50:03,402 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,137 NZD
2024-11-15 13:50:03,402 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:50:03,409 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:50:03,414 [INFO] price_checker.py:403 - 找到价格元素: $1,137 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$1,137&nbsp;NZD</span></span>)
2024-11-15 13:50:03,414 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,137 NZD
2024-11-15 13:50:03,419 [INFO] price_checker.py:403 - 找到价格元素: $1,137 NZD (HTML: <span class="_j1kt73">$1,137&nbsp;NZD</span>)
2024-11-15 13:50:03,419 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,137 NZD
2024-11-15 13:50:03,424 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:50:03,424 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:50:03,424 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:50:03,424 [INFO] price_checker.py:450 - ✓ cleaning_fee: $59 NZD
2024-11-15 13:50:03,424 [INFO] price_checker.py:450 - ✓ service_fee: $141 NZD
2024-11-15 13:50:03,424 [INFO] price_checker.py:450 - ✓ taxes: $130 NZD
2024-11-15 13:50:03,424 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:50:03,424 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:50:03,424 [INFO] price_checker.py:457 - check_in: 11/12/2024
2024-11-15 13:50:03,424 [INFO] price_checker.py:457 - check_out: 14/12/2024
2024-11-15 13:50:03,424 [INFO] price_checker.py:457 - min_nights: 3
2024-11-15 13:50:03,424 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:50:03,424 [INFO] price_checker.py:457 - nightly_price: $316 NZD
2024-11-15 13:50:03,425 [INFO] price_checker.py:457 - cleaning_fee: $59 NZD
2024-11-15 13:50:03,425 [INFO] price_checker.py:457 - service_fee: $141 NZD
2024-11-15 13:50:03,425 [INFO] price_checker.py:457 - taxes: $130 NZD
2024-11-15 13:50:03,425 [INFO] price_checker.py:457 - total: 
2024-11-15 13:50:03,425 [INFO] price_checker.py:559 - ✓ 成功获取 11/12/2024 的价格信息
2024-11-15 13:50:03,425 [INFO] price_checker.py:565 - 根据最小入住要求(3晚)跳过接下来的 2 天
2024-11-15 13:50:03,425 [INFO] price_checker.py:553 - [17/37] 处理日期: 12/12/2024
2024-11-15 13:50:03,425 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-15 13:50:03,425 [INFO] price_checker.py:255 - 入住日期: 12/12/2024
2024-11-15 13:50:05,669 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:50:05,670 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:50:08,552 [INFO] price_checker.py:271 - 开始检查日期 12/12/2024 的最小入住要求...
2024-11-15 13:50:08,555 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="12, Thursday, December 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-12/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">12</div></td>
2024-11-15 13:50:08,564 [INFO] price_checker.py:158 - 找到日期: 12/12/2024
2024-11-15 13:50:08,564 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:50:09,701 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:50:10,985 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="12, Thursday, December 2024. Selected check-in date There is a 3 night minimum stay requirement. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_h84ua7"><div class="_d82cel" style="transform: translate(-50%, -100%) translate(20.5px, -12px);"><div class="_1mslrl4"><div class="_u7azij">3-night minimum</div><svg role="presentation" focusable="false" class="_1mjga4hj"><path class="_1s2t3cl" d="M0,0 20,0 10,10z"></path><path class="_c3dsty" d="M0,0 10,10 20,0"></path></svg></div></div><div class="_194zlzjz notranslate" data-testid="calendar-day-12/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">12</div></div></td>
2024-11-15 13:50:10,993 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:50:10,993 [INFO] price_checker.py:218 - - aria-label: 12, Thursday, December 2024. Selected check-in date There is a 3 night minimum stay requirement. 
2024-11-15 13:50:10,994 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:50:10,994 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:50:10,994 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 3晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:50:10,994 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 3晚 (自动检测)
2024-11-15 13:50:10,994 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/837352260137971048?check_in=2024-12-12&check_out=2024-12-15&adults=3&children=0&infants=0
2024-11-15 13:50:11,359 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:50:15,671 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:50:15,671 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:50:15,678 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:50:15,695 [INFO] price_checker.py:337 - 找到可见价格元素: $155 NZD 
night
$155 NZD per night
2024-11-15 13:50:15,701 [INFO] price_checker.py:350 - 找到每晚价格元素: $155 NZD 
night
$155 NZD per night
2024-11-15 13:50:15,701 [INFO] price_checker.py:356 - 成功解析折扣价格: $155 NZD
2024-11-15 13:50:15,701 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:50:16,082 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:50:16,085 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:50:18,097 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:50:18,097 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:50:21,363 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:50:21,369 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:50:21,377 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span class="_j1kt73">$700&nbsp;NZD</span>)
2024-11-15 13:50:21,377 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 13:50:21,377 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:50:21,384 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:50:21,389 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$700&nbsp;NZD</span></span>)
2024-11-15 13:50:21,389 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 13:50:21,394 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span class="_j1kt73">$700&nbsp;NZD</span>)
2024-11-15 13:50:21,394 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 13:50:21,399 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:50:21,399 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:50:21,399 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:50:21,399 [INFO] price_checker.py:450 - ✓ cleaning_fee: $90 NZD
2024-11-15 13:50:21,400 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 13:50:21,400 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 13:50:21,400 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:50:21,400 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:50:21,400 [INFO] price_checker.py:457 - check_in: 01/12/2024
2024-11-15 13:50:21,400 [INFO] price_checker.py:457 - check_out: 03/12/2024
2024-11-15 13:50:21,400 [INFO] price_checker.py:457 - min_nights: 2
2024-11-15 13:50:21,400 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:50:21,400 [INFO] price_checker.py:457 - nightly_price: $305 NZD
2024-11-15 13:50:21,400 [INFO] price_checker.py:457 - cleaning_fee: $90 NZD
2024-11-15 13:50:21,400 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 13:50:21,400 [INFO] price_checker.py:457 - taxes: None
2024-11-15 13:50:21,400 [INFO] price_checker.py:457 - total: 
2024-11-15 13:50:21,400 [INFO] price_checker.py:559 - ✓ 成功获取 01/12/2024 的价格信息
2024-11-15 13:50:21,401 [INFO] price_checker.py:565 - 根据最小入住要求(2晚)跳过接下来的 1 天
2024-11-15 13:50:21,401 [INFO] price_checker.py:553 - [11/39] 处理日期: 02/12/2024
2024-11-15 13:50:21,401 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/43435162
2024-11-15 13:50:21,401 [INFO] price_checker.py:255 - 入住日期: 02/12/2024
2024-11-15 13:50:25,712 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 13:50:25,712 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:50:25,719 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:50:25,726 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 13:50:25,727 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 13:50:25,727 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:50:25,733 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:50:25,738 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 13:50:25,738 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 13:50:25,738 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:50:25,745 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:50:25,750 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 13:50:25,750 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 13:50:25,750 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:50:25,756 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:50:25,762 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 13:50:25,762 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 13:50:25,762 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:50:25,769 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:50:25,774 [INFO] price_checker.py:403 - 找到价格元素: $26 NZD (HTML: <span class="_1k4xcdh">$26&nbsp;NZD</span>)
2024-11-15 13:50:25,774 [INFO] price_checker.py:416 - ✓ 成功设置税费: $26 NZD
2024-11-15 13:50:25,774 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:50:26,523 [INFO] price_checker.py:271 - 开始检查日期 02/12/2024 的最小入住要求...
2024-11-15 13:50:26,526 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_sl5yz7r" role="button" aria-disabled="false" aria-label="2, Monday, December 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-02/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">2</div></td>
2024-11-15 13:50:26,536 [INFO] price_checker.py:158 - 找到日期: 02/12/2024
2024-11-15 13:50:26,536 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:50:27,663 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:50:28,119 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:50:28,119 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:50:28,946 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_5v1jabe" role="button" aria-disabled="true" aria-label="2, Monday, December 2024. Selected check-in date There is a 2 night minimum stay requirement. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_h84ua7"><div class="_d82cel" style="transform: translateY(-100%) translateY(-12px);"><div class="_1mslrl4"><div class="_u7azij">2-night minimum</div><svg role="presentation" focusable="false" class="_8c7xtno" style="left: 9.5px;"><path class="_1s2t3cl" d="M0,0 20,0 10,10z"></path><path class="_c3dsty" d="M0,0 10,10 20,0"></path></svg></div></div><div class="_17slido1 notranslate" data-testid="calendar-day-02/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">2</div></div></td>
2024-11-15 13:50:28,954 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:50:28,954 [INFO] price_checker.py:218 - - aria-label: 2, Monday, December 2024. Selected check-in date There is a 2 night minimum stay requirement. 
2024-11-15 13:50:28,954 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:50:28,954 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:50:28,954 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 2晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:50:28,954 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 2晚 (自动检测)
2024-11-15 13:50:28,954 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/43435162?check_in=2024-12-02&check_out=2024-12-04&adults=3&children=0&infants=0
2024-11-15 13:50:34,043 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:50:34,046 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:50:35,788 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:50:35,795 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:50:35,801 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span class="_j1kt73">$231&nbsp;NZD</span>)
2024-11-15 13:50:35,801 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 13:50:35,801 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:50:35,808 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:50:35,812 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$231&nbsp;NZD</span></span>)
2024-11-15 13:50:35,813 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 13:50:35,818 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span class="_j1kt73">$231&nbsp;NZD</span>)
2024-11-15 13:50:35,818 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 13:50:35,823 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:50:35,823 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:50:35,823 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:50:35,823 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 13:50:35,823 [INFO] price_checker.py:450 - ✓ service_fee: $29 NZD
2024-11-15 13:50:35,823 [INFO] price_checker.py:450 - ✓ taxes: $26 NZD
2024-11-15 13:50:35,823 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:50:35,823 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:50:35,823 [INFO] price_checker.py:457 - check_in: 02/12/2024
2024-11-15 13:50:35,823 [INFO] price_checker.py:457 - check_out: 03/12/2024
2024-11-15 13:50:35,824 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 13:50:35,824 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:50:35,824 [INFO] price_checker.py:457 - nightly_price: $155 NZD
2024-11-15 13:50:35,824 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 13:50:35,824 [INFO] price_checker.py:457 - service_fee: $29 NZD
2024-11-15 13:50:35,824 [INFO] price_checker.py:457 - taxes: $26 NZD
2024-11-15 13:50:35,824 [INFO] price_checker.py:457 - total: 
2024-11-15 13:50:35,824 [INFO] price_checker.py:559 - ✓ 成功获取 02/12/2024 的价格信息
2024-11-15 13:50:35,824 [INFO] price_checker.py:553 - [15/72] 处理日期: 03/12/2024
2024-11-15 13:50:35,824 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 13:50:35,824 [INFO] price_checker.py:255 - 入住日期: 03/12/2024
2024-11-15 13:50:36,058 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:50:36,058 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:50:38,137 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:50:38,137 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:50:38,142 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:50:38,158 [INFO] price_checker.py:337 - 找到可见价格元素: $340 NZD 
$316 NZD 
night
$316 NZD per night, originally $340 NZD
2024-11-15 13:50:38,164 [INFO] price_checker.py:350 - 找到每晚价格元素: $340 NZD 
$316 NZD 
night
$316 NZD per night, originally $340 NZD
2024-11-15 13:50:38,165 [INFO] price_checker.py:356 - 成功解析折扣价格: $316 NZD
2024-11-15 13:50:38,165 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:50:38,171 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 13:50:38,674 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:50:38,682 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:50:38,689 [INFO] price_checker.py:403 - 找到价格元素: $59 NZD (HTML: <span class="_1k4xcdh">$59&nbsp;NZD</span>)
2024-11-15 13:50:38,689 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $59 NZD
2024-11-15 13:50:38,689 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:50:38,696 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:50:38,701 [INFO] price_checker.py:403 - 找到价格元素: $59 NZD (HTML: <span class="_1k4xcdh">$59&nbsp;NZD</span>)
2024-11-15 13:50:38,701 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $59 NZD
2024-11-15 13:50:38,701 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:50:38,708 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:50:38,713 [INFO] price_checker.py:403 - 找到价格元素: $141 NZD (HTML: <span class="_1k4xcdh">$141&nbsp;NZD</span>)
2024-11-15 13:50:38,713 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $141 NZD
2024-11-15 13:50:38,713 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:50:38,720 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:50:38,725 [INFO] price_checker.py:403 - 找到价格元素: $141 NZD (HTML: <span class="_1k4xcdh">$141&nbsp;NZD</span>)
2024-11-15 13:50:38,725 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $141 NZD
2024-11-15 13:50:38,725 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:50:38,731 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:50:38,737 [INFO] price_checker.py:403 - 找到价格元素: $130 NZD (HTML: <span class="_1k4xcdh">$130&nbsp;NZD</span>)
2024-11-15 13:50:38,738 [INFO] price_checker.py:416 - ✓ 成功设置税费: $130 NZD
2024-11-15 13:50:38,739 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:50:40,950 [INFO] price_checker.py:271 - 开始检查日期 03/12/2024 的最小入住要求...
2024-11-15 13:50:40,953 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="3, Tuesday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-03/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">3</div></td>
2024-11-15 13:50:40,963 [INFO] price_checker.py:158 - 找到日期: 03/12/2024
2024-11-15 13:50:40,963 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:50:42,091 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:50:43,373 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="3, Tuesday, December 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_ox7af8h notranslate" data-testid="calendar-day-03/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">3</div></td>
2024-11-15 13:50:43,382 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:50:43,382 [INFO] price_checker.py:218 - - aria-label: 3, Tuesday, December 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 13:50:43,382 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:50:43,382 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:50:43,382 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:50:43,382 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 13:50:43,382 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2024-12-03&check_out=2024-12-04&adults=3&children=0&infants=0
2024-11-15 13:50:46,080 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:50:46,080 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:50:48,482 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:50:48,485 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:50:48,760 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:50:48,767 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:50:48,773 [INFO] price_checker.py:403 - 找到价格元素: $1,137 NZD (HTML: <span class="_j1kt73">$1,137&nbsp;NZD</span>)
2024-11-15 13:50:48,773 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,137 NZD
2024-11-15 13:50:48,773 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:50:48,780 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:50:48,785 [INFO] price_checker.py:403 - 找到价格元素: $1,137 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$1,137&nbsp;NZD</span></span>)
2024-11-15 13:50:48,785 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,137 NZD
2024-11-15 13:50:48,790 [INFO] price_checker.py:403 - 找到价格元素: $1,137 NZD (HTML: <span class="_j1kt73">$1,137&nbsp;NZD</span>)
2024-11-15 13:50:48,790 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,137 NZD
2024-11-15 13:50:48,795 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:50:48,795 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:50:48,795 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:50:48,795 [INFO] price_checker.py:450 - ✓ cleaning_fee: $59 NZD
2024-11-15 13:50:48,795 [INFO] price_checker.py:450 - ✓ service_fee: $141 NZD
2024-11-15 13:50:48,795 [INFO] price_checker.py:450 - ✓ taxes: $130 NZD
2024-11-15 13:50:48,796 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:50:48,796 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:50:48,796 [INFO] price_checker.py:457 - check_in: 12/12/2024
2024-11-15 13:50:48,796 [INFO] price_checker.py:457 - check_out: 15/12/2024
2024-11-15 13:50:48,796 [INFO] price_checker.py:457 - min_nights: 3
2024-11-15 13:50:48,796 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:50:48,796 [INFO] price_checker.py:457 - nightly_price: $316 NZD
2024-11-15 13:50:48,796 [INFO] price_checker.py:457 - cleaning_fee: $59 NZD
2024-11-15 13:50:48,796 [INFO] price_checker.py:457 - service_fee: $141 NZD
2024-11-15 13:50:48,796 [INFO] price_checker.py:457 - taxes: $130 NZD
2024-11-15 13:50:48,796 [INFO] price_checker.py:457 - total: 
2024-11-15 13:50:48,796 [INFO] price_checker.py:559 - ✓ 成功获取 12/12/2024 的价格信息
2024-11-15 13:50:48,796 [INFO] price_checker.py:565 - 根据最小入住要求(3晚)跳过接下来的 2 天
2024-11-15 13:50:48,796 [INFO] price_checker.py:553 - [18/37] 处理日期: 13/12/2024
2024-11-15 13:50:48,797 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-15 13:50:48,797 [INFO] price_checker.py:255 - 入住日期: 13/12/2024
2024-11-15 13:50:50,498 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:50:50,498 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:50:55,256 [INFO] price_checker.py:271 - 开始检查日期 13/12/2024 的最小入住要求...
2024-11-15 13:50:55,259 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="13, Friday, December 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-13/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">13</div></td>
2024-11-15 13:50:55,269 [INFO] price_checker.py:158 - 找到日期: 13/12/2024
2024-11-15 13:50:55,269 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:50:56,108 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:50:56,108 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:50:56,115 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:50:56,134 [INFO] price_checker.py:337 - 找到可见价格元素: $305 NZD 
night
$305 NZD per night
2024-11-15 13:50:56,143 [INFO] price_checker.py:350 - 找到每晚价格元素: $305 NZD 
night
$305 NZD per night
2024-11-15 13:50:56,143 [INFO] price_checker.py:356 - 成功解析折扣价格: $305 NZD
2024-11-15 13:50:56,143 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:50:56,151 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 13:50:56,389 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:50:56,660 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:50:56,667 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:50:56,674 [INFO] price_checker.py:403 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-15 13:50:56,674 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $90 NZD
2024-11-15 13:50:56,674 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:50:56,681 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:50:56,686 [INFO] price_checker.py:403 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-15 13:50:56,686 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $90 NZD
2024-11-15 13:50:56,686 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:50:57,679 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="13, Friday, December 2024. Selected check-in date There is a 3 night minimum stay requirement. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_h84ua7"><div class="_d82cel" style="transform: translate(-50%, -100%) translate(20.5px, -12px);"><div class="_1mslrl4"><div class="_u7azij">3-night minimum</div><svg role="presentation" focusable="false" class="_1mjga4hj"><path class="_1s2t3cl" d="M0,0 20,0 10,10z"></path><path class="_c3dsty" d="M0,0 10,10 20,0"></path></svg></div></div><div class="_194zlzjz notranslate" data-testid="calendar-day-13/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">13</div></div></td>
2024-11-15 13:50:57,688 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:50:57,689 [INFO] price_checker.py:218 - - aria-label: 13, Friday, December 2024. Selected check-in date There is a 3 night minimum stay requirement. 
2024-11-15 13:50:57,689 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:50:57,689 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:50:57,689 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 3晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:50:57,689 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 3晚 (自动检测)
2024-11-15 13:50:57,689 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/837352260137971048?check_in=2024-12-13&check_out=2024-12-16&adults=3&children=0&infants=0
2024-11-15 13:51:00,513 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:51:00,513 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:51:02,816 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:51:02,818 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:51:04,830 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:51:04,830 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:51:06,695 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:51:10,518 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:51:10,518 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:51:10,524 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:51:10,542 [INFO] price_checker.py:337 - 找到可见价格元素: $157 NZD 
night
$157 NZD per night
2024-11-15 13:51:10,547 [INFO] price_checker.py:350 - 找到每晚价格元素: $157 NZD 
night
$157 NZD per night
2024-11-15 13:51:10,547 [INFO] price_checker.py:356 - 成功解析折扣价格: $157 NZD
2024-11-15 13:51:10,547 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:51:14,844 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:51:14,845 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:51:16,712 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:51:20,582 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 13:51:20,582 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:51:20,590 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:51:20,596 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 13:51:20,596 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 13:51:20,596 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:51:20,603 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:51:20,608 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 13:51:20,608 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 13:51:20,608 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:51:20,615 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:51:20,620 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 13:51:20,620 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 13:51:20,620 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:51:20,627 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:51:20,632 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 13:51:20,632 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 13:51:20,632 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:51:20,639 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:51:20,644 [INFO] price_checker.py:403 - 找到价格元素: $27 NZD (HTML: <span class="_1k4xcdh">$27&nbsp;NZD</span>)
2024-11-15 13:51:20,644 [INFO] price_checker.py:416 - ✓ 成功设置税费: $27 NZD
2024-11-15 13:51:20,644 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:51:24,867 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:51:24,867 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:51:24,873 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:51:24,893 [INFO] price_checker.py:337 - 找到可见价格元素: $340 NZD 
$316 NZD 
night
$316 NZD per night, originally $340 NZD
2024-11-15 13:51:24,904 [INFO] price_checker.py:350 - 找到每晚价格元素: $340 NZD 
$316 NZD 
night
$316 NZD per night, originally $340 NZD
2024-11-15 13:51:24,904 [INFO] price_checker.py:356 - 成功解析折扣价格: $316 NZD
2024-11-15 13:51:24,904 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:51:24,911 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 13:51:25,414 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:51:25,422 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:51:25,428 [INFO] price_checker.py:403 - 找到价格元素: $59 NZD (HTML: <span class="_1k4xcdh">$59&nbsp;NZD</span>)
2024-11-15 13:51:25,428 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $59 NZD
2024-11-15 13:51:25,428 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:51:25,435 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:51:25,441 [INFO] price_checker.py:403 - 找到价格元素: $59 NZD (HTML: <span class="_1k4xcdh">$59&nbsp;NZD</span>)
2024-11-15 13:51:25,441 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $59 NZD
2024-11-15 13:51:25,441 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:51:25,448 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:51:25,452 [INFO] price_checker.py:403 - 找到价格元素: $141 NZD (HTML: <span class="_1k4xcdh">$141&nbsp;NZD</span>)
2024-11-15 13:51:25,453 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $141 NZD
2024-11-15 13:51:25,453 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:51:25,459 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:51:25,464 [INFO] price_checker.py:403 - 找到价格元素: $141 NZD (HTML: <span class="_1k4xcdh">$141&nbsp;NZD</span>)
2024-11-15 13:51:25,464 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $141 NZD
2024-11-15 13:51:25,464 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:51:25,471 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:51:25,476 [INFO] price_checker.py:403 - 找到价格元素: $130 NZD (HTML: <span class="_1k4xcdh">$130&nbsp;NZD</span>)
2024-11-15 13:51:25,476 [INFO] price_checker.py:416 - ✓ 成功设置税费: $130 NZD
2024-11-15 13:51:25,476 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:51:26,734 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:51:30,668 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:51:30,675 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:51:30,680 [INFO] price_checker.py:403 - 找到价格元素: $234 NZD (HTML: <span class="_j1kt73">$234&nbsp;NZD</span>)
2024-11-15 13:51:30,680 [INFO] price_checker.py:420 - ✓ 成功设置总价: $234 NZD
2024-11-15 13:51:30,681 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:51:30,687 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:51:30,692 [INFO] price_checker.py:403 - 找到价格元素: $234 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$234&nbsp;NZD</span></span>)
2024-11-15 13:51:30,692 [INFO] price_checker.py:420 - ✓ 成功设置总价: $234 NZD
2024-11-15 13:51:30,697 [INFO] price_checker.py:403 - 找到价格元素: $234 NZD (HTML: <span class="_j1kt73">$234&nbsp;NZD</span>)
2024-11-15 13:51:30,697 [INFO] price_checker.py:420 - ✓ 成功设置总价: $234 NZD
2024-11-15 13:51:30,702 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:51:30,702 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:51:30,702 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:51:30,702 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 13:51:30,702 [INFO] price_checker.py:450 - ✓ service_fee: $29 NZD
2024-11-15 13:51:30,702 [INFO] price_checker.py:450 - ✓ taxes: $27 NZD
2024-11-15 13:51:30,702 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:51:30,702 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:51:30,702 [INFO] price_checker.py:457 - check_in: 03/12/2024
2024-11-15 13:51:30,702 [INFO] price_checker.py:457 - check_out: 04/12/2024
2024-11-15 13:51:30,702 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 13:51:30,703 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:51:30,703 [INFO] price_checker.py:457 - nightly_price: $157 NZD
2024-11-15 13:51:30,703 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 13:51:30,703 [INFO] price_checker.py:457 - service_fee: $29 NZD
2024-11-15 13:51:30,703 [INFO] price_checker.py:457 - taxes: $27 NZD
2024-11-15 13:51:30,703 [INFO] price_checker.py:457 - total: 
2024-11-15 13:51:30,703 [INFO] price_checker.py:559 - ✓ 成功获取 03/12/2024 的价格信息
2024-11-15 13:51:30,703 [INFO] price_checker.py:573 - 已完成 15/72 个日期的处理
2024-11-15 13:51:35,509 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:51:35,516 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:51:35,523 [INFO] price_checker.py:403 - 找到价格元素: $1,137 NZD (HTML: <span class="_j1kt73">$1,137&nbsp;NZD</span>)
2024-11-15 13:51:35,523 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,137 NZD
2024-11-15 13:51:35,523 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:51:35,530 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:51:35,535 [INFO] price_checker.py:403 - 找到价格元素: $1,137 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$1,137&nbsp;NZD</span></span>)
2024-11-15 13:51:35,535 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,137 NZD
2024-11-15 13:51:35,541 [INFO] price_checker.py:403 - 找到价格元素: $1,137 NZD (HTML: <span class="_j1kt73">$1,137&nbsp;NZD</span>)
2024-11-15 13:51:35,541 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,137 NZD
2024-11-15 13:51:35,547 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:51:35,547 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:51:35,547 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:51:35,547 [INFO] price_checker.py:450 - ✓ cleaning_fee: $59 NZD
2024-11-15 13:51:35,547 [INFO] price_checker.py:450 - ✓ service_fee: $141 NZD
2024-11-15 13:51:35,547 [INFO] price_checker.py:450 - ✓ taxes: $130 NZD
2024-11-15 13:51:35,547 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:51:35,547 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:51:35,547 [INFO] price_checker.py:457 - check_in: 13/12/2024
2024-11-15 13:51:35,547 [INFO] price_checker.py:457 - check_out: 16/12/2024
2024-11-15 13:51:35,547 [INFO] price_checker.py:457 - min_nights: 3
2024-11-15 13:51:35,547 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:51:35,548 [INFO] price_checker.py:457 - nightly_price: $316 NZD
2024-11-15 13:51:35,548 [INFO] price_checker.py:457 - cleaning_fee: $59 NZD
2024-11-15 13:51:35,548 [INFO] price_checker.py:457 - service_fee: $141 NZD
2024-11-15 13:51:35,548 [INFO] price_checker.py:457 - taxes: $130 NZD
2024-11-15 13:51:35,548 [INFO] price_checker.py:457 - total: 
2024-11-15 13:51:35,548 [INFO] price_checker.py:559 - ✓ 成功获取 13/12/2024 的价格信息
2024-11-15 13:51:35,548 [INFO] price_checker.py:565 - 根据最小入住要求(3晚)跳过接下来的 2 天
2024-11-15 13:51:35,548 [INFO] price_checker.py:573 - 已完成 20/37 个日期的处理
2024-11-15 13:51:36,758 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:51:36,764 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:51:36,772 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span class="_j1kt73">$700&nbsp;NZD</span>)
2024-11-15 13:51:36,772 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 13:51:36,772 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:51:36,779 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:51:36,784 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$700&nbsp;NZD</span></span>)
2024-11-15 13:51:36,784 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 13:51:36,788 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span class="_j1kt73">$700&nbsp;NZD</span>)
2024-11-15 13:51:36,789 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 13:51:36,793 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:51:36,793 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:51:36,793 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:51:36,793 [INFO] price_checker.py:450 - ✓ cleaning_fee: $90 NZD
2024-11-15 13:51:36,793 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 13:51:36,794 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 13:51:36,794 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:51:36,794 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:51:36,794 [INFO] price_checker.py:457 - check_in: 02/12/2024
2024-11-15 13:51:36,794 [INFO] price_checker.py:457 - check_out: 04/12/2024
2024-11-15 13:51:36,794 [INFO] price_checker.py:457 - min_nights: 2
2024-11-15 13:51:36,794 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:51:36,794 [INFO] price_checker.py:457 - nightly_price: $305 NZD
2024-11-15 13:51:36,794 [INFO] price_checker.py:457 - cleaning_fee: $90 NZD
2024-11-15 13:51:36,794 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 13:51:36,794 [INFO] price_checker.py:457 - taxes: None
2024-11-15 13:51:36,794 [INFO] price_checker.py:457 - total: 
2024-11-15 13:51:36,795 [INFO] price_checker.py:559 - ✓ 成功获取 02/12/2024 的价格信息
2024-11-15 13:51:36,795 [INFO] price_checker.py:565 - 根据最小入住要求(2晚)跳过接下来的 1 天
2024-11-15 13:51:36,795 [INFO] price_checker.py:553 - [12/39] 处理日期: 03/12/2024
2024-11-15 13:51:36,795 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/43435162
2024-11-15 13:51:36,795 [INFO] price_checker.py:255 - 入住日期: 03/12/2024
2024-11-15 13:51:40,703 [INFO] price_checker.py:553 - [16/72] 处理日期: 04/12/2024
2024-11-15 13:51:40,703 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 13:51:40,703 [INFO] price_checker.py:255 - 入住日期: 04/12/2024
2024-11-15 13:51:41,918 [INFO] price_checker.py:271 - 开始检查日期 03/12/2024 的最小入住要求...
2024-11-15 13:51:41,921 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="3, Tuesday, December 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-03/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">3</div></td>
2024-11-15 13:51:41,930 [INFO] price_checker.py:158 - 找到日期: 03/12/2024
2024-11-15 13:51:41,930 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:51:43,058 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:51:44,343 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="3, Tuesday, December 2024. Selected check-in date There is a 2 night minimum stay requirement. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_h84ua7"><div class="_d82cel" style="transform: translateY(-100%) translateY(-12px);"><div class="_1mslrl4"><div class="_u7azij">2-night minimum</div><svg role="presentation" focusable="false" class="_8c7xtno" style="left: 9.5px;"><path class="_1s2t3cl" d="M0,0 20,0 10,10z"></path><path class="_c3dsty" d="M0,0 10,10 20,0"></path></svg></div></div><div class="_194zlzjz notranslate" data-testid="calendar-day-03/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">3</div></div></td>
2024-11-15 13:51:44,353 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:51:44,353 [INFO] price_checker.py:218 - - aria-label: 3, Tuesday, December 2024. Selected check-in date There is a 2 night minimum stay requirement. 
2024-11-15 13:51:44,353 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:51:44,353 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:51:44,353 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 2晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:51:44,353 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 2晚 (自动检测)
2024-11-15 13:51:44,353 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/43435162?check_in=2024-12-03&check_out=2024-12-05&adults=3&children=0&infants=0
2024-11-15 13:51:45,548 [INFO] price_checker.py:553 - [19/37] 处理日期: 14/12/2024
2024-11-15 13:51:45,548 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-15 13:51:45,549 [INFO] price_checker.py:255 - 入住日期: 14/12/2024
2024-11-15 13:51:45,829 [INFO] price_checker.py:271 - 开始检查日期 04/12/2024 的最小入住要求...
2024-11-15 13:51:45,832 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="4, Wednesday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-04/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">4</div></td>
2024-11-15 13:51:45,844 [INFO] price_checker.py:158 - 找到日期: 04/12/2024
2024-11-15 13:51:45,844 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:51:47,005 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:51:48,294 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="4, Wednesday, December 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_ox7af8h notranslate" data-testid="calendar-day-04/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">4</div></td>
2024-11-15 13:51:48,304 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:51:48,304 [INFO] price_checker.py:218 - - aria-label: 4, Wednesday, December 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 13:51:48,304 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:51:48,304 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:51:48,304 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:51:48,304 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 13:51:48,304 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2024-12-04&check_out=2024-12-05&adults=3&children=0&infants=0
2024-11-15 13:51:49,446 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:51:49,449 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:51:50,683 [INFO] price_checker.py:271 - 开始检查日期 14/12/2024 的最小入住要求...
2024-11-15 13:51:50,686 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="14, Saturday, December 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-14/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">14</div></td>
2024-11-15 13:51:50,696 [INFO] price_checker.py:158 - 找到日期: 14/12/2024
2024-11-15 13:51:50,696 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:51:51,461 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:51:51,461 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:51:51,821 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:51:53,118 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="14, Saturday, December 2024. Selected check-in date There is a 3 night minimum stay requirement. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_h84ua7"><div class="_d82cel" style="transform: translate(-100%, -100%) translate(41px, -12px);"><div class="_1mslrl4"><div class="_u7azij">3-night minimum</div><svg role="presentation" focusable="false" class="_8c7xtno" style="right: 9.5px;"><path class="_1s2t3cl" d="M0,0 20,0 10,10z"></path><path class="_c3dsty" d="M0,0 10,10 20,0"></path></svg></div></div><div class="_194zlzjz notranslate" data-testid="calendar-day-14/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">14</div></div></td>
2024-11-15 13:51:53,128 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:51:53,128 [INFO] price_checker.py:218 - - aria-label: 14, Saturday, December 2024. Selected check-in date There is a 3 night minimum stay requirement. 
2024-11-15 13:51:53,128 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:51:53,128 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:51:53,128 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 3晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:51:53,128 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 3晚 (自动检测)
2024-11-15 13:51:53,128 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/837352260137971048?check_in=2024-12-14&check_out=2024-12-17&adults=3&children=0&infants=0
2024-11-15 13:51:53,406 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:51:53,409 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:51:55,421 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:51:55,421 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:51:58,218 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:51:58,221 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:52:00,232 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:52:00,232 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:52:01,471 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:52:01,471 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:52:05,440 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:52:05,440 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:52:10,271 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:52:10,271 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:52:11,502 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:52:11,504 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:52:11,511 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:52:11,534 [INFO] price_checker.py:337 - 找到可见价格元素: $305 NZD 
night
$305 NZD per night
2024-11-15 13:52:11,540 [INFO] price_checker.py:350 - 找到每晚价格元素: $305 NZD 
night
$305 NZD per night
2024-11-15 13:52:11,540 [INFO] price_checker.py:356 - 成功解析折扣价格: $305 NZD
2024-11-15 13:52:11,540 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:52:11,546 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 13:52:12,050 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:52:12,057 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:52:12,064 [INFO] price_checker.py:403 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-15 13:52:12,064 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $90 NZD
2024-11-15 13:52:12,064 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:52:12,071 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:52:12,076 [INFO] price_checker.py:403 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-15 13:52:12,076 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $90 NZD
2024-11-15 13:52:12,076 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:52:15,470 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:52:15,470 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:52:15,476 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:52:15,492 [INFO] price_checker.py:337 - 找到可见价格元素: $155 NZD 
night
$155 NZD per night
2024-11-15 13:52:15,499 [INFO] price_checker.py:350 - 找到每晚价格元素: $155 NZD 
night
$155 NZD per night
2024-11-15 13:52:15,499 [INFO] price_checker.py:356 - 成功解析折扣价格: $155 NZD
2024-11-15 13:52:15,499 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:52:20,294 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:52:20,294 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:52:20,300 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:52:20,316 [INFO] price_checker.py:337 - 找到可见价格元素: $345 NZD 
$316 NZD 
night
$316 NZD per night, originally $345 NZD
2024-11-15 13:52:20,322 [INFO] price_checker.py:350 - 找到每晚价格元素: $345 NZD 
$316 NZD 
night
$316 NZD per night, originally $345 NZD
2024-11-15 13:52:20,322 [INFO] price_checker.py:356 - 成功解析折扣价格: $316 NZD
2024-11-15 13:52:20,322 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:52:20,328 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 13:52:20,831 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:52:20,839 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:52:20,845 [INFO] price_checker.py:403 - 找到价格元素: $59 NZD (HTML: <span class="_1k4xcdh">$59&nbsp;NZD</span>)
2024-11-15 13:52:20,845 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $59 NZD
2024-11-15 13:52:20,845 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:52:20,852 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:52:20,857 [INFO] price_checker.py:403 - 找到价格元素: $59 NZD (HTML: <span class="_1k4xcdh">$59&nbsp;NZD</span>)
2024-11-15 13:52:20,857 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $59 NZD
2024-11-15 13:52:20,857 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:52:20,864 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:52:20,869 [INFO] price_checker.py:403 - 找到价格元素: $141 NZD (HTML: <span class="_1k4xcdh">$141&nbsp;NZD</span>)
2024-11-15 13:52:20,869 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $141 NZD
2024-11-15 13:52:20,869 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:52:20,876 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:52:20,880 [INFO] price_checker.py:403 - 找到价格元素: $141 NZD (HTML: <span class="_1k4xcdh">$141&nbsp;NZD</span>)
2024-11-15 13:52:20,880 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $141 NZD
2024-11-15 13:52:20,880 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:52:20,887 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:52:20,892 [INFO] price_checker.py:403 - 找到价格元素: $130 NZD (HTML: <span class="_1k4xcdh">$130&nbsp;NZD</span>)
2024-11-15 13:52:20,892 [INFO] price_checker.py:416 - ✓ 成功设置税费: $130 NZD
2024-11-15 13:52:20,892 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:52:22,103 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:52:25,526 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 13:52:25,526 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:52:25,533 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:52:25,542 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 13:52:25,542 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 13:52:25,542 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:52:25,549 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:52:25,556 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 13:52:25,556 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 13:52:25,556 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:52:25,563 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:52:25,569 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 13:52:25,569 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 13:52:25,570 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:52:25,578 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:52:25,584 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 13:52:25,584 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 13:52:25,584 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:52:25,593 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:52:25,598 [INFO] price_checker.py:403 - 找到价格元素: $26 NZD (HTML: <span class="_1k4xcdh">$26&nbsp;NZD</span>)
2024-11-15 13:52:25,598 [INFO] price_checker.py:416 - ✓ 成功设置税费: $26 NZD
2024-11-15 13:52:25,598 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:52:30,937 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:52:30,944 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:52:30,949 [INFO] price_checker.py:403 - 找到价格元素: $1,137 NZD (HTML: <span class="_j1kt73">$1,137&nbsp;NZD</span>)
2024-11-15 13:52:30,950 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,137 NZD
2024-11-15 13:52:30,950 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:52:30,956 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:52:30,961 [INFO] price_checker.py:403 - 找到价格元素: $1,137 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$1,137&nbsp;NZD</span></span>)
2024-11-15 13:52:30,961 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,137 NZD
2024-11-15 13:52:30,966 [INFO] price_checker.py:403 - 找到价格元素: $1,137 NZD (HTML: <span class="_j1kt73">$1,137&nbsp;NZD</span>)
2024-11-15 13:52:30,967 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,137 NZD
2024-11-15 13:52:30,971 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:52:30,971 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:52:30,971 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:52:30,971 [INFO] price_checker.py:450 - ✓ cleaning_fee: $59 NZD
2024-11-15 13:52:30,971 [INFO] price_checker.py:450 - ✓ service_fee: $141 NZD
2024-11-15 13:52:30,971 [INFO] price_checker.py:450 - ✓ taxes: $130 NZD
2024-11-15 13:52:30,972 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:52:30,972 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:52:30,972 [INFO] price_checker.py:457 - check_in: 14/12/2024
2024-11-15 13:52:30,972 [INFO] price_checker.py:457 - check_out: 17/12/2024
2024-11-15 13:52:30,972 [INFO] price_checker.py:457 - min_nights: 3
2024-11-15 13:52:30,972 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:52:30,972 [INFO] price_checker.py:457 - nightly_price: $316 NZD
2024-11-15 13:52:30,972 [INFO] price_checker.py:457 - cleaning_fee: $59 NZD
2024-11-15 13:52:30,972 [INFO] price_checker.py:457 - service_fee: $141 NZD
2024-11-15 13:52:30,972 [INFO] price_checker.py:457 - taxes: $130 NZD
2024-11-15 13:52:30,972 [INFO] price_checker.py:457 - total: 
2024-11-15 13:52:30,972 [INFO] price_checker.py:559 - ✓ 成功获取 14/12/2024 的价格信息
2024-11-15 13:52:30,972 [INFO] price_checker.py:565 - 根据最小入住要求(3晚)跳过接下来的 2 天
2024-11-15 13:52:30,972 [INFO] price_checker.py:553 - [20/37] 处理日期: 30/12/2024
2024-11-15 13:52:30,973 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-15 13:52:30,973 [INFO] price_checker.py:255 - 入住日期: 30/12/2024
2024-11-15 13:52:32,135 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:52:35,630 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:52:35,637 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:52:35,642 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span class="_j1kt73">$231&nbsp;NZD</span>)
2024-11-15 13:52:35,642 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 13:52:35,643 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:52:35,649 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:52:35,654 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$231&nbsp;NZD</span></span>)
2024-11-15 13:52:35,654 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 13:52:35,659 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span class="_j1kt73">$231&nbsp;NZD</span>)
2024-11-15 13:52:35,659 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 13:52:35,664 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:52:35,664 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:52:35,664 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:52:35,665 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 13:52:35,665 [INFO] price_checker.py:450 - ✓ service_fee: $29 NZD
2024-11-15 13:52:35,665 [INFO] price_checker.py:450 - ✓ taxes: $26 NZD
2024-11-15 13:52:35,665 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:52:35,665 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:52:35,665 [INFO] price_checker.py:457 - check_in: 04/12/2024
2024-11-15 13:52:35,665 [INFO] price_checker.py:457 - check_out: 05/12/2024
2024-11-15 13:52:35,665 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 13:52:35,665 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:52:35,665 [INFO] price_checker.py:457 - nightly_price: $155 NZD
2024-11-15 13:52:35,665 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 13:52:35,665 [INFO] price_checker.py:457 - service_fee: $29 NZD
2024-11-15 13:52:35,665 [INFO] price_checker.py:457 - taxes: $26 NZD
2024-11-15 13:52:35,665 [INFO] price_checker.py:457 - total: 
2024-11-15 13:52:35,666 [INFO] price_checker.py:559 - ✓ 成功获取 04/12/2024 的价格信息
2024-11-15 13:52:35,666 [INFO] price_checker.py:553 - [17/72] 处理日期: 05/12/2024
2024-11-15 13:52:35,666 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 13:52:35,666 [INFO] price_checker.py:255 - 入住日期: 05/12/2024
2024-11-15 13:52:36,105 [INFO] price_checker.py:271 - 开始检查日期 30/12/2024 的最小入住要求...
2024-11-15 13:52:36,109 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_sl5yz7r" role="button" aria-disabled="false" aria-label="30, Monday, December 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-30/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">30</div></td>
2024-11-15 13:52:36,118 [INFO] price_checker.py:158 - 找到日期: 30/12/2024
2024-11-15 13:52:36,119 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:52:37,247 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:52:38,537 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_5v1jabe" role="button" aria-disabled="true" aria-label="30, Monday, December 2024. Selected check-in date There is a 3 night minimum stay requirement. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_h84ua7"><div class="_d82cel" style="transform: translateY(-100%) translateY(-12px);"><div class="_1mslrl4"><div class="_u7azij">3-night minimum</div><svg role="presentation" focusable="false" class="_8c7xtno" style="left: 9.5px;"><path class="_1s2t3cl" d="M0,0 20,0 10,10z"></path><path class="_c3dsty" d="M0,0 10,10 20,0"></path></svg></div></div><div class="_17slido1 notranslate" data-testid="calendar-day-30/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">30</div></div></td>
2024-11-15 13:52:38,546 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:52:38,546 [INFO] price_checker.py:218 - - aria-label: 30, Monday, December 2024. Selected check-in date There is a 3 night minimum stay requirement. 
2024-11-15 13:52:38,546 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:52:38,546 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:52:38,546 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 3晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:52:38,547 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 3晚 (自动检测)
2024-11-15 13:52:38,547 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/837352260137971048?check_in=2024-12-30&check_out=2025-01-02&adults=3&children=0&infants=0
2024-11-15 13:52:40,790 [INFO] price_checker.py:271 - 开始检查日期 05/12/2024 的最小入住要求...
2024-11-15 13:52:40,795 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="5, Thursday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-05/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">5</div></td>
2024-11-15 13:52:40,805 [INFO] price_checker.py:158 - 找到日期: 05/12/2024
2024-11-15 13:52:40,805 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:52:41,922 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:52:42,148 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:52:43,205 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="5, Thursday, December 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_ox7af8h notranslate" data-testid="calendar-day-05/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">5</div></td>
2024-11-15 13:52:43,214 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:52:43,214 [INFO] price_checker.py:218 - - aria-label: 5, Thursday, December 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 13:52:43,214 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:52:43,214 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:52:43,215 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:52:43,215 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 13:52:43,215 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2024-12-05&check_out=2024-12-06&adults=3&children=0&infants=0
2024-11-15 13:52:43,642 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:52:43,645 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:52:45,656 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:52:45,656 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:52:48,308 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:52:48,311 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:52:50,322 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:52:50,322 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:52:52,163 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:52:52,171 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:52:52,179 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span class="_j1kt73">$700&nbsp;NZD</span>)
2024-11-15 13:52:52,179 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 13:52:52,179 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:52:52,186 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:52:52,191 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$700&nbsp;NZD</span></span>)
2024-11-15 13:52:52,191 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 13:52:52,196 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span class="_j1kt73">$700&nbsp;NZD</span>)
2024-11-15 13:52:52,196 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 13:52:52,201 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:52:52,201 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:52:52,201 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:52:52,201 [INFO] price_checker.py:450 - ✓ cleaning_fee: $90 NZD
2024-11-15 13:52:52,202 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 13:52:52,202 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 13:52:52,202 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:52:52,202 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:52:52,202 [INFO] price_checker.py:457 - check_in: 03/12/2024
2024-11-15 13:52:52,202 [INFO] price_checker.py:457 - check_out: 05/12/2024
2024-11-15 13:52:52,202 [INFO] price_checker.py:457 - min_nights: 2
2024-11-15 13:52:52,202 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:52:52,202 [INFO] price_checker.py:457 - nightly_price: $305 NZD
2024-11-15 13:52:52,202 [INFO] price_checker.py:457 - cleaning_fee: $90 NZD
2024-11-15 13:52:52,202 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 13:52:52,203 [INFO] price_checker.py:457 - taxes: None
2024-11-15 13:52:52,203 [INFO] price_checker.py:457 - total: 
2024-11-15 13:52:52,203 [INFO] price_checker.py:559 - ✓ 成功获取 03/12/2024 的价格信息
2024-11-15 13:52:52,203 [INFO] price_checker.py:565 - 根据最小入住要求(2晚)跳过接下来的 1 天
2024-11-15 13:52:52,203 [INFO] price_checker.py:553 - [13/39] 处理日期: 04/12/2024
2024-11-15 13:52:52,203 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/43435162
2024-11-15 13:52:52,203 [INFO] price_checker.py:255 - 入住日期: 04/12/2024
2024-11-15 13:52:55,675 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:52:55,676 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:52:57,325 [INFO] price_checker.py:271 - 开始检查日期 04/12/2024 的最小入住要求...
2024-11-15 13:52:57,330 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="4, Wednesday, December 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-04/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">4</div></td>
2024-11-15 13:52:57,364 [INFO] price_checker.py:158 - 找到日期: 04/12/2024
2024-11-15 13:52:57,364 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:52:58,535 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:52:59,827 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="4, Wednesday, December 2024. Selected check-in date There is a 2 night minimum stay requirement. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_h84ua7"><div class="_d82cel" style="transform: translate(-50%, -100%) translate(20.5px, -12px);"><div class="_1mslrl4"><div class="_u7azij">2-night minimum</div><svg role="presentation" focusable="false" class="_1mjga4hj"><path class="_1s2t3cl" d="M0,0 20,0 10,10z"></path><path class="_c3dsty" d="M0,0 10,10 20,0"></path></svg></div></div><div class="_194zlzjz notranslate" data-testid="calendar-day-04/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">4</div></div></td>
2024-11-15 13:52:59,836 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:52:59,836 [INFO] price_checker.py:218 - - aria-label: 4, Wednesday, December 2024. Selected check-in date There is a 2 night minimum stay requirement. 
2024-11-15 13:52:59,836 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:52:59,836 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:52:59,836 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 2晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:52:59,836 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 2晚 (自动检测)
2024-11-15 13:52:59,836 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/43435162?check_in=2024-12-04&check_out=2024-12-06&adults=3&children=0&infants=0
2024-11-15 13:53:00,336 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:53:00,337 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:53:04,960 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:53:04,963 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:53:05,726 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:53:05,726 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:53:05,732 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:53:05,747 [INFO] price_checker.py:337 - 找到可见价格元素: $305 NZD 
night
$305 NZD per night
2024-11-15 13:53:05,752 [INFO] price_checker.py:350 - 找到每晚价格元素: $305 NZD 
night
$305 NZD per night
2024-11-15 13:53:05,753 [INFO] price_checker.py:356 - 成功解析折扣价格: $305 NZD
2024-11-15 13:53:05,753 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:53:05,759 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 13:53:06,262 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:53:06,269 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:53:06,275 [INFO] price_checker.py:403 - 找到价格元素: $59 NZD (HTML: <span class="_1k4xcdh">$59&nbsp;NZD</span>)
2024-11-15 13:53:06,275 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $59 NZD
2024-11-15 13:53:06,276 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:53:06,282 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:53:06,288 [INFO] price_checker.py:403 - 找到价格元素: $59 NZD (HTML: <span class="_1k4xcdh">$59&nbsp;NZD</span>)
2024-11-15 13:53:06,288 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $59 NZD
2024-11-15 13:53:06,288 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:53:06,294 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:53:06,300 [INFO] price_checker.py:403 - 找到价格元素: $136 NZD (HTML: <span class="_1k4xcdh">$136&nbsp;NZD</span>)
2024-11-15 13:53:06,300 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $136 NZD
2024-11-15 13:53:06,300 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:53:06,307 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:53:06,312 [INFO] price_checker.py:403 - 找到价格元素: $136 NZD (HTML: <span class="_1k4xcdh">$136&nbsp;NZD</span>)
2024-11-15 13:53:06,312 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $136 NZD
2024-11-15 13:53:06,312 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:53:06,319 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:53:06,324 [INFO] price_checker.py:403 - 找到价格元素: $126 NZD (HTML: <span class="_1k4xcdh">$126&nbsp;NZD</span>)
2024-11-15 13:53:06,324 [INFO] price_checker.py:416 - ✓ 成功设置税费: $126 NZD
2024-11-15 13:53:06,324 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:53:06,974 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:53:06,974 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:53:10,384 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:53:10,385 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:53:10,391 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:53:10,407 [INFO] price_checker.py:337 - 找到可见价格元素: $160 NZD 
night
$160 NZD per night
2024-11-15 13:53:10,414 [INFO] price_checker.py:350 - 找到每晚价格元素: $160 NZD 
night
$160 NZD per night
2024-11-15 13:53:10,414 [INFO] price_checker.py:356 - 成功解析折扣价格: $160 NZD
2024-11-15 13:53:10,414 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:53:16,343 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:53:16,350 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:53:16,356 [INFO] price_checker.py:403 - 找到价格元素: $1,101 NZD (HTML: <span class="_j1kt73">$1,101&nbsp;NZD</span>)
2024-11-15 13:53:16,356 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,101 NZD
2024-11-15 13:53:16,356 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:53:16,362 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:53:16,367 [INFO] price_checker.py:403 - 找到价格元素: $1,101 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$1,101&nbsp;NZD</span></span>)
2024-11-15 13:53:16,368 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,101 NZD
2024-11-15 13:53:16,373 [INFO] price_checker.py:403 - 找到价格元素: $1,101 NZD (HTML: <span class="_j1kt73">$1,101&nbsp;NZD</span>)
2024-11-15 13:53:16,373 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,101 NZD
2024-11-15 13:53:16,378 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:53:16,378 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:53:16,379 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:53:16,379 [INFO] price_checker.py:450 - ✓ cleaning_fee: $59 NZD
2024-11-15 13:53:16,379 [INFO] price_checker.py:450 - ✓ service_fee: $136 NZD
2024-11-15 13:53:16,379 [INFO] price_checker.py:450 - ✓ taxes: $126 NZD
2024-11-15 13:53:16,379 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:53:16,379 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:53:16,379 [INFO] price_checker.py:457 - check_in: 30/12/2024
2024-11-15 13:53:16,379 [INFO] price_checker.py:457 - check_out: 02/01/2025
2024-11-15 13:53:16,379 [INFO] price_checker.py:457 - min_nights: 3
2024-11-15 13:53:16,379 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:53:16,380 [INFO] price_checker.py:457 - nightly_price: $305 NZD
2024-11-15 13:53:16,380 [INFO] price_checker.py:457 - cleaning_fee: $59 NZD
2024-11-15 13:53:16,380 [INFO] price_checker.py:457 - service_fee: $136 NZD
2024-11-15 13:53:16,380 [INFO] price_checker.py:457 - taxes: $126 NZD
2024-11-15 13:53:16,380 [INFO] price_checker.py:457 - total: 
2024-11-15 13:53:16,380 [INFO] price_checker.py:559 - ✓ 成功获取 30/12/2024 的价格信息
2024-11-15 13:53:16,380 [INFO] price_checker.py:565 - 根据最小入住要求(3晚)跳过接下来的 2 天
2024-11-15 13:53:16,380 [INFO] price_checker.py:553 - [21/37] 处理日期: 31/12/2024
2024-11-15 13:53:16,380 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-15 13:53:16,380 [INFO] price_checker.py:255 - 入住日期: 31/12/2024
2024-11-15 13:53:17,023 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:53:17,023 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:53:20,418 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 13:53:20,418 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:53:20,425 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:53:20,432 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 13:53:20,432 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 13:53:20,432 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:53:20,439 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:53:20,443 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 13:53:20,444 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 13:53:20,444 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:53:20,450 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:53:20,455 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 13:53:20,455 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 13:53:20,456 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:53:20,462 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:53:20,467 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 13:53:20,467 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 13:53:20,467 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:53:20,474 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:53:20,479 [INFO] price_checker.py:403 - 找到价格元素: $27 NZD (HTML: <span class="_1k4xcdh">$27&nbsp;NZD</span>)
2024-11-15 13:53:20,479 [INFO] price_checker.py:416 - ✓ 成功设置税费: $27 NZD
2024-11-15 13:53:20,479 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:53:21,498 [INFO] price_checker.py:271 - 开始检查日期 31/12/2024 的最小入住要求...
2024-11-15 13:53:21,501 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_1qvi71ld" role="button" aria-disabled="false" aria-label="31, Tuesday, December 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-31/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">31</div></td>
2024-11-15 13:53:21,510 [INFO] price_checker.py:158 - 找到日期: 31/12/2024
2024-11-15 13:53:21,510 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:53:22,671 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:53:23,951 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1jaqd3t0" role="button" aria-disabled="true" aria-label="31, Tuesday, December 2024. Selected check-in date There is a 3 night minimum stay requirement. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_h84ua7"><div class="_d82cel" style="transform: translateY(-100%) translateY(-12px);"><div class="_1mslrl4"><div class="_u7azij">3-night minimum</div><svg role="presentation" focusable="false" class="_8c7xtno" style="left: 9.5px;"><path class="_1s2t3cl" d="M0,0 20,0 10,10z"></path><path class="_c3dsty" d="M0,0 10,10 20,0"></path></svg></div></div><div class="_17slido1 notranslate" data-testid="calendar-day-31/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">31</div></div></td>
2024-11-15 13:53:23,959 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:53:23,959 [INFO] price_checker.py:218 - - aria-label: 31, Tuesday, December 2024. Selected check-in date There is a 3 night minimum stay requirement. 
2024-11-15 13:53:23,959 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:53:23,960 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:53:23,960 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 3晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:53:23,960 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 3晚 (自动检测)
2024-11-15 13:53:23,960 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/837352260137971048?check_in=2024-12-31&check_out=2025-01-03&adults=3&children=0&infants=0
2024-11-15 13:53:27,033 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:53:27,033 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:53:27,039 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:53:27,055 [INFO] price_checker.py:337 - 找到可见价格元素: $305 NZD 
night
$305 NZD per night
2024-11-15 13:53:27,061 [INFO] price_checker.py:350 - 找到每晚价格元素: $305 NZD 
night
$305 NZD per night
2024-11-15 13:53:27,061 [INFO] price_checker.py:356 - 成功解析折扣价格: $305 NZD
2024-11-15 13:53:27,061 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:53:27,067 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 13:53:27,570 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:53:27,578 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:53:27,586 [INFO] price_checker.py:403 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-15 13:53:27,586 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $90 NZD
2024-11-15 13:53:27,586 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:53:27,594 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:53:27,599 [INFO] price_checker.py:403 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-15 13:53:27,599 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $90 NZD
2024-11-15 13:53:27,599 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:53:29,051 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:53:29,054 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:53:30,497 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:53:30,504 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:53:30,509 [INFO] price_checker.py:403 - 找到价格元素: $237 NZD (HTML: <span class="_j1kt73">$237&nbsp;NZD</span>)
2024-11-15 13:53:30,509 [INFO] price_checker.py:420 - ✓ 成功设置总价: $237 NZD
2024-11-15 13:53:30,509 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:53:30,516 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:53:30,521 [INFO] price_checker.py:403 - 找到价格元素: $237 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$237&nbsp;NZD</span></span>)
2024-11-15 13:53:30,521 [INFO] price_checker.py:420 - ✓ 成功设置总价: $237 NZD
2024-11-15 13:53:30,526 [INFO] price_checker.py:403 - 找到价格元素: $237 NZD (HTML: <span class="_j1kt73">$237&nbsp;NZD</span>)
2024-11-15 13:53:30,526 [INFO] price_checker.py:420 - ✓ 成功设置总价: $237 NZD
2024-11-15 13:53:30,531 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:53:30,531 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:53:30,531 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:53:30,532 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 13:53:30,532 [INFO] price_checker.py:450 - ✓ service_fee: $29 NZD
2024-11-15 13:53:30,532 [INFO] price_checker.py:450 - ✓ taxes: $27 NZD
2024-11-15 13:53:30,532 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:53:30,532 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:53:30,532 [INFO] price_checker.py:457 - check_in: 05/12/2024
2024-11-15 13:53:30,532 [INFO] price_checker.py:457 - check_out: 06/12/2024
2024-11-15 13:53:30,532 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 13:53:30,532 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:53:30,532 [INFO] price_checker.py:457 - nightly_price: $160 NZD
2024-11-15 13:53:30,532 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 13:53:30,532 [INFO] price_checker.py:457 - service_fee: $29 NZD
2024-11-15 13:53:30,532 [INFO] price_checker.py:457 - taxes: $27 NZD
2024-11-15 13:53:30,533 [INFO] price_checker.py:457 - total: 
2024-11-15 13:53:30,533 [INFO] price_checker.py:559 - ✓ 成功获取 05/12/2024 的价格信息
2024-11-15 13:53:30,533 [INFO] price_checker.py:553 - [18/72] 处理日期: 06/12/2024
2024-11-15 13:53:30,533 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 13:53:30,533 [INFO] price_checker.py:255 - 入住日期: 06/12/2024
2024-11-15 13:53:31,065 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:53:31,065 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:53:35,650 [INFO] price_checker.py:271 - 开始检查日期 06/12/2024 的最小入住要求...
2024-11-15 13:53:35,653 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="6, Friday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-06/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">6</div></td>
2024-11-15 13:53:35,662 [INFO] price_checker.py:158 - 找到日期: 06/12/2024
2024-11-15 13:53:35,663 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:53:36,775 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:53:37,620 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:53:38,071 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="6, Friday, December 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_ox7af8h notranslate" data-testid="calendar-day-06/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">6</div></td>
2024-11-15 13:53:38,082 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:53:38,083 [INFO] price_checker.py:218 - - aria-label: 6, Friday, December 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 13:53:38,083 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:53:38,083 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:53:38,083 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:53:38,083 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 13:53:38,083 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2024-12-06&check_out=2024-12-07&adults=3&children=0&infants=0
2024-11-15 13:53:41,079 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:53:41,079 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:53:43,173 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:53:43,176 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:53:45,188 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:53:45,188 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:53:47,627 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:53:51,105 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:53:51,105 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:53:51,111 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:53:51,126 [INFO] price_checker.py:337 - 找到可见价格元素: $330 NZD 
$305 NZD 
night
$305 NZD per night, originally $330 NZD
2024-11-15 13:53:51,133 [INFO] price_checker.py:350 - 找到每晚价格元素: $330 NZD 
$305 NZD 
night
$305 NZD per night, originally $330 NZD
2024-11-15 13:53:51,133 [INFO] price_checker.py:356 - 成功解析折扣价格: $305 NZD
2024-11-15 13:53:51,133 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:53:51,139 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 13:53:51,642 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:53:51,649 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:53:51,655 [INFO] price_checker.py:403 - 找到价格元素: $59 NZD (HTML: <span class="_1k4xcdh">$59&nbsp;NZD</span>)
2024-11-15 13:53:51,655 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $59 NZD
2024-11-15 13:53:51,655 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:53:51,662 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:53:51,668 [INFO] price_checker.py:403 - 找到价格元素: $59 NZD (HTML: <span class="_1k4xcdh">$59&nbsp;NZD</span>)
2024-11-15 13:53:51,668 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $59 NZD
2024-11-15 13:53:51,668 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:53:51,674 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:53:51,679 [INFO] price_checker.py:403 - 找到价格元素: $136 NZD (HTML: <span class="_1k4xcdh">$136&nbsp;NZD</span>)
2024-11-15 13:53:51,679 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $136 NZD
2024-11-15 13:53:51,680 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:53:51,686 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:53:51,691 [INFO] price_checker.py:403 - 找到价格元素: $136 NZD (HTML: <span class="_1k4xcdh">$136&nbsp;NZD</span>)
2024-11-15 13:53:51,691 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $136 NZD
2024-11-15 13:53:51,691 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:53:51,699 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:53:51,704 [INFO] price_checker.py:403 - 找到价格元素: $126 NZD (HTML: <span class="_1k4xcdh">$126&nbsp;NZD</span>)
2024-11-15 13:53:51,704 [INFO] price_checker.py:416 - ✓ 成功设置税费: $126 NZD
2024-11-15 13:53:51,704 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:53:55,212 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:53:55,212 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:53:57,659 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:54:01,742 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:54:01,749 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:54:01,755 [INFO] price_checker.py:403 - 找到价格元素: $1,101 NZD (HTML: <span class="_j1kt73">$1,101&nbsp;NZD</span>)
2024-11-15 13:54:01,755 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,101 NZD
2024-11-15 13:54:01,755 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:54:01,762 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:54:01,766 [INFO] price_checker.py:403 - 找到价格元素: $1,101 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$1,101&nbsp;NZD</span></span>)
2024-11-15 13:54:01,767 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,101 NZD
2024-11-15 13:54:01,772 [INFO] price_checker.py:403 - 找到价格元素: $1,101 NZD (HTML: <span class="_j1kt73">$1,101&nbsp;NZD</span>)
2024-11-15 13:54:01,772 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,101 NZD
2024-11-15 13:54:01,777 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:54:01,777 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:54:01,777 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:54:01,777 [INFO] price_checker.py:450 - ✓ cleaning_fee: $59 NZD
2024-11-15 13:54:01,777 [INFO] price_checker.py:450 - ✓ service_fee: $136 NZD
2024-11-15 13:54:01,777 [INFO] price_checker.py:450 - ✓ taxes: $126 NZD
2024-11-15 13:54:01,777 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:54:01,777 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:54:01,778 [INFO] price_checker.py:457 - check_in: 31/12/2024
2024-11-15 13:54:01,778 [INFO] price_checker.py:457 - check_out: 03/01/2025
2024-11-15 13:54:01,778 [INFO] price_checker.py:457 - min_nights: 3
2024-11-15 13:54:01,778 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:54:01,778 [INFO] price_checker.py:457 - nightly_price: $305 NZD
2024-11-15 13:54:01,778 [INFO] price_checker.py:457 - cleaning_fee: $59 NZD
2024-11-15 13:54:01,778 [INFO] price_checker.py:457 - service_fee: $136 NZD
2024-11-15 13:54:01,778 [INFO] price_checker.py:457 - taxes: $126 NZD
2024-11-15 13:54:01,778 [INFO] price_checker.py:457 - total: 
2024-11-15 13:54:01,778 [INFO] price_checker.py:559 - ✓ 成功获取 31/12/2024 的价格信息
2024-11-15 13:54:01,778 [INFO] price_checker.py:565 - 根据最小入住要求(3晚)跳过接下来的 2 天
2024-11-15 13:54:01,778 [INFO] price_checker.py:553 - [22/37] 处理日期: 01/01/2025
2024-11-15 13:54:01,778 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-15 13:54:01,778 [INFO] price_checker.py:255 - 入住日期: 01/01/2025
2024-11-15 13:54:05,238 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:54:05,238 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:54:05,244 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:54:05,262 [INFO] price_checker.py:337 - 找到可见价格元素: $155 NZD 
night
$155 NZD per night
2024-11-15 13:54:05,268 [INFO] price_checker.py:350 - 找到每晚价格元素: $155 NZD 
night
$155 NZD per night
2024-11-15 13:54:05,268 [INFO] price_checker.py:356 - 成功解析折扣价格: $155 NZD
2024-11-15 13:54:05,268 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:54:06,900 [INFO] price_checker.py:271 - 开始检查日期 01/01/2025 的最小入住要求...
2024-11-15 13:54:06,903 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_1qvi71ld" role="button" aria-disabled="false" aria-label="1, Wednesday, January 2025. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-01/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">1</div></td>
2024-11-15 13:54:06,913 [INFO] price_checker.py:158 - 找到日期: 01/01/2025
2024-11-15 13:54:06,914 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:54:07,678 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:54:07,685 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:54:07,693 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span class="_j1kt73">$700&nbsp;NZD</span>)
2024-11-15 13:54:07,693 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 13:54:07,693 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:54:07,700 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:54:07,704 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$700&nbsp;NZD</span></span>)
2024-11-15 13:54:07,704 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 13:54:07,710 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span class="_j1kt73">$700&nbsp;NZD</span>)
2024-11-15 13:54:07,710 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 13:54:07,714 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:54:07,715 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:54:07,715 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:54:07,715 [INFO] price_checker.py:450 - ✓ cleaning_fee: $90 NZD
2024-11-15 13:54:07,715 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 13:54:07,715 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 13:54:07,715 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:54:07,715 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:54:07,715 [INFO] price_checker.py:457 - check_in: 04/12/2024
2024-11-15 13:54:07,715 [INFO] price_checker.py:457 - check_out: 06/12/2024
2024-11-15 13:54:07,715 [INFO] price_checker.py:457 - min_nights: 2
2024-11-15 13:54:07,715 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:54:07,715 [INFO] price_checker.py:457 - nightly_price: $305 NZD
2024-11-15 13:54:07,715 [INFO] price_checker.py:457 - cleaning_fee: $90 NZD
2024-11-15 13:54:07,715 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 13:54:07,716 [INFO] price_checker.py:457 - taxes: None
2024-11-15 13:54:07,716 [INFO] price_checker.py:457 - total: 
2024-11-15 13:54:07,716 [INFO] price_checker.py:559 - ✓ 成功获取 04/12/2024 的价格信息
2024-11-15 13:54:07,716 [INFO] price_checker.py:565 - 根据最小入住要求(2晚)跳过接下来的 1 天
2024-11-15 13:54:07,716 [INFO] price_checker.py:553 - [14/39] 处理日期: 05/12/2024
2024-11-15 13:54:07,716 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/43435162
2024-11-15 13:54:07,716 [INFO] price_checker.py:255 - 入住日期: 05/12/2024
2024-11-15 13:54:12,839 [INFO] price_checker.py:271 - 开始检查日期 05/12/2024 的最小入住要求...
2024-11-15 13:54:12,842 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="5, Thursday, December 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-05/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">5</div></td>
2024-11-15 13:54:12,851 [INFO] price_checker.py:158 - 找到日期: 05/12/2024
2024-11-15 13:54:12,851 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:54:13,968 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:54:15,254 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="5, Thursday, December 2024. Selected check-in date There is a 2 night minimum stay requirement. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_h84ua7"><div class="_d82cel" style="transform: translate(-50%, -100%) translate(20.5px, -12px);"><div class="_1mslrl4"><div class="_u7azij">2-night minimum</div><svg role="presentation" focusable="false" class="_1mjga4hj"><path class="_1s2t3cl" d="M0,0 20,0 10,10z"></path><path class="_c3dsty" d="M0,0 10,10 20,0"></path></svg></div></div><div class="_194zlzjz notranslate" data-testid="calendar-day-05/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">5</div></div></td>
2024-11-15 13:54:15,263 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:54:15,263 [INFO] price_checker.py:218 - - aria-label: 5, Thursday, December 2024. Selected check-in date There is a 2 night minimum stay requirement. 
2024-11-15 13:54:15,264 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:54:15,264 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:54:15,264 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 2晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:54:15,264 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 2晚 (自动检测)
2024-11-15 13:54:15,264 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/43435162?check_in=2024-12-05&check_out=2024-12-07&adults=3&children=0&infants=0
2024-11-15 13:54:15,283 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 13:54:15,284 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:54:15,291 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:54:15,299 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 13:54:15,299 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 13:54:15,299 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:54:15,306 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:54:15,313 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 13:54:15,313 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 13:54:15,313 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:54:15,320 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:54:15,325 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 13:54:15,325 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 13:54:15,325 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:54:15,332 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:54:15,338 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 13:54:15,338 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 13:54:15,338 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:54:15,346 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:54:15,352 [INFO] price_checker.py:403 - 找到价格元素: $26 NZD (HTML: <span class="_1k4xcdh">$26&nbsp;NZD</span>)
2024-11-15 13:54:15,352 [INFO] price_checker.py:416 - ✓ 成功设置税费: $26 NZD
2024-11-15 13:54:15,352 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:54:16,935 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 13:54:18,067 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:54:18,073 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 13:54:18,073 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 13:54:18,076 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 13:54:18,077 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 13:54:18,077 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 13:54:18,077 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/837352260137971048?check_in=2025-01-01&check_out=2025-01-02&adults=3&children=0&infants=0
2024-11-15 13:54:20,357 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:54:20,359 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:54:22,371 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:54:22,371 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:54:23,218 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:54:23,221 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:54:25,231 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:54:25,231 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:54:25,365 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:54:25,372 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:54:25,377 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span class="_j1kt73">$231&nbsp;NZD</span>)
2024-11-15 13:54:25,377 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 13:54:25,377 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:54:25,384 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:54:25,389 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$231&nbsp;NZD</span></span>)
2024-11-15 13:54:25,389 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 13:54:25,395 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span class="_j1kt73">$231&nbsp;NZD</span>)
2024-11-15 13:54:25,395 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 13:54:25,400 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:54:25,400 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:54:25,400 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:54:25,400 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 13:54:25,400 [INFO] price_checker.py:450 - ✓ service_fee: $29 NZD
2024-11-15 13:54:25,400 [INFO] price_checker.py:450 - ✓ taxes: $26 NZD
2024-11-15 13:54:25,400 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:54:25,400 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:54:25,400 [INFO] price_checker.py:457 - check_in: 06/12/2024
2024-11-15 13:54:25,400 [INFO] price_checker.py:457 - check_out: 07/12/2024
2024-11-15 13:54:25,401 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 13:54:25,401 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:54:25,401 [INFO] price_checker.py:457 - nightly_price: $155 NZD
2024-11-15 13:54:25,401 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 13:54:25,401 [INFO] price_checker.py:457 - service_fee: $29 NZD
2024-11-15 13:54:25,401 [INFO] price_checker.py:457 - taxes: $26 NZD
2024-11-15 13:54:25,401 [INFO] price_checker.py:457 - total: 
2024-11-15 13:54:25,401 [INFO] price_checker.py:559 - ✓ 成功获取 06/12/2024 的价格信息
2024-11-15 13:54:25,401 [INFO] price_checker.py:553 - [19/72] 处理日期: 07/12/2024
2024-11-15 13:54:25,401 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 13:54:25,401 [INFO] price_checker.py:255 - 入住日期: 07/12/2024
2024-11-15 13:54:30,526 [INFO] price_checker.py:271 - 开始检查日期 07/12/2024 的最小入住要求...
2024-11-15 13:54:30,529 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="7, Saturday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-07/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">7</div></td>
2024-11-15 13:54:30,541 [INFO] price_checker.py:158 - 找到日期: 07/12/2024
2024-11-15 13:54:30,541 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:54:31,658 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:54:32,380 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:54:32,380 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:54:32,943 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="7, Saturday, December 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_ox7af8h notranslate" data-testid="calendar-day-07/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">7</div></td>
2024-11-15 13:54:32,953 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:54:32,953 [INFO] price_checker.py:218 - - aria-label: 7, Saturday, December 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 13:54:32,953 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:54:32,954 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:54:32,954 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:54:32,954 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 13:54:32,954 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2024-12-07&check_out=2024-12-08&adults=3&children=0&infants=0
2024-11-15 13:54:35,237 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:54:35,237 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:54:38,049 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:54:38,052 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:54:40,064 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:54:40,064 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:54:42,395 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:54:42,395 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:54:42,401 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:54:42,417 [INFO] price_checker.py:337 - 找到可见价格元素: $305 NZD 
night
$305 NZD per night
2024-11-15 13:54:42,422 [INFO] price_checker.py:350 - 找到每晚价格元素: $305 NZD 
night
$305 NZD per night
2024-11-15 13:54:42,422 [INFO] price_checker.py:356 - 成功解析折扣价格: $305 NZD
2024-11-15 13:54:42,422 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:54:42,429 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 13:54:42,932 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:54:42,939 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:54:42,945 [INFO] price_checker.py:403 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-15 13:54:42,946 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $90 NZD
2024-11-15 13:54:42,946 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:54:42,952 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:54:42,957 [INFO] price_checker.py:403 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-15 13:54:42,957 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $90 NZD
2024-11-15 13:54:42,957 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:54:45,252 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:54:45,252 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:54:50,100 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:54:50,100 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:54:53,002 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:54:55,289 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:54:55,290 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w ._11jcbg2
2024-11-15 13:55:00,105 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:55:00,105 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:55:00,112 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:55:00,130 [INFO] price_checker.py:337 - 找到可见价格元素: $162 NZD 
night
$162 NZD per night
2024-11-15 13:55:00,136 [INFO] price_checker.py:350 - 找到每晚价格元素: $162 NZD 
night
$162 NZD per night
2024-11-15 13:55:00,136 [INFO] price_checker.py:356 - 成功解析折扣价格: $162 NZD
2024-11-15 13:55:00,136 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:55:03,041 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:55:05,343 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:55:05,343 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[contains(@class, '_wgmchy')]//span[contains(text(), '$') and contains(text(), 'NZD')]
2024-11-15 13:55:10,164 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 13:55:10,164 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:55:10,171 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:55:10,177 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 13:55:10,178 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 13:55:10,178 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:55:10,184 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:55:10,189 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 13:55:10,189 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 13:55:10,189 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:55:10,196 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:55:10,200 [INFO] price_checker.py:403 - 找到价格元素: $30 NZD (HTML: <span class="_1k4xcdh">$30&nbsp;NZD</span>)
2024-11-15 13:55:10,200 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $30 NZD
2024-11-15 13:55:10,200 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:55:10,207 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:55:10,212 [INFO] price_checker.py:403 - 找到价格元素: $30 NZD (HTML: <span class="_1k4xcdh">$30&nbsp;NZD</span>)
2024-11-15 13:55:10,212 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $30 NZD
2024-11-15 13:55:10,212 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:55:10,219 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:55:10,224 [INFO] price_checker.py:403 - 找到价格元素: $27 NZD (HTML: <span class="_1k4xcdh">$27&nbsp;NZD</span>)
2024-11-15 13:55:10,224 [INFO] price_checker.py:416 - ✓ 成功设置税费: $27 NZD
2024-11-15 13:55:10,224 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:55:13,101 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:55:15,394 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:55:15,394 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:55:20,274 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:55:20,281 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:55:20,286 [INFO] price_checker.py:403 - 找到价格元素: $239 NZD (HTML: <span class="_j1kt73">$239&nbsp;NZD</span>)
2024-11-15 13:55:20,286 [INFO] price_checker.py:420 - ✓ 成功设置总价: $239 NZD
2024-11-15 13:55:20,286 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:55:20,293 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:55:20,297 [INFO] price_checker.py:403 - 找到价格元素: $239 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$239&nbsp;NZD</span></span>)
2024-11-15 13:55:20,298 [INFO] price_checker.py:420 - ✓ 成功设置总价: $239 NZD
2024-11-15 13:55:20,302 [INFO] price_checker.py:403 - 找到价格元素: $239 NZD (HTML: <span class="_j1kt73">$239&nbsp;NZD</span>)
2024-11-15 13:55:20,303 [INFO] price_checker.py:420 - ✓ 成功设置总价: $239 NZD
2024-11-15 13:55:20,307 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:55:20,307 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:55:20,307 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:55:20,307 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 13:55:20,307 [INFO] price_checker.py:450 - ✓ service_fee: $30 NZD
2024-11-15 13:55:20,307 [INFO] price_checker.py:450 - ✓ taxes: $27 NZD
2024-11-15 13:55:20,307 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:55:20,307 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:55:20,308 [INFO] price_checker.py:457 - check_in: 07/12/2024
2024-11-15 13:55:20,308 [INFO] price_checker.py:457 - check_out: 08/12/2024
2024-11-15 13:55:20,308 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 13:55:20,308 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:55:20,308 [INFO] price_checker.py:457 - nightly_price: $162 NZD
2024-11-15 13:55:20,308 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 13:55:20,308 [INFO] price_checker.py:457 - service_fee: $30 NZD
2024-11-15 13:55:20,308 [INFO] price_checker.py:457 - taxes: $27 NZD
2024-11-15 13:55:20,308 [INFO] price_checker.py:457 - total: 
2024-11-15 13:55:20,308 [INFO] price_checker.py:559 - ✓ 成功获取 07/12/2024 的价格信息
2024-11-15 13:55:20,308 [INFO] price_checker.py:553 - [20/72] 处理日期: 08/12/2024
2024-11-15 13:55:20,308 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 13:55:20,308 [INFO] price_checker.py:255 - 入住日期: 08/12/2024
2024-11-15 13:55:23,126 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:55:23,133 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:55:23,140 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span class="_j1kt73">$700&nbsp;NZD</span>)
2024-11-15 13:55:23,140 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 13:55:23,140 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:55:23,146 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:55:23,151 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$700&nbsp;NZD</span></span>)
2024-11-15 13:55:23,151 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 13:55:23,156 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span class="_j1kt73">$700&nbsp;NZD</span>)
2024-11-15 13:55:23,156 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 13:55:23,161 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:55:23,162 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:55:23,162 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:55:23,162 [INFO] price_checker.py:450 - ✓ cleaning_fee: $90 NZD
2024-11-15 13:55:23,162 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 13:55:23,162 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 13:55:23,162 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:55:23,162 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:55:23,162 [INFO] price_checker.py:457 - check_in: 05/12/2024
2024-11-15 13:55:23,162 [INFO] price_checker.py:457 - check_out: 07/12/2024
2024-11-15 13:55:23,162 [INFO] price_checker.py:457 - min_nights: 2
2024-11-15 13:55:23,162 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:55:23,162 [INFO] price_checker.py:457 - nightly_price: $305 NZD
2024-11-15 13:55:23,162 [INFO] price_checker.py:457 - cleaning_fee: $90 NZD
2024-11-15 13:55:23,163 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 13:55:23,163 [INFO] price_checker.py:457 - taxes: None
2024-11-15 13:55:23,163 [INFO] price_checker.py:457 - total: 
2024-11-15 13:55:23,163 [INFO] price_checker.py:559 - ✓ 成功获取 05/12/2024 的价格信息
2024-11-15 13:55:23,163 [INFO] price_checker.py:565 - 根据最小入住要求(2晚)跳过接下来的 1 天
2024-11-15 13:55:23,163 [INFO] price_checker.py:573 - 已完成 15/39 个日期的处理
2024-11-15 13:55:25,413 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 13:55:25,413 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:55:25,429 [INFO] price_checker.py:271 - 开始检查日期 08/12/2024 的最小入住要求...
2024-11-15 13:55:25,432 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_1mv3p4vt" role="button" aria-disabled="false" aria-label="8, Sunday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-08/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">8</div></td>
2024-11-15 13:55:25,442 [INFO] price_checker.py:158 - 找到日期: 08/12/2024
2024-11-15 13:55:25,442 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:55:26,563 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:55:27,845 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_ubf03zg" role="button" aria-disabled="true" aria-label="8, Sunday, December 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1qis3zbj notranslate" data-testid="calendar-day-08/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">8</div></td>
2024-11-15 13:55:27,854 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:55:27,854 [INFO] price_checker.py:218 - - aria-label: 8, Sunday, December 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 13:55:27,854 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:55:27,854 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:55:27,855 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:55:27,855 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 13:55:27,855 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2024-12-08&check_out=2024-12-09&adults=3&children=0&infants=0
2024-11-15 13:55:32,957 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:55:32,960 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:55:33,163 [INFO] price_checker.py:553 - [15/39] 处理日期: 06/12/2024
2024-11-15 13:55:33,163 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/43435162
2024-11-15 13:55:33,163 [INFO] price_checker.py:255 - 入住日期: 06/12/2024
2024-11-15 13:55:34,971 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:55:34,971 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:55:35,434 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:55:38,290 [INFO] price_checker.py:271 - 开始检查日期 06/12/2024 的最小入住要求...
2024-11-15 13:55:38,293 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="6, Friday, December 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-06/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">6</div></td>
2024-11-15 13:55:38,302 [INFO] price_checker.py:158 - 找到日期: 06/12/2024
2024-11-15 13:55:38,302 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:55:39,416 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:55:40,701 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="6, Friday, December 2024. Selected check-in date There is a 2 night minimum stay requirement. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_h84ua7"><div class="_d82cel" style="transform: translate(-50%, -100%) translate(20.5px, -12px);"><div class="_1mslrl4"><div class="_u7azij">2-night minimum</div><svg role="presentation" focusable="false" class="_1mjga4hj"><path class="_1s2t3cl" d="M0,0 20,0 10,10z"></path><path class="_c3dsty" d="M0,0 10,10 20,0"></path></svg></div></div><div class="_194zlzjz notranslate" data-testid="calendar-day-06/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">6</div></div></td>
2024-11-15 13:55:40,711 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:55:40,711 [INFO] price_checker.py:218 - - aria-label: 6, Friday, December 2024. Selected check-in date There is a 2 night minimum stay requirement. 
2024-11-15 13:55:40,711 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:55:40,711 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:55:40,711 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 2晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:55:40,711 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 2晚 (自动检测)
2024-11-15 13:55:40,711 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/43435162?check_in=2024-12-06&check_out=2024-12-08&adults=3&children=0&infants=0
2024-11-15 13:55:45,010 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:55:45,010 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:55:45,462 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:55:45,829 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:55:45,832 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:55:47,843 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:55:47,843 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:55:55,039 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:55:55,039 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:55:55,045 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:55:55,059 [INFO] price_checker.py:337 - 找到可见价格元素: $155 NZD 
night
$155 NZD per night
2024-11-15 13:55:55,065 [INFO] price_checker.py:350 - 找到每晚价格元素: $155 NZD 
night
$155 NZD per night
2024-11-15 13:55:55,065 [INFO] price_checker.py:356 - 成功解析折扣价格: $155 NZD
2024-11-15 13:55:55,065 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:55:55,491 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:55:57,881 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:55:57,881 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:56:05,075 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 13:56:05,075 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:56:05,082 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:56:05,088 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 13:56:05,088 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 13:56:05,088 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:56:05,094 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:56:05,099 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 13:56:05,099 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 13:56:05,099 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:56:05,106 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:56:05,110 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 13:56:05,110 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 13:56:05,111 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:56:05,117 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:56:05,122 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 13:56:05,122 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 13:56:05,122 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:56:05,129 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:56:05,135 [INFO] price_checker.py:403 - 找到价格元素: $26 NZD (HTML: <span class="_1k4xcdh">$26&nbsp;NZD</span>)
2024-11-15 13:56:05,135 [INFO] price_checker.py:416 - ✓ 成功设置税费: $26 NZD
2024-11-15 13:56:05,135 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:56:05,526 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:56:07,912 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:56:07,912 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:56:07,918 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:56:07,933 [INFO] price_checker.py:337 - 找到可见价格元素: $305 NZD 
night
$305 NZD per night
2024-11-15 13:56:07,938 [INFO] price_checker.py:350 - 找到每晚价格元素: $305 NZD 
night
$305 NZD per night
2024-11-15 13:56:07,938 [INFO] price_checker.py:356 - 成功解析折扣价格: $305 NZD
2024-11-15 13:56:07,939 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:56:07,944 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 13:56:08,447 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:56:08,454 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:56:08,461 [INFO] price_checker.py:403 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-15 13:56:08,462 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $90 NZD
2024-11-15 13:56:08,462 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:56:08,468 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:56:08,473 [INFO] price_checker.py:403 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-15 13:56:08,473 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $90 NZD
2024-11-15 13:56:08,473 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:56:15,173 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:56:15,180 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:56:15,185 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span class="_j1kt73">$231&nbsp;NZD</span>)
2024-11-15 13:56:15,185 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 13:56:15,185 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:56:15,192 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:56:15,196 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$231&nbsp;NZD</span></span>)
2024-11-15 13:56:15,196 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 13:56:15,201 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span class="_j1kt73">$231&nbsp;NZD</span>)
2024-11-15 13:56:15,201 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 13:56:15,205 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:56:15,206 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:56:15,206 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:56:15,206 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 13:56:15,206 [INFO] price_checker.py:450 - ✓ service_fee: $29 NZD
2024-11-15 13:56:15,206 [INFO] price_checker.py:450 - ✓ taxes: $26 NZD
2024-11-15 13:56:15,206 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:56:15,206 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:56:15,206 [INFO] price_checker.py:457 - check_in: 08/12/2024
2024-11-15 13:56:15,206 [INFO] price_checker.py:457 - check_out: 09/12/2024
2024-11-15 13:56:15,206 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 13:56:15,206 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:56:15,206 [INFO] price_checker.py:457 - nightly_price: $155 NZD
2024-11-15 13:56:15,207 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 13:56:15,207 [INFO] price_checker.py:457 - service_fee: $29 NZD
2024-11-15 13:56:15,207 [INFO] price_checker.py:457 - taxes: $26 NZD
2024-11-15 13:56:15,207 [INFO] price_checker.py:457 - total: 
2024-11-15 13:56:15,207 [INFO] price_checker.py:559 - ✓ 成功获取 08/12/2024 的价格信息
2024-11-15 13:56:15,207 [INFO] price_checker.py:573 - 已完成 20/72 个日期的处理
2024-11-15 13:56:15,562 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:56:18,502 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:56:25,207 [INFO] price_checker.py:553 - [21/72] 处理日期: 11/12/2024
2024-11-15 13:56:25,207 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 13:56:25,207 [INFO] price_checker.py:255 - 入住日期: 11/12/2024
2024-11-15 13:56:25,593 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:56:28,538 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:56:30,329 [INFO] price_checker.py:271 - 开始检查日期 11/12/2024 的最小入住要求...
2024-11-15 13:56:30,332 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="11, Wednesday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-11/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">11</div></td>
2024-11-15 13:56:30,341 [INFO] price_checker.py:158 - 找到日期: 11/12/2024
2024-11-15 13:56:30,341 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:56:31,467 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:56:32,755 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="11, Wednesday, December 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_ox7af8h notranslate" data-testid="calendar-day-11/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">11</div></td>
2024-11-15 13:56:32,763 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:56:32,763 [INFO] price_checker.py:218 - - aria-label: 11, Wednesday, December 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 13:56:32,763 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:56:32,763 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:56:32,764 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:56:32,764 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 13:56:32,764 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2024-12-11&check_out=2024-12-12&adults=3&children=0&infants=0
2024-11-15 13:56:35,614 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:56:37,890 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:56:37,893 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:56:38,556 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:56:39,905 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:56:39,905 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:56:48,603 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:56:48,609 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:56:48,616 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span class="_j1kt73">$700&nbsp;NZD</span>)
2024-11-15 13:56:48,616 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 13:56:48,616 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:56:48,623 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:56:48,627 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$700&nbsp;NZD</span></span>)
2024-11-15 13:56:48,627 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 13:56:48,632 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span class="_j1kt73">$700&nbsp;NZD</span>)
2024-11-15 13:56:48,632 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 13:56:48,636 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:56:48,637 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:56:48,637 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:56:48,637 [INFO] price_checker.py:450 - ✓ cleaning_fee: $90 NZD
2024-11-15 13:56:48,637 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 13:56:48,637 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 13:56:48,637 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:56:48,637 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:56:48,637 [INFO] price_checker.py:457 - check_in: 06/12/2024
2024-11-15 13:56:48,637 [INFO] price_checker.py:457 - check_out: 08/12/2024
2024-11-15 13:56:48,637 [INFO] price_checker.py:457 - min_nights: 2
2024-11-15 13:56:48,637 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:56:48,637 [INFO] price_checker.py:457 - nightly_price: $305 NZD
2024-11-15 13:56:48,637 [INFO] price_checker.py:457 - cleaning_fee: $90 NZD
2024-11-15 13:56:48,637 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 13:56:48,638 [INFO] price_checker.py:457 - taxes: None
2024-11-15 13:56:48,638 [INFO] price_checker.py:457 - total: 
2024-11-15 13:56:48,638 [INFO] price_checker.py:559 - ✓ 成功获取 06/12/2024 的价格信息
2024-11-15 13:56:48,638 [INFO] price_checker.py:565 - 根据最小入住要求(2晚)跳过接下来的 1 天
2024-11-15 13:56:48,638 [INFO] price_checker.py:553 - [16/39] 处理日期: 07/12/2024
2024-11-15 13:56:48,638 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/43435162
2024-11-15 13:56:48,638 [INFO] price_checker.py:255 - 入住日期: 07/12/2024
2024-11-15 13:56:49,961 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:56:49,961 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:56:53,759 [INFO] price_checker.py:271 - 开始检查日期 07/12/2024 的最小入住要求...
2024-11-15 13:56:53,761 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="7, Saturday, December 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-07/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">7</div></td>
2024-11-15 13:56:53,770 [INFO] price_checker.py:158 - 找到日期: 07/12/2024
2024-11-15 13:56:53,770 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:56:54,904 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:56:55,677 [WARNING] price_checker.py:443 - 尝试点击价格展开按钮失败: Message: no such element: Unable to locate element: {"method":"xpath","selector":"//button[contains(@class, '_12wl7g09')]"}
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00952BFE]
	(No symbol) [0x00952CDB]
	(No symbol) [0x0098EBD2]
	(No symbol) [0x00973954]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 13:56:55,678 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:56:55,678 [WARNING] price_checker.py:452 - ✗ cleaning_fee 未获取到
2024-11-15 13:56:55,678 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 13:56:55,678 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 13:56:55,678 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:56:55,678 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:56:55,678 [INFO] price_checker.py:457 - check_in: 01/01/2025
2024-11-15 13:56:55,678 [INFO] price_checker.py:457 - check_out: 02/01/2025
2024-11-15 13:56:55,678 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 13:56:55,678 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:56:55,678 [INFO] price_checker.py:457 - nightly_price: None
2024-11-15 13:56:55,678 [INFO] price_checker.py:457 - cleaning_fee: None
2024-11-15 13:56:55,679 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 13:56:55,679 [INFO] price_checker.py:457 - taxes: None
2024-11-15 13:56:55,679 [INFO] price_checker.py:457 - total: None
2024-11-15 13:56:55,679 [INFO] price_checker.py:559 - ✓ 成功获取 01/01/2025 的价格信息
2024-11-15 13:56:55,679 [INFO] price_checker.py:553 - [23/37] 处理日期: 02/01/2025
2024-11-15 13:56:55,679 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-15 13:56:55,679 [INFO] price_checker.py:255 - 入住日期: 02/01/2025
2024-11-15 13:56:56,207 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="7, Saturday, December 2024. Selected check-in date There is a 2 night minimum stay requirement. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_h84ua7"><div class="_d82cel" style="transform: translate(-100%, -100%) translate(41px, -12px);"><div class="_1mslrl4"><div class="_u7azij">2-night minimum</div><svg role="presentation" focusable="false" class="_8c7xtno" style="right: 9.5px;"><path class="_1s2t3cl" d="M0,0 20,0 10,10z"></path><path class="_c3dsty" d="M0,0 10,10 20,0"></path></svg></div></div><div class="_194zlzjz notranslate" data-testid="calendar-day-07/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">7</div></div></td>
2024-11-15 13:56:56,215 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:56:56,215 [INFO] price_checker.py:218 - - aria-label: 7, Saturday, December 2024. Selected check-in date There is a 2 night minimum stay requirement. 
2024-11-15 13:56:56,215 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:56:56,215 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:56:56,215 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 2晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:56:56,215 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 2晚 (自动检测)
2024-11-15 13:56:56,215 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/43435162?check_in=2024-12-07&check_out=2024-12-09&adults=3&children=0&infants=0
2024-11-15 13:57:00,022 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:57:00,022 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:57:00,027 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:57:00,042 [INFO] price_checker.py:337 - 找到可见价格元素: $156 NZD 
night
$156 NZD per night
2024-11-15 13:57:00,048 [INFO] price_checker.py:350 - 找到每晚价格元素: $156 NZD 
night
$156 NZD per night
2024-11-15 13:57:00,048 [INFO] price_checker.py:356 - 成功解析折扣价格: $156 NZD
2024-11-15 13:57:00,048 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:57:00,802 [INFO] price_checker.py:271 - 开始检查日期 02/01/2025 的最小入住要求...
2024-11-15 13:57:00,805 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="2, Thursday, January 2025. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-02/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">2</div></td>
2024-11-15 13:57:00,814 [INFO] price_checker.py:158 - 找到日期: 02/01/2025
2024-11-15 13:57:00,814 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:57:01,336 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:57:01,338 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:57:03,350 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:57:03,351 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:57:10,065 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 13:57:10,065 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:57:10,072 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:57:10,077 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 13:57:10,077 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 13:57:10,078 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:57:10,084 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:57:10,089 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 13:57:10,089 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 13:57:10,089 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:57:10,095 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:57:10,100 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 13:57:10,100 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 13:57:10,100 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:57:10,106 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:57:10,112 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 13:57:10,112 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 13:57:10,113 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:57:10,119 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:57:10,124 [INFO] price_checker.py:403 - 找到价格元素: $27 NZD (HTML: <span class="_1k4xcdh">$27&nbsp;NZD</span>)
2024-11-15 13:57:10,124 [INFO] price_checker.py:416 - ✓ 成功设置税费: $27 NZD
2024-11-15 13:57:10,124 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:57:10,843 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 13:57:11,945 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:57:11,950 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 13:57:11,951 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 13:57:11,952 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 13:57:11,952 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 13:57:11,952 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 13:57:11,952 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/837352260137971048?check_in=2025-01-02&check_out=2025-01-03&adults=3&children=0&infants=0
2024-11-15 13:57:13,381 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:57:13,382 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:57:17,073 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:57:17,075 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:57:19,086 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:57:19,086 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:57:20,155 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:57:20,162 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:57:20,167 [INFO] price_checker.py:403 - 找到价格元素: $233 NZD (HTML: <span class="_j1kt73">$233&nbsp;NZD</span>)
2024-11-15 13:57:20,167 [INFO] price_checker.py:420 - ✓ 成功设置总价: $233 NZD
2024-11-15 13:57:20,167 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:57:20,174 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:57:20,179 [INFO] price_checker.py:403 - 找到价格元素: $233 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$233&nbsp;NZD</span></span>)
2024-11-15 13:57:20,179 [INFO] price_checker.py:420 - ✓ 成功设置总价: $233 NZD
2024-11-15 13:57:20,185 [INFO] price_checker.py:403 - 找到价格元素: $233 NZD (HTML: <span class="_j1kt73">$233&nbsp;NZD</span>)
2024-11-15 13:57:20,185 [INFO] price_checker.py:420 - ✓ 成功设置总价: $233 NZD
2024-11-15 13:57:20,190 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:57:20,190 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:57:20,190 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:57:20,190 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 13:57:20,190 [INFO] price_checker.py:450 - ✓ service_fee: $29 NZD
2024-11-15 13:57:20,190 [INFO] price_checker.py:450 - ✓ taxes: $27 NZD
2024-11-15 13:57:20,190 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:57:20,190 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:57:20,190 [INFO] price_checker.py:457 - check_in: 11/12/2024
2024-11-15 13:57:20,190 [INFO] price_checker.py:457 - check_out: 12/12/2024
2024-11-15 13:57:20,190 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 13:57:20,190 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:57:20,191 [INFO] price_checker.py:457 - nightly_price: $156 NZD
2024-11-15 13:57:20,191 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 13:57:20,191 [INFO] price_checker.py:457 - service_fee: $29 NZD
2024-11-15 13:57:20,191 [INFO] price_checker.py:457 - taxes: $27 NZD
2024-11-15 13:57:20,191 [INFO] price_checker.py:457 - total: 
2024-11-15 13:57:20,191 [INFO] price_checker.py:559 - ✓ 成功获取 11/12/2024 的价格信息
2024-11-15 13:57:20,191 [INFO] price_checker.py:553 - [22/72] 处理日期: 12/12/2024
2024-11-15 13:57:20,191 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 13:57:20,191 [INFO] price_checker.py:255 - 入住日期: 12/12/2024
2024-11-15 13:57:23,418 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:57:23,418 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:57:23,424 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:57:23,438 [INFO] price_checker.py:337 - 找到可见价格元素: $305 NZD 
night
$305 NZD per night
2024-11-15 13:57:23,444 [INFO] price_checker.py:350 - 找到每晚价格元素: $305 NZD 
night
$305 NZD per night
2024-11-15 13:57:23,444 [INFO] price_checker.py:356 - 成功解析折扣价格: $305 NZD
2024-11-15 13:57:23,444 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:57:23,450 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 13:57:23,953 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:57:23,961 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:57:23,967 [INFO] price_checker.py:403 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-15 13:57:23,967 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $90 NZD
2024-11-15 13:57:23,967 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:57:23,975 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:57:23,980 [INFO] price_checker.py:403 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-15 13:57:23,980 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $90 NZD
2024-11-15 13:57:23,981 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:57:25,318 [INFO] price_checker.py:271 - 开始检查日期 12/12/2024 的最小入住要求...
2024-11-15 13:57:25,321 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="12, Thursday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-12/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">12</div></td>
2024-11-15 13:57:25,331 [INFO] price_checker.py:158 - 找到日期: 12/12/2024
2024-11-15 13:57:25,331 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:57:26,450 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:57:27,726 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="12, Thursday, December 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_ox7af8h notranslate" data-testid="calendar-day-12/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">12</div></td>
2024-11-15 13:57:27,734 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:57:27,734 [INFO] price_checker.py:218 - - aria-label: 12, Thursday, December 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 13:57:27,734 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:57:27,734 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:57:27,735 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:57:27,735 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 13:57:27,735 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2024-12-12&check_out=2024-12-13&adults=3&children=0&infants=0
2024-11-15 13:57:29,109 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:57:29,109 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:57:32,821 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:57:32,824 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:57:34,005 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:57:34,835 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:57:34,835 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:57:39,127 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:57:39,127 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:57:44,029 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:57:44,869 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:57:44,870 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:57:49,165 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:57:49,165 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w ._11jcbg2
2024-11-15 13:57:54,064 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:57:54,903 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:57:54,903 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:57:54,909 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:57:54,925 [INFO] price_checker.py:337 - 找到可见价格元素: $155 NZD 
night
$155 NZD per night
2024-11-15 13:57:54,930 [INFO] price_checker.py:350 - 找到每晚价格元素: $155 NZD 
night
$155 NZD per night
2024-11-15 13:57:54,930 [INFO] price_checker.py:356 - 成功解析折扣价格: $155 NZD
2024-11-15 13:57:54,930 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:57:59,211 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:57:59,211 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[contains(@class, '_wgmchy')]//span[contains(text(), '$') and contains(text(), 'NZD')]
2024-11-15 13:58:04,095 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:58:04,102 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:58:04,109 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span class="_j1kt73">$700&nbsp;NZD</span>)
2024-11-15 13:58:04,109 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 13:58:04,109 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:58:04,115 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:58:04,120 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$700&nbsp;NZD</span></span>)
2024-11-15 13:58:04,120 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 13:58:04,126 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span class="_j1kt73">$700&nbsp;NZD</span>)
2024-11-15 13:58:04,126 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 13:58:04,133 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:58:04,133 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:58:04,133 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:58:04,134 [INFO] price_checker.py:450 - ✓ cleaning_fee: $90 NZD
2024-11-15 13:58:04,134 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 13:58:04,134 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 13:58:04,134 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:58:04,134 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:58:04,134 [INFO] price_checker.py:457 - check_in: 07/12/2024
2024-11-15 13:58:04,134 [INFO] price_checker.py:457 - check_out: 09/12/2024
2024-11-15 13:58:04,134 [INFO] price_checker.py:457 - min_nights: 2
2024-11-15 13:58:04,134 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:58:04,134 [INFO] price_checker.py:457 - nightly_price: $305 NZD
2024-11-15 13:58:04,135 [INFO] price_checker.py:457 - cleaning_fee: $90 NZD
2024-11-15 13:58:04,135 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 13:58:04,135 [INFO] price_checker.py:457 - taxes: None
2024-11-15 13:58:04,135 [INFO] price_checker.py:457 - total: 
2024-11-15 13:58:04,135 [INFO] price_checker.py:559 - ✓ 成功获取 07/12/2024 的价格信息
2024-11-15 13:58:04,135 [INFO] price_checker.py:565 - 根据最小入住要求(2晚)跳过接下来的 1 天
2024-11-15 13:58:04,135 [INFO] price_checker.py:553 - [17/39] 处理日期: 08/12/2024
2024-11-15 13:58:04,135 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/43435162
2024-11-15 13:58:04,135 [INFO] price_checker.py:255 - 入住日期: 08/12/2024
2024-11-15 13:58:04,969 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 13:58:04,969 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:58:04,977 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:58:04,985 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 13:58:04,985 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 13:58:04,985 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:58:04,995 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:58:05,006 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 13:58:05,006 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 13:58:05,006 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:58:05,013 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:58:05,019 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 13:58:05,020 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 13:58:05,020 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:58:05,027 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:58:05,032 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 13:58:05,032 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 13:58:05,032 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:58:05,040 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:58:05,046 [INFO] price_checker.py:403 - 找到价格元素: $26 NZD (HTML: <span class="_1k4xcdh">$26&nbsp;NZD</span>)
2024-11-15 13:58:05,046 [INFO] price_checker.py:416 - ✓ 成功设置税费: $26 NZD
2024-11-15 13:58:05,046 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:58:09,229 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:58:09,230 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:58:09,257 [INFO] price_checker.py:271 - 开始检查日期 08/12/2024 的最小入住要求...
2024-11-15 13:58:09,260 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_1mv3p4vt" role="button" aria-disabled="false" aria-label="8, Sunday, December 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-08/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">8</div></td>
2024-11-15 13:58:09,269 [INFO] price_checker.py:158 - 找到日期: 08/12/2024
2024-11-15 13:58:09,269 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:58:10,386 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:58:11,675 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_ubf03zg" role="button" aria-disabled="true" aria-label="8, Sunday, December 2024. Selected check-in date There is a 2 night minimum stay requirement. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_h84ua7"><div class="_d82cel" style="transform: translate(-100%, -100%) translate(41px, -12px);"><div class="_1mslrl4"><div class="_u7azij">2-night minimum</div><svg role="presentation" focusable="false" class="_8c7xtno" style="right: 9.5px;"><path class="_1s2t3cl" d="M0,0 20,0 10,10z"></path><path class="_c3dsty" d="M0,0 10,10 20,0"></path></svg></div></div><div class="_17slido1 notranslate" data-testid="calendar-day-08/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">8</div></div></td>
2024-11-15 13:58:11,686 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:58:11,686 [INFO] price_checker.py:218 - - aria-label: 8, Sunday, December 2024. Selected check-in date There is a 2 night minimum stay requirement. 
2024-11-15 13:58:11,686 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:58:11,686 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:58:11,687 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 2晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:58:11,687 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 2晚 (自动检测)
2024-11-15 13:58:11,687 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/43435162?check_in=2024-12-08&check_out=2024-12-10&adults=3&children=0&infants=0
2024-11-15 13:58:15,059 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:58:15,065 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:58:15,071 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span class="_j1kt73">$231&nbsp;NZD</span>)
2024-11-15 13:58:15,071 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 13:58:15,071 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:58:15,078 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:58:15,083 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$231&nbsp;NZD</span></span>)
2024-11-15 13:58:15,083 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 13:58:15,088 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span class="_j1kt73">$231&nbsp;NZD</span>)
2024-11-15 13:58:15,088 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 13:58:15,093 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:58:15,093 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:58:15,093 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:58:15,093 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 13:58:15,093 [INFO] price_checker.py:450 - ✓ service_fee: $29 NZD
2024-11-15 13:58:15,093 [INFO] price_checker.py:450 - ✓ taxes: $26 NZD
2024-11-15 13:58:15,093 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:58:15,093 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:58:15,093 [INFO] price_checker.py:457 - check_in: 12/12/2024
2024-11-15 13:58:15,093 [INFO] price_checker.py:457 - check_out: 13/12/2024
2024-11-15 13:58:15,093 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 13:58:15,094 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:58:15,094 [INFO] price_checker.py:457 - nightly_price: $155 NZD
2024-11-15 13:58:15,094 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 13:58:15,094 [INFO] price_checker.py:457 - service_fee: $29 NZD
2024-11-15 13:58:15,094 [INFO] price_checker.py:457 - taxes: $26 NZD
2024-11-15 13:58:15,094 [INFO] price_checker.py:457 - total: 
2024-11-15 13:58:15,094 [INFO] price_checker.py:559 - ✓ 成功获取 12/12/2024 的价格信息
2024-11-15 13:58:15,094 [INFO] price_checker.py:553 - [23/72] 处理日期: 13/12/2024
2024-11-15 13:58:15,094 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 13:58:15,094 [INFO] price_checker.py:255 - 入住日期: 13/12/2024
2024-11-15 13:58:16,781 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:58:16,784 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:58:18,796 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:58:18,796 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:58:19,291 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 13:58:19,291 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:58:20,218 [INFO] price_checker.py:271 - 开始检查日期 13/12/2024 的最小入住要求...
2024-11-15 13:58:20,221 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="13, Friday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-13/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">13</div></td>
2024-11-15 13:58:20,231 [INFO] price_checker.py:158 - 找到日期: 13/12/2024
2024-11-15 13:58:20,231 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:58:21,355 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:58:22,640 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="13, Friday, December 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_ox7af8h notranslate" data-testid="calendar-day-13/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">13</div></td>
2024-11-15 13:58:22,649 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:58:22,649 [INFO] price_checker.py:218 - - aria-label: 13, Friday, December 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 13:58:22,649 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:58:22,649 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:58:22,649 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:58:22,649 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 13:58:22,649 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2024-12-13&check_out=2024-12-14&adults=3&children=0&infants=0
2024-11-15 13:58:27,741 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:58:27,745 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:58:28,814 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:58:28,814 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:58:29,312 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:58:29,756 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:58:29,756 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:58:38,850 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:58:38,850 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:58:38,856 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:58:38,870 [INFO] price_checker.py:337 - 找到可见价格元素: $305 NZD 
night
$305 NZD per night
2024-11-15 13:58:38,876 [INFO] price_checker.py:350 - 找到每晚价格元素: $305 NZD 
night
$305 NZD per night
2024-11-15 13:58:38,876 [INFO] price_checker.py:356 - 成功解析折扣价格: $305 NZD
2024-11-15 13:58:38,876 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:58:38,882 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 13:58:39,347 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:58:39,385 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:58:39,392 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:58:39,398 [INFO] price_checker.py:403 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-15 13:58:39,398 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $90 NZD
2024-11-15 13:58:39,398 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:58:39,405 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:58:39,410 [INFO] price_checker.py:403 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-15 13:58:39,410 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $90 NZD
2024-11-15 13:58:39,410 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:58:39,800 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:58:39,800 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:58:49,391 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:58:49,451 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:58:49,842 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:58:49,842 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:58:49,847 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:58:49,862 [INFO] price_checker.py:337 - 找到可见价格元素: $155 NZD 
night
$155 NZD per night
2024-11-15 13:58:49,868 [INFO] price_checker.py:350 - 找到每晚价格元素: $155 NZD 
night
$155 NZD per night
2024-11-15 13:58:49,869 [INFO] price_checker.py:356 - 成功解析折扣价格: $155 NZD
2024-11-15 13:58:49,869 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:58:59,436 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:58:59,498 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:58:59,872 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 13:58:59,872 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:58:59,879 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:58:59,884 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 13:58:59,885 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 13:58:59,885 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:58:59,891 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:58:59,896 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 13:58:59,896 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 13:58:59,896 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:58:59,903 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:58:59,907 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 13:58:59,907 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 13:58:59,907 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:58:59,914 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:58:59,919 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 13:58:59,919 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 13:58:59,919 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:58:59,926 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:58:59,930 [INFO] price_checker.py:403 - 找到价格元素: $26 NZD (HTML: <span class="_1k4xcdh">$26&nbsp;NZD</span>)
2024-11-15 13:58:59,930 [INFO] price_checker.py:416 - ✓ 成功设置税费: $26 NZD
2024-11-15 13:58:59,930 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:59:09,465 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:59:09,527 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:59:09,965 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:59:09,972 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:59:09,977 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span class="_j1kt73">$231&nbsp;NZD</span>)
2024-11-15 13:59:09,977 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 13:59:09,977 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:59:09,983 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:59:09,988 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$231&nbsp;NZD</span></span>)
2024-11-15 13:59:09,988 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 13:59:09,993 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span class="_j1kt73">$231&nbsp;NZD</span>)
2024-11-15 13:59:09,993 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 13:59:09,997 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:59:09,997 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:59:09,997 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:59:09,998 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 13:59:09,998 [INFO] price_checker.py:450 - ✓ service_fee: $29 NZD
2024-11-15 13:59:09,998 [INFO] price_checker.py:450 - ✓ taxes: $26 NZD
2024-11-15 13:59:09,998 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:59:09,998 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:59:09,998 [INFO] price_checker.py:457 - check_in: 13/12/2024
2024-11-15 13:59:09,998 [INFO] price_checker.py:457 - check_out: 14/12/2024
2024-11-15 13:59:09,998 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 13:59:09,998 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:59:09,998 [INFO] price_checker.py:457 - nightly_price: $155 NZD
2024-11-15 13:59:09,998 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 13:59:09,998 [INFO] price_checker.py:457 - service_fee: $29 NZD
2024-11-15 13:59:09,999 [INFO] price_checker.py:457 - taxes: $26 NZD
2024-11-15 13:59:09,999 [INFO] price_checker.py:457 - total: 
2024-11-15 13:59:09,999 [INFO] price_checker.py:559 - ✓ 成功获取 13/12/2024 的价格信息
2024-11-15 13:59:09,999 [INFO] price_checker.py:553 - [24/72] 处理日期: 14/12/2024
2024-11-15 13:59:09,999 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 13:59:09,999 [INFO] price_checker.py:255 - 入住日期: 14/12/2024
2024-11-15 13:59:15,548 [INFO] price_checker.py:271 - 开始检查日期 14/12/2024 的最小入住要求...
2024-11-15 13:59:15,551 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="14, Saturday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-14/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">14</div></td>
2024-11-15 13:59:15,561 [INFO] price_checker.py:158 - 找到日期: 14/12/2024
2024-11-15 13:59:15,561 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:59:16,692 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:59:17,990 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="14, Saturday, December 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_ox7af8h notranslate" data-testid="calendar-day-14/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">14</div></td>
2024-11-15 13:59:17,998 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:59:17,999 [INFO] price_checker.py:218 - - aria-label: 14, Saturday, December 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 13:59:17,999 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:59:17,999 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:59:17,999 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:59:17,999 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 13:59:17,999 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2024-12-14&check_out=2024-12-15&adults=3&children=0&infants=0
2024-11-15 13:59:19,483 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:59:19,545 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 13:59:19,552 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:59:19,560 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span class="_j1kt73">$700&nbsp;NZD</span>)
2024-11-15 13:59:19,560 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 13:59:19,560 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:59:19,567 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 13:59:19,572 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$700&nbsp;NZD</span></span>)
2024-11-15 13:59:19,572 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 13:59:19,576 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span class="_j1kt73">$700&nbsp;NZD</span>)
2024-11-15 13:59:19,576 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 13:59:19,581 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 13:59:19,581 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 13:59:19,581 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:59:19,581 [INFO] price_checker.py:450 - ✓ cleaning_fee: $90 NZD
2024-11-15 13:59:19,581 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 13:59:19,581 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 13:59:19,581 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:59:19,581 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:59:19,581 [INFO] price_checker.py:457 - check_in: 08/12/2024
2024-11-15 13:59:19,581 [INFO] price_checker.py:457 - check_out: 10/12/2024
2024-11-15 13:59:19,581 [INFO] price_checker.py:457 - min_nights: 2
2024-11-15 13:59:19,581 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:59:19,582 [INFO] price_checker.py:457 - nightly_price: $305 NZD
2024-11-15 13:59:19,582 [INFO] price_checker.py:457 - cleaning_fee: $90 NZD
2024-11-15 13:59:19,582 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 13:59:19,582 [INFO] price_checker.py:457 - taxes: None
2024-11-15 13:59:19,582 [INFO] price_checker.py:457 - total: 
2024-11-15 13:59:19,582 [INFO] price_checker.py:559 - ✓ 成功获取 08/12/2024 的价格信息
2024-11-15 13:59:19,582 [INFO] price_checker.py:565 - 根据最小入住要求(2晚)跳过接下来的 1 天
2024-11-15 13:59:19,582 [INFO] price_checker.py:553 - [18/39] 处理日期: 09/12/2024
2024-11-15 13:59:19,582 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/43435162
2024-11-15 13:59:19,582 [INFO] price_checker.py:255 - 入住日期: 09/12/2024
2024-11-15 13:59:23,086 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:59:23,089 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:59:24,703 [INFO] price_checker.py:271 - 开始检查日期 09/12/2024 的最小入住要求...
2024-11-15 13:59:24,706 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_sl5yz7r" role="button" aria-disabled="false" aria-label="9, Monday, December 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-09/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">9</div></td>
2024-11-15 13:59:24,715 [INFO] price_checker.py:158 - 找到日期: 09/12/2024
2024-11-15 13:59:24,715 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:59:25,107 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:59:25,107 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:59:25,843 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 13:59:27,129 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_5v1jabe" role="button" aria-disabled="true" aria-label="9, Monday, December 2024. Selected check-in date There is a 2 night minimum stay requirement. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_h84ua7"><div class="_d82cel" style="transform: translateY(-100%) translateY(-12px);"><div class="_1mslrl4"><div class="_u7azij">2-night minimum</div><svg role="presentation" focusable="false" class="_8c7xtno" style="left: 9.5px;"><path class="_1s2t3cl" d="M0,0 20,0 10,10z"></path><path class="_c3dsty" d="M0,0 10,10 20,0"></path></svg></div></div><div class="_17slido1 notranslate" data-testid="calendar-day-09/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">9</div></div></td>
2024-11-15 13:59:27,137 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 13:59:27,137 [INFO] price_checker.py:218 - - aria-label: 9, Monday, December 2024. Selected check-in date There is a 2 night minimum stay requirement. 
2024-11-15 13:59:27,138 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 13:59:27,138 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 13:59:27,138 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 2晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 13:59:27,138 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 2晚 (自动检测)
2024-11-15 13:59:27,138 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/43435162?check_in=2024-12-09&check_out=2024-12-11&adults=3&children=0&infants=0
2024-11-15 13:59:29,488 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 13:59:32,259 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 13:59:32,262 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 13:59:34,273 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 13:59:34,273 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 13:59:35,143 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:59:35,143 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:59:44,323 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:59:44,323 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 13:59:45,182 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:59:45,182 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:59:45,188 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:59:45,204 [INFO] price_checker.py:337 - 找到可见价格元素: $155 NZD 
night
$155 NZD per night
2024-11-15 13:59:45,209 [INFO] price_checker.py:350 - 找到每晚价格元素: $155 NZD 
night
$155 NZD per night
2024-11-15 13:59:45,209 [INFO] price_checker.py:356 - 成功解析折扣价格: $155 NZD
2024-11-15 13:59:45,209 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:59:49,554 [WARNING] price_checker.py:443 - 尝试点击价格展开按钮失败: Message: no such element: Unable to locate element: {"method":"xpath","selector":"//button[contains(@class, '_12wl7g09')]"}
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00952BFE]
	(No symbol) [0x00952CDB]
	(No symbol) [0x0098EBD2]
	(No symbol) [0x00973954]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 13:59:49,554 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 13:59:49,554 [WARNING] price_checker.py:452 - ✗ cleaning_fee 未获取到
2024-11-15 13:59:49,554 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 13:59:49,554 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 13:59:49,554 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 13:59:49,554 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 13:59:49,555 [INFO] price_checker.py:457 - check_in: 02/01/2025
2024-11-15 13:59:49,555 [INFO] price_checker.py:457 - check_out: 03/01/2025
2024-11-15 13:59:49,555 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 13:59:49,555 [INFO] price_checker.py:457 - guests: 3
2024-11-15 13:59:49,555 [INFO] price_checker.py:457 - nightly_price: None
2024-11-15 13:59:49,555 [INFO] price_checker.py:457 - cleaning_fee: None
2024-11-15 13:59:49,555 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 13:59:49,555 [INFO] price_checker.py:457 - taxes: None
2024-11-15 13:59:49,555 [INFO] price_checker.py:457 - total: None
2024-11-15 13:59:49,555 [INFO] price_checker.py:559 - ✓ 成功获取 02/01/2025 的价格信息
2024-11-15 13:59:49,555 [INFO] price_checker.py:553 - [24/37] 处理日期: 08/01/2025
2024-11-15 13:59:49,555 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-15 13:59:49,555 [INFO] price_checker.py:255 - 入住日期: 08/01/2025
2024-11-15 13:59:54,341 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 13:59:54,341 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 13:59:54,347 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 13:59:54,363 [INFO] price_checker.py:337 - 找到可见价格元素: $305 NZD 
night
$305 NZD per night
2024-11-15 13:59:54,371 [INFO] price_checker.py:350 - 找到每晚价格元素: $305 NZD 
night
$305 NZD per night
2024-11-15 13:59:54,371 [INFO] price_checker.py:356 - 成功解析折扣价格: $305 NZD
2024-11-15 13:59:54,371 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 13:59:54,378 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 13:59:54,678 [INFO] price_checker.py:271 - 开始检查日期 08/01/2025 的最小入住要求...
2024-11-15 13:59:54,681 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="8, Wednesday, January 2025. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-08/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">8</div></td>
2024-11-15 13:59:54,690 [INFO] price_checker.py:158 - 找到日期: 08/01/2025
2024-11-15 13:59:54,690 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 13:59:54,881 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:59:54,889 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:59:54,895 [INFO] price_checker.py:403 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-15 13:59:54,895 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $90 NZD
2024-11-15 13:59:54,895 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:59:54,901 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:59:54,907 [INFO] price_checker.py:403 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-15 13:59:54,907 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $90 NZD
2024-11-15 13:59:54,907 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:59:55,222 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 13:59:55,222 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:59:55,229 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:59:55,235 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 13:59:55,235 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 13:59:55,235 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:59:55,242 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:59:55,246 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 13:59:55,246 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 13:59:55,247 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:59:55,254 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:59:55,258 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 13:59:55,259 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 13:59:55,259 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:59:55,265 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:59:55,270 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 13:59:55,270 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 13:59:55,270 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 13:59:55,277 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 13:59:55,281 [INFO] price_checker.py:403 - 找到价格元素: $26 NZD (HTML: <span class="_1k4xcdh">$26&nbsp;NZD</span>)
2024-11-15 13:59:55,282 [INFO] price_checker.py:416 - ✓ 成功设置税费: $26 NZD
2024-11-15 13:59:55,282 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:00:04,717 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:00:04,934 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:00:05,306 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:00:05,313 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:00:05,318 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span class="_j1kt73">$231&nbsp;NZD</span>)
2024-11-15 14:00:05,318 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 14:00:05,318 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:00:05,325 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:00:05,330 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$231&nbsp;NZD</span></span>)
2024-11-15 14:00:05,330 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 14:00:05,335 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span class="_j1kt73">$231&nbsp;NZD</span>)
2024-11-15 14:00:05,335 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 14:00:05,339 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:00:05,339 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:00:05,339 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:00:05,339 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 14:00:05,339 [INFO] price_checker.py:450 - ✓ service_fee: $29 NZD
2024-11-15 14:00:05,339 [INFO] price_checker.py:450 - ✓ taxes: $26 NZD
2024-11-15 14:00:05,339 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:00:05,340 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:00:05,340 [INFO] price_checker.py:457 - check_in: 14/12/2024
2024-11-15 14:00:05,340 [INFO] price_checker.py:457 - check_out: 15/12/2024
2024-11-15 14:00:05,340 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:00:05,340 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:00:05,340 [INFO] price_checker.py:457 - nightly_price: $155 NZD
2024-11-15 14:00:05,340 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 14:00:05,340 [INFO] price_checker.py:457 - service_fee: $29 NZD
2024-11-15 14:00:05,340 [INFO] price_checker.py:457 - taxes: $26 NZD
2024-11-15 14:00:05,340 [INFO] price_checker.py:457 - total: 
2024-11-15 14:00:05,340 [INFO] price_checker.py:559 - ✓ 成功获取 14/12/2024 的价格信息
2024-11-15 14:00:05,340 [INFO] price_checker.py:553 - [25/72] 处理日期: 15/12/2024
2024-11-15 14:00:05,340 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 14:00:05,340 [INFO] price_checker.py:255 - 入住日期: 15/12/2024
2024-11-15 14:00:05,826 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:00:05,832 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:00:05,832 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 14:00:05,833 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:00:05,834 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:00:05,834 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:00:05,834 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/837352260137971048?check_in=2025-01-08&check_out=2025-01-09&adults=3&children=0&infants=0
2024-11-15 14:00:10,458 [INFO] price_checker.py:271 - 开始检查日期 15/12/2024 的最小入住要求...
2024-11-15 14:00:10,461 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_1mv3p4vt" role="button" aria-disabled="false" aria-label="15, Sunday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-15/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">15</div></td>
2024-11-15 14:00:10,470 [INFO] price_checker.py:158 - 找到日期: 15/12/2024
2024-11-15 14:00:10,470 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:00:10,920 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:00:10,923 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:00:11,606 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:00:12,895 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_ubf03zg" role="button" aria-disabled="true" aria-label="15, Sunday, December 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1qis3zbj notranslate" data-testid="calendar-day-15/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">15</div></td>
2024-11-15 14:00:12,903 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 14:00:12,903 [INFO] price_checker.py:218 - - aria-label: 15, Sunday, December 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 14:00:12,903 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 14:00:12,903 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 14:00:12,903 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 14:00:12,903 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:00:12,904 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2024-12-15&check_out=2024-12-16&adults=3&children=0&infants=0
2024-11-15 14:00:12,934 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:00:12,934 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:00:14,946 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:00:18,026 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:00:18,028 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:00:20,039 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:00:20,039 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:00:22,960 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:00:22,960 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:00:24,978 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:00:30,094 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:00:30,094 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:00:33,008 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:00:33,008 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:00:35,027 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:00:35,034 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:00:35,041 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span class="_j1kt73">$700&nbsp;NZD</span>)
2024-11-15 14:00:35,041 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 14:00:35,041 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:00:35,047 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:00:35,052 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$700&nbsp;NZD</span></span>)
2024-11-15 14:00:35,052 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 14:00:35,057 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span class="_j1kt73">$700&nbsp;NZD</span>)
2024-11-15 14:00:35,057 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 14:00:35,062 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:00:35,062 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:00:35,062 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:00:35,062 [INFO] price_checker.py:450 - ✓ cleaning_fee: $90 NZD
2024-11-15 14:00:35,062 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 14:00:35,062 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 14:00:35,062 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:00:35,062 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:00:35,062 [INFO] price_checker.py:457 - check_in: 09/12/2024
2024-11-15 14:00:35,062 [INFO] price_checker.py:457 - check_out: 11/12/2024
2024-11-15 14:00:35,062 [INFO] price_checker.py:457 - min_nights: 2
2024-11-15 14:00:35,063 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:00:35,063 [INFO] price_checker.py:457 - nightly_price: $305 NZD
2024-11-15 14:00:35,063 [INFO] price_checker.py:457 - cleaning_fee: $90 NZD
2024-11-15 14:00:35,063 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 14:00:35,063 [INFO] price_checker.py:457 - taxes: None
2024-11-15 14:00:35,063 [INFO] price_checker.py:457 - total: 
2024-11-15 14:00:35,063 [INFO] price_checker.py:559 - ✓ 成功获取 09/12/2024 的价格信息
2024-11-15 14:00:35,063 [INFO] price_checker.py:565 - 根据最小入住要求(2晚)跳过接下来的 1 天
2024-11-15 14:00:35,063 [INFO] price_checker.py:553 - [19/39] 处理日期: 10/12/2024
2024-11-15 14:00:35,063 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/43435162
2024-11-15 14:00:35,063 [INFO] price_checker.py:255 - 入住日期: 10/12/2024
2024-11-15 14:00:40,134 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:00:40,134 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:00:40,140 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:00:40,154 [INFO] price_checker.py:337 - 找到可见价格元素: $155 NZD 
night
$155 NZD per night
2024-11-15 14:00:40,160 [INFO] price_checker.py:350 - 找到每晚价格元素: $155 NZD 
night
$155 NZD per night
2024-11-15 14:00:40,160 [INFO] price_checker.py:356 - 成功解析折扣价格: $155 NZD
2024-11-15 14:00:40,160 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:00:40,184 [INFO] price_checker.py:271 - 开始检查日期 10/12/2024 的最小入住要求...
2024-11-15 14:00:40,187 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="10, Tuesday, December 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-10/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">10</div></td>
2024-11-15 14:00:40,198 [INFO] price_checker.py:158 - 找到日期: 10/12/2024
2024-11-15 14:00:40,198 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:00:41,341 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:00:42,638 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="10, Tuesday, December 2024. Selected check-in date There is a 2 night minimum stay requirement. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_h84ua7"><div class="_d82cel" style="transform: translateY(-100%) translateY(-12px);"><div class="_1mslrl4"><div class="_u7azij">2-night minimum</div><svg role="presentation" focusable="false" class="_8c7xtno" style="left: 9.5px;"><path class="_1s2t3cl" d="M0,0 20,0 10,10z"></path><path class="_c3dsty" d="M0,0 10,10 20,0"></path></svg></div></div><div class="_194zlzjz notranslate" data-testid="calendar-day-10/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">10</div></div></td>
2024-11-15 14:00:42,648 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 14:00:42,648 [INFO] price_checker.py:218 - - aria-label: 10, Tuesday, December 2024. Selected check-in date There is a 2 night minimum stay requirement. 
2024-11-15 14:00:42,648 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 14:00:42,648 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 14:00:42,648 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 2晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 14:00:42,648 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 2晚 (自动检测)
2024-11-15 14:00:42,648 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/43435162?check_in=2024-12-10&check_out=2024-12-12&adults=3&children=0&infants=0
2024-11-15 14:00:43,057 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:00:43,057 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w ._11jcbg2
2024-11-15 14:00:47,740 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:00:47,743 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:00:49,754 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:00:49,754 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:00:50,193 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 14:00:50,193 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:00:50,200 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:00:50,205 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:00:50,206 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:00:50,206 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:00:50,212 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:00:50,217 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:00:50,217 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:00:50,217 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:00:50,224 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:00:50,229 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 14:00:50,229 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 14:00:50,229 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:00:50,235 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:00:50,241 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 14:00:50,241 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 14:00:50,241 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:00:50,247 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:00:50,252 [INFO] price_checker.py:403 - 找到价格元素: $26 NZD (HTML: <span class="_1k4xcdh">$26&nbsp;NZD</span>)
2024-11-15 14:00:50,252 [INFO] price_checker.py:416 - ✓ 成功设置税费: $26 NZD
2024-11-15 14:00:50,252 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:00:53,086 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:00:53,086 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[contains(@class, '_wgmchy')]//span[contains(text(), '$') and contains(text(), 'NZD')]
2024-11-15 14:00:59,793 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:00:59,793 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:01:00,291 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:01:00,297 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:01:00,302 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span class="_j1kt73">$231&nbsp;NZD</span>)
2024-11-15 14:01:00,302 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 14:01:00,303 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:01:00,310 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:01:00,314 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$231&nbsp;NZD</span></span>)
2024-11-15 14:01:00,315 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 14:01:00,319 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span class="_j1kt73">$231&nbsp;NZD</span>)
2024-11-15 14:01:00,319 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 14:01:00,324 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:01:00,324 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:01:00,324 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:01:00,324 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 14:01:00,324 [INFO] price_checker.py:450 - ✓ service_fee: $29 NZD
2024-11-15 14:01:00,324 [INFO] price_checker.py:450 - ✓ taxes: $26 NZD
2024-11-15 14:01:00,324 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:01:00,324 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:01:00,324 [INFO] price_checker.py:457 - check_in: 15/12/2024
2024-11-15 14:01:00,324 [INFO] price_checker.py:457 - check_out: 16/12/2024
2024-11-15 14:01:00,324 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:01:00,324 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:01:00,325 [INFO] price_checker.py:457 - nightly_price: $155 NZD
2024-11-15 14:01:00,325 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 14:01:00,325 [INFO] price_checker.py:457 - service_fee: $29 NZD
2024-11-15 14:01:00,325 [INFO] price_checker.py:457 - taxes: $26 NZD
2024-11-15 14:01:00,325 [INFO] price_checker.py:457 - total: 
2024-11-15 14:01:00,325 [INFO] price_checker.py:559 - ✓ 成功获取 15/12/2024 的价格信息
2024-11-15 14:01:00,325 [INFO] price_checker.py:573 - 已完成 25/72 个日期的处理
2024-11-15 14:01:03,120 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:01:03,121 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:01:09,817 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:01:09,817 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:01:09,823 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:01:09,838 [INFO] price_checker.py:337 - 找到可见价格元素: $305 NZD 
night
$305 NZD per night
2024-11-15 14:01:09,843 [INFO] price_checker.py:350 - 找到每晚价格元素: $305 NZD 
night
$305 NZD per night
2024-11-15 14:01:09,844 [INFO] price_checker.py:356 - 成功解析折扣价格: $305 NZD
2024-11-15 14:01:09,844 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:01:09,849 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 14:01:10,325 [INFO] price_checker.py:553 - [26/72] 处理日期: 16/12/2024
2024-11-15 14:01:10,326 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 14:01:10,326 [INFO] price_checker.py:255 - 入住日期: 16/12/2024
2024-11-15 14:01:10,352 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:01:10,360 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:01:10,367 [INFO] price_checker.py:403 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-15 14:01:10,367 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $90 NZD
2024-11-15 14:01:10,367 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:01:10,374 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:01:10,379 [INFO] price_checker.py:403 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-15 14:01:10,380 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $90 NZD
2024-11-15 14:01:10,380 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:01:13,139 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 14:01:13,139 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:01:15,453 [INFO] price_checker.py:271 - 开始检查日期 16/12/2024 的最小入住要求...
2024-11-15 14:01:15,456 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_sl5yz7r" role="button" aria-disabled="false" aria-label="16, Monday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-16/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">16</div></td>
2024-11-15 14:01:15,465 [INFO] price_checker.py:158 - 找到日期: 16/12/2024
2024-11-15 14:01:15,465 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:01:16,584 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:01:17,867 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_5v1jabe" role="button" aria-disabled="true" aria-label="16, Monday, December 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1qis3zbj notranslate" data-testid="calendar-day-16/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">16</div></td>
2024-11-15 14:01:17,876 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 14:01:17,876 [INFO] price_checker.py:218 - - aria-label: 16, Monday, December 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 14:01:17,876 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 14:01:17,876 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 14:01:17,876 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 14:01:17,876 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:01:17,876 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2024-12-16&check_out=2024-12-17&adults=3&children=0&infants=0
2024-11-15 14:01:20,403 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:01:22,975 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:01:22,978 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:01:23,159 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:01:24,990 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:01:24,990 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:01:30,447 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:01:33,201 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:01:35,045 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:01:35,045 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:01:40,488 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:01:43,250 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:01:45,090 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:01:45,090 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:01:45,096 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:01:45,111 [INFO] price_checker.py:337 - 找到可见价格元素: $162 NZD 
night
$162 NZD per night
2024-11-15 14:01:45,117 [INFO] price_checker.py:350 - 找到每晚价格元素: $162 NZD 
night
$162 NZD per night
2024-11-15 14:01:45,117 [INFO] price_checker.py:356 - 成功解析折扣价格: $162 NZD
2024-11-15 14:01:45,117 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:01:50,533 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:01:50,540 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:01:50,547 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span class="_j1kt73">$700&nbsp;NZD</span>)
2024-11-15 14:01:50,547 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 14:01:50,547 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:01:50,554 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:01:50,558 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$700&nbsp;NZD</span></span>)
2024-11-15 14:01:50,559 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 14:01:50,563 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span class="_j1kt73">$700&nbsp;NZD</span>)
2024-11-15 14:01:50,564 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 14:01:50,568 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:01:50,568 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:01:50,568 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:01:50,568 [INFO] price_checker.py:450 - ✓ cleaning_fee: $90 NZD
2024-11-15 14:01:50,568 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 14:01:50,568 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 14:01:50,568 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:01:50,568 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:01:50,568 [INFO] price_checker.py:457 - check_in: 10/12/2024
2024-11-15 14:01:50,569 [INFO] price_checker.py:457 - check_out: 12/12/2024
2024-11-15 14:01:50,569 [INFO] price_checker.py:457 - min_nights: 2
2024-11-15 14:01:50,569 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:01:50,569 [INFO] price_checker.py:457 - nightly_price: $305 NZD
2024-11-15 14:01:50,569 [INFO] price_checker.py:457 - cleaning_fee: $90 NZD
2024-11-15 14:01:50,569 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 14:01:50,569 [INFO] price_checker.py:457 - taxes: None
2024-11-15 14:01:50,569 [INFO] price_checker.py:457 - total: 
2024-11-15 14:01:50,569 [INFO] price_checker.py:559 - ✓ 成功获取 10/12/2024 的价格信息
2024-11-15 14:01:50,569 [INFO] price_checker.py:565 - 根据最小入住要求(2晚)跳过接下来的 1 天
2024-11-15 14:01:50,569 [INFO] price_checker.py:573 - 已完成 20/39 个日期的处理
2024-11-15 14:01:53,296 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:01:55,168 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 14:01:55,168 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:01:55,175 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:01:55,182 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:01:55,182 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:01:55,182 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:01:55,189 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:01:55,193 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:01:55,194 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:01:55,194 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:01:55,200 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:01:55,205 [INFO] price_checker.py:403 - 找到价格元素: $30 NZD (HTML: <span class="_1k4xcdh">$30&nbsp;NZD</span>)
2024-11-15 14:01:55,205 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $30 NZD
2024-11-15 14:01:55,205 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:01:55,211 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:01:55,216 [INFO] price_checker.py:403 - 找到价格元素: $30 NZD (HTML: <span class="_1k4xcdh">$30&nbsp;NZD</span>)
2024-11-15 14:01:55,216 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $30 NZD
2024-11-15 14:01:55,216 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:01:55,223 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:01:55,228 [INFO] price_checker.py:403 - 找到价格元素: $27 NZD (HTML: <span class="_1k4xcdh">$27&nbsp;NZD</span>)
2024-11-15 14:01:55,228 [INFO] price_checker.py:416 - ✓ 成功设置税费: $27 NZD
2024-11-15 14:01:55,228 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:02:00,570 [INFO] price_checker.py:553 - [20/39] 处理日期: 11/12/2024
2024-11-15 14:02:00,570 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/43435162
2024-11-15 14:02:00,570 [INFO] price_checker.py:255 - 入住日期: 11/12/2024
2024-11-15 14:02:03,330 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:02:05,262 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:02:05,269 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:02:05,274 [INFO] price_checker.py:403 - 找到价格元素: $239 NZD (HTML: <span class="_j1kt73">$239&nbsp;NZD</span>)
2024-11-15 14:02:05,275 [INFO] price_checker.py:420 - ✓ 成功设置总价: $239 NZD
2024-11-15 14:02:05,275 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:02:05,281 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:02:05,286 [INFO] price_checker.py:403 - 找到价格元素: $239 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$239&nbsp;NZD</span></span>)
2024-11-15 14:02:05,286 [INFO] price_checker.py:420 - ✓ 成功设置总价: $239 NZD
2024-11-15 14:02:05,291 [INFO] price_checker.py:403 - 找到价格元素: $239 NZD (HTML: <span class="_j1kt73">$239&nbsp;NZD</span>)
2024-11-15 14:02:05,291 [INFO] price_checker.py:420 - ✓ 成功设置总价: $239 NZD
2024-11-15 14:02:05,296 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:02:05,296 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:02:05,296 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:02:05,296 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 14:02:05,296 [INFO] price_checker.py:450 - ✓ service_fee: $30 NZD
2024-11-15 14:02:05,296 [INFO] price_checker.py:450 - ✓ taxes: $27 NZD
2024-11-15 14:02:05,296 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:02:05,296 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:02:05,297 [INFO] price_checker.py:457 - check_in: 16/12/2024
2024-11-15 14:02:05,297 [INFO] price_checker.py:457 - check_out: 17/12/2024
2024-11-15 14:02:05,297 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:02:05,297 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:02:05,297 [INFO] price_checker.py:457 - nightly_price: $162 NZD
2024-11-15 14:02:05,297 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 14:02:05,297 [INFO] price_checker.py:457 - service_fee: $30 NZD
2024-11-15 14:02:05,297 [INFO] price_checker.py:457 - taxes: $27 NZD
2024-11-15 14:02:05,297 [INFO] price_checker.py:457 - total: 
2024-11-15 14:02:05,297 [INFO] price_checker.py:559 - ✓ 成功获取 16/12/2024 的价格信息
2024-11-15 14:02:05,297 [INFO] price_checker.py:553 - [27/72] 处理日期: 17/12/2024
2024-11-15 14:02:05,297 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 14:02:05,297 [INFO] price_checker.py:255 - 入住日期: 17/12/2024
2024-11-15 14:02:05,697 [INFO] price_checker.py:271 - 开始检查日期 11/12/2024 的最小入住要求...
2024-11-15 14:02:05,700 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="11, Wednesday, December 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-11/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">11</div></td>
2024-11-15 14:02:05,714 [INFO] price_checker.py:158 - 找到日期: 11/12/2024
2024-11-15 14:02:05,715 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:02:06,831 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:02:08,131 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="11, Wednesday, December 2024. Selected check-in date There is a 2 night minimum stay requirement. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_h84ua7"><div class="_d82cel" style="transform: translate(-50%, -100%) translate(20.5px, -12px);"><div class="_1mslrl4"><div class="_u7azij">2-night minimum</div><svg role="presentation" focusable="false" class="_1mjga4hj"><path class="_1s2t3cl" d="M0,0 20,0 10,10z"></path><path class="_c3dsty" d="M0,0 10,10 20,0"></path></svg></div></div><div class="_194zlzjz notranslate" data-testid="calendar-day-11/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">11</div></div></td>
2024-11-15 14:02:08,141 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 14:02:08,142 [INFO] price_checker.py:218 - - aria-label: 11, Wednesday, December 2024. Selected check-in date There is a 2 night minimum stay requirement. 
2024-11-15 14:02:08,142 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 14:02:08,142 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 14:02:08,142 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 2晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 14:02:08,142 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 2晚 (自动检测)
2024-11-15 14:02:08,142 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/43435162?check_in=2024-12-11&check_out=2024-12-13&adults=3&children=0&infants=0
2024-11-15 14:02:10,418 [INFO] price_checker.py:271 - 开始检查日期 17/12/2024 的最小入住要求...
2024-11-15 14:02:10,421 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="17, Tuesday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-17/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">17</div></td>
2024-11-15 14:02:10,434 [INFO] price_checker.py:158 - 找到日期: 17/12/2024
2024-11-15 14:02:10,434 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:02:11,549 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:02:12,842 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="17, Tuesday, December 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_ox7af8h notranslate" data-testid="calendar-day-17/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">17</div></td>
2024-11-15 14:02:12,851 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 14:02:12,851 [INFO] price_checker.py:218 - - aria-label: 17, Tuesday, December 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 14:02:12,851 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 14:02:12,851 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 14:02:12,851 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 14:02:12,851 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:02:12,851 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2024-12-17&check_out=2024-12-18&adults=3&children=0&infants=0
2024-11-15 14:02:13,226 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:02:13,229 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:02:13,384 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:02:15,240 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:02:15,240 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:02:17,942 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:02:17,944 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:02:19,956 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:02:19,956 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:02:23,412 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:02:25,282 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:02:25,282 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:02:30,008 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:02:30,008 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:02:35,323 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:02:35,323 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:02:35,329 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:02:35,343 [INFO] price_checker.py:337 - 找到可见价格元素: $305 NZD 
night
$305 NZD per night
2024-11-15 14:02:35,349 [INFO] price_checker.py:350 - 找到每晚价格元素: $305 NZD 
night
$305 NZD per night
2024-11-15 14:02:35,349 [INFO] price_checker.py:356 - 成功解析折扣价格: $305 NZD
2024-11-15 14:02:35,349 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:02:35,354 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 14:02:35,857 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:02:35,864 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:02:35,871 [INFO] price_checker.py:403 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-15 14:02:35,871 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $90 NZD
2024-11-15 14:02:35,871 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:02:35,878 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:02:35,883 [INFO] price_checker.py:403 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-15 14:02:35,884 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $90 NZD
2024-11-15 14:02:35,884 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:02:40,040 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:02:40,041 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:02:40,046 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:02:40,061 [INFO] price_checker.py:337 - 找到可见价格元素: $155 NZD 
night
$155 NZD per night
2024-11-15 14:02:40,067 [INFO] price_checker.py:350 - 找到每晚价格元素: $155 NZD 
night
$155 NZD per night
2024-11-15 14:02:40,067 [INFO] price_checker.py:356 - 成功解析折扣价格: $155 NZD
2024-11-15 14:02:40,067 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:02:43,484 [WARNING] price_checker.py:443 - 尝试点击价格展开按钮失败: Message: no such element: Unable to locate element: {"method":"xpath","selector":"//button[contains(@class, '_12wl7g09')]"}
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00952BFE]
	(No symbol) [0x00952CDB]
	(No symbol) [0x0098EBD2]
	(No symbol) [0x00973954]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:02:43,484 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:02:43,484 [WARNING] price_checker.py:452 - ✗ cleaning_fee 未获取到
2024-11-15 14:02:43,484 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 14:02:43,484 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 14:02:43,484 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:02:43,484 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:02:43,484 [INFO] price_checker.py:457 - check_in: 08/01/2025
2024-11-15 14:02:43,484 [INFO] price_checker.py:457 - check_out: 09/01/2025
2024-11-15 14:02:43,485 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:02:43,485 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:02:43,485 [INFO] price_checker.py:457 - nightly_price: None
2024-11-15 14:02:43,485 [INFO] price_checker.py:457 - cleaning_fee: None
2024-11-15 14:02:43,485 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 14:02:43,485 [INFO] price_checker.py:457 - taxes: None
2024-11-15 14:02:43,485 [INFO] price_checker.py:457 - total: None
2024-11-15 14:02:43,485 [INFO] price_checker.py:559 - ✓ 成功获取 08/01/2025 的价格信息
2024-11-15 14:02:43,485 [INFO] price_checker.py:553 - [25/37] 处理日期: 09/01/2025
2024-11-15 14:02:43,485 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-15 14:02:43,485 [INFO] price_checker.py:255 - 入住日期: 09/01/2025
2024-11-15 14:02:45,924 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:02:48,749 [INFO] price_checker.py:271 - 开始检查日期 09/01/2025 的最小入住要求...
2024-11-15 14:02:48,753 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="9, Thursday, January 2025. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-09/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">9</div></td>
2024-11-15 14:02:48,762 [INFO] price_checker.py:158 - 找到日期: 09/01/2025
2024-11-15 14:02:48,762 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:02:50,086 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 14:02:50,087 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:02:50,094 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:02:50,100 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:02:50,100 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:02:50,100 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:02:50,107 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:02:50,112 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:02:50,112 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:02:50,112 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:02:50,119 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:02:50,124 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 14:02:50,124 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 14:02:50,124 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:02:50,130 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:02:50,135 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 14:02:50,135 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 14:02:50,135 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:02:50,141 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:02:50,146 [INFO] price_checker.py:403 - 找到价格元素: $26 NZD (HTML: <span class="_1k4xcdh">$26&nbsp;NZD</span>)
2024-11-15 14:02:50,146 [INFO] price_checker.py:416 - ✓ 成功设置税费: $26 NZD
2024-11-15 14:02:50,146 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:02:55,950 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:02:58,803 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:02:59,917 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:02:59,922 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:02:59,922 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 14:02:59,923 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:02:59,924 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:02:59,924 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:02:59,924 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/837352260137971048?check_in=2025-01-09&check_out=2025-01-10&adults=3&children=0&infants=0
2024-11-15 14:03:00,191 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:03:00,198 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:03:00,203 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span class="_j1kt73">$231&nbsp;NZD</span>)
2024-11-15 14:03:00,204 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 14:03:00,204 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:03:00,210 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:03:00,215 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$231&nbsp;NZD</span></span>)
2024-11-15 14:03:00,215 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 14:03:00,220 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span class="_j1kt73">$231&nbsp;NZD</span>)
2024-11-15 14:03:00,220 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 14:03:00,224 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:03:00,225 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:03:00,225 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:03:00,225 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 14:03:00,225 [INFO] price_checker.py:450 - ✓ service_fee: $29 NZD
2024-11-15 14:03:00,225 [INFO] price_checker.py:450 - ✓ taxes: $26 NZD
2024-11-15 14:03:00,225 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:03:00,225 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:03:00,225 [INFO] price_checker.py:457 - check_in: 17/12/2024
2024-11-15 14:03:00,225 [INFO] price_checker.py:457 - check_out: 18/12/2024
2024-11-15 14:03:00,225 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:03:00,225 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:03:00,226 [INFO] price_checker.py:457 - nightly_price: $155 NZD
2024-11-15 14:03:00,226 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 14:03:00,226 [INFO] price_checker.py:457 - service_fee: $29 NZD
2024-11-15 14:03:00,226 [INFO] price_checker.py:457 - taxes: $26 NZD
2024-11-15 14:03:00,226 [INFO] price_checker.py:457 - total: 
2024-11-15 14:03:00,226 [INFO] price_checker.py:559 - ✓ 成功获取 17/12/2024 的价格信息
2024-11-15 14:03:00,226 [INFO] price_checker.py:553 - [28/72] 处理日期: 18/12/2024
2024-11-15 14:03:00,226 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 14:03:00,226 [INFO] price_checker.py:255 - 入住日期: 18/12/2024
2024-11-15 14:03:05,035 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:03:05,041 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:03:05,349 [INFO] price_checker.py:271 - 开始检查日期 18/12/2024 的最小入住要求...
2024-11-15 14:03:05,352 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="18, Wednesday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-18/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">18</div></td>
2024-11-15 14:03:05,361 [INFO] price_checker.py:158 - 找到日期: 18/12/2024
2024-11-15 14:03:05,361 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:03:05,965 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:03:06,476 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:03:07,061 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:03:07,061 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:03:07,770 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="18, Wednesday, December 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_ox7af8h notranslate" data-testid="calendar-day-18/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">18</div></td>
2024-11-15 14:03:07,779 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 14:03:07,779 [INFO] price_checker.py:218 - - aria-label: 18, Wednesday, December 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 14:03:07,779 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 14:03:07,779 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 14:03:07,779 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 14:03:07,779 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:03:07,780 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2024-12-18&check_out=2024-12-19&adults=3&children=0&infants=0
2024-11-15 14:03:12,884 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:03:12,888 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:03:14,900 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:03:14,900 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:03:15,988 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:03:15,995 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:03:16,002 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span class="_j1kt73">$700&nbsp;NZD</span>)
2024-11-15 14:03:16,002 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 14:03:16,002 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:03:16,009 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:03:16,014 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$700&nbsp;NZD</span></span>)
2024-11-15 14:03:16,014 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 14:03:16,019 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span class="_j1kt73">$700&nbsp;NZD</span>)
2024-11-15 14:03:16,019 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 14:03:16,024 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:03:16,024 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:03:16,024 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:03:16,024 [INFO] price_checker.py:450 - ✓ cleaning_fee: $90 NZD
2024-11-15 14:03:16,024 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 14:03:16,024 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 14:03:16,024 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:03:16,024 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:03:16,024 [INFO] price_checker.py:457 - check_in: 11/12/2024
2024-11-15 14:03:16,024 [INFO] price_checker.py:457 - check_out: 13/12/2024
2024-11-15 14:03:16,024 [INFO] price_checker.py:457 - min_nights: 2
2024-11-15 14:03:16,024 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:03:16,025 [INFO] price_checker.py:457 - nightly_price: $305 NZD
2024-11-15 14:03:16,025 [INFO] price_checker.py:457 - cleaning_fee: $90 NZD
2024-11-15 14:03:16,025 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 14:03:16,025 [INFO] price_checker.py:457 - taxes: None
2024-11-15 14:03:16,025 [INFO] price_checker.py:457 - total: 
2024-11-15 14:03:16,025 [INFO] price_checker.py:559 - ✓ 成功获取 11/12/2024 的价格信息
2024-11-15 14:03:16,025 [INFO] price_checker.py:565 - 根据最小入住要求(2晚)跳过接下来的 1 天
2024-11-15 14:03:16,025 [INFO] price_checker.py:553 - [21/39] 处理日期: 16/12/2024
2024-11-15 14:03:16,025 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/43435162
2024-11-15 14:03:16,025 [INFO] price_checker.py:255 - 入住日期: 16/12/2024
2024-11-15 14:03:17,094 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:03:17,094 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:03:21,145 [INFO] price_checker.py:271 - 开始检查日期 16/12/2024 的最小入住要求...
2024-11-15 14:03:21,148 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_sl5yz7r" role="button" aria-disabled="false" aria-label="16, Monday, December 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-16/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">16</div></td>
2024-11-15 14:03:21,157 [INFO] price_checker.py:158 - 找到日期: 16/12/2024
2024-11-15 14:03:21,157 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:03:22,290 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:03:23,587 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_5v1jabe" role="button" aria-disabled="true" aria-label="16, Monday, December 2024. Selected check-in date There is a 2 night minimum stay requirement. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_h84ua7"><div class="_d82cel" style="transform: translateY(-100%) translateY(-12px);"><div class="_1mslrl4"><div class="_u7azij">2-night minimum</div><svg role="presentation" focusable="false" class="_8c7xtno" style="left: 9.5px;"><path class="_1s2t3cl" d="M0,0 20,0 10,10z"></path><path class="_c3dsty" d="M0,0 10,10 20,0"></path></svg></div></div><div class="_17slido1 notranslate" data-testid="calendar-day-16/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">16</div></div></td>
2024-11-15 14:03:23,595 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 14:03:23,595 [INFO] price_checker.py:218 - - aria-label: 16, Monday, December 2024. Selected check-in date There is a 2 night minimum stay requirement. 
2024-11-15 14:03:23,596 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 14:03:23,596 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 14:03:23,596 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 2晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 14:03:23,596 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 2晚 (自动检测)
2024-11-15 14:03:23,596 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/43435162?check_in=2024-12-16&check_out=2024-12-18&adults=3&children=0&infants=0
2024-11-15 14:03:24,928 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:03:24,928 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:03:27,103 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:03:27,103 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:03:28,686 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:03:28,689 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:03:30,699 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:03:30,699 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:03:34,946 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:03:34,946 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:03:34,952 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:03:34,967 [INFO] price_checker.py:337 - 找到可见价格元素: $157 NZD 
night
$157 NZD per night
2024-11-15 14:03:34,972 [INFO] price_checker.py:350 - 找到每晚价格元素: $157 NZD 
night
$157 NZD per night
2024-11-15 14:03:34,972 [INFO] price_checker.py:356 - 成功解析折扣价格: $157 NZD
2024-11-15 14:03:34,972 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:03:37,162 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:03:37,162 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w ._11jcbg2
2024-11-15 14:03:40,732 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:03:40,733 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:03:45,021 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 14:03:45,021 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:03:45,028 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:03:45,035 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:03:45,036 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:03:45,036 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:03:45,042 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:03:45,047 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:03:45,047 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:03:45,047 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:03:45,055 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:03:45,059 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 14:03:45,059 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 14:03:45,059 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:03:45,066 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:03:45,070 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 14:03:45,070 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 14:03:45,071 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:03:45,077 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:03:45,082 [INFO] price_checker.py:403 - 找到价格元素: $27 NZD (HTML: <span class="_1k4xcdh">$27&nbsp;NZD</span>)
2024-11-15 14:03:45,083 [INFO] price_checker.py:416 - ✓ 成功设置税费: $27 NZD
2024-11-15 14:03:45,083 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:03:47,200 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:03:47,200 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[contains(@class, '_wgmchy')]//span[contains(text(), '$') and contains(text(), 'NZD')]
2024-11-15 14:03:50,777 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:03:50,777 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:03:50,783 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:03:50,798 [INFO] price_checker.py:337 - 找到可见价格元素: $305 NZD 
night
$305 NZD per night
2024-11-15 14:03:50,803 [INFO] price_checker.py:350 - 找到每晚价格元素: $305 NZD 
night
$305 NZD per night
2024-11-15 14:03:50,803 [INFO] price_checker.py:356 - 成功解析折扣价格: $305 NZD
2024-11-15 14:03:50,804 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:03:50,810 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 14:03:51,312 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:03:51,320 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:03:51,326 [INFO] price_checker.py:403 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-15 14:03:51,326 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $90 NZD
2024-11-15 14:03:51,326 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:03:51,333 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:03:51,337 [INFO] price_checker.py:403 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-15 14:03:51,338 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $90 NZD
2024-11-15 14:03:51,338 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:03:55,124 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:03:55,131 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:03:55,136 [INFO] price_checker.py:403 - 找到价格元素: $234 NZD (HTML: <span class="_j1kt73">$234&nbsp;NZD</span>)
2024-11-15 14:03:55,136 [INFO] price_checker.py:420 - ✓ 成功设置总价: $234 NZD
2024-11-15 14:03:55,136 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:03:55,144 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:03:55,149 [INFO] price_checker.py:403 - 找到价格元素: $234 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$234&nbsp;NZD</span></span>)
2024-11-15 14:03:55,149 [INFO] price_checker.py:420 - ✓ 成功设置总价: $234 NZD
2024-11-15 14:03:55,155 [INFO] price_checker.py:403 - 找到价格元素: $234 NZD (HTML: <span class="_j1kt73">$234&nbsp;NZD</span>)
2024-11-15 14:03:55,155 [INFO] price_checker.py:420 - ✓ 成功设置总价: $234 NZD
2024-11-15 14:03:55,160 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:03:55,160 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:03:55,160 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:03:55,160 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 14:03:55,160 [INFO] price_checker.py:450 - ✓ service_fee: $29 NZD
2024-11-15 14:03:55,160 [INFO] price_checker.py:450 - ✓ taxes: $27 NZD
2024-11-15 14:03:55,160 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:03:55,161 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:03:55,161 [INFO] price_checker.py:457 - check_in: 18/12/2024
2024-11-15 14:03:55,161 [INFO] price_checker.py:457 - check_out: 19/12/2024
2024-11-15 14:03:55,161 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:03:55,161 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:03:55,161 [INFO] price_checker.py:457 - nightly_price: $157 NZD
2024-11-15 14:03:55,161 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 14:03:55,161 [INFO] price_checker.py:457 - service_fee: $29 NZD
2024-11-15 14:03:55,161 [INFO] price_checker.py:457 - taxes: $27 NZD
2024-11-15 14:03:55,161 [INFO] price_checker.py:457 - total: 
2024-11-15 14:03:55,161 [INFO] price_checker.py:559 - ✓ 成功获取 18/12/2024 的价格信息
2024-11-15 14:03:55,161 [INFO] price_checker.py:553 - [29/72] 处理日期: 19/12/2024
2024-11-15 14:03:55,161 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 14:03:55,161 [INFO] price_checker.py:255 - 入住日期: 19/12/2024
2024-11-15 14:03:57,236 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:03:57,236 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:04:00,998 [INFO] price_checker.py:271 - 开始检查日期 19/12/2024 的最小入住要求...
2024-11-15 14:04:01,002 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="19, Thursday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-19/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">19</div></td>
2024-11-15 14:04:01,014 [INFO] price_checker.py:158 - 找到日期: 19/12/2024
2024-11-15 14:04:01,014 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:04:01,354 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:04:02,137 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:04:03,424 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="19, Thursday, December 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_ox7af8h notranslate" data-testid="calendar-day-19/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">19</div></td>
2024-11-15 14:04:03,433 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 14:04:03,433 [INFO] price_checker.py:218 - - aria-label: 19, Thursday, December 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 14:04:03,433 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 14:04:03,433 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 14:04:03,433 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 14:04:03,433 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:04:03,433 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2024-12-19&check_out=2024-12-20&adults=3&children=0&infants=0
2024-11-15 14:04:07,244 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 14:04:07,245 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:04:08,527 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:04:08,530 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:04:10,541 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:04:10,541 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:04:11,363 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:04:17,278 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:04:20,597 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:04:20,598 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:04:21,409 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:04:27,314 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:04:30,631 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:04:30,631 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:04:30,637 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:04:30,653 [INFO] price_checker.py:337 - 找到可见价格元素: $159 NZD 
night
$159 NZD per night
2024-11-15 14:04:30,659 [INFO] price_checker.py:350 - 找到每晚价格元素: $159 NZD 
night
$159 NZD per night
2024-11-15 14:04:30,659 [INFO] price_checker.py:356 - 成功解析折扣价格: $159 NZD
2024-11-15 14:04:30,659 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:04:31,441 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:04:31,447 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:04:31,454 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span class="_j1kt73">$700&nbsp;NZD</span>)
2024-11-15 14:04:31,454 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 14:04:31,454 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:04:31,461 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:04:31,465 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$700&nbsp;NZD</span></span>)
2024-11-15 14:04:31,465 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 14:04:31,471 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span class="_j1kt73">$700&nbsp;NZD</span>)
2024-11-15 14:04:31,471 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 14:04:31,476 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:04:31,476 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:04:31,477 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:04:31,477 [INFO] price_checker.py:450 - ✓ cleaning_fee: $90 NZD
2024-11-15 14:04:31,477 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 14:04:31,477 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 14:04:31,477 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:04:31,477 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:04:31,477 [INFO] price_checker.py:457 - check_in: 16/12/2024
2024-11-15 14:04:31,477 [INFO] price_checker.py:457 - check_out: 18/12/2024
2024-11-15 14:04:31,477 [INFO] price_checker.py:457 - min_nights: 2
2024-11-15 14:04:31,477 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:04:31,477 [INFO] price_checker.py:457 - nightly_price: $305 NZD
2024-11-15 14:04:31,477 [INFO] price_checker.py:457 - cleaning_fee: $90 NZD
2024-11-15 14:04:31,477 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 14:04:31,477 [INFO] price_checker.py:457 - taxes: None
2024-11-15 14:04:31,478 [INFO] price_checker.py:457 - total: 
2024-11-15 14:04:31,478 [INFO] price_checker.py:559 - ✓ 成功获取 16/12/2024 的价格信息
2024-11-15 14:04:31,478 [INFO] price_checker.py:565 - 根据最小入住要求(2晚)跳过接下来的 1 天
2024-11-15 14:04:31,478 [INFO] price_checker.py:553 - [22/39] 处理日期: 17/12/2024
2024-11-15 14:04:31,478 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/43435162
2024-11-15 14:04:31,478 [INFO] price_checker.py:255 - 入住日期: 17/12/2024
2024-11-15 14:04:36,604 [INFO] price_checker.py:271 - 开始检查日期 17/12/2024 的最小入住要求...
2024-11-15 14:04:36,607 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="17, Tuesday, December 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-17/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">17</div></td>
2024-11-15 14:04:36,617 [INFO] price_checker.py:158 - 找到日期: 17/12/2024
2024-11-15 14:04:36,617 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:04:37,333 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:04:37,783 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:04:39,078 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="17, Tuesday, December 2024. Selected check-in date There is a 2 night minimum stay requirement. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_h84ua7"><div class="_d82cel" style="transform: translateY(-100%) translateY(-12px);"><div class="_1mslrl4"><div class="_u7azij">2-night minimum</div><svg role="presentation" focusable="false" class="_8c7xtno" style="left: 9.5px;"><path class="_1s2t3cl" d="M0,0 20,0 10,10z"></path><path class="_c3dsty" d="M0,0 10,10 20,0"></path></svg></div></div><div class="_194zlzjz notranslate" data-testid="calendar-day-17/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">17</div></div></td>
2024-11-15 14:04:39,087 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 14:04:39,087 [INFO] price_checker.py:218 - - aria-label: 17, Tuesday, December 2024. Selected check-in date There is a 2 night minimum stay requirement. 
2024-11-15 14:04:39,087 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 14:04:39,087 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 14:04:39,087 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 2晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 14:04:39,087 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 2晚 (自动检测)
2024-11-15 14:04:39,087 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/43435162?check_in=2024-12-17&check_out=2024-12-19&adults=3&children=0&infants=0
2024-11-15 14:04:40,680 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 14:04:40,680 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:04:40,687 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:04:40,693 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:04:40,693 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:04:40,693 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:04:40,700 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:04:40,705 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:04:40,705 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:04:40,705 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:04:40,712 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:04:40,717 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 14:04:40,718 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 14:04:40,718 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:04:40,725 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:04:40,731 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 14:04:40,731 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 14:04:40,731 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:04:40,738 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:04:40,743 [INFO] price_checker.py:403 - 找到价格元素: $27 NZD (HTML: <span class="_1k4xcdh">$27&nbsp;NZD</span>)
2024-11-15 14:04:40,743 [INFO] price_checker.py:416 - ✓ 成功设置税费: $27 NZD
2024-11-15 14:04:40,744 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:04:44,195 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:04:44,198 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:04:46,208 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:04:46,209 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:04:47,363 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:04:50,777 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:04:50,784 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:04:50,789 [INFO] price_checker.py:403 - 找到价格元素: $236 NZD (HTML: <span class="_j1kt73">$236&nbsp;NZD</span>)
2024-11-15 14:04:50,789 [INFO] price_checker.py:420 - ✓ 成功设置总价: $236 NZD
2024-11-15 14:04:50,789 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:04:50,796 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:04:50,801 [INFO] price_checker.py:403 - 找到价格元素: $236 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$236&nbsp;NZD</span></span>)
2024-11-15 14:04:50,801 [INFO] price_checker.py:420 - ✓ 成功设置总价: $236 NZD
2024-11-15 14:04:50,805 [INFO] price_checker.py:403 - 找到价格元素: $236 NZD (HTML: <span class="_j1kt73">$236&nbsp;NZD</span>)
2024-11-15 14:04:50,805 [INFO] price_checker.py:420 - ✓ 成功设置总价: $236 NZD
2024-11-15 14:04:50,810 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:04:50,810 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:04:50,810 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:04:50,810 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 14:04:50,810 [INFO] price_checker.py:450 - ✓ service_fee: $29 NZD
2024-11-15 14:04:50,810 [INFO] price_checker.py:450 - ✓ taxes: $27 NZD
2024-11-15 14:04:50,810 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:04:50,810 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:04:50,810 [INFO] price_checker.py:457 - check_in: 19/12/2024
2024-11-15 14:04:50,810 [INFO] price_checker.py:457 - check_out: 20/12/2024
2024-11-15 14:04:50,810 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:04:50,810 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:04:50,811 [INFO] price_checker.py:457 - nightly_price: $159 NZD
2024-11-15 14:04:50,811 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 14:04:50,811 [INFO] price_checker.py:457 - service_fee: $29 NZD
2024-11-15 14:04:50,811 [INFO] price_checker.py:457 - taxes: $27 NZD
2024-11-15 14:04:50,811 [INFO] price_checker.py:457 - total: 
2024-11-15 14:04:50,811 [INFO] price_checker.py:559 - ✓ 成功获取 19/12/2024 的价格信息
2024-11-15 14:04:50,811 [INFO] price_checker.py:553 - [30/72] 处理日期: 20/12/2024
2024-11-15 14:04:50,811 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 14:04:50,811 [INFO] price_checker.py:255 - 入住日期: 20/12/2024
2024-11-15 14:04:55,939 [INFO] price_checker.py:271 - 开始检查日期 20/12/2024 的最小入住要求...
2024-11-15 14:04:55,942 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="20, Friday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-20/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">20</div></td>
2024-11-15 14:04:55,951 [INFO] price_checker.py:158 - 找到日期: 20/12/2024
2024-11-15 14:04:55,951 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:04:56,237 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:04:56,238 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:04:57,087 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:04:57,392 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:04:58,373 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="20, Friday, December 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_ox7af8h notranslate" data-testid="calendar-day-20/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">20</div></td>
2024-11-15 14:04:58,381 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 14:04:58,381 [INFO] price_checker.py:218 - - aria-label: 20, Friday, December 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 14:04:58,381 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 14:04:58,381 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 14:04:58,382 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 14:04:58,382 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:04:58,382 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2024-12-20&check_out=2024-12-21&adults=3&children=0&infants=0
2024-11-15 14:05:03,471 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:05:03,474 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:05:05,485 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:05:05,485 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:05:06,290 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:05:06,291 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:05:06,296 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:05:06,311 [INFO] price_checker.py:337 - 找到可见价格元素: $305 NZD 
night
$305 NZD per night
2024-11-15 14:05:06,317 [INFO] price_checker.py:350 - 找到每晚价格元素: $305 NZD 
night
$305 NZD per night
2024-11-15 14:05:06,317 [INFO] price_checker.py:356 - 成功解析折扣价格: $305 NZD
2024-11-15 14:05:06,317 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:05:06,322 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 14:05:06,825 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:05:06,833 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:05:06,839 [INFO] price_checker.py:403 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-15 14:05:06,839 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $90 NZD
2024-11-15 14:05:06,839 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:05:06,846 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:05:06,850 [INFO] price_checker.py:403 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-15 14:05:06,851 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $90 NZD
2024-11-15 14:05:06,851 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:05:07,426 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:05:15,533 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:05:15,533 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:05:16,888 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:05:17,466 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:05:25,570 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:05:25,570 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:05:25,576 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:05:25,591 [INFO] price_checker.py:337 - 找到可见价格元素: $167 NZD 
night
$167 NZD per night
2024-11-15 14:05:25,596 [INFO] price_checker.py:350 - 找到每晚价格元素: $167 NZD 
night
$167 NZD per night
2024-11-15 14:05:25,596 [INFO] price_checker.py:356 - 成功解析折扣价格: $167 NZD
2024-11-15 14:05:25,596 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:05:26,926 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:05:35,637 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 14:05:35,637 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:05:35,645 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:05:35,651 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:05:35,651 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:05:35,651 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:05:35,658 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:05:35,663 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:05:35,663 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:05:35,663 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:05:35,670 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:05:35,674 [INFO] price_checker.py:403 - 找到价格元素: $30 NZD (HTML: <span class="_1k4xcdh">$30&nbsp;NZD</span>)
2024-11-15 14:05:35,675 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $30 NZD
2024-11-15 14:05:35,675 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:05:35,681 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:05:35,686 [INFO] price_checker.py:403 - 找到价格元素: $30 NZD (HTML: <span class="_1k4xcdh">$30&nbsp;NZD</span>)
2024-11-15 14:05:35,686 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $30 NZD
2024-11-15 14:05:35,686 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:05:35,692 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:05:35,697 [INFO] price_checker.py:403 - 找到价格元素: $28 NZD (HTML: <span class="_1k4xcdh">$28&nbsp;NZD</span>)
2024-11-15 14:05:35,697 [INFO] price_checker.py:416 - ✓ 成功设置税费: $28 NZD
2024-11-15 14:05:35,697 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:05:36,962 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:05:37,536 [WARNING] price_checker.py:443 - 尝试点击价格展开按钮失败: Message: no such element: Unable to locate element: {"method":"xpath","selector":"//button[contains(@class, '_12wl7g09')]"}
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00952BFE]
	(No symbol) [0x00952CDB]
	(No symbol) [0x0098EBD2]
	(No symbol) [0x00973954]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:05:37,536 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:05:37,536 [WARNING] price_checker.py:452 - ✗ cleaning_fee 未获取到
2024-11-15 14:05:37,536 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 14:05:37,536 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 14:05:37,536 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:05:37,536 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:05:37,536 [INFO] price_checker.py:457 - check_in: 09/01/2025
2024-11-15 14:05:37,536 [INFO] price_checker.py:457 - check_out: 10/01/2025
2024-11-15 14:05:37,537 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:05:37,537 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:05:37,537 [INFO] price_checker.py:457 - nightly_price: None
2024-11-15 14:05:37,537 [INFO] price_checker.py:457 - cleaning_fee: None
2024-11-15 14:05:37,537 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 14:05:37,537 [INFO] price_checker.py:457 - taxes: None
2024-11-15 14:05:37,537 [INFO] price_checker.py:457 - total: None
2024-11-15 14:05:37,537 [INFO] price_checker.py:559 - ✓ 成功获取 09/01/2025 的价格信息
2024-11-15 14:05:37,537 [INFO] price_checker.py:573 - 已完成 25/37 个日期的处理
2024-11-15 14:05:45,731 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:05:45,737 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:05:45,742 [INFO] price_checker.py:403 - 找到价格元素: $245 NZD (HTML: <span class="_j1kt73">$245&nbsp;NZD</span>)
2024-11-15 14:05:45,742 [INFO] price_checker.py:420 - ✓ 成功设置总价: $245 NZD
2024-11-15 14:05:45,742 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:05:45,750 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:05:45,755 [INFO] price_checker.py:403 - 找到价格元素: $245 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$245&nbsp;NZD</span></span>)
2024-11-15 14:05:45,756 [INFO] price_checker.py:420 - ✓ 成功设置总价: $245 NZD
2024-11-15 14:05:45,760 [INFO] price_checker.py:403 - 找到价格元素: $245 NZD (HTML: <span class="_j1kt73">$245&nbsp;NZD</span>)
2024-11-15 14:05:45,761 [INFO] price_checker.py:420 - ✓ 成功设置总价: $245 NZD
2024-11-15 14:05:45,765 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:05:45,766 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:05:45,766 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:05:45,766 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 14:05:45,766 [INFO] price_checker.py:450 - ✓ service_fee: $30 NZD
2024-11-15 14:05:45,766 [INFO] price_checker.py:450 - ✓ taxes: $28 NZD
2024-11-15 14:05:45,766 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:05:45,766 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:05:45,766 [INFO] price_checker.py:457 - check_in: 20/12/2024
2024-11-15 14:05:45,766 [INFO] price_checker.py:457 - check_out: 21/12/2024
2024-11-15 14:05:45,766 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:05:45,766 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:05:45,766 [INFO] price_checker.py:457 - nightly_price: $167 NZD
2024-11-15 14:05:45,767 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 14:05:45,767 [INFO] price_checker.py:457 - service_fee: $30 NZD
2024-11-15 14:05:45,767 [INFO] price_checker.py:457 - taxes: $28 NZD
2024-11-15 14:05:45,767 [INFO] price_checker.py:457 - total: 
2024-11-15 14:05:45,767 [INFO] price_checker.py:559 - ✓ 成功获取 20/12/2024 的价格信息
2024-11-15 14:05:45,767 [INFO] price_checker.py:573 - 已完成 30/72 个日期的处理
2024-11-15 14:05:46,996 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:05:47,003 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:05:47,009 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span class="_j1kt73">$700&nbsp;NZD</span>)
2024-11-15 14:05:47,010 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 14:05:47,010 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:05:47,016 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:05:47,021 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$700&nbsp;NZD</span></span>)
2024-11-15 14:05:47,021 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 14:05:47,026 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span class="_j1kt73">$700&nbsp;NZD</span>)
2024-11-15 14:05:47,026 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 14:05:47,030 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:05:47,030 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:05:47,030 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:05:47,030 [INFO] price_checker.py:450 - ✓ cleaning_fee: $90 NZD
2024-11-15 14:05:47,031 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 14:05:47,031 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 14:05:47,031 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:05:47,031 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:05:47,031 [INFO] price_checker.py:457 - check_in: 17/12/2024
2024-11-15 14:05:47,031 [INFO] price_checker.py:457 - check_out: 19/12/2024
2024-11-15 14:05:47,031 [INFO] price_checker.py:457 - min_nights: 2
2024-11-15 14:05:47,031 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:05:47,031 [INFO] price_checker.py:457 - nightly_price: $305 NZD
2024-11-15 14:05:47,031 [INFO] price_checker.py:457 - cleaning_fee: $90 NZD
2024-11-15 14:05:47,031 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 14:05:47,031 [INFO] price_checker.py:457 - taxes: None
2024-11-15 14:05:47,031 [INFO] price_checker.py:457 - total: 
2024-11-15 14:05:47,031 [INFO] price_checker.py:559 - ✓ 成功获取 17/12/2024 的价格信息
2024-11-15 14:05:47,032 [INFO] price_checker.py:565 - 根据最小入住要求(2晚)跳过接下来的 1 天
2024-11-15 14:05:47,032 [INFO] price_checker.py:553 - [23/39] 处理日期: 18/12/2024
2024-11-15 14:05:47,032 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/43435162
2024-11-15 14:05:47,032 [INFO] price_checker.py:255 - 入住日期: 18/12/2024
2024-11-15 14:05:47,538 [INFO] price_checker.py:553 - [26/37] 处理日期: 10/01/2025
2024-11-15 14:05:47,538 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-15 14:05:47,538 [INFO] price_checker.py:255 - 入住日期: 10/01/2025
2024-11-15 14:05:52,151 [INFO] price_checker.py:271 - 开始检查日期 18/12/2024 的最小入住要求...
2024-11-15 14:05:52,154 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="18, Wednesday, December 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-18/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">18</div></td>
2024-11-15 14:05:52,164 [INFO] price_checker.py:158 - 找到日期: 18/12/2024
2024-11-15 14:05:52,164 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:05:52,658 [INFO] price_checker.py:271 - 开始检查日期 10/01/2025 的最小入住要求...
2024-11-15 14:05:52,661 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="10, Friday, January 2025. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-10/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">10</div></td>
2024-11-15 14:05:52,670 [INFO] price_checker.py:158 - 找到日期: 10/01/2025
2024-11-15 14:05:52,670 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:05:53,288 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:05:54,581 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="18, Wednesday, December 2024. Selected check-in date There is a 2 night minimum stay requirement. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_h84ua7"><div class="_d82cel" style="transform: translate(-50%, -100%) translate(20.5px, -12px);"><div class="_1mslrl4"><div class="_u7azij">2-night minimum</div><svg role="presentation" focusable="false" class="_1mjga4hj"><path class="_1s2t3cl" d="M0,0 20,0 10,10z"></path><path class="_c3dsty" d="M0,0 10,10 20,0"></path></svg></div></div><div class="_194zlzjz notranslate" data-testid="calendar-day-18/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">18</div></div></td>
2024-11-15 14:05:54,589 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 14:05:54,589 [INFO] price_checker.py:218 - - aria-label: 18, Wednesday, December 2024. Selected check-in date There is a 2 night minimum stay requirement. 
2024-11-15 14:05:54,589 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 14:05:54,589 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 14:05:54,589 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 2晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 14:05:54,589 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 2晚 (自动检测)
2024-11-15 14:05:54,589 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/43435162?check_in=2024-12-18&check_out=2024-12-20&adults=3&children=0&infants=0
2024-11-15 14:05:55,767 [INFO] price_checker.py:553 - [31/72] 处理日期: 21/12/2024
2024-11-15 14:05:55,767 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 14:05:55,768 [INFO] price_checker.py:255 - 入住日期: 21/12/2024
2024-11-15 14:05:59,679 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:05:59,681 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:06:00,891 [INFO] price_checker.py:271 - 开始检查日期 21/12/2024 的最小入住要求...
2024-11-15 14:06:00,894 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="21, Saturday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-21/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">21</div></td>
2024-11-15 14:06:00,905 [INFO] price_checker.py:158 - 找到日期: 21/12/2024
2024-11-15 14:06:00,905 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:06:01,692 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:06:01,692 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:06:02,027 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:06:02,687 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:06:03,314 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="21, Saturday, December 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_ox7af8h notranslate" data-testid="calendar-day-21/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">21</div></td>
2024-11-15 14:06:03,321 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 14:06:03,322 [INFO] price_checker.py:218 - - aria-label: 21, Saturday, December 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 14:06:03,322 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 14:06:03,322 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 14:06:03,322 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 14:06:03,322 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:06:03,322 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2024-12-21&check_out=2024-12-22&adults=3&children=0&infants=0
2024-11-15 14:06:03,796 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:06:03,801 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:06:03,801 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 14:06:03,802 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:06:03,803 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:06:03,803 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:06:03,803 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/837352260137971048?check_in=2025-01-10&check_out=2025-01-11&adults=3&children=0&infants=0
2024-11-15 14:06:08,443 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:06:08,445 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:06:08,911 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:06:08,913 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:06:10,456 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:06:10,456 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:06:10,924 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:06:10,924 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:06:11,715 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:06:11,715 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:06:20,486 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:06:20,486 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:06:20,959 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:06:20,959 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:06:21,755 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:06:21,755 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:06:21,761 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:06:21,775 [INFO] price_checker.py:337 - 找到可见价格元素: $305 NZD 
night
$305 NZD per night
2024-11-15 14:06:21,781 [INFO] price_checker.py:350 - 找到每晚价格元素: $305 NZD 
night
$305 NZD per night
2024-11-15 14:06:21,781 [INFO] price_checker.py:356 - 成功解析折扣价格: $305 NZD
2024-11-15 14:06:21,781 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:06:21,787 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 14:06:22,290 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:06:22,299 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:06:22,307 [INFO] price_checker.py:403 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-15 14:06:22,307 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $90 NZD
2024-11-15 14:06:22,307 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:06:22,317 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:06:22,324 [INFO] price_checker.py:403 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-15 14:06:22,324 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $90 NZD
2024-11-15 14:06:22,324 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:06:30,548 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:06:30,548 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:06:30,554 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:06:30,570 [INFO] price_checker.py:337 - 找到可见价格元素: $170 NZD 
night
$170 NZD per night
2024-11-15 14:06:30,576 [INFO] price_checker.py:350 - 找到每晚价格元素: $170 NZD 
night
$170 NZD per night
2024-11-15 14:06:30,576 [INFO] price_checker.py:356 - 成功解析折扣价格: $170 NZD
2024-11-15 14:06:30,577 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:06:31,014 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:06:31,014 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:06:32,385 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:06:40,617 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 14:06:40,617 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:06:40,624 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:06:40,630 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:06:40,630 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:06:40,630 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:06:40,636 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:06:40,641 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:06:40,641 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:06:40,641 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:06:40,648 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:06:40,653 [INFO] price_checker.py:403 - 找到价格元素: $31 NZD (HTML: <span class="_1k4xcdh">$31&nbsp;NZD</span>)
2024-11-15 14:06:40,653 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $31 NZD
2024-11-15 14:06:40,653 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:06:40,659 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:06:40,664 [INFO] price_checker.py:403 - 找到价格元素: $31 NZD (HTML: <span class="_1k4xcdh">$31&nbsp;NZD</span>)
2024-11-15 14:06:40,664 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $31 NZD
2024-11-15 14:06:40,664 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:06:40,670 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:06:40,675 [INFO] price_checker.py:403 - 找到价格元素: $28 NZD (HTML: <span class="_1k4xcdh">$28&nbsp;NZD</span>)
2024-11-15 14:06:40,675 [INFO] price_checker.py:416 - ✓ 成功设置税费: $28 NZD
2024-11-15 14:06:40,675 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:06:41,072 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:06:41,072 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w ._11jcbg2
2024-11-15 14:06:42,432 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:06:50,729 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:06:50,736 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:06:50,741 [INFO] price_checker.py:403 - 找到价格元素: $248 NZD (HTML: <span class="_j1kt73">$248&nbsp;NZD</span>)
2024-11-15 14:06:50,741 [INFO] price_checker.py:420 - ✓ 成功设置总价: $248 NZD
2024-11-15 14:06:50,741 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:06:50,748 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:06:50,753 [INFO] price_checker.py:403 - 找到价格元素: $248 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$248&nbsp;NZD</span></span>)
2024-11-15 14:06:50,753 [INFO] price_checker.py:420 - ✓ 成功设置总价: $248 NZD
2024-11-15 14:06:50,757 [INFO] price_checker.py:403 - 找到价格元素: $248 NZD (HTML: <span class="_j1kt73">$248&nbsp;NZD</span>)
2024-11-15 14:06:50,757 [INFO] price_checker.py:420 - ✓ 成功设置总价: $248 NZD
2024-11-15 14:06:50,762 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:06:50,762 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:06:50,762 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:06:50,762 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 14:06:50,762 [INFO] price_checker.py:450 - ✓ service_fee: $31 NZD
2024-11-15 14:06:50,762 [INFO] price_checker.py:450 - ✓ taxes: $28 NZD
2024-11-15 14:06:50,762 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:06:50,762 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:06:50,762 [INFO] price_checker.py:457 - check_in: 21/12/2024
2024-11-15 14:06:50,762 [INFO] price_checker.py:457 - check_out: 22/12/2024
2024-11-15 14:06:50,762 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:06:50,762 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:06:50,763 [INFO] price_checker.py:457 - nightly_price: $170 NZD
2024-11-15 14:06:50,763 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 14:06:50,763 [INFO] price_checker.py:457 - service_fee: $31 NZD
2024-11-15 14:06:50,763 [INFO] price_checker.py:457 - taxes: $28 NZD
2024-11-15 14:06:50,763 [INFO] price_checker.py:457 - total: 
2024-11-15 14:06:50,763 [INFO] price_checker.py:559 - ✓ 成功获取 21/12/2024 的价格信息
2024-11-15 14:06:50,763 [INFO] price_checker.py:553 - [32/72] 处理日期: 22/12/2024
2024-11-15 14:06:50,763 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 14:06:50,763 [INFO] price_checker.py:255 - 入住日期: 22/12/2024
2024-11-15 14:06:51,119 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:06:51,119 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[contains(@class, '_wgmchy')]//span[contains(text(), '$') and contains(text(), 'NZD')]
2024-11-15 14:06:52,470 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:06:55,893 [INFO] price_checker.py:271 - 开始检查日期 22/12/2024 的最小入住要求...
2024-11-15 14:06:55,896 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_1mv3p4vt" role="button" aria-disabled="false" aria-label="22, Sunday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-22/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">22</div></td>
2024-11-15 14:06:55,905 [INFO] price_checker.py:158 - 找到日期: 22/12/2024
2024-11-15 14:06:55,905 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:06:57,020 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:06:58,297 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_ubf03zg" role="button" aria-disabled="true" aria-label="22, Sunday, December 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1qis3zbj notranslate" data-testid="calendar-day-22/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">22</div></td>
2024-11-15 14:06:58,305 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 14:06:58,305 [INFO] price_checker.py:218 - - aria-label: 22, Sunday, December 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 14:06:58,305 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 14:06:58,305 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 14:06:58,305 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 14:06:58,305 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:06:58,305 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2024-12-22&check_out=2024-12-23&adults=3&children=0&infants=0
2024-11-15 14:07:01,133 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:07:01,134 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:07:02,489 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:07:02,496 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:07:02,502 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span class="_j1kt73">$700&nbsp;NZD</span>)
2024-11-15 14:07:02,503 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 14:07:02,503 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:07:02,509 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:07:02,514 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$700&nbsp;NZD</span></span>)
2024-11-15 14:07:02,514 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 14:07:02,519 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span class="_j1kt73">$700&nbsp;NZD</span>)
2024-11-15 14:07:02,519 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 14:07:02,524 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:07:02,524 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:07:02,524 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:07:02,524 [INFO] price_checker.py:450 - ✓ cleaning_fee: $90 NZD
2024-11-15 14:07:02,525 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 14:07:02,525 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 14:07:02,525 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:07:02,525 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:07:02,525 [INFO] price_checker.py:457 - check_in: 18/12/2024
2024-11-15 14:07:02,525 [INFO] price_checker.py:457 - check_out: 20/12/2024
2024-11-15 14:07:02,525 [INFO] price_checker.py:457 - min_nights: 2
2024-11-15 14:07:02,525 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:07:02,525 [INFO] price_checker.py:457 - nightly_price: $305 NZD
2024-11-15 14:07:02,525 [INFO] price_checker.py:457 - cleaning_fee: $90 NZD
2024-11-15 14:07:02,526 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 14:07:02,526 [INFO] price_checker.py:457 - taxes: None
2024-11-15 14:07:02,526 [INFO] price_checker.py:457 - total: 
2024-11-15 14:07:02,526 [INFO] price_checker.py:559 - ✓ 成功获取 18/12/2024 的价格信息
2024-11-15 14:07:02,526 [INFO] price_checker.py:565 - 根据最小入住要求(2晚)跳过接下来的 1 天
2024-11-15 14:07:02,526 [INFO] price_checker.py:553 - [24/39] 处理日期: 19/12/2024
2024-11-15 14:07:02,526 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/43435162
2024-11-15 14:07:02,526 [INFO] price_checker.py:255 - 入住日期: 19/12/2024
2024-11-15 14:07:03,394 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:07:03,397 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:07:05,417 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:07:05,417 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:07:07,645 [INFO] price_checker.py:271 - 开始检查日期 19/12/2024 的最小入住要求...
2024-11-15 14:07:07,648 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="19, Thursday, December 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-19/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">19</div></td>
2024-11-15 14:07:07,657 [INFO] price_checker.py:158 - 找到日期: 19/12/2024
2024-11-15 14:07:07,657 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:07:08,776 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:07:10,066 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="19, Thursday, December 2024. Selected check-in date There is a 2 night minimum stay requirement. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_h84ua7"><div class="_d82cel" style="transform: translate(-50%, -100%) translate(20.5px, -12px);"><div class="_1mslrl4"><div class="_u7azij">2-night minimum</div><svg role="presentation" focusable="false" class="_1mjga4hj"><path class="_1s2t3cl" d="M0,0 20,0 10,10z"></path><path class="_c3dsty" d="M0,0 10,10 20,0"></path></svg></div></div><div class="_194zlzjz notranslate" data-testid="calendar-day-19/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">19</div></div></td>
2024-11-15 14:07:10,074 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 14:07:10,074 [INFO] price_checker.py:218 - - aria-label: 19, Thursday, December 2024. Selected check-in date There is a 2 night minimum stay requirement. 
2024-11-15 14:07:10,074 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 14:07:10,074 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 14:07:10,074 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 2晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 14:07:10,074 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 2晚 (自动检测)
2024-11-15 14:07:10,075 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/43435162?check_in=2024-12-19&check_out=2024-12-21&adults=3&children=0&infants=0
2024-11-15 14:07:11,150 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 14:07:11,150 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:07:15,173 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:07:15,176 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:07:15,441 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:07:15,441 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:07:17,187 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:07:17,187 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:07:21,181 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:07:25,489 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:07:25,489 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:07:25,495 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:07:25,510 [INFO] price_checker.py:337 - 找到可见价格元素: $170 NZD 
night
$170 NZD per night
2024-11-15 14:07:25,516 [INFO] price_checker.py:350 - 找到每晚价格元素: $170 NZD 
night
$170 NZD per night
2024-11-15 14:07:25,516 [INFO] price_checker.py:356 - 成功解析折扣价格: $170 NZD
2024-11-15 14:07:25,516 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:07:27,239 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:07:27,239 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:07:31,232 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:07:35,522 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 14:07:35,522 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:07:35,529 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:07:35,536 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:07:35,536 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:07:35,537 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:07:35,544 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:07:35,549 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:07:35,549 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:07:35,549 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:07:35,556 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:07:35,561 [INFO] price_checker.py:403 - 找到价格元素: $31 NZD (HTML: <span class="_1k4xcdh">$31&nbsp;NZD</span>)
2024-11-15 14:07:35,561 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $31 NZD
2024-11-15 14:07:35,562 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:07:35,569 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:07:35,574 [INFO] price_checker.py:403 - 找到价格元素: $31 NZD (HTML: <span class="_1k4xcdh">$31&nbsp;NZD</span>)
2024-11-15 14:07:35,574 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $31 NZD
2024-11-15 14:07:35,574 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:07:35,581 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:07:35,586 [INFO] price_checker.py:403 - 找到价格元素: $28 NZD (HTML: <span class="_1k4xcdh">$28&nbsp;NZD</span>)
2024-11-15 14:07:35,586 [INFO] price_checker.py:416 - ✓ 成功设置税费: $28 NZD
2024-11-15 14:07:35,586 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:07:37,282 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:07:37,283 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:07:37,288 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:07:37,303 [INFO] price_checker.py:337 - 找到可见价格元素: $305 NZD 
night
$305 NZD per night
2024-11-15 14:07:37,310 [INFO] price_checker.py:350 - 找到每晚价格元素: $305 NZD 
night
$305 NZD per night
2024-11-15 14:07:37,310 [INFO] price_checker.py:356 - 成功解析折扣价格: $305 NZD
2024-11-15 14:07:37,310 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:07:37,315 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 14:07:37,818 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:07:37,825 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:07:37,831 [INFO] price_checker.py:403 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-15 14:07:37,831 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $90 NZD
2024-11-15 14:07:37,832 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:07:37,838 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:07:37,843 [INFO] price_checker.py:403 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-15 14:07:37,843 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $90 NZD
2024-11-15 14:07:37,843 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:07:41,265 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:07:45,629 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:07:45,636 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:07:45,641 [INFO] price_checker.py:403 - 找到价格元素: $248 NZD (HTML: <span class="_j1kt73">$248&nbsp;NZD</span>)
2024-11-15 14:07:45,641 [INFO] price_checker.py:420 - ✓ 成功设置总价: $248 NZD
2024-11-15 14:07:45,641 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:07:45,648 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:07:45,652 [INFO] price_checker.py:403 - 找到价格元素: $248 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$248&nbsp;NZD</span></span>)
2024-11-15 14:07:45,652 [INFO] price_checker.py:420 - ✓ 成功设置总价: $248 NZD
2024-11-15 14:07:45,657 [INFO] price_checker.py:403 - 找到价格元素: $248 NZD (HTML: <span class="_j1kt73">$248&nbsp;NZD</span>)
2024-11-15 14:07:45,657 [INFO] price_checker.py:420 - ✓ 成功设置总价: $248 NZD
2024-11-15 14:07:45,662 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:07:45,662 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:07:45,662 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:07:45,662 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 14:07:45,662 [INFO] price_checker.py:450 - ✓ service_fee: $31 NZD
2024-11-15 14:07:45,662 [INFO] price_checker.py:450 - ✓ taxes: $28 NZD
2024-11-15 14:07:45,662 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:07:45,662 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:07:45,662 [INFO] price_checker.py:457 - check_in: 22/12/2024
2024-11-15 14:07:45,663 [INFO] price_checker.py:457 - check_out: 23/12/2024
2024-11-15 14:07:45,663 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:07:45,663 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:07:45,663 [INFO] price_checker.py:457 - nightly_price: $170 NZD
2024-11-15 14:07:45,663 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 14:07:45,663 [INFO] price_checker.py:457 - service_fee: $31 NZD
2024-11-15 14:07:45,663 [INFO] price_checker.py:457 - taxes: $28 NZD
2024-11-15 14:07:45,663 [INFO] price_checker.py:457 - total: 
2024-11-15 14:07:45,663 [INFO] price_checker.py:559 - ✓ 成功获取 22/12/2024 的价格信息
2024-11-15 14:07:45,663 [INFO] price_checker.py:553 - [33/72] 处理日期: 23/12/2024
2024-11-15 14:07:45,663 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 14:07:45,663 [INFO] price_checker.py:255 - 入住日期: 23/12/2024
2024-11-15 14:07:47,866 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:07:50,785 [INFO] price_checker.py:271 - 开始检查日期 23/12/2024 的最小入住要求...
2024-11-15 14:07:50,788 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_sl5yz7r" role="button" aria-disabled="false" aria-label="23, Monday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-23/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">23</div></td>
2024-11-15 14:07:50,797 [INFO] price_checker.py:158 - 找到日期: 23/12/2024
2024-11-15 14:07:50,797 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:07:51,307 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:07:51,969 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:07:53,250 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_5v1jabe" role="button" aria-disabled="true" aria-label="23, Monday, December 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1qis3zbj notranslate" data-testid="calendar-day-23/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">23</div></td>
2024-11-15 14:07:53,259 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 14:07:53,259 [INFO] price_checker.py:218 - - aria-label: 23, Monday, December 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 14:07:53,259 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 14:07:53,259 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 14:07:53,259 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 14:07:53,259 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:07:53,259 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2024-12-23&check_out=2024-12-24&adults=3&children=0&infants=0
2024-11-15 14:07:57,891 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:07:58,357 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:07:58,360 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:08:00,372 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:08:00,372 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:08:01,326 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:08:07,911 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:08:10,406 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:08:10,406 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:08:11,357 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:08:17,953 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:08:17,960 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:08:17,967 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span class="_j1kt73">$700&nbsp;NZD</span>)
2024-11-15 14:08:17,967 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 14:08:17,967 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:08:17,973 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:08:17,978 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$700&nbsp;NZD</span></span>)
2024-11-15 14:08:17,978 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 14:08:17,983 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span class="_j1kt73">$700&nbsp;NZD</span>)
2024-11-15 14:08:17,983 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 14:08:17,988 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:08:17,988 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:08:17,988 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:08:17,988 [INFO] price_checker.py:450 - ✓ cleaning_fee: $90 NZD
2024-11-15 14:08:17,988 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 14:08:17,988 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 14:08:17,988 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:08:17,988 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:08:17,989 [INFO] price_checker.py:457 - check_in: 19/12/2024
2024-11-15 14:08:17,989 [INFO] price_checker.py:457 - check_out: 21/12/2024
2024-11-15 14:08:17,989 [INFO] price_checker.py:457 - min_nights: 2
2024-11-15 14:08:17,989 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:08:17,989 [INFO] price_checker.py:457 - nightly_price: $305 NZD
2024-11-15 14:08:17,989 [INFO] price_checker.py:457 - cleaning_fee: $90 NZD
2024-11-15 14:08:17,989 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 14:08:17,989 [INFO] price_checker.py:457 - taxes: None
2024-11-15 14:08:17,989 [INFO] price_checker.py:457 - total: 
2024-11-15 14:08:17,989 [INFO] price_checker.py:559 - ✓ 成功获取 19/12/2024 的价格信息
2024-11-15 14:08:17,989 [INFO] price_checker.py:565 - 根据最小入住要求(2晚)跳过接下来的 1 天
2024-11-15 14:08:17,989 [INFO] price_checker.py:573 - 已完成 25/39 个日期的处理
2024-11-15 14:08:20,443 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:08:20,443 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:08:20,449 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:08:20,464 [INFO] price_checker.py:337 - 找到可见价格元素: $163 NZD 
night
$163 NZD per night
2024-11-15 14:08:20,470 [INFO] price_checker.py:350 - 找到每晚价格元素: $163 NZD 
night
$163 NZD per night
2024-11-15 14:08:20,470 [INFO] price_checker.py:356 - 成功解析折扣价格: $163 NZD
2024-11-15 14:08:20,470 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:08:21,394 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:08:27,990 [INFO] price_checker.py:553 - [25/39] 处理日期: 20/12/2024
2024-11-15 14:08:27,990 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/43435162
2024-11-15 14:08:27,990 [INFO] price_checker.py:255 - 入住日期: 20/12/2024
2024-11-15 14:08:30,525 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 14:08:30,525 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:08:30,532 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:08:30,539 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:08:30,539 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:08:30,539 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:08:30,546 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:08:30,551 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:08:30,551 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:08:30,551 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:08:30,558 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:08:30,563 [INFO] price_checker.py:403 - 找到价格元素: $30 NZD (HTML: <span class="_1k4xcdh">$30&nbsp;NZD</span>)
2024-11-15 14:08:30,564 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $30 NZD
2024-11-15 14:08:30,564 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:08:30,571 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:08:30,576 [INFO] price_checker.py:403 - 找到价格元素: $30 NZD (HTML: <span class="_1k4xcdh">$30&nbsp;NZD</span>)
2024-11-15 14:08:30,576 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $30 NZD
2024-11-15 14:08:30,576 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:08:30,583 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:08:30,587 [INFO] price_checker.py:403 - 找到价格元素: $27 NZD (HTML: <span class="_1k4xcdh">$27&nbsp;NZD</span>)
2024-11-15 14:08:30,588 [INFO] price_checker.py:416 - ✓ 成功设置税费: $27 NZD
2024-11-15 14:08:30,588 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:08:33,117 [INFO] price_checker.py:271 - 开始检查日期 20/12/2024 的最小入住要求...
2024-11-15 14:08:33,120 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="20, Friday, December 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-20/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">20</div></td>
2024-11-15 14:08:33,130 [INFO] price_checker.py:158 - 找到日期: 20/12/2024
2024-11-15 14:08:33,130 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:08:34,259 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:08:35,553 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="20, Friday, December 2024. Selected check-in date There is a 2 night minimum stay requirement. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_h84ua7"><div class="_d82cel" style="transform: translate(-50%, -100%) translate(20.5px, -12px);"><div class="_1mslrl4"><div class="_u7azij">2-night minimum</div><svg role="presentation" focusable="false" class="_1mjga4hj"><path class="_1s2t3cl" d="M0,0 20,0 10,10z"></path><path class="_c3dsty" d="M0,0 10,10 20,0"></path></svg></div></div><div class="_194zlzjz notranslate" data-testid="calendar-day-20/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">20</div></div></td>
2024-11-15 14:08:35,561 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 14:08:35,561 [INFO] price_checker.py:218 - - aria-label: 20, Friday, December 2024. Selected check-in date There is a 2 night minimum stay requirement. 
2024-11-15 14:08:35,561 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 14:08:35,561 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 14:08:35,561 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 2晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 14:08:35,562 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 2晚 (自动检测)
2024-11-15 14:08:35,562 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/43435162?check_in=2024-12-20&check_out=2024-12-22&adults=3&children=0&infants=0
2024-11-15 14:08:40,604 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:08:40,611 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:08:40,617 [INFO] price_checker.py:403 - 找到价格元素: $240 NZD (HTML: <span class="_j1kt73">$240&nbsp;NZD</span>)
2024-11-15 14:08:40,617 [INFO] price_checker.py:420 - ✓ 成功设置总价: $240 NZD
2024-11-15 14:08:40,617 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:08:40,624 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:08:40,629 [INFO] price_checker.py:403 - 找到价格元素: $240 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$240&nbsp;NZD</span></span>)
2024-11-15 14:08:40,629 [INFO] price_checker.py:420 - ✓ 成功设置总价: $240 NZD
2024-11-15 14:08:40,634 [INFO] price_checker.py:403 - 找到价格元素: $240 NZD (HTML: <span class="_j1kt73">$240&nbsp;NZD</span>)
2024-11-15 14:08:40,634 [INFO] price_checker.py:420 - ✓ 成功设置总价: $240 NZD
2024-11-15 14:08:40,639 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:08:40,639 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:08:40,639 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:08:40,639 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 14:08:40,639 [INFO] price_checker.py:450 - ✓ service_fee: $30 NZD
2024-11-15 14:08:40,639 [INFO] price_checker.py:450 - ✓ taxes: $27 NZD
2024-11-15 14:08:40,639 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:08:40,639 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:08:40,639 [INFO] price_checker.py:457 - check_in: 23/12/2024
2024-11-15 14:08:40,639 [INFO] price_checker.py:457 - check_out: 24/12/2024
2024-11-15 14:08:40,640 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:08:40,640 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:08:40,640 [INFO] price_checker.py:457 - nightly_price: $163 NZD
2024-11-15 14:08:40,640 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 14:08:40,640 [INFO] price_checker.py:457 - service_fee: $30 NZD
2024-11-15 14:08:40,640 [INFO] price_checker.py:457 - taxes: $27 NZD
2024-11-15 14:08:40,640 [INFO] price_checker.py:457 - total: 
2024-11-15 14:08:40,640 [INFO] price_checker.py:559 - ✓ 成功获取 23/12/2024 的价格信息
2024-11-15 14:08:40,640 [INFO] price_checker.py:553 - [34/72] 处理日期: 24/12/2024
2024-11-15 14:08:40,640 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 14:08:40,640 [INFO] price_checker.py:255 - 入住日期: 24/12/2024
2024-11-15 14:08:40,648 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:08:40,651 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:08:41,460 [WARNING] price_checker.py:443 - 尝试点击价格展开按钮失败: Message: no such element: Unable to locate element: {"method":"xpath","selector":"//button[contains(@class, '_12wl7g09')]"}
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00952BFE]
	(No symbol) [0x00952CDB]
	(No symbol) [0x0098EBD2]
	(No symbol) [0x00973954]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:08:41,461 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:08:41,461 [WARNING] price_checker.py:452 - ✗ cleaning_fee 未获取到
2024-11-15 14:08:41,461 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 14:08:41,461 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 14:08:41,461 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:08:41,461 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:08:41,461 [INFO] price_checker.py:457 - check_in: 10/01/2025
2024-11-15 14:08:41,461 [INFO] price_checker.py:457 - check_out: 11/01/2025
2024-11-15 14:08:41,461 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:08:41,461 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:08:41,461 [INFO] price_checker.py:457 - nightly_price: None
2024-11-15 14:08:41,462 [INFO] price_checker.py:457 - cleaning_fee: None
2024-11-15 14:08:41,462 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 14:08:41,462 [INFO] price_checker.py:457 - taxes: None
2024-11-15 14:08:41,462 [INFO] price_checker.py:457 - total: None
2024-11-15 14:08:41,462 [INFO] price_checker.py:559 - ✓ 成功获取 10/01/2025 的价格信息
2024-11-15 14:08:41,462 [INFO] price_checker.py:553 - [27/37] 处理日期: 11/01/2025
2024-11-15 14:08:41,462 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-15 14:08:41,462 [INFO] price_checker.py:255 - 入住日期: 11/01/2025
2024-11-15 14:08:42,664 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:08:42,664 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:08:45,761 [INFO] price_checker.py:271 - 开始检查日期 24/12/2024 的最小入住要求...
2024-11-15 14:08:45,764 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="24, Tuesday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-24/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">24</div></td>
2024-11-15 14:08:45,773 [INFO] price_checker.py:158 - 找到日期: 24/12/2024
2024-11-15 14:08:45,773 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:08:46,578 [INFO] price_checker.py:271 - 开始检查日期 11/01/2025 的最小入住要求...
2024-11-15 14:08:46,582 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="11, Saturday, January 2025. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-11/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">11</div></td>
2024-11-15 14:08:46,594 [INFO] price_checker.py:158 - 找到日期: 11/01/2025
2024-11-15 14:08:46,594 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:08:46,887 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:08:48,175 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="24, Tuesday, December 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_ox7af8h notranslate" data-testid="calendar-day-24/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">24</div></td>
2024-11-15 14:08:48,183 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 14:08:48,183 [INFO] price_checker.py:218 - - aria-label: 24, Tuesday, December 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 14:08:48,183 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 14:08:48,183 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 14:08:48,183 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 14:08:48,183 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:08:48,184 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2024-12-24&check_out=2024-12-25&adults=3&children=0&infants=0
2024-11-15 14:08:52,669 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:08:52,670 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:08:53,273 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:08:53,276 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:08:55,287 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:08:55,288 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:08:56,619 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:08:57,728 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:08:57,733 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:08:57,734 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 14:08:57,735 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:08:57,735 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:08:57,735 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:08:57,735 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/837352260137971048?check_in=2025-01-11&check_out=2025-01-12&adults=3&children=0&infants=0
2024-11-15 14:09:02,689 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:09:02,689 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:09:02,695 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:09:02,709 [INFO] price_checker.py:337 - 找到可见价格元素: $305 NZD 
night
$305 NZD per night
2024-11-15 14:09:02,714 [INFO] price_checker.py:350 - 找到每晚价格元素: $305 NZD 
night
$305 NZD per night
2024-11-15 14:09:02,714 [INFO] price_checker.py:356 - 成功解析折扣价格: $305 NZD
2024-11-15 14:09:02,715 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:09:02,720 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 14:09:02,823 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:09:02,826 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:09:03,223 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:09:03,230 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:09:03,237 [INFO] price_checker.py:403 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-15 14:09:03,238 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $90 NZD
2024-11-15 14:09:03,238 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:09:03,244 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:09:03,250 [INFO] price_checker.py:403 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-15 14:09:03,250 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $90 NZD
2024-11-15 14:09:03,250 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:09:04,838 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:09:04,838 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:09:05,323 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:09:05,324 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:09:13,281 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:09:14,872 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:09:14,872 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:09:15,358 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:09:15,359 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:09:15,364 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:09:15,381 [INFO] price_checker.py:337 - 找到可见价格元素: $173 NZD 
night
$173 NZD per night
2024-11-15 14:09:15,388 [INFO] price_checker.py:350 - 找到每晚价格元素: $173 NZD 
night
$173 NZD per night
2024-11-15 14:09:15,388 [INFO] price_checker.py:356 - 成功解析折扣价格: $173 NZD
2024-11-15 14:09:15,388 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:09:23,329 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:09:24,916 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:09:24,916 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:09:25,431 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 14:09:25,431 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:09:25,438 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:09:25,445 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:09:25,445 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:09:25,445 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:09:25,452 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:09:25,456 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:09:25,457 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:09:25,457 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:09:25,463 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:09:25,467 [INFO] price_checker.py:403 - 找到价格元素: $31 NZD (HTML: <span class="_1k4xcdh">$31&nbsp;NZD</span>)
2024-11-15 14:09:25,468 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $31 NZD
2024-11-15 14:09:25,468 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:09:25,474 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:09:25,479 [INFO] price_checker.py:403 - 找到价格元素: $31 NZD (HTML: <span class="_1k4xcdh">$31&nbsp;NZD</span>)
2024-11-15 14:09:25,479 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $31 NZD
2024-11-15 14:09:25,479 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:09:25,485 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:09:25,490 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 14:09:25,490 [INFO] price_checker.py:416 - ✓ 成功设置税费: $29 NZD
2024-11-15 14:09:25,490 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:09:33,373 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:09:34,960 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:09:34,960 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w ._11jcbg2
2024-11-15 14:09:35,540 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:09:35,546 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:09:35,551 [INFO] price_checker.py:403 - 找到价格元素: $252 NZD (HTML: <span class="_j1kt73">$252&nbsp;NZD</span>)
2024-11-15 14:09:35,551 [INFO] price_checker.py:420 - ✓ 成功设置总价: $252 NZD
2024-11-15 14:09:35,552 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:09:35,558 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:09:35,563 [INFO] price_checker.py:403 - 找到价格元素: $252 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$252&nbsp;NZD</span></span>)
2024-11-15 14:09:35,563 [INFO] price_checker.py:420 - ✓ 成功设置总价: $252 NZD
2024-11-15 14:09:35,568 [INFO] price_checker.py:403 - 找到价格元素: $252 NZD (HTML: <span class="_j1kt73">$252&nbsp;NZD</span>)
2024-11-15 14:09:35,568 [INFO] price_checker.py:420 - ✓ 成功设置总价: $252 NZD
2024-11-15 14:09:35,572 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:09:35,573 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:09:35,573 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:09:35,573 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 14:09:35,573 [INFO] price_checker.py:450 - ✓ service_fee: $31 NZD
2024-11-15 14:09:35,573 [INFO] price_checker.py:450 - ✓ taxes: $29 NZD
2024-11-15 14:09:35,573 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:09:35,573 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:09:35,573 [INFO] price_checker.py:457 - check_in: 24/12/2024
2024-11-15 14:09:35,573 [INFO] price_checker.py:457 - check_out: 25/12/2024
2024-11-15 14:09:35,573 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:09:35,573 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:09:35,573 [INFO] price_checker.py:457 - nightly_price: $173 NZD
2024-11-15 14:09:35,573 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 14:09:35,574 [INFO] price_checker.py:457 - service_fee: $31 NZD
2024-11-15 14:09:35,574 [INFO] price_checker.py:457 - taxes: $29 NZD
2024-11-15 14:09:35,574 [INFO] price_checker.py:457 - total: 
2024-11-15 14:09:35,574 [INFO] price_checker.py:559 - ✓ 成功获取 24/12/2024 的价格信息
2024-11-15 14:09:35,574 [INFO] price_checker.py:553 - [35/72] 处理日期: 25/12/2024
2024-11-15 14:09:35,574 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 14:09:35,574 [INFO] price_checker.py:255 - 入住日期: 25/12/2024
2024-11-15 14:09:40,690 [INFO] price_checker.py:271 - 开始检查日期 25/12/2024 的最小入住要求...
2024-11-15 14:09:40,694 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="25, Wednesday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-25/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">25</div></td>
2024-11-15 14:09:40,703 [INFO] price_checker.py:158 - 找到日期: 25/12/2024
2024-11-15 14:09:40,703 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:09:41,852 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:09:43,141 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="25, Wednesday, December 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_ox7af8h notranslate" data-testid="calendar-day-25/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">25</div></td>
2024-11-15 14:09:43,149 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 14:09:43,149 [INFO] price_checker.py:218 - - aria-label: 25, Wednesday, December 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 14:09:43,149 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 14:09:43,149 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 14:09:43,149 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 14:09:43,150 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:09:43,150 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2024-12-25&check_out=2024-12-26&adults=3&children=0&infants=0
2024-11-15 14:09:43,407 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:09:43,413 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:09:43,420 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span class="_j1kt73">$700&nbsp;NZD</span>)
2024-11-15 14:09:43,420 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 14:09:43,421 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:09:43,427 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:09:43,432 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$700&nbsp;NZD</span></span>)
2024-11-15 14:09:43,432 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 14:09:43,436 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span class="_j1kt73">$700&nbsp;NZD</span>)
2024-11-15 14:09:43,437 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 14:09:43,441 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:09:43,441 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:09:43,441 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:09:43,441 [INFO] price_checker.py:450 - ✓ cleaning_fee: $90 NZD
2024-11-15 14:09:43,441 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 14:09:43,441 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 14:09:43,441 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:09:43,441 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:09:43,441 [INFO] price_checker.py:457 - check_in: 20/12/2024
2024-11-15 14:09:43,442 [INFO] price_checker.py:457 - check_out: 22/12/2024
2024-11-15 14:09:43,442 [INFO] price_checker.py:457 - min_nights: 2
2024-11-15 14:09:43,442 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:09:43,442 [INFO] price_checker.py:457 - nightly_price: $305 NZD
2024-11-15 14:09:43,442 [INFO] price_checker.py:457 - cleaning_fee: $90 NZD
2024-11-15 14:09:43,442 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 14:09:43,442 [INFO] price_checker.py:457 - taxes: None
2024-11-15 14:09:43,442 [INFO] price_checker.py:457 - total: 
2024-11-15 14:09:43,442 [INFO] price_checker.py:559 - ✓ 成功获取 20/12/2024 的价格信息
2024-11-15 14:09:43,442 [INFO] price_checker.py:565 - 根据最小入住要求(2晚)跳过接下来的 1 天
2024-11-15 14:09:43,442 [INFO] price_checker.py:553 - [26/39] 处理日期: 21/12/2024
2024-11-15 14:09:43,442 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/43435162
2024-11-15 14:09:43,442 [INFO] price_checker.py:255 - 入住日期: 21/12/2024
2024-11-15 14:09:44,989 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:09:44,989 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[contains(@class, '_wgmchy')]//span[contains(text(), '$') and contains(text(), 'NZD')]
2024-11-15 14:09:48,254 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:09:48,256 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:09:48,573 [INFO] price_checker.py:271 - 开始检查日期 21/12/2024 的最小入住要求...
2024-11-15 14:09:48,576 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="21, Saturday, December 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-21/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">21</div></td>
2024-11-15 14:09:48,585 [INFO] price_checker.py:158 - 找到日期: 21/12/2024
2024-11-15 14:09:48,585 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:09:49,700 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:09:50,267 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:09:50,267 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:09:51,003 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="21, Saturday, December 2024. Selected check-in date There is a 2 night minimum stay requirement. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_h84ua7"><div class="_d82cel" style="transform: translate(-100%, -100%) translate(41px, -12px);"><div class="_1mslrl4"><div class="_u7azij">2-night minimum</div><svg role="presentation" focusable="false" class="_8c7xtno" style="right: 9.5px;"><path class="_1s2t3cl" d="M0,0 20,0 10,10z"></path><path class="_c3dsty" d="M0,0 10,10 20,0"></path></svg></div></div><div class="_194zlzjz notranslate" data-testid="calendar-day-21/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">21</div></div></td>
2024-11-15 14:09:51,011 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 14:09:51,012 [INFO] price_checker.py:218 - - aria-label: 21, Saturday, December 2024. Selected check-in date There is a 2 night minimum stay requirement. 
2024-11-15 14:09:51,012 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 14:09:51,012 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 14:09:51,012 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 2晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 14:09:51,012 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 2晚 (自动检测)
2024-11-15 14:09:51,012 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/43435162?check_in=2024-12-21&check_out=2024-12-23&adults=3&children=0&infants=0
2024-11-15 14:09:55,000 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:09:55,000 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:09:56,112 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:09:56,115 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:09:58,126 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:09:58,126 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:10:00,308 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:10:00,308 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:10:05,024 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 14:10:05,024 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:10:08,159 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:10:08,159 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:10:10,343 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:10:10,343 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:10:10,349 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:10:10,364 [INFO] price_checker.py:337 - 找到可见价格元素: $157 NZD 
night
$157 NZD per night
2024-11-15 14:10:10,369 [INFO] price_checker.py:350 - 找到每晚价格元素: $157 NZD 
night
$157 NZD per night
2024-11-15 14:10:10,369 [INFO] price_checker.py:356 - 成功解析折扣价格: $157 NZD
2024-11-15 14:10:10,369 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:10:15,059 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:10:18,190 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:10:18,190 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:10:18,196 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:10:18,210 [INFO] price_checker.py:337 - 找到可见价格元素: $305 NZD 
night
$305 NZD per night
2024-11-15 14:10:18,216 [INFO] price_checker.py:350 - 找到每晚价格元素: $305 NZD 
night
$305 NZD per night
2024-11-15 14:10:18,216 [INFO] price_checker.py:356 - 成功解析折扣价格: $305 NZD
2024-11-15 14:10:18,216 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:10:18,221 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 14:10:18,724 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:10:18,731 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:10:18,737 [INFO] price_checker.py:403 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-15 14:10:18,738 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $90 NZD
2024-11-15 14:10:18,738 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:10:18,744 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:10:18,749 [INFO] price_checker.py:403 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-15 14:10:18,749 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $90 NZD
2024-11-15 14:10:18,749 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:10:20,401 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 14:10:20,402 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:10:20,408 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:10:20,414 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:10:20,414 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:10:20,414 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:10:20,421 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:10:20,425 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:10:20,425 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:10:20,425 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:10:20,432 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:10:20,437 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 14:10:20,437 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 14:10:20,437 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:10:20,444 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:10:20,449 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 14:10:20,449 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 14:10:20,449 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:10:20,455 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:10:20,460 [INFO] price_checker.py:403 - 找到价格元素: $27 NZD (HTML: <span class="_1k4xcdh">$27&nbsp;NZD</span>)
2024-11-15 14:10:20,460 [INFO] price_checker.py:416 - ✓ 成功设置税费: $27 NZD
2024-11-15 14:10:20,460 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:10:25,094 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:10:28,788 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:10:30,501 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:10:30,508 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:10:30,513 [INFO] price_checker.py:403 - 找到价格元素: $234 NZD (HTML: <span class="_j1kt73">$234&nbsp;NZD</span>)
2024-11-15 14:10:30,513 [INFO] price_checker.py:420 - ✓ 成功设置总价: $234 NZD
2024-11-15 14:10:30,513 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:10:30,520 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:10:30,525 [INFO] price_checker.py:403 - 找到价格元素: $234 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$234&nbsp;NZD</span></span>)
2024-11-15 14:10:30,525 [INFO] price_checker.py:420 - ✓ 成功设置总价: $234 NZD
2024-11-15 14:10:30,529 [INFO] price_checker.py:403 - 找到价格元素: $234 NZD (HTML: <span class="_j1kt73">$234&nbsp;NZD</span>)
2024-11-15 14:10:30,530 [INFO] price_checker.py:420 - ✓ 成功设置总价: $234 NZD
2024-11-15 14:10:30,534 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:10:30,534 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:10:30,534 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:10:30,534 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 14:10:30,534 [INFO] price_checker.py:450 - ✓ service_fee: $29 NZD
2024-11-15 14:10:30,534 [INFO] price_checker.py:450 - ✓ taxes: $27 NZD
2024-11-15 14:10:30,534 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:10:30,535 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:10:30,535 [INFO] price_checker.py:457 - check_in: 25/12/2024
2024-11-15 14:10:30,535 [INFO] price_checker.py:457 - check_out: 26/12/2024
2024-11-15 14:10:30,535 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:10:30,535 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:10:30,535 [INFO] price_checker.py:457 - nightly_price: $157 NZD
2024-11-15 14:10:30,535 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 14:10:30,535 [INFO] price_checker.py:457 - service_fee: $29 NZD
2024-11-15 14:10:30,535 [INFO] price_checker.py:457 - taxes: $27 NZD
2024-11-15 14:10:30,535 [INFO] price_checker.py:457 - total: 
2024-11-15 14:10:30,535 [INFO] price_checker.py:559 - ✓ 成功获取 25/12/2024 的价格信息
2024-11-15 14:10:30,535 [INFO] price_checker.py:573 - 已完成 35/72 个日期的处理
2024-11-15 14:10:35,134 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:10:38,822 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:10:40,536 [INFO] price_checker.py:553 - [36/72] 处理日期: 26/12/2024
2024-11-15 14:10:40,536 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 14:10:40,536 [INFO] price_checker.py:255 - 入住日期: 26/12/2024
2024-11-15 14:10:45,160 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:10:45,677 [INFO] price_checker.py:271 - 开始检查日期 26/12/2024 的最小入住要求...
2024-11-15 14:10:45,680 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="26, Thursday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-26/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">26</div></td>
2024-11-15 14:10:45,689 [INFO] price_checker.py:158 - 找到日期: 26/12/2024
2024-11-15 14:10:45,689 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:10:46,811 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:10:48,102 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="26, Thursday, December 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_ox7af8h notranslate" data-testid="calendar-day-26/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">26</div></td>
2024-11-15 14:10:48,113 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 14:10:48,113 [INFO] price_checker.py:218 - - aria-label: 26, Thursday, December 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 14:10:48,113 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 14:10:48,113 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 14:10:48,114 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 14:10:48,114 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:10:48,114 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2024-12-26&check_out=2024-12-27&adults=3&children=0&infants=0
2024-11-15 14:10:48,851 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:10:53,229 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:10:53,232 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:10:55,200 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:10:55,243 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:10:55,243 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:10:58,899 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:10:58,905 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:10:58,912 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span class="_j1kt73">$700&nbsp;NZD</span>)
2024-11-15 14:10:58,912 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 14:10:58,912 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:10:58,918 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:10:58,923 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$700&nbsp;NZD</span></span>)
2024-11-15 14:10:58,923 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 14:10:58,928 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span class="_j1kt73">$700&nbsp;NZD</span>)
2024-11-15 14:10:58,928 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 14:10:58,932 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:10:58,932 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:10:58,932 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:10:58,932 [INFO] price_checker.py:450 - ✓ cleaning_fee: $90 NZD
2024-11-15 14:10:58,933 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 14:10:58,933 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 14:10:58,933 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:10:58,933 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:10:58,933 [INFO] price_checker.py:457 - check_in: 21/12/2024
2024-11-15 14:10:58,933 [INFO] price_checker.py:457 - check_out: 23/12/2024
2024-11-15 14:10:58,933 [INFO] price_checker.py:457 - min_nights: 2
2024-11-15 14:10:58,933 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:10:58,933 [INFO] price_checker.py:457 - nightly_price: $305 NZD
2024-11-15 14:10:58,933 [INFO] price_checker.py:457 - cleaning_fee: $90 NZD
2024-11-15 14:10:58,933 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 14:10:58,933 [INFO] price_checker.py:457 - taxes: None
2024-11-15 14:10:58,933 [INFO] price_checker.py:457 - total: 
2024-11-15 14:10:58,933 [INFO] price_checker.py:559 - ✓ 成功获取 21/12/2024 的价格信息
2024-11-15 14:10:58,934 [INFO] price_checker.py:565 - 根据最小入住要求(2晚)跳过接下来的 1 天
2024-11-15 14:10:58,934 [INFO] price_checker.py:553 - [27/39] 处理日期: 22/12/2024
2024-11-15 14:10:58,934 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/43435162
2024-11-15 14:10:58,934 [INFO] price_checker.py:255 - 入住日期: 22/12/2024
2024-11-15 14:11:04,057 [INFO] price_checker.py:271 - 开始检查日期 22/12/2024 的最小入住要求...
2024-11-15 14:11:04,060 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_1mv3p4vt" role="button" aria-disabled="false" aria-label="22, Sunday, December 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-22/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">22</div></td>
2024-11-15 14:11:04,070 [INFO] price_checker.py:158 - 找到日期: 22/12/2024
2024-11-15 14:11:04,070 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:11:05,186 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:11:05,229 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:11:05,275 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:11:05,275 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:11:06,476 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_ubf03zg" role="button" aria-disabled="true" aria-label="22, Sunday, December 2024. Selected check-in date There is a 2 night minimum stay requirement. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_h84ua7"><div class="_d82cel" style="transform: translate(-100%, -100%) translate(41px, -12px);"><div class="_1mslrl4"><div class="_u7azij">2-night minimum</div><svg role="presentation" focusable="false" class="_8c7xtno" style="right: 9.5px;"><path class="_1s2t3cl" d="M0,0 20,0 10,10z"></path><path class="_c3dsty" d="M0,0 10,10 20,0"></path></svg></div></div><div class="_17slido1 notranslate" data-testid="calendar-day-22/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">22</div></div></td>
2024-11-15 14:11:06,485 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 14:11:06,485 [INFO] price_checker.py:218 - - aria-label: 22, Sunday, December 2024. Selected check-in date There is a 2 night minimum stay requirement. 
2024-11-15 14:11:06,485 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 14:11:06,485 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 14:11:06,485 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 2晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 14:11:06,485 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 2晚 (自动检测)
2024-11-15 14:11:06,486 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/43435162?check_in=2024-12-22&check_out=2024-12-24&adults=3&children=0&infants=0
2024-11-15 14:11:11,590 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:11:11,594 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:11:13,604 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:11:13,604 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:11:15,241 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:11:15,288 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:11:15,288 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:11:15,294 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:11:15,312 [INFO] price_checker.py:337 - 找到可见价格元素: $160 NZD 
night
$160 NZD per night
2024-11-15 14:11:15,319 [INFO] price_checker.py:350 - 找到每晚价格元素: $160 NZD 
night
$160 NZD per night
2024-11-15 14:11:15,319 [INFO] price_checker.py:356 - 成功解析折扣价格: $160 NZD
2024-11-15 14:11:15,319 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:11:23,637 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:11:23,637 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:11:25,357 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 14:11:25,357 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:11:25,364 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:11:25,370 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:11:25,370 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:11:25,370 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:11:25,377 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:11:25,382 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:11:25,382 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:11:25,382 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:11:25,388 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:11:25,393 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 14:11:25,393 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 14:11:25,393 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:11:25,400 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:11:25,404 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 14:11:25,404 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 14:11:25,404 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:11:25,410 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:11:25,415 [INFO] price_checker.py:403 - 找到价格元素: $27 NZD (HTML: <span class="_1k4xcdh">$27&nbsp;NZD</span>)
2024-11-15 14:11:25,415 [INFO] price_checker.py:416 - ✓ 成功设置税费: $27 NZD
2024-11-15 14:11:25,415 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:11:33,687 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:11:33,687 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:11:33,693 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:11:33,707 [INFO] price_checker.py:337 - 找到可见价格元素: $305 NZD 
night
$305 NZD per night
2024-11-15 14:11:33,713 [INFO] price_checker.py:350 - 找到每晚价格元素: $305 NZD 
night
$305 NZD per night
2024-11-15 14:11:33,713 [INFO] price_checker.py:356 - 成功解析折扣价格: $305 NZD
2024-11-15 14:11:33,713 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:11:33,719 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 14:11:34,221 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:11:34,229 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:11:34,235 [INFO] price_checker.py:403 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-15 14:11:34,235 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $90 NZD
2024-11-15 14:11:34,235 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:11:34,241 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:11:34,246 [INFO] price_checker.py:403 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-15 14:11:34,246 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $90 NZD
2024-11-15 14:11:34,246 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:11:35,326 [WARNING] price_checker.py:443 - 尝试点击价格展开按钮失败: Message: no such element: Unable to locate element: {"method":"xpath","selector":"//button[contains(@class, '_12wl7g09')]"}
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00952BFE]
	(No symbol) [0x00952CDB]
	(No symbol) [0x0098EBD2]
	(No symbol) [0x00973954]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:11:35,326 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:11:35,326 [WARNING] price_checker.py:452 - ✗ cleaning_fee 未获取到
2024-11-15 14:11:35,326 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 14:11:35,326 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 14:11:35,326 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:11:35,326 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:11:35,327 [INFO] price_checker.py:457 - check_in: 11/01/2025
2024-11-15 14:11:35,327 [INFO] price_checker.py:457 - check_out: 12/01/2025
2024-11-15 14:11:35,327 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:11:35,327 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:11:35,327 [INFO] price_checker.py:457 - nightly_price: None
2024-11-15 14:11:35,327 [INFO] price_checker.py:457 - cleaning_fee: None
2024-11-15 14:11:35,327 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 14:11:35,327 [INFO] price_checker.py:457 - taxes: None
2024-11-15 14:11:35,327 [INFO] price_checker.py:457 - total: None
2024-11-15 14:11:35,327 [INFO] price_checker.py:559 - ✓ 成功获取 11/01/2025 的价格信息
2024-11-15 14:11:35,327 [INFO] price_checker.py:553 - [28/37] 处理日期: 12/01/2025
2024-11-15 14:11:35,327 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-15 14:11:35,327 [INFO] price_checker.py:255 - 入住日期: 12/01/2025
2024-11-15 14:11:35,463 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:11:35,470 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:11:35,475 [INFO] price_checker.py:403 - 找到价格元素: $237 NZD (HTML: <span class="_j1kt73">$237&nbsp;NZD</span>)
2024-11-15 14:11:35,475 [INFO] price_checker.py:420 - ✓ 成功设置总价: $237 NZD
2024-11-15 14:11:35,476 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:11:35,484 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:11:35,489 [INFO] price_checker.py:403 - 找到价格元素: $237 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$237&nbsp;NZD</span></span>)
2024-11-15 14:11:35,489 [INFO] price_checker.py:420 - ✓ 成功设置总价: $237 NZD
2024-11-15 14:11:35,493 [INFO] price_checker.py:403 - 找到价格元素: $237 NZD (HTML: <span class="_j1kt73">$237&nbsp;NZD</span>)
2024-11-15 14:11:35,493 [INFO] price_checker.py:420 - ✓ 成功设置总价: $237 NZD
2024-11-15 14:11:35,498 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:11:35,498 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:11:35,498 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:11:35,498 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 14:11:35,498 [INFO] price_checker.py:450 - ✓ service_fee: $29 NZD
2024-11-15 14:11:35,498 [INFO] price_checker.py:450 - ✓ taxes: $27 NZD
2024-11-15 14:11:35,498 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:11:35,498 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:11:35,499 [INFO] price_checker.py:457 - check_in: 26/12/2024
2024-11-15 14:11:35,499 [INFO] price_checker.py:457 - check_out: 27/12/2024
2024-11-15 14:11:35,499 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:11:35,499 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:11:35,499 [INFO] price_checker.py:457 - nightly_price: $160 NZD
2024-11-15 14:11:35,499 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 14:11:35,499 [INFO] price_checker.py:457 - service_fee: $29 NZD
2024-11-15 14:11:35,499 [INFO] price_checker.py:457 - taxes: $27 NZD
2024-11-15 14:11:35,499 [INFO] price_checker.py:457 - total: 
2024-11-15 14:11:35,499 [INFO] price_checker.py:559 - ✓ 成功获取 26/12/2024 的价格信息
2024-11-15 14:11:35,499 [INFO] price_checker.py:553 - [37/72] 处理日期: 27/12/2024
2024-11-15 14:11:35,499 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 14:11:35,500 [INFO] price_checker.py:255 - 入住日期: 27/12/2024
2024-11-15 14:11:40,445 [INFO] price_checker.py:271 - 开始检查日期 12/01/2025 的最小入住要求...
2024-11-15 14:11:40,449 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_1mv3p4vt" role="button" aria-disabled="false" aria-label="12, Sunday, January 2025. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-12/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">12</div></td>
2024-11-15 14:11:40,459 [INFO] price_checker.py:158 - 找到日期: 12/01/2025
2024-11-15 14:11:40,459 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:11:40,619 [INFO] price_checker.py:271 - 开始检查日期 27/12/2024 的最小入住要求...
2024-11-15 14:11:40,622 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="27, Friday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-27/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">27</div></td>
2024-11-15 14:11:40,632 [INFO] price_checker.py:158 - 找到日期: 27/12/2024
2024-11-15 14:11:40,632 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:11:41,747 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:11:43,032 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="27, Friday, December 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_ox7af8h notranslate" data-testid="calendar-day-27/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">27</div></td>
2024-11-15 14:11:43,040 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 14:11:43,040 [INFO] price_checker.py:218 - - aria-label: 27, Friday, December 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 14:11:43,040 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 14:11:43,040 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 14:11:43,040 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 14:11:43,040 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:11:43,041 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2024-12-27&check_out=2024-12-28&adults=3&children=0&infants=0
2024-11-15 14:11:44,260 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:11:48,130 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:11:48,133 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:11:50,144 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:11:50,144 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:11:50,492 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:11:51,596 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:11:51,601 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:11:51,602 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 14:11:51,603 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:11:51,603 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:11:51,603 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:11:51,603 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/837352260137971048?check_in=2025-01-12&check_out=2025-01-13&adults=3&children=0&infants=0
2024-11-15 14:11:54,285 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:11:56,691 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:11:56,695 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:11:58,706 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:11:58,706 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:12:00,182 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:12:00,182 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:12:04,328 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:12:08,751 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:12:08,751 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:12:10,214 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:12:10,214 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:12:10,220 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:12:10,235 [INFO] price_checker.py:337 - 找到可见价格元素: $177 NZD 
night
$177 NZD per night
2024-11-15 14:12:10,241 [INFO] price_checker.py:350 - 找到每晚价格元素: $177 NZD 
night
$177 NZD per night
2024-11-15 14:12:10,241 [INFO] price_checker.py:356 - 成功解析折扣价格: $177 NZD
2024-11-15 14:12:10,241 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:12:14,363 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:12:14,369 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:12:14,376 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span class="_j1kt73">$700&nbsp;NZD</span>)
2024-11-15 14:12:14,376 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 14:12:14,376 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:12:14,383 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:12:14,388 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$700&nbsp;NZD</span></span>)
2024-11-15 14:12:14,388 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 14:12:14,393 [INFO] price_checker.py:403 - 找到价格元素: $700 NZD (HTML: <span class="_j1kt73">$700&nbsp;NZD</span>)
2024-11-15 14:12:14,393 [INFO] price_checker.py:420 - ✓ 成功设置总价: $700 NZD
2024-11-15 14:12:14,398 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:12:14,398 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:12:14,398 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:12:14,398 [INFO] price_checker.py:450 - ✓ cleaning_fee: $90 NZD
2024-11-15 14:12:14,398 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 14:12:14,398 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 14:12:14,398 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:12:14,398 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:12:14,398 [INFO] price_checker.py:457 - check_in: 22/12/2024
2024-11-15 14:12:14,399 [INFO] price_checker.py:457 - check_out: 24/12/2024
2024-11-15 14:12:14,399 [INFO] price_checker.py:457 - min_nights: 2
2024-11-15 14:12:14,399 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:12:14,399 [INFO] price_checker.py:457 - nightly_price: $305 NZD
2024-11-15 14:12:14,399 [INFO] price_checker.py:457 - cleaning_fee: $90 NZD
2024-11-15 14:12:14,399 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 14:12:14,399 [INFO] price_checker.py:457 - taxes: None
2024-11-15 14:12:14,399 [INFO] price_checker.py:457 - total: 
2024-11-15 14:12:14,399 [INFO] price_checker.py:559 - ✓ 成功获取 22/12/2024 的价格信息
2024-11-15 14:12:14,399 [INFO] price_checker.py:565 - 根据最小入住要求(2晚)跳过接下来的 1 天
2024-11-15 14:12:14,399 [INFO] price_checker.py:553 - [28/39] 处理日期: 23/12/2024
2024-11-15 14:12:14,399 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/43435162
2024-11-15 14:12:14,399 [INFO] price_checker.py:255 - 入住日期: 23/12/2024
2024-11-15 14:12:18,776 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:12:18,777 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:12:19,518 [INFO] price_checker.py:271 - 开始检查日期 23/12/2024 的最小入住要求...
2024-11-15 14:12:19,521 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_sl5yz7r" role="button" aria-disabled="false" aria-label="23, Monday, December 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-23/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">23</div></td>
2024-11-15 14:12:19,532 [INFO] price_checker.py:158 - 找到日期: 23/12/2024
2024-11-15 14:12:19,532 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:12:20,266 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 14:12:20,267 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:12:20,273 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:12:20,279 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:12:20,279 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:12:20,279 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:12:20,286 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:12:20,291 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:12:20,291 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:12:20,291 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:12:20,297 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:12:20,302 [INFO] price_checker.py:403 - 找到价格元素: $32 NZD (HTML: <span class="_1k4xcdh">$32&nbsp;NZD</span>)
2024-11-15 14:12:20,302 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $32 NZD
2024-11-15 14:12:20,302 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:12:20,308 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:12:20,315 [INFO] price_checker.py:403 - 找到价格元素: $32 NZD (HTML: <span class="_1k4xcdh">$32&nbsp;NZD</span>)
2024-11-15 14:12:20,315 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $32 NZD
2024-11-15 14:12:20,315 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:12:20,321 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:12:20,326 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 14:12:20,326 [INFO] price_checker.py:416 - ✓ 成功设置税费: $29 NZD
2024-11-15 14:12:20,326 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:12:20,675 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:12:21,981 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_5v1jabe" role="button" aria-disabled="true" aria-label="23, Monday, December 2024. Selected check-in date There is a 2 night minimum stay requirement. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_h84ua7"><div class="_d82cel" style="transform: translateY(-100%) translateY(-12px);"><div class="_1mslrl4"><div class="_u7azij">2-night minimum</div><svg role="presentation" focusable="false" class="_8c7xtno" style="left: 9.5px;"><path class="_1s2t3cl" d="M0,0 20,0 10,10z"></path><path class="_c3dsty" d="M0,0 10,10 20,0"></path></svg></div></div><div class="_17slido1 notranslate" data-testid="calendar-day-23/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">23</div></div></td>
2024-11-15 14:12:21,989 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 14:12:21,989 [INFO] price_checker.py:218 - - aria-label: 23, Monday, December 2024. Selected check-in date There is a 2 night minimum stay requirement. 
2024-11-15 14:12:21,989 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 14:12:21,990 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 14:12:21,990 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 2晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 14:12:21,990 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 2晚 (自动检测)
2024-11-15 14:12:21,990 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/43435162?check_in=2024-12-23&check_out=2024-12-25&adults=3&children=0&infants=0
2024-11-15 14:12:27,125 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:12:27,128 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:12:28,796 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:12:28,796 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w ._11jcbg2
2024-11-15 14:12:29,139 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:12:29,139 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:12:30,354 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:12:30,361 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:12:30,366 [INFO] price_checker.py:403 - 找到价格元素: $256 NZD (HTML: <span class="_j1kt73">$256&nbsp;NZD</span>)
2024-11-15 14:12:30,366 [INFO] price_checker.py:420 - ✓ 成功设置总价: $256 NZD
2024-11-15 14:12:30,366 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:12:30,373 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:12:30,377 [INFO] price_checker.py:403 - 找到价格元素: $256 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$256&nbsp;NZD</span></span>)
2024-11-15 14:12:30,377 [INFO] price_checker.py:420 - ✓ 成功设置总价: $256 NZD
2024-11-15 14:12:30,382 [INFO] price_checker.py:403 - 找到价格元素: $256 NZD (HTML: <span class="_j1kt73">$256&nbsp;NZD</span>)
2024-11-15 14:12:30,382 [INFO] price_checker.py:420 - ✓ 成功设置总价: $256 NZD
2024-11-15 14:12:30,387 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:12:30,387 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:12:30,387 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:12:30,387 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 14:12:30,387 [INFO] price_checker.py:450 - ✓ service_fee: $32 NZD
2024-11-15 14:12:30,387 [INFO] price_checker.py:450 - ✓ taxes: $29 NZD
2024-11-15 14:12:30,387 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:12:30,388 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:12:30,388 [INFO] price_checker.py:457 - check_in: 27/12/2024
2024-11-15 14:12:30,388 [INFO] price_checker.py:457 - check_out: 28/12/2024
2024-11-15 14:12:30,388 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:12:30,388 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:12:30,388 [INFO] price_checker.py:457 - nightly_price: $177 NZD
2024-11-15 14:12:30,388 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 14:12:30,388 [INFO] price_checker.py:457 - service_fee: $32 NZD
2024-11-15 14:12:30,388 [INFO] price_checker.py:457 - taxes: $29 NZD
2024-11-15 14:12:30,388 [INFO] price_checker.py:457 - total: 
2024-11-15 14:12:30,388 [INFO] price_checker.py:559 - ✓ 成功获取 27/12/2024 的价格信息
2024-11-15 14:12:30,388 [INFO] price_checker.py:553 - [38/72] 处理日期: 28/12/2024
2024-11-15 14:12:30,388 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 14:12:30,388 [INFO] price_checker.py:255 - 入住日期: 28/12/2024
2024-11-15 14:12:35,509 [INFO] price_checker.py:271 - 开始检查日期 28/12/2024 的最小入住要求...
2024-11-15 14:12:35,512 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="28, Saturday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-28/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">28</div></td>
2024-11-15 14:12:35,521 [INFO] price_checker.py:158 - 找到日期: 28/12/2024
2024-11-15 14:12:35,521 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:12:36,635 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:12:37,924 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="28, Saturday, December 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_ox7af8h notranslate" data-testid="calendar-day-28/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">28</div></td>
2024-11-15 14:12:37,932 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 14:12:37,932 [INFO] price_checker.py:218 - - aria-label: 28, Saturday, December 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 14:12:37,932 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 14:12:37,933 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 14:12:37,933 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 14:12:37,933 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:12:37,933 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2024-12-28&check_out=2024-12-29&adults=3&children=0&infants=0
2024-11-15 14:12:38,811 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:12:38,811 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[contains(@class, '_wgmchy')]//span[contains(text(), '$') and contains(text(), 'NZD')]
2024-11-15 14:12:39,154 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:12:39,154 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:12:43,021 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:12:43,024 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:12:45,036 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:12:45,036 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:12:48,828 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:12:48,828 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:12:49,170 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:12:49,170 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:12:49,176 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:12:49,191 [INFO] price_checker.py:337 - 找到可见价格元素: $354 NZD 
night
$354 NZD per night
2024-11-15 14:12:49,196 [INFO] price_checker.py:350 - 找到每晚价格元素: $354 NZD 
night
$354 NZD per night
2024-11-15 14:12:49,197 [INFO] price_checker.py:356 - 成功解析折扣价格: $354 NZD
2024-11-15 14:12:49,197 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:12:49,202 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 14:12:49,705 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:12:49,713 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:12:49,719 [INFO] price_checker.py:403 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-15 14:12:49,719 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $90 NZD
2024-11-15 14:12:49,719 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:12:49,725 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:12:49,730 [INFO] price_checker.py:403 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-15 14:12:49,730 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $90 NZD
2024-11-15 14:12:49,730 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:12:55,080 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:12:55,080 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:12:58,870 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 14:12:58,870 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:12:59,770 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:13:05,118 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:13:05,118 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:13:05,123 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:13:05,139 [INFO] price_checker.py:337 - 找到可见价格元素: $171 NZD 
night
$171 NZD per night
2024-11-15 14:13:05,144 [INFO] price_checker.py:350 - 找到每晚价格元素: $171 NZD 
night
$171 NZD per night
2024-11-15 14:13:05,144 [INFO] price_checker.py:356 - 成功解析折扣价格: $171 NZD
2024-11-15 14:13:05,144 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:13:08,900 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:13:09,801 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:13:15,176 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 14:13:15,177 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:13:15,183 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:13:15,189 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:13:15,190 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:13:15,190 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:13:15,196 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:13:15,201 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:13:15,201 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:13:15,201 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:13:15,208 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:13:15,212 [INFO] price_checker.py:403 - 找到价格元素: $31 NZD (HTML: <span class="_1k4xcdh">$31&nbsp;NZD</span>)
2024-11-15 14:13:15,212 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $31 NZD
2024-11-15 14:13:15,212 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:13:15,219 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:13:15,224 [INFO] price_checker.py:403 - 找到价格元素: $31 NZD (HTML: <span class="_1k4xcdh">$31&nbsp;NZD</span>)
2024-11-15 14:13:15,224 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $31 NZD
2024-11-15 14:13:15,224 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:13:15,230 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:13:15,235 [INFO] price_checker.py:403 - 找到价格元素: $28 NZD (HTML: <span class="_1k4xcdh">$28&nbsp;NZD</span>)
2024-11-15 14:13:15,235 [INFO] price_checker.py:416 - ✓ 成功设置税费: $28 NZD
2024-11-15 14:13:15,235 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:13:18,928 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:13:19,833 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:13:25,272 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:13:25,278 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:13:25,283 [INFO] price_checker.py:403 - 找到价格元素: $249 NZD (HTML: <span class="_j1kt73">$249&nbsp;NZD</span>)
2024-11-15 14:13:25,283 [INFO] price_checker.py:420 - ✓ 成功设置总价: $249 NZD
2024-11-15 14:13:25,283 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:13:25,290 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:13:25,294 [INFO] price_checker.py:403 - 找到价格元素: $249 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$249&nbsp;NZD</span></span>)
2024-11-15 14:13:25,294 [INFO] price_checker.py:420 - ✓ 成功设置总价: $249 NZD
2024-11-15 14:13:25,299 [INFO] price_checker.py:403 - 找到价格元素: $249 NZD (HTML: <span class="_j1kt73">$249&nbsp;NZD</span>)
2024-11-15 14:13:25,299 [INFO] price_checker.py:420 - ✓ 成功设置总价: $249 NZD
2024-11-15 14:13:25,303 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:13:25,303 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:13:25,303 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:13:25,304 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 14:13:25,304 [INFO] price_checker.py:450 - ✓ service_fee: $31 NZD
2024-11-15 14:13:25,304 [INFO] price_checker.py:450 - ✓ taxes: $28 NZD
2024-11-15 14:13:25,304 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:13:25,304 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:13:25,304 [INFO] price_checker.py:457 - check_in: 28/12/2024
2024-11-15 14:13:25,304 [INFO] price_checker.py:457 - check_out: 29/12/2024
2024-11-15 14:13:25,304 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:13:25,304 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:13:25,304 [INFO] price_checker.py:457 - nightly_price: $171 NZD
2024-11-15 14:13:25,304 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 14:13:25,304 [INFO] price_checker.py:457 - service_fee: $31 NZD
2024-11-15 14:13:25,304 [INFO] price_checker.py:457 - taxes: $28 NZD
2024-11-15 14:13:25,305 [INFO] price_checker.py:457 - total: 
2024-11-15 14:13:25,305 [INFO] price_checker.py:559 - ✓ 成功获取 28/12/2024 的价格信息
2024-11-15 14:13:25,305 [INFO] price_checker.py:553 - [39/72] 处理日期: 29/12/2024
2024-11-15 14:13:25,305 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 14:13:25,305 [INFO] price_checker.py:255 - 入住日期: 29/12/2024
2024-11-15 14:13:28,957 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:13:29,859 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:13:29,866 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:13:29,873 [INFO] price_checker.py:403 - 找到价格元素: $798 NZD (HTML: <span class="_j1kt73">$798&nbsp;NZD</span>)
2024-11-15 14:13:29,874 [INFO] price_checker.py:420 - ✓ 成功设置总价: $798 NZD
2024-11-15 14:13:29,874 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:13:29,880 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:13:29,885 [INFO] price_checker.py:403 - 找到价格元素: $798 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$798&nbsp;NZD</span></span>)
2024-11-15 14:13:29,885 [INFO] price_checker.py:420 - ✓ 成功设置总价: $798 NZD
2024-11-15 14:13:29,890 [INFO] price_checker.py:403 - 找到价格元素: $798 NZD (HTML: <span class="_j1kt73">$798&nbsp;NZD</span>)
2024-11-15 14:13:29,890 [INFO] price_checker.py:420 - ✓ 成功设置总价: $798 NZD
2024-11-15 14:13:29,895 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:13:29,895 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:13:29,895 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:13:29,895 [INFO] price_checker.py:450 - ✓ cleaning_fee: $90 NZD
2024-11-15 14:13:29,895 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 14:13:29,895 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 14:13:29,895 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:13:29,895 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:13:29,896 [INFO] price_checker.py:457 - check_in: 23/12/2024
2024-11-15 14:13:29,896 [INFO] price_checker.py:457 - check_out: 25/12/2024
2024-11-15 14:13:29,896 [INFO] price_checker.py:457 - min_nights: 2
2024-11-15 14:13:29,896 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:13:29,896 [INFO] price_checker.py:457 - nightly_price: $354 NZD
2024-11-15 14:13:29,896 [INFO] price_checker.py:457 - cleaning_fee: $90 NZD
2024-11-15 14:13:29,896 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 14:13:29,896 [INFO] price_checker.py:457 - taxes: None
2024-11-15 14:13:29,896 [INFO] price_checker.py:457 - total: 
2024-11-15 14:13:29,896 [INFO] price_checker.py:559 - ✓ 成功获取 23/12/2024 的价格信息
2024-11-15 14:13:29,896 [INFO] price_checker.py:565 - 根据最小入住要求(2晚)跳过接下来的 1 天
2024-11-15 14:13:29,896 [INFO] price_checker.py:553 - [29/39] 处理日期: 24/12/2024
2024-11-15 14:13:29,896 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/43435162
2024-11-15 14:13:29,896 [INFO] price_checker.py:255 - 入住日期: 24/12/2024
2024-11-15 14:13:30,426 [INFO] price_checker.py:271 - 开始检查日期 29/12/2024 的最小入住要求...
2024-11-15 14:13:30,428 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_1mv3p4vt" role="button" aria-disabled="false" aria-label="29, Sunday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-29/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">29</div></td>
2024-11-15 14:13:30,439 [INFO] price_checker.py:158 - 找到日期: 29/12/2024
2024-11-15 14:13:30,439 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:13:31,567 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:13:32,867 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_ubf03zg" role="button" aria-disabled="true" aria-label="29, Sunday, December 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1qis3zbj notranslate" data-testid="calendar-day-29/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">29</div></td>
2024-11-15 14:13:32,877 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 14:13:32,877 [INFO] price_checker.py:218 - - aria-label: 29, Sunday, December 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 14:13:32,877 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 14:13:32,877 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 14:13:32,878 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 14:13:32,878 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:13:32,878 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2024-12-29&check_out=2024-12-30&adults=3&children=0&infants=0
2024-11-15 14:13:35,019 [INFO] price_checker.py:271 - 开始检查日期 24/12/2024 的最小入住要求...
2024-11-15 14:13:35,022 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="24, Tuesday, December 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-24/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">24</div></td>
2024-11-15 14:13:35,033 [INFO] price_checker.py:158 - 找到日期: 24/12/2024
2024-11-15 14:13:35,033 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:13:36,172 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:13:37,472 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="24, Tuesday, December 2024. Selected check-in date There is a 2 night minimum stay requirement. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_h84ua7"><div class="_d82cel" style="transform: translateY(-100%) translateY(-12px);"><div class="_1mslrl4"><div class="_u7azij">2-night minimum</div><svg role="presentation" focusable="false" class="_8c7xtno" style="left: 9.5px;"><path class="_1s2t3cl" d="M0,0 20,0 10,10z"></path><path class="_c3dsty" d="M0,0 10,10 20,0"></path></svg></div></div><div class="_194zlzjz notranslate" data-testid="calendar-day-24/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">24</div></div></td>
2024-11-15 14:13:37,482 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 14:13:37,482 [INFO] price_checker.py:218 - - aria-label: 24, Tuesday, December 2024. Selected check-in date There is a 2 night minimum stay requirement. 
2024-11-15 14:13:37,482 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 14:13:37,482 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 14:13:37,482 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 2晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 14:13:37,482 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 2晚 (自动检测)
2024-11-15 14:13:37,482 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/43435162?check_in=2024-12-24&check_out=2024-12-26&adults=3&children=0&infants=0
2024-11-15 14:13:37,986 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:13:37,988 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:13:39,018 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:13:39,999 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:13:39,999 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:13:42,583 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:13:42,586 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:13:44,597 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:13:44,597 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:13:49,055 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:13:50,035 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:13:50,035 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:13:54,634 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:13:54,635 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:13:59,093 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:14:00,073 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:14:00,074 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:14:00,079 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:14:00,095 [INFO] price_checker.py:337 - 找到可见价格元素: $169 NZD 
night
$169 NZD per night
2024-11-15 14:14:00,101 [INFO] price_checker.py:350 - 找到每晚价格元素: $169 NZD 
night
$169 NZD per night
2024-11-15 14:14:00,101 [INFO] price_checker.py:356 - 成功解析折扣价格: $169 NZD
2024-11-15 14:14:00,101 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:14:04,679 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:14:04,679 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:14:04,684 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:14:04,699 [INFO] price_checker.py:337 - 找到可见价格元素: $403 NZD 
night
$403 NZD per night
2024-11-15 14:14:04,705 [INFO] price_checker.py:350 - 找到每晚价格元素: $403 NZD 
night
$403 NZD per night
2024-11-15 14:14:04,705 [INFO] price_checker.py:356 - 成功解析折扣价格: $403 NZD
2024-11-15 14:14:04,705 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:14:04,711 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 14:14:05,214 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:14:05,221 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:14:05,227 [INFO] price_checker.py:403 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-15 14:14:05,228 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $90 NZD
2024-11-15 14:14:05,228 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:14:05,234 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:14:05,239 [INFO] price_checker.py:403 - 找到价格元素: $90 NZD (HTML: <span class="_1k4xcdh">$90&nbsp;NZD</span>)
2024-11-15 14:14:05,239 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $90 NZD
2024-11-15 14:14:05,239 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:14:09,129 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:14:10,140 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 14:14:10,140 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:14:10,146 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:14:10,153 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:14:10,153 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:14:10,153 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:14:10,160 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:14:10,164 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:14:10,165 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:14:10,165 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:14:10,171 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:14:10,176 [INFO] price_checker.py:403 - 找到价格元素: $31 NZD (HTML: <span class="_1k4xcdh">$31&nbsp;NZD</span>)
2024-11-15 14:14:10,176 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $31 NZD
2024-11-15 14:14:10,176 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:14:10,182 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:14:10,187 [INFO] price_checker.py:403 - 找到价格元素: $31 NZD (HTML: <span class="_1k4xcdh">$31&nbsp;NZD</span>)
2024-11-15 14:14:10,187 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $31 NZD
2024-11-15 14:14:10,187 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:14:10,194 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:14:10,199 [INFO] price_checker.py:403 - 找到价格元素: $28 NZD (HTML: <span class="_1k4xcdh">$28&nbsp;NZD</span>)
2024-11-15 14:14:10,199 [INFO] price_checker.py:416 - ✓ 成功设置税费: $28 NZD
2024-11-15 14:14:10,199 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:14:15,260 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:14:20,237 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:14:20,244 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:14:20,250 [INFO] price_checker.py:403 - 找到价格元素: $247 NZD (HTML: <span class="_j1kt73">$247&nbsp;NZD</span>)
2024-11-15 14:14:20,251 [INFO] price_checker.py:420 - ✓ 成功设置总价: $247 NZD
2024-11-15 14:14:20,251 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:14:20,258 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:14:20,263 [INFO] price_checker.py:403 - 找到价格元素: $247 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$247&nbsp;NZD</span></span>)
2024-11-15 14:14:20,263 [INFO] price_checker.py:420 - ✓ 成功设置总价: $247 NZD
2024-11-15 14:14:20,267 [INFO] price_checker.py:403 - 找到价格元素: $247 NZD (HTML: <span class="_j1kt73">$247&nbsp;NZD</span>)
2024-11-15 14:14:20,268 [INFO] price_checker.py:420 - ✓ 成功设置总价: $247 NZD
2024-11-15 14:14:20,272 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:14:20,272 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:14:20,272 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:14:20,272 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 14:14:20,272 [INFO] price_checker.py:450 - ✓ service_fee: $31 NZD
2024-11-15 14:14:20,273 [INFO] price_checker.py:450 - ✓ taxes: $28 NZD
2024-11-15 14:14:20,273 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:14:20,273 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:14:20,273 [INFO] price_checker.py:457 - check_in: 29/12/2024
2024-11-15 14:14:20,273 [INFO] price_checker.py:457 - check_out: 30/12/2024
2024-11-15 14:14:20,273 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:14:20,273 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:14:20,273 [INFO] price_checker.py:457 - nightly_price: $169 NZD
2024-11-15 14:14:20,273 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 14:14:20,273 [INFO] price_checker.py:457 - service_fee: $31 NZD
2024-11-15 14:14:20,273 [INFO] price_checker.py:457 - taxes: $28 NZD
2024-11-15 14:14:20,273 [INFO] price_checker.py:457 - total: 
2024-11-15 14:14:20,273 [INFO] price_checker.py:559 - ✓ 成功获取 29/12/2024 的价格信息
2024-11-15 14:14:20,274 [INFO] price_checker.py:553 - [40/72] 处理日期: 30/12/2024
2024-11-15 14:14:20,274 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 14:14:20,274 [INFO] price_checker.py:255 - 入住日期: 30/12/2024
2024-11-15 14:14:25,283 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:14:25,399 [INFO] price_checker.py:271 - 开始检查日期 30/12/2024 的最小入住要求...
2024-11-15 14:14:25,401 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_sl5yz7r" role="button" aria-disabled="false" aria-label="30, Monday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-30/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">30</div></td>
2024-11-15 14:14:25,412 [INFO] price_checker.py:158 - 找到日期: 30/12/2024
2024-11-15 14:14:25,412 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:14:26,545 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:14:27,837 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_5v1jabe" role="button" aria-disabled="true" aria-label="30, Monday, December 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1qis3zbj notranslate" data-testid="calendar-day-30/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">30</div></td>
2024-11-15 14:14:27,845 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 14:14:27,845 [INFO] price_checker.py:218 - - aria-label: 30, Monday, December 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 14:14:27,845 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 14:14:27,845 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 14:14:27,845 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 14:14:27,845 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:14:27,845 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2024-12-30&check_out=2024-12-31&adults=3&children=0&infants=0
2024-11-15 14:14:29,179 [WARNING] price_checker.py:443 - 尝试点击价格展开按钮失败: Message: no such element: Unable to locate element: {"method":"xpath","selector":"//button[contains(@class, '_12wl7g09')]"}
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00952BFE]
	(No symbol) [0x00952CDB]
	(No symbol) [0x0098EBD2]
	(No symbol) [0x00973954]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:14:29,179 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:14:29,179 [WARNING] price_checker.py:452 - ✗ cleaning_fee 未获取到
2024-11-15 14:14:29,179 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 14:14:29,179 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 14:14:29,179 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:14:29,179 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:14:29,179 [INFO] price_checker.py:457 - check_in: 12/01/2025
2024-11-15 14:14:29,179 [INFO] price_checker.py:457 - check_out: 13/01/2025
2024-11-15 14:14:29,180 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:14:29,180 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:14:29,180 [INFO] price_checker.py:457 - nightly_price: None
2024-11-15 14:14:29,180 [INFO] price_checker.py:457 - cleaning_fee: None
2024-11-15 14:14:29,180 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 14:14:29,180 [INFO] price_checker.py:457 - taxes: None
2024-11-15 14:14:29,180 [INFO] price_checker.py:457 - total: None
2024-11-15 14:14:29,180 [INFO] price_checker.py:559 - ✓ 成功获取 12/01/2025 的价格信息
2024-11-15 14:14:29,180 [INFO] price_checker.py:553 - [29/37] 处理日期: 13/01/2025
2024-11-15 14:14:29,180 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-15 14:14:29,180 [INFO] price_checker.py:255 - 入住日期: 13/01/2025
2024-11-15 14:14:32,934 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:14:32,937 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:14:34,299 [INFO] price_checker.py:271 - 开始检查日期 13/01/2025 的最小入住要求...
2024-11-15 14:14:34,303 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_sl5yz7r" role="button" aria-disabled="false" aria-label="13, Monday, January 2025. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-13/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">13</div></td>
2024-11-15 14:14:34,312 [INFO] price_checker.py:158 - 找到日期: 13/01/2025
2024-11-15 14:14:34,312 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:14:34,948 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:14:34,948 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:14:35,297 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:14:44,341 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:14:44,979 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:14:44,979 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:14:45,321 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:14:45,330 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:14:45,339 [INFO] price_checker.py:403 - 找到价格元素: $896 NZD (HTML: <span class="_j1kt73">$896&nbsp;NZD</span>)
2024-11-15 14:14:45,339 [INFO] price_checker.py:420 - ✓ 成功设置总价: $896 NZD
2024-11-15 14:14:45,339 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:14:45,347 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:14:45,352 [INFO] price_checker.py:403 - 找到价格元素: $896 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$896&nbsp;NZD</span></span>)
2024-11-15 14:14:45,352 [INFO] price_checker.py:420 - ✓ 成功设置总价: $896 NZD
2024-11-15 14:14:45,357 [INFO] price_checker.py:403 - 找到价格元素: $896 NZD (HTML: <span class="_j1kt73">$896&nbsp;NZD</span>)
2024-11-15 14:14:45,358 [INFO] price_checker.py:420 - ✓ 成功设置总价: $896 NZD
2024-11-15 14:14:45,362 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:14:45,362 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:14:45,362 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:14:45,363 [INFO] price_checker.py:450 - ✓ cleaning_fee: $90 NZD
2024-11-15 14:14:45,363 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 14:14:45,363 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 14:14:45,363 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:14:45,363 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:14:45,363 [INFO] price_checker.py:457 - check_in: 24/12/2024
2024-11-15 14:14:45,363 [INFO] price_checker.py:457 - check_out: 26/12/2024
2024-11-15 14:14:45,363 [INFO] price_checker.py:457 - min_nights: 2
2024-11-15 14:14:45,363 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:14:45,363 [INFO] price_checker.py:457 - nightly_price: $403 NZD
2024-11-15 14:14:45,363 [INFO] price_checker.py:457 - cleaning_fee: $90 NZD
2024-11-15 14:14:45,363 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 14:14:45,364 [INFO] price_checker.py:457 - taxes: None
2024-11-15 14:14:45,364 [INFO] price_checker.py:457 - total: 
2024-11-15 14:14:45,364 [INFO] price_checker.py:559 - ✓ 成功获取 24/12/2024 的价格信息
2024-11-15 14:14:45,364 [INFO] price_checker.py:565 - 根据最小入住要求(2晚)跳过接下来的 1 天
2024-11-15 14:14:45,364 [INFO] price_checker.py:573 - 已完成 30/39 个日期的处理
2024-11-15 14:14:45,445 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:14:45,449 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:14:45,450 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 14:14:45,451 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:14:45,451 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:14:45,451 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:14:45,451 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/837352260137971048?check_in=2025-01-13&check_out=2025-01-14&adults=3&children=0&infants=0
2024-11-15 14:14:50,571 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:14:50,574 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:14:52,585 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:14:52,585 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:14:55,001 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:14:55,001 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:14:55,007 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:14:55,022 [INFO] price_checker.py:337 - 找到可见价格元素: $170 NZD 
night
$170 NZD per night
2024-11-15 14:14:55,028 [INFO] price_checker.py:350 - 找到每晚价格元素: $170 NZD 
night
$170 NZD per night
2024-11-15 14:14:55,028 [INFO] price_checker.py:356 - 成功解析折扣价格: $170 NZD
2024-11-15 14:14:55,028 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:14:55,364 [INFO] price_checker.py:553 - [30/39] 处理日期: 18/01/2025
2024-11-15 14:14:55,365 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/43435162
2024-11-15 14:14:55,365 [INFO] price_checker.py:255 - 入住日期: 18/01/2025
2024-11-15 14:15:00,493 [INFO] price_checker.py:271 - 开始检查日期 18/01/2025 的最小入住要求...
2024-11-15 14:15:00,496 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="18, Saturday, January 2025. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-18/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">18</div></td>
2024-11-15 14:15:00,505 [INFO] price_checker.py:158 - 找到日期: 18/01/2025
2024-11-15 14:15:00,505 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:15:02,609 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:15:02,609 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:15:05,058 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 14:15:05,058 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:15:05,065 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:15:05,071 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:15:05,071 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:15:05,071 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:15:05,077 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:15:05,082 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:15:05,082 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:15:05,082 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:15:05,089 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:15:05,094 [INFO] price_checker.py:403 - 找到价格元素: $31 NZD (HTML: <span class="_1k4xcdh">$31&nbsp;NZD</span>)
2024-11-15 14:15:05,094 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $31 NZD
2024-11-15 14:15:05,094 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:15:05,101 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:15:05,105 [INFO] price_checker.py:403 - 找到价格元素: $31 NZD (HTML: <span class="_1k4xcdh">$31&nbsp;NZD</span>)
2024-11-15 14:15:05,106 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $31 NZD
2024-11-15 14:15:05,106 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:15:05,112 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:15:05,116 [INFO] price_checker.py:403 - 找到价格元素: $28 NZD (HTML: <span class="_1k4xcdh">$28&nbsp;NZD</span>)
2024-11-15 14:15:05,116 [INFO] price_checker.py:416 - ✓ 成功设置税费: $28 NZD
2024-11-15 14:15:05,117 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:15:10,549 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:15:11,651 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:15:11,656 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:15:11,656 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 14:15:11,658 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:15:11,658 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:15:11,658 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:15:11,658 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/43435162?check_in=2025-01-18&check_out=2025-01-19&adults=3&children=0&infants=0
2024-11-15 14:15:12,654 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:15:12,654 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:15:15,157 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:15:15,164 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:15:15,169 [INFO] price_checker.py:403 - 找到价格元素: $248 NZD (HTML: <span class="_j1kt73">$248&nbsp;NZD</span>)
2024-11-15 14:15:15,169 [INFO] price_checker.py:420 - ✓ 成功设置总价: $248 NZD
2024-11-15 14:15:15,169 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:15:15,176 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:15:15,180 [INFO] price_checker.py:403 - 找到价格元素: $248 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$248&nbsp;NZD</span></span>)
2024-11-15 14:15:15,181 [INFO] price_checker.py:420 - ✓ 成功设置总价: $248 NZD
2024-11-15 14:15:15,185 [INFO] price_checker.py:403 - 找到价格元素: $248 NZD (HTML: <span class="_j1kt73">$248&nbsp;NZD</span>)
2024-11-15 14:15:15,185 [INFO] price_checker.py:420 - ✓ 成功设置总价: $248 NZD
2024-11-15 14:15:15,190 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:15:15,190 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:15:15,190 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:15:15,190 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 14:15:15,191 [INFO] price_checker.py:450 - ✓ service_fee: $31 NZD
2024-11-15 14:15:15,191 [INFO] price_checker.py:450 - ✓ taxes: $28 NZD
2024-11-15 14:15:15,191 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:15:15,191 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:15:15,191 [INFO] price_checker.py:457 - check_in: 30/12/2024
2024-11-15 14:15:15,191 [INFO] price_checker.py:457 - check_out: 31/12/2024
2024-11-15 14:15:15,191 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:15:15,191 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:15:15,191 [INFO] price_checker.py:457 - nightly_price: $170 NZD
2024-11-15 14:15:15,191 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 14:15:15,191 [INFO] price_checker.py:457 - service_fee: $31 NZD
2024-11-15 14:15:15,191 [INFO] price_checker.py:457 - taxes: $28 NZD
2024-11-15 14:15:15,191 [INFO] price_checker.py:457 - total: 
2024-11-15 14:15:15,192 [INFO] price_checker.py:559 - ✓ 成功获取 30/12/2024 的价格信息
2024-11-15 14:15:15,192 [INFO] price_checker.py:573 - 已完成 40/72 个日期的处理
2024-11-15 14:15:16,782 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:15:16,785 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:15:18,796 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:15:18,796 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:15:22,698 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:15:22,699 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w ._11jcbg2
2024-11-15 14:15:25,192 [INFO] price_checker.py:553 - [41/72] 处理日期: 31/12/2024
2024-11-15 14:15:25,192 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 14:15:25,192 [INFO] price_checker.py:255 - 入住日期: 31/12/2024
2024-11-15 14:15:28,827 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:15:28,827 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:15:30,316 [INFO] price_checker.py:271 - 开始检查日期 31/12/2024 的最小入住要求...
2024-11-15 14:15:30,319 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_1qvi71ld" role="button" aria-disabled="false" aria-label="31, Tuesday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-31/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">31</div></td>
2024-11-15 14:15:30,328 [INFO] price_checker.py:158 - 找到日期: 31/12/2024
2024-11-15 14:15:30,328 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:15:31,454 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:15:32,716 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:15:32,716 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[contains(@class, '_wgmchy')]//span[contains(text(), '$') and contains(text(), 'NZD')]
2024-11-15 14:15:32,749 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1jaqd3t0" role="button" aria-disabled="true" aria-label="31, Tuesday, December 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1qis3zbj notranslate" data-testid="calendar-day-31/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">31</div></td>
2024-11-15 14:15:32,757 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 14:15:32,757 [INFO] price_checker.py:218 - - aria-label: 31, Tuesday, December 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 14:15:32,757 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 14:15:32,757 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 14:15:32,757 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 14:15:32,757 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:15:32,758 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2024-12-31&check_out=2025-01-01&adults=3&children=0&infants=0
2024-11-15 14:15:37,845 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:15:37,848 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:15:38,846 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:15:38,846 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:15:39,864 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:15:39,865 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:15:42,739 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:15:42,739 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:15:48,872 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:15:48,872 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w ._11jcbg2
2024-11-15 14:15:49,901 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:15:49,902 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:15:52,771 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 14:15:52,771 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:15:58,904 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:15:58,904 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[contains(@class, '_wgmchy')]//span[contains(text(), '$') and contains(text(), 'NZD')]
2024-11-15 14:15:59,932 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:15:59,933 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:15:59,938 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:15:59,954 [INFO] price_checker.py:337 - 找到可见价格元素: $159 NZD 
night
$159 NZD per night
2024-11-15 14:15:59,959 [INFO] price_checker.py:350 - 找到每晚价格元素: $159 NZD 
night
$159 NZD per night
2024-11-15 14:15:59,959 [INFO] price_checker.py:356 - 成功解析折扣价格: $159 NZD
2024-11-15 14:15:59,959 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:16:02,804 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:16:08,935 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:16:08,935 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:16:09,963 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 14:16:09,963 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:16:09,970 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:16:09,976 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:16:09,976 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:16:09,976 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:16:09,983 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:16:09,988 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:16:09,988 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:16:09,988 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:16:09,995 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:16:10,001 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 14:16:10,001 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 14:16:10,001 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:16:10,007 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:16:10,012 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 14:16:10,012 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 14:16:10,012 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:16:10,018 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:16:10,023 [INFO] price_checker.py:403 - 找到价格元素: $27 NZD (HTML: <span class="_1k4xcdh">$27&nbsp;NZD</span>)
2024-11-15 14:16:10,023 [INFO] price_checker.py:416 - ✓ 成功设置税费: $27 NZD
2024-11-15 14:16:10,023 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:16:12,835 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:16:18,982 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 14:16:18,982 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:16:20,075 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:16:20,082 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:16:20,088 [INFO] price_checker.py:403 - 找到价格元素: $236 NZD (HTML: <span class="_j1kt73">$236&nbsp;NZD</span>)
2024-11-15 14:16:20,088 [INFO] price_checker.py:420 - ✓ 成功设置总价: $236 NZD
2024-11-15 14:16:20,088 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:16:20,094 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:16:20,099 [INFO] price_checker.py:403 - 找到价格元素: $236 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$236&nbsp;NZD</span></span>)
2024-11-15 14:16:20,099 [INFO] price_checker.py:420 - ✓ 成功设置总价: $236 NZD
2024-11-15 14:16:20,104 [INFO] price_checker.py:403 - 找到价格元素: $236 NZD (HTML: <span class="_j1kt73">$236&nbsp;NZD</span>)
2024-11-15 14:16:20,104 [INFO] price_checker.py:420 - ✓ 成功设置总价: $236 NZD
2024-11-15 14:16:20,109 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:16:20,110 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:16:20,110 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:16:20,110 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 14:16:20,110 [INFO] price_checker.py:450 - ✓ service_fee: $29 NZD
2024-11-15 14:16:20,110 [INFO] price_checker.py:450 - ✓ taxes: $27 NZD
2024-11-15 14:16:20,110 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:16:20,110 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:16:20,110 [INFO] price_checker.py:457 - check_in: 31/12/2024
2024-11-15 14:16:20,110 [INFO] price_checker.py:457 - check_out: 01/01/2025
2024-11-15 14:16:20,110 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:16:20,110 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:16:20,110 [INFO] price_checker.py:457 - nightly_price: $159 NZD
2024-11-15 14:16:20,110 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 14:16:20,111 [INFO] price_checker.py:457 - service_fee: $29 NZD
2024-11-15 14:16:20,111 [INFO] price_checker.py:457 - taxes: $27 NZD
2024-11-15 14:16:20,111 [INFO] price_checker.py:457 - total: 
2024-11-15 14:16:20,111 [INFO] price_checker.py:559 - ✓ 成功获取 31/12/2024 的价格信息
2024-11-15 14:16:20,111 [INFO] price_checker.py:553 - [42/72] 处理日期: 01/01/2025
2024-11-15 14:16:20,111 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 14:16:20,111 [INFO] price_checker.py:255 - 入住日期: 01/01/2025
2024-11-15 14:16:22,877 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:16:25,233 [INFO] price_checker.py:271 - 开始检查日期 01/01/2025 的最小入住要求...
2024-11-15 14:16:25,236 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_1qvi71ld" role="button" aria-disabled="false" aria-label="1, Wednesday, January 2025. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-01/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">1</div></td>
2024-11-15 14:16:25,246 [INFO] price_checker.py:158 - 找到日期: 01/01/2025
2024-11-15 14:16:25,246 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:16:29,018 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:16:32,914 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:16:35,303 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:16:36,442 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:16:36,448 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:16:36,448 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 14:16:36,449 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:16:36,449 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:16:36,450 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:16:36,450 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2025-01-01&check_out=2025-01-02&adults=3&children=0&infants=0
2024-11-15 14:16:39,061 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:16:41,541 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:16:41,543 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:16:42,953 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:16:43,555 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:16:43,555 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:16:49,112 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:16:52,989 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:16:53,596 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:16:53,596 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:16:59,144 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:17:03,035 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:17:03,646 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:17:03,646 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:17:03,652 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:17:03,671 [INFO] price_checker.py:337 - 找到可见价格元素: $171 NZD 
night
$171 NZD per night
2024-11-15 14:17:03,678 [INFO] price_checker.py:350 - 找到每晚价格元素: $171 NZD 
night
$171 NZD per night
2024-11-15 14:17:03,678 [INFO] price_checker.py:356 - 成功解析折扣价格: $171 NZD
2024-11-15 14:17:03,678 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:17:09,192 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:17:13,712 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 14:17:13,712 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:17:13,720 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:17:13,727 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:17:13,727 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:17:13,727 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:17:13,734 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:17:13,739 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:17:13,739 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:17:13,739 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:17:13,747 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:17:13,753 [INFO] price_checker.py:403 - 找到价格元素: $31 NZD (HTML: <span class="_1k4xcdh">$31&nbsp;NZD</span>)
2024-11-15 14:17:13,753 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $31 NZD
2024-11-15 14:17:13,753 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:17:13,760 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:17:13,766 [INFO] price_checker.py:403 - 找到价格元素: $31 NZD (HTML: <span class="_1k4xcdh">$31&nbsp;NZD</span>)
2024-11-15 14:17:13,767 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $31 NZD
2024-11-15 14:17:13,767 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:17:13,774 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:17:13,779 [INFO] price_checker.py:403 - 找到价格元素: $28 NZD (HTML: <span class="_1k4xcdh">$28&nbsp;NZD</span>)
2024-11-15 14:17:13,779 [INFO] price_checker.py:416 - ✓ 成功设置税费: $28 NZD
2024-11-15 14:17:13,779 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:17:19,235 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:17:23,118 [WARNING] price_checker.py:443 - 尝试点击价格展开按钮失败: Message: no such element: Unable to locate element: {"method":"xpath","selector":"//button[contains(@class, '_12wl7g09')]"}
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00952BFE]
	(No symbol) [0x00952CDB]
	(No symbol) [0x0098EBD2]
	(No symbol) [0x00973954]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:17:23,119 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:17:23,119 [WARNING] price_checker.py:452 - ✗ cleaning_fee 未获取到
2024-11-15 14:17:23,119 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 14:17:23,119 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 14:17:23,119 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:17:23,119 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:17:23,119 [INFO] price_checker.py:457 - check_in: 13/01/2025
2024-11-15 14:17:23,119 [INFO] price_checker.py:457 - check_out: 14/01/2025
2024-11-15 14:17:23,119 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:17:23,119 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:17:23,119 [INFO] price_checker.py:457 - nightly_price: None
2024-11-15 14:17:23,119 [INFO] price_checker.py:457 - cleaning_fee: None
2024-11-15 14:17:23,119 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 14:17:23,120 [INFO] price_checker.py:457 - taxes: None
2024-11-15 14:17:23,120 [INFO] price_checker.py:457 - total: None
2024-11-15 14:17:23,120 [INFO] price_checker.py:559 - ✓ 成功获取 13/01/2025 的价格信息
2024-11-15 14:17:23,120 [INFO] price_checker.py:553 - [30/37] 处理日期: 14/01/2025
2024-11-15 14:17:23,120 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-15 14:17:23,120 [INFO] price_checker.py:255 - 入住日期: 14/01/2025
2024-11-15 14:17:23,836 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:17:23,843 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:17:23,848 [INFO] price_checker.py:403 - 找到价格元素: $249 NZD (HTML: <span class="_j1kt73">$249&nbsp;NZD</span>)
2024-11-15 14:17:23,848 [INFO] price_checker.py:420 - ✓ 成功设置总价: $249 NZD
2024-11-15 14:17:23,848 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:17:23,855 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:17:23,860 [INFO] price_checker.py:403 - 找到价格元素: $249 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$249&nbsp;NZD</span></span>)
2024-11-15 14:17:23,860 [INFO] price_checker.py:420 - ✓ 成功设置总价: $249 NZD
2024-11-15 14:17:23,865 [INFO] price_checker.py:403 - 找到价格元素: $249 NZD (HTML: <span class="_j1kt73">$249&nbsp;NZD</span>)
2024-11-15 14:17:23,865 [INFO] price_checker.py:420 - ✓ 成功设置总价: $249 NZD
2024-11-15 14:17:23,869 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:17:23,869 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:17:23,869 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:17:23,870 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 14:17:23,870 [INFO] price_checker.py:450 - ✓ service_fee: $31 NZD
2024-11-15 14:17:23,870 [INFO] price_checker.py:450 - ✓ taxes: $28 NZD
2024-11-15 14:17:23,870 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:17:23,870 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:17:23,870 [INFO] price_checker.py:457 - check_in: 01/01/2025
2024-11-15 14:17:23,870 [INFO] price_checker.py:457 - check_out: 02/01/2025
2024-11-15 14:17:23,870 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:17:23,870 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:17:23,870 [INFO] price_checker.py:457 - nightly_price: $171 NZD
2024-11-15 14:17:23,870 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 14:17:23,870 [INFO] price_checker.py:457 - service_fee: $31 NZD
2024-11-15 14:17:23,870 [INFO] price_checker.py:457 - taxes: $28 NZD
2024-11-15 14:17:23,871 [INFO] price_checker.py:457 - total: 
2024-11-15 14:17:23,871 [INFO] price_checker.py:559 - ✓ 成功获取 01/01/2025 的价格信息
2024-11-15 14:17:23,871 [INFO] price_checker.py:553 - [43/72] 处理日期: 02/01/2025
2024-11-15 14:17:23,871 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 14:17:23,871 [INFO] price_checker.py:255 - 入住日期: 02/01/2025
2024-11-15 14:17:28,239 [INFO] price_checker.py:271 - 开始检查日期 14/01/2025 的最小入住要求...
2024-11-15 14:17:28,243 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="14, Tuesday, January 2025. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-14/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">14</div></td>
2024-11-15 14:17:28,253 [INFO] price_checker.py:158 - 找到日期: 14/01/2025
2024-11-15 14:17:28,253 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:17:28,990 [INFO] price_checker.py:271 - 开始检查日期 02/01/2025 的最小入住要求...
2024-11-15 14:17:28,993 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="2, Thursday, January 2025. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-02/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">2</div></td>
2024-11-15 14:17:29,003 [INFO] price_checker.py:158 - 找到日期: 02/01/2025
2024-11-15 14:17:29,003 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:17:29,256 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:17:38,289 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:17:39,041 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:17:39,400 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:17:39,405 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:17:39,405 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 14:17:39,407 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:17:39,407 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:17:39,407 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:17:39,407 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/837352260137971048?check_in=2025-01-14&check_out=2025-01-15&adults=3&children=0&infants=0
2024-11-15 14:17:40,157 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:17:40,162 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:17:40,163 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 14:17:40,164 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:17:40,164 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:17:40,164 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:17:40,164 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2025-01-02&check_out=2025-01-03&adults=3&children=0&infants=0
2024-11-15 14:17:44,495 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:17:44,499 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:17:45,273 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:17:45,276 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:17:46,509 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:17:46,509 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:17:47,288 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:17:47,289 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:17:49,315 [WARNING] price_checker.py:443 - 尝试点击价格展开按钮失败: Message: no such element: Unable to locate element: {"method":"xpath","selector":"//button[contains(@class, '_12wl7g09')]"}
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00952BFE]
	(No symbol) [0x00952CDB]
	(No symbol) [0x0098EBD2]
	(No symbol) [0x00973954]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:17:49,316 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:17:49,316 [WARNING] price_checker.py:452 - ✗ cleaning_fee 未获取到
2024-11-15 14:17:49,316 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 14:17:49,316 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 14:17:49,316 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:17:49,316 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:17:49,316 [INFO] price_checker.py:457 - check_in: 18/01/2025
2024-11-15 14:17:49,316 [INFO] price_checker.py:457 - check_out: 19/01/2025
2024-11-15 14:17:49,316 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:17:49,316 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:17:49,316 [INFO] price_checker.py:457 - nightly_price: None
2024-11-15 14:17:49,317 [INFO] price_checker.py:457 - cleaning_fee: None
2024-11-15 14:17:49,317 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 14:17:49,317 [INFO] price_checker.py:457 - taxes: None
2024-11-15 14:17:49,317 [INFO] price_checker.py:457 - total: None
2024-11-15 14:17:49,317 [INFO] price_checker.py:559 - ✓ 成功获取 18/01/2025 的价格信息
2024-11-15 14:17:49,317 [INFO] price_checker.py:573 - 已完成 30/39 个日期的处理
2024-11-15 14:17:56,571 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:17:56,571 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:17:57,349 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:17:57,349 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:17:59,317 [INFO] price_checker.py:553 - [31/39] 处理日期: 19/01/2025
2024-11-15 14:17:59,317 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/43435162
2024-11-15 14:17:59,317 [INFO] price_checker.py:255 - 入住日期: 19/01/2025
2024-11-15 14:18:04,441 [INFO] price_checker.py:271 - 开始检查日期 19/01/2025 的最小入住要求...
2024-11-15 14:18:04,444 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_1mv3p4vt" role="button" aria-disabled="false" aria-label="19, Sunday, January 2025. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-19/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">19</div></td>
2024-11-15 14:18:04,468 [INFO] price_checker.py:158 - 找到日期: 19/01/2025
2024-11-15 14:18:04,469 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:18:06,596 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:18:06,596 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:18:07,376 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:18:07,376 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:18:07,382 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:18:07,407 [INFO] price_checker.py:337 - 找到可见价格元素: $170 NZD 
night
$170 NZD per night
2024-11-15 14:18:07,416 [INFO] price_checker.py:350 - 找到每晚价格元素: $170 NZD 
night
$170 NZD per night
2024-11-15 14:18:07,416 [INFO] price_checker.py:356 - 成功解析折扣价格: $170 NZD
2024-11-15 14:18:07,416 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:18:14,515 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:18:15,621 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:18:15,626 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:18:15,626 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 14:18:15,627 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:18:15,628 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:18:15,628 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:18:15,628 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/43435162?check_in=2025-01-19&check_out=2025-01-20&adults=3&children=0&infants=0
2024-11-15 14:18:16,633 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:18:16,633 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w ._11jcbg2
2024-11-15 14:18:17,456 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 14:18:17,456 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:18:17,464 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:18:17,471 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:18:17,471 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:18:17,471 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:18:17,478 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:18:17,484 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:18:17,484 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:18:17,484 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:18:17,491 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:18:17,497 [INFO] price_checker.py:403 - 找到价格元素: $31 NZD (HTML: <span class="_1k4xcdh">$31&nbsp;NZD</span>)
2024-11-15 14:18:17,497 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $31 NZD
2024-11-15 14:18:17,497 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:18:17,504 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:18:17,509 [INFO] price_checker.py:403 - 找到价格元素: $31 NZD (HTML: <span class="_1k4xcdh">$31&nbsp;NZD</span>)
2024-11-15 14:18:17,510 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $31 NZD
2024-11-15 14:18:17,510 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:18:17,518 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:18:17,525 [INFO] price_checker.py:403 - 找到价格元素: $28 NZD (HTML: <span class="_1k4xcdh">$28&nbsp;NZD</span>)
2024-11-15 14:18:17,525 [INFO] price_checker.py:416 - ✓ 成功设置税费: $28 NZD
2024-11-15 14:18:17,525 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:18:20,718 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:18:20,721 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:18:22,731 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:18:22,731 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:18:26,660 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:18:26,660 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[contains(@class, '_wgmchy')]//span[contains(text(), '$') and contains(text(), 'NZD')]
2024-11-15 14:18:27,565 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:18:27,571 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:18:27,576 [INFO] price_checker.py:403 - 找到价格元素: $248 NZD (HTML: <span class="_j1kt73">$248&nbsp;NZD</span>)
2024-11-15 14:18:27,576 [INFO] price_checker.py:420 - ✓ 成功设置总价: $248 NZD
2024-11-15 14:18:27,576 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:18:27,583 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:18:27,587 [INFO] price_checker.py:403 - 找到价格元素: $248 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$248&nbsp;NZD</span></span>)
2024-11-15 14:18:27,587 [INFO] price_checker.py:420 - ✓ 成功设置总价: $248 NZD
2024-11-15 14:18:27,591 [INFO] price_checker.py:403 - 找到价格元素: $248 NZD (HTML: <span class="_j1kt73">$248&nbsp;NZD</span>)
2024-11-15 14:18:27,591 [INFO] price_checker.py:420 - ✓ 成功设置总价: $248 NZD
2024-11-15 14:18:27,597 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:18:27,597 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:18:27,597 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:18:27,597 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 14:18:27,597 [INFO] price_checker.py:450 - ✓ service_fee: $31 NZD
2024-11-15 14:18:27,597 [INFO] price_checker.py:450 - ✓ taxes: $28 NZD
2024-11-15 14:18:27,597 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:18:27,598 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:18:27,598 [INFO] price_checker.py:457 - check_in: 02/01/2025
2024-11-15 14:18:27,598 [INFO] price_checker.py:457 - check_out: 03/01/2025
2024-11-15 14:18:27,598 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:18:27,598 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:18:27,598 [INFO] price_checker.py:457 - nightly_price: $170 NZD
2024-11-15 14:18:27,598 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 14:18:27,598 [INFO] price_checker.py:457 - service_fee: $31 NZD
2024-11-15 14:18:27,598 [INFO] price_checker.py:457 - taxes: $28 NZD
2024-11-15 14:18:27,598 [INFO] price_checker.py:457 - total: 
2024-11-15 14:18:27,598 [INFO] price_checker.py:559 - ✓ 成功获取 02/01/2025 的价格信息
2024-11-15 14:18:27,598 [INFO] price_checker.py:553 - [44/72] 处理日期: 03/01/2025
2024-11-15 14:18:27,598 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 14:18:27,599 [INFO] price_checker.py:255 - 入住日期: 03/01/2025
2024-11-15 14:18:32,718 [INFO] price_checker.py:271 - 开始检查日期 03/01/2025 的最小入住要求...
2024-11-15 14:18:32,721 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="3, Friday, January 2025. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-03/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">3</div></td>
2024-11-15 14:18:32,730 [INFO] price_checker.py:158 - 找到日期: 03/01/2025
2024-11-15 14:18:32,730 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:18:32,750 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:18:32,750 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:18:36,682 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:18:36,682 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:18:42,771 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:18:42,787 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:18:42,787 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:18:43,904 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:18:43,909 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:18:43,909 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 14:18:43,911 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:18:43,911 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:18:43,911 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:18:43,911 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2025-01-03&check_out=2025-01-04&adults=3&children=0&infants=0
2024-11-15 14:18:46,709 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 14:18:46,709 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:18:49,001 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:18:49,004 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:18:51,015 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:18:51,015 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:18:52,821 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:18:52,821 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w ._11jcbg2
2024-11-15 14:18:56,735 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:19:01,058 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:19:01,058 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:19:02,867 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:19:02,867 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[contains(@class, '_wgmchy')]//span[contains(text(), '$') and contains(text(), 'NZD')]
2024-11-15 14:19:06,779 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:19:11,101 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:19:11,101 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:19:11,107 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:19:11,121 [INFO] price_checker.py:337 - 找到可见价格元素: $174 NZD 
night
$174 NZD per night
2024-11-15 14:19:11,127 [INFO] price_checker.py:350 - 找到每晚价格元素: $174 NZD 
night
$174 NZD per night
2024-11-15 14:19:11,127 [INFO] price_checker.py:356 - 成功解析折扣价格: $174 NZD
2024-11-15 14:19:11,127 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:19:12,911 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:19:12,911 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:19:16,821 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:19:21,173 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 14:19:21,173 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:19:21,179 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:19:21,185 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:19:21,185 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:19:21,186 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:19:21,192 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:19:21,197 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:19:21,197 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:19:21,197 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:19:21,204 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:19:21,208 [INFO] price_checker.py:403 - 找到价格元素: $31 NZD (HTML: <span class="_1k4xcdh">$31&nbsp;NZD</span>)
2024-11-15 14:19:21,209 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $31 NZD
2024-11-15 14:19:21,209 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:19:21,215 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:19:21,220 [INFO] price_checker.py:403 - 找到价格元素: $31 NZD (HTML: <span class="_1k4xcdh">$31&nbsp;NZD</span>)
2024-11-15 14:19:21,220 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $31 NZD
2024-11-15 14:19:21,220 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:19:21,226 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:19:21,231 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 14:19:21,231 [INFO] price_checker.py:416 - ✓ 成功设置税费: $29 NZD
2024-11-15 14:19:21,231 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:19:22,949 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 14:19:22,949 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:19:26,862 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:19:31,282 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:19:31,289 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:19:31,294 [INFO] price_checker.py:403 - 找到价格元素: $253 NZD (HTML: <span class="_j1kt73">$253&nbsp;NZD</span>)
2024-11-15 14:19:31,294 [INFO] price_checker.py:420 - ✓ 成功设置总价: $253 NZD
2024-11-15 14:19:31,294 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:19:31,301 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:19:31,305 [INFO] price_checker.py:403 - 找到价格元素: $253 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$253&nbsp;NZD</span></span>)
2024-11-15 14:19:31,305 [INFO] price_checker.py:420 - ✓ 成功设置总价: $253 NZD
2024-11-15 14:19:31,310 [INFO] price_checker.py:403 - 找到价格元素: $253 NZD (HTML: <span class="_j1kt73">$253&nbsp;NZD</span>)
2024-11-15 14:19:31,310 [INFO] price_checker.py:420 - ✓ 成功设置总价: $253 NZD
2024-11-15 14:19:31,315 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:19:31,316 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:19:31,316 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:19:31,316 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 14:19:31,316 [INFO] price_checker.py:450 - ✓ service_fee: $31 NZD
2024-11-15 14:19:31,316 [INFO] price_checker.py:450 - ✓ taxes: $29 NZD
2024-11-15 14:19:31,316 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:19:31,316 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:19:31,316 [INFO] price_checker.py:457 - check_in: 03/01/2025
2024-11-15 14:19:31,316 [INFO] price_checker.py:457 - check_out: 04/01/2025
2024-11-15 14:19:31,316 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:19:31,316 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:19:31,316 [INFO] price_checker.py:457 - nightly_price: $174 NZD
2024-11-15 14:19:31,316 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 14:19:31,316 [INFO] price_checker.py:457 - service_fee: $31 NZD
2024-11-15 14:19:31,317 [INFO] price_checker.py:457 - taxes: $29 NZD
2024-11-15 14:19:31,317 [INFO] price_checker.py:457 - total: 
2024-11-15 14:19:31,317 [INFO] price_checker.py:559 - ✓ 成功获取 03/01/2025 的价格信息
2024-11-15 14:19:31,317 [INFO] price_checker.py:553 - [45/72] 处理日期: 04/01/2025
2024-11-15 14:19:31,317 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 14:19:31,317 [INFO] price_checker.py:255 - 入住日期: 04/01/2025
2024-11-15 14:19:32,989 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:19:36,443 [INFO] price_checker.py:271 - 开始检查日期 04/01/2025 的最小入住要求...
2024-11-15 14:19:36,448 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="4, Saturday, January 2025. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-04/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">4</div></td>
2024-11-15 14:19:36,462 [INFO] price_checker.py:158 - 找到日期: 04/01/2025
2024-11-15 14:19:36,462 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:19:36,898 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:19:43,017 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:19:46,489 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:19:46,928 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:19:47,605 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:19:47,610 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:19:47,610 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 14:19:47,612 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:19:47,612 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:19:47,612 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:19:47,612 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2025-01-04&check_out=2025-01-05&adults=3&children=0&infants=0
2024-11-15 14:19:52,711 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:19:52,714 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:19:53,034 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:19:54,726 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:19:54,726 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:19:56,946 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:20:03,070 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:20:04,766 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:20:04,766 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:20:13,125 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:20:14,822 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:20:14,822 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:20:14,828 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:20:14,843 [INFO] price_checker.py:337 - 找到可见价格元素: $172 NZD 
night
$172 NZD per night
2024-11-15 14:20:14,848 [INFO] price_checker.py:350 - 找到每晚价格元素: $172 NZD 
night
$172 NZD per night
2024-11-15 14:20:14,848 [INFO] price_checker.py:356 - 成功解析折扣价格: $172 NZD
2024-11-15 14:20:14,848 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:20:17,040 [WARNING] price_checker.py:443 - 尝试点击价格展开按钮失败: Message: no such element: Unable to locate element: {"method":"xpath","selector":"//button[contains(@class, '_12wl7g09')]"}
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00952BFE]
	(No symbol) [0x00952CDB]
	(No symbol) [0x0098EBD2]
	(No symbol) [0x00973954]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:20:17,040 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:20:17,040 [WARNING] price_checker.py:452 - ✗ cleaning_fee 未获取到
2024-11-15 14:20:17,040 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 14:20:17,040 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 14:20:17,041 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:20:17,041 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:20:17,041 [INFO] price_checker.py:457 - check_in: 14/01/2025
2024-11-15 14:20:17,041 [INFO] price_checker.py:457 - check_out: 15/01/2025
2024-11-15 14:20:17,041 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:20:17,041 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:20:17,041 [INFO] price_checker.py:457 - nightly_price: None
2024-11-15 14:20:17,041 [INFO] price_checker.py:457 - cleaning_fee: None
2024-11-15 14:20:17,041 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 14:20:17,041 [INFO] price_checker.py:457 - taxes: None
2024-11-15 14:20:17,041 [INFO] price_checker.py:457 - total: None
2024-11-15 14:20:17,041 [INFO] price_checker.py:559 - ✓ 成功获取 14/01/2025 的价格信息
2024-11-15 14:20:17,041 [INFO] price_checker.py:573 - 已完成 30/37 个日期的处理
2024-11-15 14:20:23,179 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:20:24,899 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 14:20:24,899 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:20:24,906 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:20:24,912 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:20:24,912 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:20:24,912 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:20:24,919 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:20:24,923 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:20:24,923 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:20:24,923 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:20:24,931 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:20:24,935 [INFO] price_checker.py:403 - 找到价格元素: $31 NZD (HTML: <span class="_1k4xcdh">$31&nbsp;NZD</span>)
2024-11-15 14:20:24,935 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $31 NZD
2024-11-15 14:20:24,936 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:20:24,942 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:20:24,948 [INFO] price_checker.py:403 - 找到价格元素: $31 NZD (HTML: <span class="_1k4xcdh">$31&nbsp;NZD</span>)
2024-11-15 14:20:24,948 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $31 NZD
2024-11-15 14:20:24,948 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:20:24,955 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:20:24,960 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 14:20:24,960 [INFO] price_checker.py:416 - ✓ 成功设置税费: $29 NZD
2024-11-15 14:20:24,960 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:20:27,042 [INFO] price_checker.py:553 - [31/37] 处理日期: 15/01/2025
2024-11-15 14:20:27,042 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-15 14:20:27,042 [INFO] price_checker.py:255 - 入住日期: 15/01/2025
2024-11-15 14:20:32,165 [INFO] price_checker.py:271 - 开始检查日期 15/01/2025 的最小入住要求...
2024-11-15 14:20:32,168 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="15, Wednesday, January 2025. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-15/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">15</div></td>
2024-11-15 14:20:32,177 [INFO] price_checker.py:158 - 找到日期: 15/01/2025
2024-11-15 14:20:32,177 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:20:33,212 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:20:34,987 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:20:34,994 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:20:34,999 [INFO] price_checker.py:403 - 找到价格元素: $251 NZD (HTML: <span class="_j1kt73">$251&nbsp;NZD</span>)
2024-11-15 14:20:34,999 [INFO] price_checker.py:420 - ✓ 成功设置总价: $251 NZD
2024-11-15 14:20:34,999 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:20:35,006 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:20:35,011 [INFO] price_checker.py:403 - 找到价格元素: $251 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$251&nbsp;NZD</span></span>)
2024-11-15 14:20:35,011 [INFO] price_checker.py:420 - ✓ 成功设置总价: $251 NZD
2024-11-15 14:20:35,015 [INFO] price_checker.py:403 - 找到价格元素: $251 NZD (HTML: <span class="_j1kt73">$251&nbsp;NZD</span>)
2024-11-15 14:20:35,015 [INFO] price_checker.py:420 - ✓ 成功设置总价: $251 NZD
2024-11-15 14:20:35,020 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:20:35,020 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:20:35,020 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:20:35,020 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 14:20:35,020 [INFO] price_checker.py:450 - ✓ service_fee: $31 NZD
2024-11-15 14:20:35,020 [INFO] price_checker.py:450 - ✓ taxes: $29 NZD
2024-11-15 14:20:35,020 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:20:35,020 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:20:35,021 [INFO] price_checker.py:457 - check_in: 04/01/2025
2024-11-15 14:20:35,021 [INFO] price_checker.py:457 - check_out: 05/01/2025
2024-11-15 14:20:35,021 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:20:35,021 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:20:35,021 [INFO] price_checker.py:457 - nightly_price: $172 NZD
2024-11-15 14:20:35,021 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 14:20:35,021 [INFO] price_checker.py:457 - service_fee: $31 NZD
2024-11-15 14:20:35,021 [INFO] price_checker.py:457 - taxes: $29 NZD
2024-11-15 14:20:35,021 [INFO] price_checker.py:457 - total: 
2024-11-15 14:20:35,021 [INFO] price_checker.py:559 - ✓ 成功获取 04/01/2025 的价格信息
2024-11-15 14:20:35,021 [INFO] price_checker.py:573 - 已完成 45/72 个日期的处理
2024-11-15 14:20:42,214 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:20:43,318 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:20:43,323 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:20:43,323 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 14:20:43,325 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:20:43,325 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:20:43,325 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:20:43,325 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/837352260137971048?check_in=2025-01-15&check_out=2025-01-16&adults=3&children=0&infants=0
2024-11-15 14:20:45,022 [INFO] price_checker.py:553 - [46/72] 处理日期: 05/01/2025
2024-11-15 14:20:45,022 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 14:20:45,022 [INFO] price_checker.py:255 - 入住日期: 05/01/2025
2024-11-15 14:20:48,415 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:20:48,419 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:20:50,143 [INFO] price_checker.py:271 - 开始检查日期 05/01/2025 的最小入住要求...
2024-11-15 14:20:50,145 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_1mv3p4vt" role="button" aria-disabled="false" aria-label="5, Sunday, January 2025. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-05/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">5</div></td>
2024-11-15 14:20:50,157 [INFO] price_checker.py:158 - 找到日期: 05/01/2025
2024-11-15 14:20:50,157 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:20:50,430 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:20:50,430 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:20:53,261 [WARNING] price_checker.py:443 - 尝试点击价格展开按钮失败: Message: no such element: Unable to locate element: {"method":"xpath","selector":"//button[contains(@class, '_12wl7g09')]"}
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00952BFE]
	(No symbol) [0x00952CDB]
	(No symbol) [0x0098EBD2]
	(No symbol) [0x00973954]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:20:53,261 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:20:53,261 [WARNING] price_checker.py:452 - ✗ cleaning_fee 未获取到
2024-11-15 14:20:53,261 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 14:20:53,261 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 14:20:53,261 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:20:53,262 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:20:53,262 [INFO] price_checker.py:457 - check_in: 19/01/2025
2024-11-15 14:20:53,262 [INFO] price_checker.py:457 - check_out: 20/01/2025
2024-11-15 14:20:53,262 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:20:53,262 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:20:53,262 [INFO] price_checker.py:457 - nightly_price: None
2024-11-15 14:20:53,262 [INFO] price_checker.py:457 - cleaning_fee: None
2024-11-15 14:20:53,262 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 14:20:53,262 [INFO] price_checker.py:457 - taxes: None
2024-11-15 14:20:53,262 [INFO] price_checker.py:457 - total: None
2024-11-15 14:20:53,262 [INFO] price_checker.py:559 - ✓ 成功获取 19/01/2025 的价格信息
2024-11-15 14:20:53,262 [INFO] price_checker.py:553 - [32/39] 处理日期: 20/01/2025
2024-11-15 14:20:53,263 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/43435162
2024-11-15 14:20:53,263 [INFO] price_checker.py:255 - 入住日期: 20/01/2025
2024-11-15 14:20:58,386 [INFO] price_checker.py:271 - 开始检查日期 20/01/2025 的最小入住要求...
2024-11-15 14:20:58,389 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_sl5yz7r" role="button" aria-disabled="false" aria-label="20, Monday, January 2025. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-20/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">20</div></td>
2024-11-15 14:20:58,399 [INFO] price_checker.py:158 - 找到日期: 20/01/2025
2024-11-15 14:20:58,399 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:21:00,185 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:21:00,467 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:21:00,468 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:21:01,300 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:21:01,305 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:21:01,306 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 14:21:01,307 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:21:01,307 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:21:01,307 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:21:01,307 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2025-01-05&check_out=2025-01-06&adults=3&children=0&infants=0
2024-11-15 14:21:06,395 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:21:06,398 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:21:08,410 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:21:08,410 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:21:08,437 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:21:09,551 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:21:09,556 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:21:09,556 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 14:21:09,558 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:21:09,558 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:21:09,558 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:21:09,558 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/43435162?check_in=2025-01-20&check_out=2025-01-21&adults=3&children=0&infants=0
2024-11-15 14:21:10,483 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:21:10,483 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:21:14,645 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:21:14,649 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:21:16,659 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:21:16,659 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:21:18,447 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:21:18,448 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:21:20,531 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:21:20,531 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w ._11jcbg2
2024-11-15 14:21:26,705 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:21:26,705 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:21:28,480 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:21:28,480 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:21:28,486 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:21:28,501 [INFO] price_checker.py:337 - 找到可见价格元素: $155 NZD 
night
$155 NZD per night
2024-11-15 14:21:28,507 [INFO] price_checker.py:350 - 找到每晚价格元素: $155 NZD 
night
$155 NZD per night
2024-11-15 14:21:28,507 [INFO] price_checker.py:356 - 成功解析折扣价格: $155 NZD
2024-11-15 14:21:28,507 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:21:30,569 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:21:30,570 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[contains(@class, '_wgmchy')]//span[contains(text(), '$') and contains(text(), 'NZD')]
2024-11-15 14:21:36,739 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:21:36,739 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:21:38,551 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 14:21:38,551 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:21:38,559 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:21:38,565 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:21:38,565 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:21:38,565 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:21:38,571 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:21:38,576 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:21:38,576 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:21:38,576 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:21:38,582 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:21:38,587 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 14:21:38,587 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 14:21:38,587 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:21:38,594 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:21:38,600 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 14:21:38,600 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 14:21:38,600 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:21:38,606 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:21:38,612 [INFO] price_checker.py:403 - 找到价格元素: $26 NZD (HTML: <span class="_1k4xcdh">$26&nbsp;NZD</span>)
2024-11-15 14:21:38,612 [INFO] price_checker.py:416 - ✓ 成功设置税费: $26 NZD
2024-11-15 14:21:38,612 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:21:40,609 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:21:40,610 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:21:46,785 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:21:46,785 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w ._11jcbg2
2024-11-15 14:21:48,653 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:21:48,659 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:21:48,664 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span class="_j1kt73">$231&nbsp;NZD</span>)
2024-11-15 14:21:48,665 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 14:21:48,665 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:21:48,672 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:21:48,676 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$231&nbsp;NZD</span></span>)
2024-11-15 14:21:48,676 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 14:21:48,681 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span class="_j1kt73">$231&nbsp;NZD</span>)
2024-11-15 14:21:48,681 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 14:21:48,685 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:21:48,685 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:21:48,685 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:21:48,685 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 14:21:48,686 [INFO] price_checker.py:450 - ✓ service_fee: $29 NZD
2024-11-15 14:21:48,686 [INFO] price_checker.py:450 - ✓ taxes: $26 NZD
2024-11-15 14:21:48,686 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:21:48,686 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:21:48,686 [INFO] price_checker.py:457 - check_in: 05/01/2025
2024-11-15 14:21:48,686 [INFO] price_checker.py:457 - check_out: 06/01/2025
2024-11-15 14:21:48,686 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:21:48,686 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:21:48,686 [INFO] price_checker.py:457 - nightly_price: $155 NZD
2024-11-15 14:21:48,686 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 14:21:48,686 [INFO] price_checker.py:457 - service_fee: $29 NZD
2024-11-15 14:21:48,686 [INFO] price_checker.py:457 - taxes: $26 NZD
2024-11-15 14:21:48,686 [INFO] price_checker.py:457 - total: 
2024-11-15 14:21:48,686 [INFO] price_checker.py:559 - ✓ 成功获取 05/01/2025 的价格信息
2024-11-15 14:21:48,687 [INFO] price_checker.py:553 - [47/72] 处理日期: 06/01/2025
2024-11-15 14:21:48,687 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 14:21:48,687 [INFO] price_checker.py:255 - 入住日期: 06/01/2025
2024-11-15 14:21:50,641 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 14:21:50,641 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:21:54,370 [INFO] price_checker.py:271 - 开始检查日期 06/01/2025 的最小入住要求...
2024-11-15 14:21:54,377 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_sl5yz7r" role="button" aria-disabled="false" aria-label="6, Monday, January 2025. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-06/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">6</div></td>
2024-11-15 14:21:54,393 [INFO] price_checker.py:158 - 找到日期: 06/01/2025
2024-11-15 14:21:54,393 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:21:56,810 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:21:56,810 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[contains(@class, '_wgmchy')]//span[contains(text(), '$') and contains(text(), 'NZD')]
2024-11-15 14:22:00,666 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:22:04,422 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:22:05,548 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:22:05,554 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:22:05,554 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 14:22:05,555 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:22:05,555 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:22:05,555 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:22:05,556 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2025-01-06&check_out=2025-01-07&adults=3&children=0&infants=0
2024-11-15 14:22:06,842 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:22:06,842 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:22:10,645 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:22:10,651 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:22:10,696 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:22:12,661 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:22:12,661 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:22:16,861 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 14:22:16,862 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:22:20,726 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:22:22,710 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:22:22,710 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:22:26,913 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:22:30,783 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:22:32,757 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:22:32,757 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:22:32,763 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:22:32,778 [INFO] price_checker.py:337 - 找到可见价格元素: $155 NZD 
night
$155 NZD per night
2024-11-15 14:22:32,783 [INFO] price_checker.py:350 - 找到每晚价格元素: $155 NZD 
night
$155 NZD per night
2024-11-15 14:22:32,783 [INFO] price_checker.py:356 - 成功解析折扣价格: $155 NZD
2024-11-15 14:22:32,783 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:22:36,945 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:22:40,806 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:22:42,814 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 14:22:42,814 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:22:42,820 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:22:42,826 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:22:42,826 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:22:42,827 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:22:42,833 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:22:42,838 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:22:42,838 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:22:42,838 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:22:42,845 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:22:42,849 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 14:22:42,850 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 14:22:42,850 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:22:42,856 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:22:42,861 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 14:22:42,861 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 14:22:42,861 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:22:42,868 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:22:42,873 [INFO] price_checker.py:403 - 找到价格元素: $26 NZD (HTML: <span class="_1k4xcdh">$26&nbsp;NZD</span>)
2024-11-15 14:22:42,873 [INFO] price_checker.py:416 - ✓ 成功设置税费: $26 NZD
2024-11-15 14:22:42,873 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:22:46,972 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:22:50,835 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:22:52,907 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:22:52,914 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:22:52,919 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span class="_j1kt73">$231&nbsp;NZD</span>)
2024-11-15 14:22:52,920 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 14:22:52,920 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:22:52,927 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:22:52,931 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$231&nbsp;NZD</span></span>)
2024-11-15 14:22:52,931 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 14:22:52,937 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span class="_j1kt73">$231&nbsp;NZD</span>)
2024-11-15 14:22:52,937 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 14:22:52,941 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:22:52,942 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:22:52,942 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:22:52,942 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 14:22:52,942 [INFO] price_checker.py:450 - ✓ service_fee: $29 NZD
2024-11-15 14:22:52,942 [INFO] price_checker.py:450 - ✓ taxes: $26 NZD
2024-11-15 14:22:52,942 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:22:52,942 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:22:52,942 [INFO] price_checker.py:457 - check_in: 06/01/2025
2024-11-15 14:22:52,942 [INFO] price_checker.py:457 - check_out: 07/01/2025
2024-11-15 14:22:52,942 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:22:52,942 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:22:52,943 [INFO] price_checker.py:457 - nightly_price: $155 NZD
2024-11-15 14:22:52,943 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 14:22:52,943 [INFO] price_checker.py:457 - service_fee: $29 NZD
2024-11-15 14:22:52,943 [INFO] price_checker.py:457 - taxes: $26 NZD
2024-11-15 14:22:52,943 [INFO] price_checker.py:457 - total: 
2024-11-15 14:22:52,943 [INFO] price_checker.py:559 - ✓ 成功获取 06/01/2025 的价格信息
2024-11-15 14:22:52,943 [INFO] price_checker.py:553 - [48/72] 处理日期: 07/01/2025
2024-11-15 14:22:52,943 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 14:22:52,943 [INFO] price_checker.py:255 - 入住日期: 07/01/2025
2024-11-15 14:22:57,005 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:22:58,066 [INFO] price_checker.py:271 - 开始检查日期 07/01/2025 的最小入住要求...
2024-11-15 14:22:58,069 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="7, Tuesday, January 2025. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-07/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">7</div></td>
2024-11-15 14:22:58,078 [INFO] price_checker.py:158 - 找到日期: 07/01/2025
2024-11-15 14:22:58,079 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:23:00,862 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:23:07,026 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:23:08,114 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:23:09,228 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:23:09,233 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:23:09,234 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 14:23:09,235 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:23:09,235 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:23:09,235 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:23:09,235 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2025-01-07&check_out=2025-01-08&adults=3&children=0&infants=0
2024-11-15 14:23:14,326 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:23:14,328 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:23:16,339 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:23:16,339 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:23:17,055 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:23:20,911 [WARNING] price_checker.py:443 - 尝试点击价格展开按钮失败: Message: no such element: Unable to locate element: {"method":"xpath","selector":"//button[contains(@class, '_12wl7g09')]"}
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00952BFE]
	(No symbol) [0x00952CDB]
	(No symbol) [0x0098EBD2]
	(No symbol) [0x00973954]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:23:20,911 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:23:20,911 [WARNING] price_checker.py:452 - ✗ cleaning_fee 未获取到
2024-11-15 14:23:20,911 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 14:23:20,911 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 14:23:20,911 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:23:20,911 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:23:20,911 [INFO] price_checker.py:457 - check_in: 15/01/2025
2024-11-15 14:23:20,911 [INFO] price_checker.py:457 - check_out: 16/01/2025
2024-11-15 14:23:20,912 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:23:20,912 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:23:20,912 [INFO] price_checker.py:457 - nightly_price: None
2024-11-15 14:23:20,912 [INFO] price_checker.py:457 - cleaning_fee: None
2024-11-15 14:23:20,912 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 14:23:20,912 [INFO] price_checker.py:457 - taxes: None
2024-11-15 14:23:20,912 [INFO] price_checker.py:457 - total: None
2024-11-15 14:23:20,912 [INFO] price_checker.py:559 - ✓ 成功获取 15/01/2025 的价格信息
2024-11-15 14:23:20,912 [INFO] price_checker.py:553 - [32/37] 处理日期: 16/01/2025
2024-11-15 14:23:20,912 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-15 14:23:20,912 [INFO] price_checker.py:255 - 入住日期: 16/01/2025
2024-11-15 14:23:26,032 [INFO] price_checker.py:271 - 开始检查日期 16/01/2025 的最小入住要求...
2024-11-15 14:23:26,035 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="16, Thursday, January 2025. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-16/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">16</div></td>
2024-11-15 14:23:26,044 [INFO] price_checker.py:158 - 找到日期: 16/01/2025
2024-11-15 14:23:26,044 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:23:26,371 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:23:26,371 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:23:27,075 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:23:36,088 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:23:36,416 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:23:36,417 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:23:36,422 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:23:36,438 [INFO] price_checker.py:337 - 找到可见价格元素: $167 NZD 
night
$167 NZD per night
2024-11-15 14:23:36,443 [INFO] price_checker.py:350 - 找到每晚价格元素: $167 NZD 
night
$167 NZD per night
2024-11-15 14:23:36,443 [INFO] price_checker.py:356 - 成功解析折扣价格: $167 NZD
2024-11-15 14:23:36,443 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:23:37,192 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:23:37,197 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:23:37,197 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 14:23:37,198 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:23:37,199 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:23:37,199 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:23:37,199 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/837352260137971048?check_in=2025-01-16&check_out=2025-01-17&adults=3&children=0&infants=0
2024-11-15 14:23:42,286 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:23:42,289 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:23:44,299 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:23:44,300 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:23:46,466 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 14:23:46,466 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:23:46,473 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:23:46,479 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:23:46,480 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:23:46,480 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:23:46,486 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:23:46,491 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:23:46,491 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:23:46,491 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:23:46,498 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:23:46,503 [INFO] price_checker.py:403 - 找到价格元素: $30 NZD (HTML: <span class="_1k4xcdh">$30&nbsp;NZD</span>)
2024-11-15 14:23:46,503 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $30 NZD
2024-11-15 14:23:46,503 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:23:46,509 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:23:46,515 [INFO] price_checker.py:403 - 找到价格元素: $30 NZD (HTML: <span class="_1k4xcdh">$30&nbsp;NZD</span>)
2024-11-15 14:23:46,515 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $30 NZD
2024-11-15 14:23:46,515 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:23:46,522 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:23:46,526 [INFO] price_checker.py:403 - 找到价格元素: $28 NZD (HTML: <span class="_1k4xcdh">$28&nbsp;NZD</span>)
2024-11-15 14:23:46,526 [INFO] price_checker.py:416 - ✓ 成功设置税费: $28 NZD
2024-11-15 14:23:46,527 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:23:47,135 [WARNING] price_checker.py:443 - 尝试点击价格展开按钮失败: Message: no such element: Unable to locate element: {"method":"xpath","selector":"//button[contains(@class, '_12wl7g09')]"}
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00952BFE]
	(No symbol) [0x00952CDB]
	(No symbol) [0x0098EBD2]
	(No symbol) [0x00973954]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:23:47,135 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:23:47,135 [WARNING] price_checker.py:452 - ✗ cleaning_fee 未获取到
2024-11-15 14:23:47,135 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 14:23:47,135 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 14:23:47,135 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:23:47,135 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:23:47,135 [INFO] price_checker.py:457 - check_in: 20/01/2025
2024-11-15 14:23:47,136 [INFO] price_checker.py:457 - check_out: 21/01/2025
2024-11-15 14:23:47,136 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:23:47,136 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:23:47,136 [INFO] price_checker.py:457 - nightly_price: None
2024-11-15 14:23:47,136 [INFO] price_checker.py:457 - cleaning_fee: None
2024-11-15 14:23:47,136 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 14:23:47,136 [INFO] price_checker.py:457 - taxes: None
2024-11-15 14:23:47,136 [INFO] price_checker.py:457 - total: None
2024-11-15 14:23:47,136 [INFO] price_checker.py:559 - ✓ 成功获取 20/01/2025 的价格信息
2024-11-15 14:23:47,136 [INFO] price_checker.py:553 - [33/39] 处理日期: 21/01/2025
2024-11-15 14:23:47,136 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/43435162
2024-11-15 14:23:47,136 [INFO] price_checker.py:255 - 入住日期: 21/01/2025
2024-11-15 14:23:52,261 [INFO] price_checker.py:271 - 开始检查日期 21/01/2025 的最小入住要求...
2024-11-15 14:23:52,265 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="21, Tuesday, January 2025. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-21/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">21</div></td>
2024-11-15 14:23:52,275 [INFO] price_checker.py:158 - 找到日期: 21/01/2025
2024-11-15 14:23:52,275 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:23:54,322 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:23:54,322 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:23:56,542 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:23:56,549 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:23:56,554 [INFO] price_checker.py:403 - 找到价格元素: $245 NZD (HTML: <span class="_j1kt73">$245&nbsp;NZD</span>)
2024-11-15 14:23:56,554 [INFO] price_checker.py:420 - ✓ 成功设置总价: $245 NZD
2024-11-15 14:23:56,554 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:23:56,561 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:23:56,565 [INFO] price_checker.py:403 - 找到价格元素: $245 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$245&nbsp;NZD</span></span>)
2024-11-15 14:23:56,566 [INFO] price_checker.py:420 - ✓ 成功设置总价: $245 NZD
2024-11-15 14:23:56,570 [INFO] price_checker.py:403 - 找到价格元素: $245 NZD (HTML: <span class="_j1kt73">$245&nbsp;NZD</span>)
2024-11-15 14:23:56,570 [INFO] price_checker.py:420 - ✓ 成功设置总价: $245 NZD
2024-11-15 14:23:56,574 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:23:56,575 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:23:56,575 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:23:56,575 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 14:23:56,575 [INFO] price_checker.py:450 - ✓ service_fee: $30 NZD
2024-11-15 14:23:56,575 [INFO] price_checker.py:450 - ✓ taxes: $28 NZD
2024-11-15 14:23:56,575 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:23:56,575 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:23:56,575 [INFO] price_checker.py:457 - check_in: 07/01/2025
2024-11-15 14:23:56,575 [INFO] price_checker.py:457 - check_out: 08/01/2025
2024-11-15 14:23:56,575 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:23:56,575 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:23:56,575 [INFO] price_checker.py:457 - nightly_price: $167 NZD
2024-11-15 14:23:56,575 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 14:23:56,576 [INFO] price_checker.py:457 - service_fee: $30 NZD
2024-11-15 14:23:56,576 [INFO] price_checker.py:457 - taxes: $28 NZD
2024-11-15 14:23:56,576 [INFO] price_checker.py:457 - total: 
2024-11-15 14:23:56,576 [INFO] price_checker.py:559 - ✓ 成功获取 07/01/2025 的价格信息
2024-11-15 14:23:56,576 [INFO] price_checker.py:553 - [49/72] 处理日期: 08/01/2025
2024-11-15 14:23:56,576 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 14:23:56,576 [INFO] price_checker.py:255 - 入住日期: 08/01/2025
2024-11-15 14:24:01,767 [INFO] price_checker.py:271 - 开始检查日期 08/01/2025 的最小入住要求...
2024-11-15 14:24:01,770 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="8, Wednesday, January 2025. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-08/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">8</div></td>
2024-11-15 14:24:01,780 [INFO] price_checker.py:158 - 找到日期: 08/01/2025
2024-11-15 14:24:01,780 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:24:02,296 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:24:03,396 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:24:03,401 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:24:03,401 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 14:24:03,402 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:24:03,402 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:24:03,403 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:24:03,403 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/43435162?check_in=2025-01-21&check_out=2025-01-22&adults=3&children=0&infants=0
2024-11-15 14:24:04,331 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:24:04,331 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:24:08,491 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:24:08,494 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:24:10,507 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:24:10,508 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:24:11,811 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:24:12,928 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:24:12,934 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:24:12,934 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 14:24:12,935 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:24:12,936 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:24:12,936 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:24:12,936 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2025-01-08&check_out=2025-01-09&adults=3&children=0&infants=0
2024-11-15 14:24:14,376 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:24:14,377 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w ._11jcbg2
2024-11-15 14:24:18,024 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:24:18,027 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:24:20,039 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:24:20,039 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:24:20,533 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:24:20,534 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:24:24,398 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:24:24,398 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[contains(@class, '_wgmchy')]//span[contains(text(), '$') and contains(text(), 'NZD')]
2024-11-15 14:24:30,085 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:24:30,085 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:24:30,567 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:24:30,567 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:24:34,424 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:24:34,424 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:24:40,131 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:24:40,131 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:24:40,137 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:24:40,151 [INFO] price_checker.py:337 - 找到可见价格元素: $165 NZD 
night
$165 NZD per night
2024-11-15 14:24:40,157 [INFO] price_checker.py:350 - 找到每晚价格元素: $165 NZD 
night
$165 NZD per night
2024-11-15 14:24:40,157 [INFO] price_checker.py:356 - 成功解析折扣价格: $165 NZD
2024-11-15 14:24:40,157 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:24:40,600 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:24:40,600 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w ._11jcbg2
2024-11-15 14:24:44,457 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 14:24:44,457 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:24:50,194 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 14:24:50,195 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:24:50,201 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:24:50,207 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:24:50,207 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:24:50,208 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:24:50,214 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:24:50,218 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:24:50,219 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:24:50,219 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:24:50,225 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:24:50,230 [INFO] price_checker.py:403 - 找到价格元素: $30 NZD (HTML: <span class="_1k4xcdh">$30&nbsp;NZD</span>)
2024-11-15 14:24:50,230 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $30 NZD
2024-11-15 14:24:50,230 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:24:50,237 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:24:50,242 [INFO] price_checker.py:403 - 找到价格元素: $30 NZD (HTML: <span class="_1k4xcdh">$30&nbsp;NZD</span>)
2024-11-15 14:24:50,242 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $30 NZD
2024-11-15 14:24:50,242 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:24:50,248 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:24:50,253 [INFO] price_checker.py:403 - 找到价格元素: $28 NZD (HTML: <span class="_1k4xcdh">$28&nbsp;NZD</span>)
2024-11-15 14:24:50,253 [INFO] price_checker.py:416 - ✓ 成功设置税费: $28 NZD
2024-11-15 14:24:50,253 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:24:50,628 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:24:50,628 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[contains(@class, '_wgmchy')]//span[contains(text(), '$') and contains(text(), 'NZD')]
2024-11-15 14:24:54,493 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:25:00,292 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:25:00,298 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:25:00,303 [INFO] price_checker.py:403 - 找到价格元素: $243 NZD (HTML: <span class="_j1kt73">$243&nbsp;NZD</span>)
2024-11-15 14:25:00,303 [INFO] price_checker.py:420 - ✓ 成功设置总价: $243 NZD
2024-11-15 14:25:00,304 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:25:00,311 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:25:00,315 [INFO] price_checker.py:403 - 找到价格元素: $243 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$243&nbsp;NZD</span></span>)
2024-11-15 14:25:00,316 [INFO] price_checker.py:420 - ✓ 成功设置总价: $243 NZD
2024-11-15 14:25:00,320 [INFO] price_checker.py:403 - 找到价格元素: $243 NZD (HTML: <span class="_j1kt73">$243&nbsp;NZD</span>)
2024-11-15 14:25:00,320 [INFO] price_checker.py:420 - ✓ 成功设置总价: $243 NZD
2024-11-15 14:25:00,325 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:25:00,325 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:25:00,325 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:25:00,325 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 14:25:00,325 [INFO] price_checker.py:450 - ✓ service_fee: $30 NZD
2024-11-15 14:25:00,325 [INFO] price_checker.py:450 - ✓ taxes: $28 NZD
2024-11-15 14:25:00,325 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:25:00,325 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:25:00,325 [INFO] price_checker.py:457 - check_in: 08/01/2025
2024-11-15 14:25:00,326 [INFO] price_checker.py:457 - check_out: 09/01/2025
2024-11-15 14:25:00,326 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:25:00,326 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:25:00,326 [INFO] price_checker.py:457 - nightly_price: $165 NZD
2024-11-15 14:25:00,326 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 14:25:00,326 [INFO] price_checker.py:457 - service_fee: $30 NZD
2024-11-15 14:25:00,326 [INFO] price_checker.py:457 - taxes: $28 NZD
2024-11-15 14:25:00,326 [INFO] price_checker.py:457 - total: 
2024-11-15 14:25:00,326 [INFO] price_checker.py:559 - ✓ 成功获取 08/01/2025 的价格信息
2024-11-15 14:25:00,326 [INFO] price_checker.py:553 - [50/72] 处理日期: 09/01/2025
2024-11-15 14:25:00,326 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 14:25:00,326 [INFO] price_checker.py:255 - 入住日期: 09/01/2025
2024-11-15 14:25:00,665 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:25:00,665 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:25:04,518 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:25:05,778 [INFO] price_checker.py:271 - 开始检查日期 09/01/2025 的最小入住要求...
2024-11-15 14:25:05,781 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="9, Thursday, January 2025. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-09/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">9</div></td>
2024-11-15 14:25:05,791 [INFO] price_checker.py:158 - 找到日期: 09/01/2025
2024-11-15 14:25:05,791 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:25:10,688 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 14:25:10,688 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:25:14,569 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:25:15,830 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:25:16,941 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:25:16,946 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:25:16,946 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 14:25:16,947 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:25:16,948 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:25:16,948 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:25:16,948 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2025-01-09&check_out=2025-01-10&adults=3&children=0&infants=0
2024-11-15 14:25:20,700 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:25:22,035 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:25:22,040 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:25:24,051 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:25:24,052 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:25:24,585 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:25:30,740 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:25:34,088 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:25:34,089 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:25:34,617 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:25:40,770 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:25:44,127 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:25:44,127 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:25:44,133 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:25:44,148 [INFO] price_checker.py:337 - 找到可见价格元素: $155 NZD 
night
$155 NZD per night
2024-11-15 14:25:44,153 [INFO] price_checker.py:350 - 找到每晚价格元素: $155 NZD 
night
$155 NZD per night
2024-11-15 14:25:44,153 [INFO] price_checker.py:356 - 成功解析折扣价格: $155 NZD
2024-11-15 14:25:44,154 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:25:44,657 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:25:50,818 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:25:54,213 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 14:25:54,214 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:25:54,220 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:25:54,226 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:25:54,227 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:25:54,227 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:25:54,233 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:25:54,238 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:25:54,238 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:25:54,238 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:25:54,245 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:25:54,249 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 14:25:54,250 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 14:25:54,250 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:25:54,256 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:25:54,261 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 14:25:54,261 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 14:25:54,261 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:25:54,268 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:25:54,272 [INFO] price_checker.py:403 - 找到价格元素: $26 NZD (HTML: <span class="_1k4xcdh">$26&nbsp;NZD</span>)
2024-11-15 14:25:54,273 [INFO] price_checker.py:416 - ✓ 成功设置税费: $26 NZD
2024-11-15 14:25:54,273 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:25:54,699 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:26:00,877 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:26:04,332 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:26:04,339 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:26:04,345 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span class="_j1kt73">$231&nbsp;NZD</span>)
2024-11-15 14:26:04,345 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 14:26:04,345 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:26:04,352 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:26:04,357 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$231&nbsp;NZD</span></span>)
2024-11-15 14:26:04,357 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 14:26:04,361 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span class="_j1kt73">$231&nbsp;NZD</span>)
2024-11-15 14:26:04,361 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 14:26:04,366 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:26:04,366 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:26:04,366 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:26:04,366 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 14:26:04,366 [INFO] price_checker.py:450 - ✓ service_fee: $29 NZD
2024-11-15 14:26:04,366 [INFO] price_checker.py:450 - ✓ taxes: $26 NZD
2024-11-15 14:26:04,366 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:26:04,366 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:26:04,366 [INFO] price_checker.py:457 - check_in: 09/01/2025
2024-11-15 14:26:04,366 [INFO] price_checker.py:457 - check_out: 10/01/2025
2024-11-15 14:26:04,366 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:26:04,366 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:26:04,367 [INFO] price_checker.py:457 - nightly_price: $155 NZD
2024-11-15 14:26:04,367 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 14:26:04,367 [INFO] price_checker.py:457 - service_fee: $29 NZD
2024-11-15 14:26:04,367 [INFO] price_checker.py:457 - taxes: $26 NZD
2024-11-15 14:26:04,367 [INFO] price_checker.py:457 - total: 
2024-11-15 14:26:04,367 [INFO] price_checker.py:559 - ✓ 成功获取 09/01/2025 的价格信息
2024-11-15 14:26:04,367 [INFO] price_checker.py:573 - 已完成 50/72 个日期的处理
2024-11-15 14:26:10,920 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:26:14,367 [INFO] price_checker.py:553 - [51/72] 处理日期: 10/01/2025
2024-11-15 14:26:14,368 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 14:26:14,368 [INFO] price_checker.py:255 - 入住日期: 10/01/2025
2024-11-15 14:26:14,787 [WARNING] price_checker.py:443 - 尝试点击价格展开按钮失败: Message: no such element: Unable to locate element: {"method":"xpath","selector":"//button[contains(@class, '_12wl7g09')]"}
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00952BFE]
	(No symbol) [0x00952CDB]
	(No symbol) [0x0098EBD2]
	(No symbol) [0x00973954]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:26:14,787 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:26:14,788 [WARNING] price_checker.py:452 - ✗ cleaning_fee 未获取到
2024-11-15 14:26:14,788 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 14:26:14,788 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 14:26:14,788 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:26:14,788 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:26:14,788 [INFO] price_checker.py:457 - check_in: 16/01/2025
2024-11-15 14:26:14,788 [INFO] price_checker.py:457 - check_out: 17/01/2025
2024-11-15 14:26:14,788 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:26:14,788 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:26:14,788 [INFO] price_checker.py:457 - nightly_price: None
2024-11-15 14:26:14,788 [INFO] price_checker.py:457 - cleaning_fee: None
2024-11-15 14:26:14,788 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 14:26:14,788 [INFO] price_checker.py:457 - taxes: None
2024-11-15 14:26:14,788 [INFO] price_checker.py:457 - total: None
2024-11-15 14:26:14,789 [INFO] price_checker.py:559 - ✓ 成功获取 16/01/2025 的价格信息
2024-11-15 14:26:14,789 [INFO] price_checker.py:553 - [33/37] 处理日期: 17/01/2025
2024-11-15 14:26:14,789 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-15 14:26:14,789 [INFO] price_checker.py:255 - 入住日期: 17/01/2025
2024-11-15 14:26:19,490 [INFO] price_checker.py:271 - 开始检查日期 10/01/2025 的最小入住要求...
2024-11-15 14:26:19,493 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="10, Friday, January 2025. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-10/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">10</div></td>
2024-11-15 14:26:19,502 [INFO] price_checker.py:158 - 找到日期: 10/01/2025
2024-11-15 14:26:19,502 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:26:19,909 [INFO] price_checker.py:271 - 开始检查日期 17/01/2025 的最小入住要求...
2024-11-15 14:26:19,912 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="17, Friday, January 2025. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-17/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">17</div></td>
2024-11-15 14:26:19,921 [INFO] price_checker.py:158 - 找到日期: 17/01/2025
2024-11-15 14:26:19,921 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:26:20,933 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:26:29,522 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:26:29,940 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:26:30,640 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:26:30,645 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:26:30,645 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 14:26:30,646 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:26:30,647 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:26:30,647 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:26:30,647 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2025-01-10&check_out=2025-01-11&adults=3&children=0&infants=0
2024-11-15 14:26:31,048 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:26:31,053 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:26:31,053 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 14:26:31,054 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:26:31,055 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:26:31,055 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:26:31,055 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/837352260137971048?check_in=2025-01-17&check_out=2025-01-18&adults=3&children=0&infants=0
2024-11-15 14:26:35,736 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:26:35,739 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:26:36,143 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:26:36,146 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:26:37,750 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:26:37,750 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:26:38,157 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:26:38,157 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:26:40,998 [WARNING] price_checker.py:443 - 尝试点击价格展开按钮失败: Message: no such element: Unable to locate element: {"method":"xpath","selector":"//button[contains(@class, '_12wl7g09')]"}
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00952BFE]
	(No symbol) [0x00952CDB]
	(No symbol) [0x0098EBD2]
	(No symbol) [0x00973954]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:26:40,999 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:26:40,999 [WARNING] price_checker.py:452 - ✗ cleaning_fee 未获取到
2024-11-15 14:26:40,999 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 14:26:40,999 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 14:26:40,999 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:26:40,999 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:26:40,999 [INFO] price_checker.py:457 - check_in: 21/01/2025
2024-11-15 14:26:40,999 [INFO] price_checker.py:457 - check_out: 22/01/2025
2024-11-15 14:26:40,999 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:26:40,999 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:26:40,999 [INFO] price_checker.py:457 - nightly_price: None
2024-11-15 14:26:41,000 [INFO] price_checker.py:457 - cleaning_fee: None
2024-11-15 14:26:41,000 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 14:26:41,000 [INFO] price_checker.py:457 - taxes: None
2024-11-15 14:26:41,000 [INFO] price_checker.py:457 - total: None
2024-11-15 14:26:41,000 [INFO] price_checker.py:559 - ✓ 成功获取 21/01/2025 的价格信息
2024-11-15 14:26:41,000 [INFO] price_checker.py:553 - [34/39] 处理日期: 22/01/2025
2024-11-15 14:26:41,000 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/43435162
2024-11-15 14:26:41,000 [INFO] price_checker.py:255 - 入住日期: 22/01/2025
2024-11-15 14:26:46,122 [INFO] price_checker.py:271 - 开始检查日期 22/01/2025 的最小入住要求...
2024-11-15 14:26:46,126 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="22, Wednesday, January 2025. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-22/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">22</div></td>
2024-11-15 14:26:46,135 [INFO] price_checker.py:158 - 找到日期: 22/01/2025
2024-11-15 14:26:46,135 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:26:47,759 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:26:47,759 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:26:48,162 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:26:48,163 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:26:56,159 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:26:57,283 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:26:57,288 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:26:57,288 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 14:26:57,289 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:26:57,290 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:26:57,290 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:26:57,290 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/43435162?check_in=2025-01-22&check_out=2025-01-23&adults=3&children=0&infants=0
2024-11-15 14:26:57,778 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:26:57,778 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:26:57,784 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:26:57,800 [INFO] price_checker.py:337 - 找到可见价格元素: $155 NZD 
night
$155 NZD per night
2024-11-15 14:26:57,807 [INFO] price_checker.py:350 - 找到每晚价格元素: $155 NZD 
night
$155 NZD per night
2024-11-15 14:26:57,807 [INFO] price_checker.py:356 - 成功解析折扣价格: $155 NZD
2024-11-15 14:26:57,807 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:26:58,180 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:26:58,180 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:27:02,392 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:27:02,395 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:27:04,406 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:27:04,406 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:27:07,859 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 14:27:07,859 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:27:07,866 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:27:07,872 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:27:07,872 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:27:07,872 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:27:07,878 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:27:07,883 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:27:07,883 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:27:07,883 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:27:07,890 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:27:07,895 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 14:27:07,895 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 14:27:07,895 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:27:07,901 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:27:07,906 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 14:27:07,906 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 14:27:07,906 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:27:07,912 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:27:07,917 [INFO] price_checker.py:403 - 找到价格元素: $26 NZD (HTML: <span class="_1k4xcdh">$26&nbsp;NZD</span>)
2024-11-15 14:27:07,917 [INFO] price_checker.py:416 - ✓ 成功设置税费: $26 NZD
2024-11-15 14:27:07,917 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:27:08,234 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:27:08,234 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w ._11jcbg2
2024-11-15 14:27:14,427 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:27:14,427 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:27:17,943 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:27:17,950 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:27:17,955 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span class="_j1kt73">$231&nbsp;NZD</span>)
2024-11-15 14:27:17,955 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 14:27:17,955 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:27:17,961 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:27:17,966 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$231&nbsp;NZD</span></span>)
2024-11-15 14:27:17,966 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 14:27:17,971 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span class="_j1kt73">$231&nbsp;NZD</span>)
2024-11-15 14:27:17,971 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 14:27:17,976 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:27:17,976 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:27:17,976 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:27:17,976 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 14:27:17,976 [INFO] price_checker.py:450 - ✓ service_fee: $29 NZD
2024-11-15 14:27:17,976 [INFO] price_checker.py:450 - ✓ taxes: $26 NZD
2024-11-15 14:27:17,976 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:27:17,977 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:27:17,977 [INFO] price_checker.py:457 - check_in: 10/01/2025
2024-11-15 14:27:17,977 [INFO] price_checker.py:457 - check_out: 11/01/2025
2024-11-15 14:27:17,977 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:27:17,977 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:27:17,977 [INFO] price_checker.py:457 - nightly_price: $155 NZD
2024-11-15 14:27:17,977 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 14:27:17,977 [INFO] price_checker.py:457 - service_fee: $29 NZD
2024-11-15 14:27:17,977 [INFO] price_checker.py:457 - taxes: $26 NZD
2024-11-15 14:27:17,977 [INFO] price_checker.py:457 - total: 
2024-11-15 14:27:17,977 [INFO] price_checker.py:559 - ✓ 成功获取 10/01/2025 的价格信息
2024-11-15 14:27:17,977 [INFO] price_checker.py:553 - [52/72] 处理日期: 11/01/2025
2024-11-15 14:27:17,977 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 14:27:17,978 [INFO] price_checker.py:255 - 入住日期: 11/01/2025
2024-11-15 14:27:18,252 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:27:18,252 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[contains(@class, '_wgmchy')]//span[contains(text(), '$') and contains(text(), 'NZD')]
2024-11-15 14:27:23,092 [INFO] price_checker.py:271 - 开始检查日期 11/01/2025 的最小入住要求...
2024-11-15 14:27:23,095 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="11, Saturday, January 2025. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-11/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">11</div></td>
2024-11-15 14:27:23,105 [INFO] price_checker.py:158 - 找到日期: 11/01/2025
2024-11-15 14:27:23,105 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:27:24,431 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:27:24,431 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:27:28,265 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:27:28,265 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:27:33,134 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:27:34,253 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:27:34,259 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:27:34,259 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 14:27:34,260 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:27:34,261 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:27:34,261 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:27:34,261 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2025-01-11&check_out=2025-01-12&adults=3&children=0&infants=0
2024-11-15 14:27:34,467 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:27:34,468 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w ._11jcbg2
2024-11-15 14:27:38,273 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 14:27:38,274 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:27:39,351 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:27:39,355 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:27:41,368 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:27:41,368 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:27:44,485 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:27:44,486 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[contains(@class, '_wgmchy')]//span[contains(text(), '$') and contains(text(), 'NZD')]
2024-11-15 14:27:48,299 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:27:51,404 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:27:51,404 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:27:54,526 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:27:54,526 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:27:58,341 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:28:01,436 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:28:01,436 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:28:01,442 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:28:01,457 [INFO] price_checker.py:337 - 找到可见价格元素: $155 NZD 
night
$155 NZD per night
2024-11-15 14:28:01,462 [INFO] price_checker.py:350 - 找到每晚价格元素: $155 NZD 
night
$155 NZD per night
2024-11-15 14:28:01,462 [INFO] price_checker.py:356 - 成功解析折扣价格: $155 NZD
2024-11-15 14:28:01,462 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:28:04,554 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 14:28:04,555 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:28:08,361 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:28:11,487 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 14:28:11,488 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:28:11,494 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:28:11,500 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:28:11,500 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:28:11,500 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:28:11,507 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:28:11,512 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:28:11,512 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:28:11,512 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:28:11,518 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:28:11,524 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 14:28:11,524 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 14:28:11,524 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:28:11,531 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:28:11,536 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 14:28:11,536 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $29 NZD
2024-11-15 14:28:11,536 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:28:11,543 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:28:11,548 [INFO] price_checker.py:403 - 找到价格元素: $26 NZD (HTML: <span class="_1k4xcdh">$26&nbsp;NZD</span>)
2024-11-15 14:28:11,548 [INFO] price_checker.py:416 - ✓ 成功设置税费: $26 NZD
2024-11-15 14:28:11,548 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:28:14,565 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:28:18,381 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:28:21,578 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:28:21,585 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:28:21,591 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span class="_j1kt73">$231&nbsp;NZD</span>)
2024-11-15 14:28:21,591 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 14:28:21,591 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:28:21,598 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:28:21,602 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$231&nbsp;NZD</span></span>)
2024-11-15 14:28:21,602 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 14:28:21,607 [INFO] price_checker.py:403 - 找到价格元素: $231 NZD (HTML: <span class="_j1kt73">$231&nbsp;NZD</span>)
2024-11-15 14:28:21,607 [INFO] price_checker.py:420 - ✓ 成功设置总价: $231 NZD
2024-11-15 14:28:21,611 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:28:21,612 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:28:21,612 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:28:21,612 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 14:28:21,612 [INFO] price_checker.py:450 - ✓ service_fee: $29 NZD
2024-11-15 14:28:21,612 [INFO] price_checker.py:450 - ✓ taxes: $26 NZD
2024-11-15 14:28:21,612 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:28:21,612 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:28:21,612 [INFO] price_checker.py:457 - check_in: 11/01/2025
2024-11-15 14:28:21,612 [INFO] price_checker.py:457 - check_out: 12/01/2025
2024-11-15 14:28:21,612 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:28:21,612 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:28:21,612 [INFO] price_checker.py:457 - nightly_price: $155 NZD
2024-11-15 14:28:21,612 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 14:28:21,612 [INFO] price_checker.py:457 - service_fee: $29 NZD
2024-11-15 14:28:21,613 [INFO] price_checker.py:457 - taxes: $26 NZD
2024-11-15 14:28:21,613 [INFO] price_checker.py:457 - total: 
2024-11-15 14:28:21,613 [INFO] price_checker.py:559 - ✓ 成功获取 11/01/2025 的价格信息
2024-11-15 14:28:21,613 [INFO] price_checker.py:553 - [53/72] 处理日期: 12/01/2025
2024-11-15 14:28:21,613 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 14:28:21,613 [INFO] price_checker.py:255 - 入住日期: 12/01/2025
2024-11-15 14:28:24,596 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:28:27,361 [INFO] price_checker.py:271 - 开始检查日期 12/01/2025 的最小入住要求...
2024-11-15 14:28:27,363 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_1mv3p4vt" role="button" aria-disabled="false" aria-label="12, Sunday, January 2025. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-12/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">12</div></td>
2024-11-15 14:28:27,372 [INFO] price_checker.py:158 - 找到日期: 12/01/2025
2024-11-15 14:28:27,373 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:28:28,422 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:28:34,630 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:28:37,419 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:28:38,465 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:28:38,533 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:28:38,538 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:28:38,538 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 14:28:38,539 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:28:38,540 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:28:38,540 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:28:38,540 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2025-01-12&check_out=2025-01-13&adults=3&children=0&infants=0
2024-11-15 14:28:43,629 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:28:43,632 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:28:44,651 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:28:45,643 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:28:45,643 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:28:48,491 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:28:54,664 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:28:55,659 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:28:55,659 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:29:04,681 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:29:05,674 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:29:05,675 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:29:05,681 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:29:05,696 [INFO] price_checker.py:337 - 找到可见价格元素: $162 NZD 
night
$162 NZD per night
2024-11-15 14:29:05,701 [INFO] price_checker.py:350 - 找到每晚价格元素: $162 NZD 
night
$162 NZD per night
2024-11-15 14:29:05,701 [INFO] price_checker.py:356 - 成功解析折扣价格: $162 NZD
2024-11-15 14:29:05,701 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:29:08,515 [WARNING] price_checker.py:443 - 尝试点击价格展开按钮失败: Message: no such element: Unable to locate element: {"method":"xpath","selector":"//button[contains(@class, '_12wl7g09')]"}
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00952BFE]
	(No symbol) [0x00952CDB]
	(No symbol) [0x0098EBD2]
	(No symbol) [0x00973954]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:29:08,515 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:29:08,515 [WARNING] price_checker.py:452 - ✗ cleaning_fee 未获取到
2024-11-15 14:29:08,515 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 14:29:08,516 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 14:29:08,516 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:29:08,516 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:29:08,516 [INFO] price_checker.py:457 - check_in: 17/01/2025
2024-11-15 14:29:08,516 [INFO] price_checker.py:457 - check_out: 18/01/2025
2024-11-15 14:29:08,516 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:29:08,516 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:29:08,516 [INFO] price_checker.py:457 - nightly_price: None
2024-11-15 14:29:08,516 [INFO] price_checker.py:457 - cleaning_fee: None
2024-11-15 14:29:08,516 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 14:29:08,516 [INFO] price_checker.py:457 - taxes: None
2024-11-15 14:29:08,516 [INFO] price_checker.py:457 - total: None
2024-11-15 14:29:08,516 [INFO] price_checker.py:559 - ✓ 成功获取 17/01/2025 的价格信息
2024-11-15 14:29:08,517 [INFO] price_checker.py:553 - [34/37] 处理日期: 23/01/2025
2024-11-15 14:29:08,517 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-15 14:29:08,517 [INFO] price_checker.py:255 - 入住日期: 23/01/2025
2024-11-15 14:29:13,639 [INFO] price_checker.py:271 - 开始检查日期 23/01/2025 的最小入住要求...
2024-11-15 14:29:13,642 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="23, Thursday, January 2025. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-23/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">23</div></td>
2024-11-15 14:29:13,652 [INFO] price_checker.py:158 - 找到日期: 23/01/2025
2024-11-15 14:29:13,652 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:29:14,744 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:29:15,709 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 14:29:15,709 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:29:15,716 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:29:15,722 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:29:15,722 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:29:15,722 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:29:15,729 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:29:15,734 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:29:15,734 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:29:15,734 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:29:15,740 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:29:15,745 [INFO] price_checker.py:403 - 找到价格元素: $30 NZD (HTML: <span class="_1k4xcdh">$30&nbsp;NZD</span>)
2024-11-15 14:29:15,745 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $30 NZD
2024-11-15 14:29:15,745 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:29:15,751 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:29:15,756 [INFO] price_checker.py:403 - 找到价格元素: $30 NZD (HTML: <span class="_1k4xcdh">$30&nbsp;NZD</span>)
2024-11-15 14:29:15,756 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $30 NZD
2024-11-15 14:29:15,756 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:29:15,763 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:29:15,767 [INFO] price_checker.py:403 - 找到价格元素: $27 NZD (HTML: <span class="_1k4xcdh">$27&nbsp;NZD</span>)
2024-11-15 14:29:15,767 [INFO] price_checker.py:416 - ✓ 成功设置税费: $27 NZD
2024-11-15 14:29:15,767 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:29:23,669 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:29:24,770 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:29:24,776 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:29:24,776 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 14:29:24,777 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:29:24,777 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:29:24,777 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:29:24,778 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/837352260137971048?check_in=2025-01-23&check_out=2025-01-24&adults=3&children=0&infants=0
2024-11-15 14:29:25,779 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:29:25,786 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:29:25,791 [INFO] price_checker.py:403 - 找到价格元素: $239 NZD (HTML: <span class="_j1kt73">$239&nbsp;NZD</span>)
2024-11-15 14:29:25,791 [INFO] price_checker.py:420 - ✓ 成功设置总价: $239 NZD
2024-11-15 14:29:25,792 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:29:25,799 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:29:25,803 [INFO] price_checker.py:403 - 找到价格元素: $239 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$239&nbsp;NZD</span></span>)
2024-11-15 14:29:25,803 [INFO] price_checker.py:420 - ✓ 成功设置总价: $239 NZD
2024-11-15 14:29:25,808 [INFO] price_checker.py:403 - 找到价格元素: $239 NZD (HTML: <span class="_j1kt73">$239&nbsp;NZD</span>)
2024-11-15 14:29:25,808 [INFO] price_checker.py:420 - ✓ 成功设置总价: $239 NZD
2024-11-15 14:29:25,813 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:29:25,813 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:29:25,813 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:29:25,814 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 14:29:25,814 [INFO] price_checker.py:450 - ✓ service_fee: $30 NZD
2024-11-15 14:29:25,814 [INFO] price_checker.py:450 - ✓ taxes: $27 NZD
2024-11-15 14:29:25,814 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:29:25,814 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:29:25,814 [INFO] price_checker.py:457 - check_in: 12/01/2025
2024-11-15 14:29:25,814 [INFO] price_checker.py:457 - check_out: 13/01/2025
2024-11-15 14:29:25,814 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:29:25,814 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:29:25,814 [INFO] price_checker.py:457 - nightly_price: $162 NZD
2024-11-15 14:29:25,814 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 14:29:25,814 [INFO] price_checker.py:457 - service_fee: $30 NZD
2024-11-15 14:29:25,814 [INFO] price_checker.py:457 - taxes: $27 NZD
2024-11-15 14:29:25,815 [INFO] price_checker.py:457 - total: 
2024-11-15 14:29:25,815 [INFO] price_checker.py:559 - ✓ 成功获取 12/01/2025 的价格信息
2024-11-15 14:29:25,815 [INFO] price_checker.py:553 - [54/72] 处理日期: 13/01/2025
2024-11-15 14:29:25,815 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 14:29:25,815 [INFO] price_checker.py:255 - 入住日期: 13/01/2025
2024-11-15 14:29:29,866 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:29:29,869 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:29:30,937 [INFO] price_checker.py:271 - 开始检查日期 13/01/2025 的最小入住要求...
2024-11-15 14:29:30,940 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_sl5yz7r" role="button" aria-disabled="false" aria-label="13, Monday, January 2025. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-13/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">13</div></td>
2024-11-15 14:29:30,951 [INFO] price_checker.py:158 - 找到日期: 13/01/2025
2024-11-15 14:29:30,951 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:29:31,879 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:29:31,879 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:29:34,779 [WARNING] price_checker.py:443 - 尝试点击价格展开按钮失败: Message: no such element: Unable to locate element: {"method":"xpath","selector":"//button[contains(@class, '_12wl7g09')]"}
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00952BFE]
	(No symbol) [0x00952CDB]
	(No symbol) [0x0098EBD2]
	(No symbol) [0x00973954]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:29:34,779 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:29:34,779 [WARNING] price_checker.py:452 - ✗ cleaning_fee 未获取到
2024-11-15 14:29:34,779 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 14:29:34,779 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 14:29:34,779 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:29:34,779 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:29:34,780 [INFO] price_checker.py:457 - check_in: 22/01/2025
2024-11-15 14:29:34,780 [INFO] price_checker.py:457 - check_out: 23/01/2025
2024-11-15 14:29:34,780 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:29:34,780 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:29:34,780 [INFO] price_checker.py:457 - nightly_price: None
2024-11-15 14:29:34,780 [INFO] price_checker.py:457 - cleaning_fee: None
2024-11-15 14:29:34,780 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 14:29:34,780 [INFO] price_checker.py:457 - taxes: None
2024-11-15 14:29:34,780 [INFO] price_checker.py:457 - total: None
2024-11-15 14:29:34,780 [INFO] price_checker.py:559 - ✓ 成功获取 22/01/2025 的价格信息
2024-11-15 14:29:34,780 [INFO] price_checker.py:553 - [35/39] 处理日期: 27/01/2025
2024-11-15 14:29:34,780 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/43435162
2024-11-15 14:29:34,780 [INFO] price_checker.py:255 - 入住日期: 27/01/2025
2024-11-15 14:29:39,913 [INFO] price_checker.py:271 - 开始检查日期 27/01/2025 的最小入住要求...
2024-11-15 14:29:39,917 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_sl5yz7r" role="button" aria-disabled="false" aria-label="27, Monday, January 2025. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-27/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">27</div></td>
2024-11-15 14:29:39,926 [INFO] price_checker.py:158 - 找到日期: 27/01/2025
2024-11-15 14:29:39,926 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:29:40,956 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:29:41,931 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:29:41,931 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:29:42,066 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:29:42,071 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:29:42,071 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 14:29:42,072 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:29:42,073 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:29:42,073 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:29:42,073 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2025-01-13&check_out=2025-01-14&adults=3&children=0&infants=0
2024-11-15 14:29:47,179 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:29:47,182 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:29:49,193 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:29:49,193 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:29:49,931 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:29:51,045 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:29:51,050 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:29:51,051 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 14:29:51,052 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:29:51,052 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:29:51,052 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:29:51,052 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/43435162?check_in=2025-01-27&check_out=2025-01-28&adults=3&children=0&infants=0
2024-11-15 14:29:51,936 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:29:51,936 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:29:56,141 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:29:56,144 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:29:58,155 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:29:58,155 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:29:59,232 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:29:59,232 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:30:01,939 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:30:01,939 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w ._11jcbg2
2024-11-15 14:30:08,167 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:30:08,167 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:30:09,242 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:30:09,242 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:30:09,248 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:30:09,263 [INFO] price_checker.py:337 - 找到可见价格元素: $164 NZD 
night
$164 NZD per night
2024-11-15 14:30:09,268 [INFO] price_checker.py:350 - 找到每晚价格元素: $164 NZD 
night
$164 NZD per night
2024-11-15 14:30:09,269 [INFO] price_checker.py:356 - 成功解析折扣价格: $164 NZD
2024-11-15 14:30:09,269 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:30:11,949 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:30:11,950 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[contains(@class, '_wgmchy')]//span[contains(text(), '$') and contains(text(), 'NZD')]
2024-11-15 14:30:18,194 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:30:18,194 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:30:19,303 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 14:30:19,303 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:30:19,310 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:30:19,316 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:30:19,316 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:30:19,317 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:30:19,324 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:30:19,332 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:30:19,332 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:30:19,332 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:30:19,342 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:30:19,350 [INFO] price_checker.py:403 - 找到价格元素: $30 NZD (HTML: <span class="_1k4xcdh">$30&nbsp;NZD</span>)
2024-11-15 14:30:19,350 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $30 NZD
2024-11-15 14:30:19,351 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:30:19,357 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:30:19,362 [INFO] price_checker.py:403 - 找到价格元素: $30 NZD (HTML: <span class="_1k4xcdh">$30&nbsp;NZD</span>)
2024-11-15 14:30:19,362 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $30 NZD
2024-11-15 14:30:19,362 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:30:19,368 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:30:19,373 [INFO] price_checker.py:403 - 找到价格元素: $28 NZD (HTML: <span class="_1k4xcdh">$28&nbsp;NZD</span>)
2024-11-15 14:30:19,373 [INFO] price_checker.py:416 - ✓ 成功设置税费: $28 NZD
2024-11-15 14:30:19,373 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:30:21,976 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:30:21,976 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:30:28,216 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:30:28,217 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w ._11jcbg2
2024-11-15 14:30:29,400 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:30:29,407 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:30:29,412 [INFO] price_checker.py:403 - 找到价格元素: $242 NZD (HTML: <span class="_j1kt73">$242&nbsp;NZD</span>)
2024-11-15 14:30:29,412 [INFO] price_checker.py:420 - ✓ 成功设置总价: $242 NZD
2024-11-15 14:30:29,412 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:30:29,421 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:30:29,427 [INFO] price_checker.py:403 - 找到价格元素: $242 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$242&nbsp;NZD</span></span>)
2024-11-15 14:30:29,427 [INFO] price_checker.py:420 - ✓ 成功设置总价: $242 NZD
2024-11-15 14:30:29,433 [INFO] price_checker.py:403 - 找到价格元素: $242 NZD (HTML: <span class="_j1kt73">$242&nbsp;NZD</span>)
2024-11-15 14:30:29,433 [INFO] price_checker.py:420 - ✓ 成功设置总价: $242 NZD
2024-11-15 14:30:29,442 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:30:29,442 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:30:29,442 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:30:29,442 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 14:30:29,442 [INFO] price_checker.py:450 - ✓ service_fee: $30 NZD
2024-11-15 14:30:29,442 [INFO] price_checker.py:450 - ✓ taxes: $28 NZD
2024-11-15 14:30:29,442 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:30:29,442 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:30:29,442 [INFO] price_checker.py:457 - check_in: 13/01/2025
2024-11-15 14:30:29,442 [INFO] price_checker.py:457 - check_out: 14/01/2025
2024-11-15 14:30:29,443 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:30:29,443 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:30:29,443 [INFO] price_checker.py:457 - nightly_price: $164 NZD
2024-11-15 14:30:29,443 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 14:30:29,443 [INFO] price_checker.py:457 - service_fee: $30 NZD
2024-11-15 14:30:29,443 [INFO] price_checker.py:457 - taxes: $28 NZD
2024-11-15 14:30:29,443 [INFO] price_checker.py:457 - total: 
2024-11-15 14:30:29,443 [INFO] price_checker.py:559 - ✓ 成功获取 13/01/2025 的价格信息
2024-11-15 14:30:29,443 [INFO] price_checker.py:553 - [55/72] 处理日期: 14/01/2025
2024-11-15 14:30:29,443 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 14:30:29,443 [INFO] price_checker.py:255 - 入住日期: 14/01/2025
2024-11-15 14:30:31,993 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 14:30:31,993 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:30:34,561 [INFO] price_checker.py:271 - 开始检查日期 14/01/2025 的最小入住要求...
2024-11-15 14:30:34,564 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="14, Tuesday, January 2025. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-14/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">14</div></td>
2024-11-15 14:30:34,574 [INFO] price_checker.py:158 - 找到日期: 14/01/2025
2024-11-15 14:30:34,574 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:30:38,277 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:30:38,277 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[contains(@class, '_wgmchy')]//span[contains(text(), '$') and contains(text(), 'NZD')]
2024-11-15 14:30:41,999 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:30:44,606 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:30:45,716 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:30:45,722 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:30:45,722 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 14:30:45,723 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:30:45,724 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:30:45,724 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:30:45,724 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2025-01-14&check_out=2025-01-15&adults=3&children=0&infants=0
2024-11-15 14:30:48,297 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:30:48,297 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:30:50,824 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:30:50,827 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:30:52,008 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:30:52,842 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:30:52,842 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:30:58,305 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 14:30:58,305 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:31:02,033 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:31:02,869 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:31:02,869 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:31:08,327 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:31:12,049 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:31:12,889 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:31:12,889 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:31:12,895 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:31:12,910 [INFO] price_checker.py:337 - 找到可见价格元素: $169 NZD 
night
$169 NZD per night
2024-11-15 14:31:12,915 [INFO] price_checker.py:350 - 找到每晚价格元素: $169 NZD 
night
$169 NZD per night
2024-11-15 14:31:12,915 [INFO] price_checker.py:356 - 成功解析折扣价格: $169 NZD
2024-11-15 14:31:12,915 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:31:12,921 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 14:31:13,426 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:31:13,433 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:31:13,439 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:31:13,439 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:31:13,439 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:31:13,445 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:31:13,450 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:31:13,450 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:31:13,450 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:31:13,457 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:31:13,462 [INFO] price_checker.py:403 - 找到价格元素: $31 NZD (HTML: <span class="_1k4xcdh">$31&nbsp;NZD</span>)
2024-11-15 14:31:13,462 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $31 NZD
2024-11-15 14:31:13,462 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:31:13,468 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:31:13,472 [INFO] price_checker.py:403 - 找到价格元素: $31 NZD (HTML: <span class="_1k4xcdh">$31&nbsp;NZD</span>)
2024-11-15 14:31:13,472 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $31 NZD
2024-11-15 14:31:13,473 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:31:13,479 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:31:13,484 [INFO] price_checker.py:403 - 找到价格元素: $28 NZD (HTML: <span class="_1k4xcdh">$28&nbsp;NZD</span>)
2024-11-15 14:31:13,484 [INFO] price_checker.py:416 - ✓ 成功设置税费: $28 NZD
2024-11-15 14:31:13,484 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:31:18,347 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:31:22,061 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:31:23,509 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:31:23,515 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:31:23,520 [INFO] price_checker.py:403 - 找到价格元素: $247 NZD (HTML: <span class="_j1kt73">$247&nbsp;NZD</span>)
2024-11-15 14:31:23,520 [INFO] price_checker.py:420 - ✓ 成功设置总价: $247 NZD
2024-11-15 14:31:23,521 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:31:23,528 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:31:23,533 [INFO] price_checker.py:403 - 找到价格元素: $247 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$247&nbsp;NZD</span></span>)
2024-11-15 14:31:23,533 [INFO] price_checker.py:420 - ✓ 成功设置总价: $247 NZD
2024-11-15 14:31:23,537 [INFO] price_checker.py:403 - 找到价格元素: $247 NZD (HTML: <span class="_j1kt73">$247&nbsp;NZD</span>)
2024-11-15 14:31:23,537 [INFO] price_checker.py:420 - ✓ 成功设置总价: $247 NZD
2024-11-15 14:31:23,543 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:31:23,543 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:31:23,543 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:31:23,543 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 14:31:23,543 [INFO] price_checker.py:450 - ✓ service_fee: $31 NZD
2024-11-15 14:31:23,543 [INFO] price_checker.py:450 - ✓ taxes: $28 NZD
2024-11-15 14:31:23,543 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:31:23,544 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:31:23,544 [INFO] price_checker.py:457 - check_in: 14/01/2025
2024-11-15 14:31:23,544 [INFO] price_checker.py:457 - check_out: 15/01/2025
2024-11-15 14:31:23,544 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:31:23,544 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:31:23,544 [INFO] price_checker.py:457 - nightly_price: $169 NZD
2024-11-15 14:31:23,544 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 14:31:23,544 [INFO] price_checker.py:457 - service_fee: $31 NZD
2024-11-15 14:31:23,544 [INFO] price_checker.py:457 - taxes: $28 NZD
2024-11-15 14:31:23,544 [INFO] price_checker.py:457 - total: 
2024-11-15 14:31:23,544 [INFO] price_checker.py:559 - ✓ 成功获取 14/01/2025 的价格信息
2024-11-15 14:31:23,544 [INFO] price_checker.py:573 - 已完成 55/72 个日期的处理
2024-11-15 14:31:28,359 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:31:32,077 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:31:33,545 [INFO] price_checker.py:553 - [56/72] 处理日期: 15/01/2025
2024-11-15 14:31:33,545 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 14:31:33,545 [INFO] price_checker.py:255 - 入住日期: 15/01/2025
2024-11-15 14:31:38,373 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:31:38,672 [INFO] price_checker.py:271 - 开始检查日期 15/01/2025 的最小入住要求...
2024-11-15 14:31:38,675 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="15, Wednesday, January 2025. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-15/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">15</div></td>
2024-11-15 14:31:38,686 [INFO] price_checker.py:158 - 找到日期: 15/01/2025
2024-11-15 14:31:38,686 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:31:42,094 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:31:48,391 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:31:48,718 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:31:49,827 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:31:49,832 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:31:49,832 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 14:31:49,833 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:31:49,834 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:31:49,834 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:31:49,834 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2025-01-15&check_out=2025-01-16&adults=3&children=0&infants=0
2024-11-15 14:31:54,921 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:31:54,924 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:31:56,935 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:31:56,935 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:31:58,451 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:32:02,110 [WARNING] price_checker.py:443 - 尝试点击价格展开按钮失败: Message: no such element: Unable to locate element: {"method":"xpath","selector":"//button[contains(@class, '_12wl7g09')]"}
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00952BFE]
	(No symbol) [0x00952CDB]
	(No symbol) [0x0098EBD2]
	(No symbol) [0x00973954]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:32:02,111 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:32:02,111 [WARNING] price_checker.py:452 - ✗ cleaning_fee 未获取到
2024-11-15 14:32:02,111 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 14:32:02,111 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 14:32:02,111 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:32:02,111 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:32:02,111 [INFO] price_checker.py:457 - check_in: 23/01/2025
2024-11-15 14:32:02,111 [INFO] price_checker.py:457 - check_out: 24/01/2025
2024-11-15 14:32:02,111 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:32:02,111 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:32:02,112 [INFO] price_checker.py:457 - nightly_price: None
2024-11-15 14:32:02,112 [INFO] price_checker.py:457 - cleaning_fee: None
2024-11-15 14:32:02,112 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 14:32:02,112 [INFO] price_checker.py:457 - taxes: None
2024-11-15 14:32:02,112 [INFO] price_checker.py:457 - total: None
2024-11-15 14:32:02,112 [INFO] price_checker.py:559 - ✓ 成功获取 23/01/2025 的价格信息
2024-11-15 14:32:02,112 [INFO] price_checker.py:553 - [35/37] 处理日期: 24/01/2025
2024-11-15 14:32:02,112 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-15 14:32:02,112 [INFO] price_checker.py:255 - 入住日期: 24/01/2025
2024-11-15 14:32:06,949 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:32:06,949 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:32:07,230 [INFO] price_checker.py:271 - 开始检查日期 24/01/2025 的最小入住要求...
2024-11-15 14:32:07,233 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="24, Friday, January 2025. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-24/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">24</div></td>
2024-11-15 14:32:07,242 [INFO] price_checker.py:158 - 找到日期: 24/01/2025
2024-11-15 14:32:07,243 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:32:08,466 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:32:16,960 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:32:16,960 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:32:16,966 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:32:16,981 [INFO] price_checker.py:337 - 找到可见价格元素: $165 NZD 
night
$165 NZD per night
2024-11-15 14:32:16,986 [INFO] price_checker.py:350 - 找到每晚价格元素: $165 NZD 
night
$165 NZD per night
2024-11-15 14:32:16,987 [INFO] price_checker.py:356 - 成功解析折扣价格: $165 NZD
2024-11-15 14:32:16,987 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:32:16,993 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 14:32:17,271 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:32:17,496 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:32:17,503 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:32:17,509 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:32:17,509 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:32:17,509 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:32:17,515 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:32:17,520 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:32:17,521 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:32:17,521 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:32:17,527 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:32:17,532 [INFO] price_checker.py:403 - 找到价格元素: $30 NZD (HTML: <span class="_1k4xcdh">$30&nbsp;NZD</span>)
2024-11-15 14:32:17,532 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $30 NZD
2024-11-15 14:32:17,532 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:32:17,539 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:32:17,543 [INFO] price_checker.py:403 - 找到价格元素: $30 NZD (HTML: <span class="_1k4xcdh">$30&nbsp;NZD</span>)
2024-11-15 14:32:17,543 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $30 NZD
2024-11-15 14:32:17,543 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:32:17,550 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:32:17,554 [INFO] price_checker.py:403 - 找到价格元素: $28 NZD (HTML: <span class="_1k4xcdh">$28&nbsp;NZD</span>)
2024-11-15 14:32:17,554 [INFO] price_checker.py:416 - ✓ 成功设置税费: $28 NZD
2024-11-15 14:32:17,554 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:32:18,370 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:32:18,375 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:32:18,376 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 14:32:18,377 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:32:18,377 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:32:18,377 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:32:18,377 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/837352260137971048?check_in=2025-01-24&check_out=2025-01-25&adults=3&children=0&infants=0
2024-11-15 14:32:23,503 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:32:23,506 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:32:25,520 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:32:25,520 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:32:27,573 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:32:27,580 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:32:27,585 [INFO] price_checker.py:403 - 找到价格元素: $243 NZD (HTML: <span class="_j1kt73">$243&nbsp;NZD</span>)
2024-11-15 14:32:27,585 [INFO] price_checker.py:420 - ✓ 成功设置总价: $243 NZD
2024-11-15 14:32:27,585 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:32:27,592 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:32:27,596 [INFO] price_checker.py:403 - 找到价格元素: $243 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$243&nbsp;NZD</span></span>)
2024-11-15 14:32:27,596 [INFO] price_checker.py:420 - ✓ 成功设置总价: $243 NZD
2024-11-15 14:32:27,600 [INFO] price_checker.py:403 - 找到价格元素: $243 NZD (HTML: <span class="_j1kt73">$243&nbsp;NZD</span>)
2024-11-15 14:32:27,601 [INFO] price_checker.py:420 - ✓ 成功设置总价: $243 NZD
2024-11-15 14:32:27,605 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:32:27,605 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:32:27,605 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:32:27,605 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 14:32:27,605 [INFO] price_checker.py:450 - ✓ service_fee: $30 NZD
2024-11-15 14:32:27,605 [INFO] price_checker.py:450 - ✓ taxes: $28 NZD
2024-11-15 14:32:27,605 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:32:27,606 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:32:27,606 [INFO] price_checker.py:457 - check_in: 15/01/2025
2024-11-15 14:32:27,606 [INFO] price_checker.py:457 - check_out: 16/01/2025
2024-11-15 14:32:27,606 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:32:27,606 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:32:27,606 [INFO] price_checker.py:457 - nightly_price: $165 NZD
2024-11-15 14:32:27,606 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 14:32:27,606 [INFO] price_checker.py:457 - service_fee: $30 NZD
2024-11-15 14:32:27,606 [INFO] price_checker.py:457 - taxes: $28 NZD
2024-11-15 14:32:27,606 [INFO] price_checker.py:457 - total: 
2024-11-15 14:32:27,606 [INFO] price_checker.py:559 - ✓ 成功获取 15/01/2025 的价格信息
2024-11-15 14:32:27,606 [INFO] price_checker.py:553 - [57/72] 处理日期: 16/01/2025
2024-11-15 14:32:27,606 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 14:32:27,606 [INFO] price_checker.py:255 - 入住日期: 16/01/2025
2024-11-15 14:32:28,502 [WARNING] price_checker.py:443 - 尝试点击价格展开按钮失败: Message: no such element: Unable to locate element: {"method":"xpath","selector":"//button[contains(@class, '_12wl7g09')]"}
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00952BFE]
	(No symbol) [0x00952CDB]
	(No symbol) [0x0098EBD2]
	(No symbol) [0x00973954]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:32:28,502 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:32:28,502 [WARNING] price_checker.py:452 - ✗ cleaning_fee 未获取到
2024-11-15 14:32:28,503 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 14:32:28,503 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 14:32:28,503 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:32:28,503 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:32:28,503 [INFO] price_checker.py:457 - check_in: 27/01/2025
2024-11-15 14:32:28,503 [INFO] price_checker.py:457 - check_out: 28/01/2025
2024-11-15 14:32:28,503 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:32:28,503 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:32:28,503 [INFO] price_checker.py:457 - nightly_price: None
2024-11-15 14:32:28,503 [INFO] price_checker.py:457 - cleaning_fee: None
2024-11-15 14:32:28,503 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 14:32:28,504 [INFO] price_checker.py:457 - taxes: None
2024-11-15 14:32:28,504 [INFO] price_checker.py:457 - total: None
2024-11-15 14:32:28,504 [INFO] price_checker.py:559 - ✓ 成功获取 27/01/2025 的价格信息
2024-11-15 14:32:28,504 [INFO] price_checker.py:573 - 已完成 35/39 个日期的处理
2024-11-15 14:32:33,233 [INFO] price_checker.py:271 - 开始检查日期 16/01/2025 的最小入住要求...
2024-11-15 14:32:33,236 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="16, Thursday, January 2025. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-16/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">16</div></td>
2024-11-15 14:32:33,245 [INFO] price_checker.py:158 - 找到日期: 16/01/2025
2024-11-15 14:32:33,246 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:32:35,577 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:32:35,578 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:32:38,504 [INFO] price_checker.py:553 - [36/39] 处理日期: 28/01/2025
2024-11-15 14:32:38,504 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/43435162
2024-11-15 14:32:38,504 [INFO] price_checker.py:255 - 入住日期: 28/01/2025
2024-11-15 14:32:43,260 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:32:43,649 [INFO] price_checker.py:271 - 开始检查日期 28/01/2025 的最小入住要求...
2024-11-15 14:32:43,663 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="28, Tuesday, January 2025. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-28/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">28</div></td>
2024-11-15 14:32:43,677 [INFO] price_checker.py:158 - 找到日期: 28/01/2025
2024-11-15 14:32:43,677 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:32:44,383 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:32:44,388 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:32:44,388 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 14:32:44,389 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:32:44,390 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:32:44,390 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:32:44,390 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2025-01-16&check_out=2025-01-17&adults=3&children=0&infants=0
2024-11-15 14:32:45,619 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:32:45,619 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:32:49,498 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:32:49,501 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:32:51,512 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:32:51,512 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:32:53,731 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:32:54,842 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:32:54,848 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:32:54,849 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 14:32:54,850 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:32:54,851 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:32:54,851 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:32:54,851 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/43435162?check_in=2025-01-28&check_out=2025-01-29&adults=3&children=0&infants=0
2024-11-15 14:32:55,677 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:32:55,677 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w ._11jcbg2
2024-11-15 14:32:59,949 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:32:59,952 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:33:01,540 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:33:01,540 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:33:01,962 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:33:01,962 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:33:05,690 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:33:05,690 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[contains(@class, '_wgmchy')]//span[contains(text(), '$') and contains(text(), 'NZD')]
2024-11-15 14:33:11,555 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:33:11,555 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:33:11,561 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:33:11,576 [INFO] price_checker.py:337 - 找到可见价格元素: $176 NZD 
night
$176 NZD per night
2024-11-15 14:33:11,582 [INFO] price_checker.py:350 - 找到每晚价格元素: $176 NZD 
night
$176 NZD per night
2024-11-15 14:33:11,582 [INFO] price_checker.py:356 - 成功解析折扣价格: $176 NZD
2024-11-15 14:33:11,582 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:33:11,589 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 14:33:11,992 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:33:11,993 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:33:12,092 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:33:12,100 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:33:12,106 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:33:12,106 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:33:12,106 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:33:12,113 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:33:12,118 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:33:12,118 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:33:12,118 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:33:12,125 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:33:12,130 [INFO] price_checker.py:403 - 找到价格元素: $32 NZD (HTML: <span class="_1k4xcdh">$32&nbsp;NZD</span>)
2024-11-15 14:33:12,130 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $32 NZD
2024-11-15 14:33:12,130 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:33:12,137 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:33:12,142 [INFO] price_checker.py:403 - 找到价格元素: $32 NZD (HTML: <span class="_1k4xcdh">$32&nbsp;NZD</span>)
2024-11-15 14:33:12,142 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $32 NZD
2024-11-15 14:33:12,142 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:33:12,149 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:33:12,154 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 14:33:12,154 [INFO] price_checker.py:416 - ✓ 成功设置税费: $29 NZD
2024-11-15 14:33:12,154 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:33:15,712 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:33:15,712 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:33:22,019 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:33:22,020 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:33:22,175 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:33:22,182 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:33:22,187 [INFO] price_checker.py:403 - 找到价格元素: $255 NZD (HTML: <span class="_j1kt73">$255&nbsp;NZD</span>)
2024-11-15 14:33:22,188 [INFO] price_checker.py:420 - ✓ 成功设置总价: $255 NZD
2024-11-15 14:33:22,188 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:33:22,194 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:33:22,199 [INFO] price_checker.py:403 - 找到价格元素: $255 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$255&nbsp;NZD</span></span>)
2024-11-15 14:33:22,199 [INFO] price_checker.py:420 - ✓ 成功设置总价: $255 NZD
2024-11-15 14:33:22,204 [INFO] price_checker.py:403 - 找到价格元素: $255 NZD (HTML: <span class="_j1kt73">$255&nbsp;NZD</span>)
2024-11-15 14:33:22,205 [INFO] price_checker.py:420 - ✓ 成功设置总价: $255 NZD
2024-11-15 14:33:22,209 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:33:22,210 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:33:22,210 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:33:22,210 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 14:33:22,210 [INFO] price_checker.py:450 - ✓ service_fee: $32 NZD
2024-11-15 14:33:22,210 [INFO] price_checker.py:450 - ✓ taxes: $29 NZD
2024-11-15 14:33:22,210 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:33:22,210 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:33:22,210 [INFO] price_checker.py:457 - check_in: 16/01/2025
2024-11-15 14:33:22,210 [INFO] price_checker.py:457 - check_out: 17/01/2025
2024-11-15 14:33:22,210 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:33:22,210 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:33:22,210 [INFO] price_checker.py:457 - nightly_price: $176 NZD
2024-11-15 14:33:22,211 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 14:33:22,211 [INFO] price_checker.py:457 - service_fee: $32 NZD
2024-11-15 14:33:22,211 [INFO] price_checker.py:457 - taxes: $29 NZD
2024-11-15 14:33:22,211 [INFO] price_checker.py:457 - total: 
2024-11-15 14:33:22,211 [INFO] price_checker.py:559 - ✓ 成功获取 16/01/2025 的价格信息
2024-11-15 14:33:22,211 [INFO] price_checker.py:553 - [58/72] 处理日期: 17/01/2025
2024-11-15 14:33:22,211 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 14:33:22,211 [INFO] price_checker.py:255 - 入住日期: 17/01/2025
2024-11-15 14:33:25,774 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 14:33:25,774 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:33:27,332 [INFO] price_checker.py:271 - 开始检查日期 17/01/2025 的最小入住要求...
2024-11-15 14:33:27,335 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="17, Friday, January 2025. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-17/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">17</div></td>
2024-11-15 14:33:27,344 [INFO] price_checker.py:158 - 找到日期: 17/01/2025
2024-11-15 14:33:27,344 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:33:32,030 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:33:32,030 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w ._11jcbg2
2024-11-15 14:33:35,801 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:33:37,386 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:33:38,506 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:33:38,511 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:33:38,511 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 14:33:38,512 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:33:38,512 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:33:38,513 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:33:38,513 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2025-01-17&check_out=2025-01-18&adults=3&children=0&infants=0
2024-11-15 14:33:42,090 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:33:42,090 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[contains(@class, '_wgmchy')]//span[contains(text(), '$') and contains(text(), 'NZD')]
2024-11-15 14:33:43,641 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:33:43,645 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:33:45,656 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:33:45,656 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:33:45,804 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:33:52,092 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:33:52,092 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:33:55,673 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:33:55,673 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:33:55,813 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:34:02,113 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 14:34:02,113 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:34:05,691 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:34:05,691 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:34:05,697 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:34:05,715 [INFO] price_checker.py:337 - 找到可见价格元素: $186 NZD 
night
$186 NZD per night
2024-11-15 14:34:05,728 [INFO] price_checker.py:350 - 找到每晚价格元素: $186 NZD 
night
$186 NZD per night
2024-11-15 14:34:05,728 [INFO] price_checker.py:356 - 成功解析折扣价格: $186 NZD
2024-11-15 14:34:05,728 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:34:05,736 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 14:34:05,831 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:34:06,241 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:34:06,248 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:34:06,254 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:34:06,254 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:34:06,254 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:34:06,261 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:34:06,266 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:34:06,266 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:34:06,266 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:34:06,272 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:34:06,277 [INFO] price_checker.py:403 - 找到价格元素: $33 NZD (HTML: <span class="_1k4xcdh">$33&nbsp;NZD</span>)
2024-11-15 14:34:06,277 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $33 NZD
2024-11-15 14:34:06,277 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:34:06,284 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:34:06,288 [INFO] price_checker.py:403 - 找到价格元素: $33 NZD (HTML: <span class="_1k4xcdh">$33&nbsp;NZD</span>)
2024-11-15 14:34:06,288 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $33 NZD
2024-11-15 14:34:06,289 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:34:06,295 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:34:06,300 [INFO] price_checker.py:403 - 找到价格元素: $30 NZD (HTML: <span class="_1k4xcdh">$30&nbsp;NZD</span>)
2024-11-15 14:34:06,300 [INFO] price_checker.py:416 - ✓ 成功设置税费: $30 NZD
2024-11-15 14:34:06,300 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:34:12,125 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:34:15,842 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:34:16,326 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:34:16,333 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:34:16,338 [INFO] price_checker.py:403 - 找到价格元素: $266 NZD (HTML: <span class="_j1kt73">$266&nbsp;NZD</span>)
2024-11-15 14:34:16,339 [INFO] price_checker.py:420 - ✓ 成功设置总价: $266 NZD
2024-11-15 14:34:16,339 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:34:16,346 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:34:16,350 [INFO] price_checker.py:403 - 找到价格元素: $266 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$266&nbsp;NZD</span></span>)
2024-11-15 14:34:16,350 [INFO] price_checker.py:420 - ✓ 成功设置总价: $266 NZD
2024-11-15 14:34:16,355 [INFO] price_checker.py:403 - 找到价格元素: $266 NZD (HTML: <span class="_j1kt73">$266&nbsp;NZD</span>)
2024-11-15 14:34:16,355 [INFO] price_checker.py:420 - ✓ 成功设置总价: $266 NZD
2024-11-15 14:34:16,360 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:34:16,360 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:34:16,360 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:34:16,360 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 14:34:16,360 [INFO] price_checker.py:450 - ✓ service_fee: $33 NZD
2024-11-15 14:34:16,361 [INFO] price_checker.py:450 - ✓ taxes: $30 NZD
2024-11-15 14:34:16,361 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:34:16,361 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:34:16,361 [INFO] price_checker.py:457 - check_in: 17/01/2025
2024-11-15 14:34:16,361 [INFO] price_checker.py:457 - check_out: 18/01/2025
2024-11-15 14:34:16,361 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:34:16,361 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:34:16,361 [INFO] price_checker.py:457 - nightly_price: $186 NZD
2024-11-15 14:34:16,361 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 14:34:16,361 [INFO] price_checker.py:457 - service_fee: $33 NZD
2024-11-15 14:34:16,361 [INFO] price_checker.py:457 - taxes: $30 NZD
2024-11-15 14:34:16,361 [INFO] price_checker.py:457 - total: 
2024-11-15 14:34:16,361 [INFO] price_checker.py:559 - ✓ 成功获取 17/01/2025 的价格信息
2024-11-15 14:34:16,362 [INFO] price_checker.py:553 - [59/72] 处理日期: 18/01/2025
2024-11-15 14:34:16,362 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 14:34:16,362 [INFO] price_checker.py:255 - 入住日期: 18/01/2025
2024-11-15 14:34:21,484 [INFO] price_checker.py:271 - 开始检查日期 18/01/2025 的最小入住要求...
2024-11-15 14:34:21,487 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="18, Saturday, January 2025. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-18/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">18</div></td>
2024-11-15 14:34:21,496 [INFO] price_checker.py:158 - 找到日期: 18/01/2025
2024-11-15 14:34:21,497 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:34:22,135 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:34:25,852 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:34:31,514 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:34:32,150 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:34:32,638 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:34:32,644 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:34:32,644 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 14:34:32,645 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:34:32,645 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:34:32,645 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:34:32,646 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2025-01-18&check_out=2025-01-19&adults=3&children=0&infants=0
2024-11-15 14:34:35,867 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:34:37,762 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:34:37,764 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:34:39,776 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:34:39,776 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:34:42,163 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:34:49,808 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:34:49,808 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:34:52,203 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:34:55,922 [WARNING] price_checker.py:443 - 尝试点击价格展开按钮失败: Message: no such element: Unable to locate element: {"method":"xpath","selector":"//button[contains(@class, '_12wl7g09')]"}
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00952BFE]
	(No symbol) [0x00952CDB]
	(No symbol) [0x0098EBD2]
	(No symbol) [0x00973954]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:34:55,922 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:34:55,922 [WARNING] price_checker.py:452 - ✗ cleaning_fee 未获取到
2024-11-15 14:34:55,922 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 14:34:55,922 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 14:34:55,922 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:34:55,923 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:34:55,923 [INFO] price_checker.py:457 - check_in: 24/01/2025
2024-11-15 14:34:55,923 [INFO] price_checker.py:457 - check_out: 25/01/2025
2024-11-15 14:34:55,923 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:34:55,923 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:34:55,923 [INFO] price_checker.py:457 - nightly_price: None
2024-11-15 14:34:55,923 [INFO] price_checker.py:457 - cleaning_fee: None
2024-11-15 14:34:55,923 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 14:34:55,923 [INFO] price_checker.py:457 - taxes: None
2024-11-15 14:34:55,923 [INFO] price_checker.py:457 - total: None
2024-11-15 14:34:55,923 [INFO] price_checker.py:559 - ✓ 成功获取 24/01/2025 的价格信息
2024-11-15 14:34:55,923 [INFO] price_checker.py:573 - 已完成 35/37 个日期的处理
2024-11-15 14:34:59,835 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:34:59,836 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:34:59,842 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:34:59,857 [INFO] price_checker.py:337 - 找到可见价格元素: $184 NZD 
night
$184 NZD per night
2024-11-15 14:34:59,864 [INFO] price_checker.py:350 - 找到每晚价格元素: $184 NZD 
night
$184 NZD per night
2024-11-15 14:34:59,864 [INFO] price_checker.py:356 - 成功解析折扣价格: $184 NZD
2024-11-15 14:34:59,864 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:34:59,870 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 14:35:00,373 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:35:00,381 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:35:00,387 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:35:00,387 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:35:00,387 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:35:00,393 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:35:00,398 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:35:00,399 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:35:00,399 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:35:00,405 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:35:00,410 [INFO] price_checker.py:403 - 找到价格元素: $33 NZD (HTML: <span class="_1k4xcdh">$33&nbsp;NZD</span>)
2024-11-15 14:35:00,410 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $33 NZD
2024-11-15 14:35:00,410 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:35:00,417 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:35:00,423 [INFO] price_checker.py:403 - 找到价格元素: $33 NZD (HTML: <span class="_1k4xcdh">$33&nbsp;NZD</span>)
2024-11-15 14:35:00,423 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $33 NZD
2024-11-15 14:35:00,423 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:35:00,430 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:35:00,435 [INFO] price_checker.py:403 - 找到价格元素: $30 NZD (HTML: <span class="_1k4xcdh">$30&nbsp;NZD</span>)
2024-11-15 14:35:00,435 [INFO] price_checker.py:416 - ✓ 成功设置税费: $30 NZD
2024-11-15 14:35:00,435 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:35:02,229 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:35:05,923 [INFO] price_checker.py:553 - [36/37] 处理日期: 25/01/2025
2024-11-15 14:35:05,924 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-15 14:35:05,924 [INFO] price_checker.py:255 - 入住日期: 25/01/2025
2024-11-15 14:35:10,441 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:35:10,448 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:35:10,453 [INFO] price_checker.py:403 - 找到价格元素: $264 NZD (HTML: <span class="_j1kt73">$264&nbsp;NZD</span>)
2024-11-15 14:35:10,453 [INFO] price_checker.py:420 - ✓ 成功设置总价: $264 NZD
2024-11-15 14:35:10,453 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:35:10,460 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:35:10,464 [INFO] price_checker.py:403 - 找到价格元素: $264 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$264&nbsp;NZD</span></span>)
2024-11-15 14:35:10,464 [INFO] price_checker.py:420 - ✓ 成功设置总价: $264 NZD
2024-11-15 14:35:10,469 [INFO] price_checker.py:403 - 找到价格元素: $264 NZD (HTML: <span class="_j1kt73">$264&nbsp;NZD</span>)
2024-11-15 14:35:10,469 [INFO] price_checker.py:420 - ✓ 成功设置总价: $264 NZD
2024-11-15 14:35:10,474 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:35:10,474 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:35:10,474 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:35:10,474 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 14:35:10,474 [INFO] price_checker.py:450 - ✓ service_fee: $33 NZD
2024-11-15 14:35:10,474 [INFO] price_checker.py:450 - ✓ taxes: $30 NZD
2024-11-15 14:35:10,475 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:35:10,475 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:35:10,475 [INFO] price_checker.py:457 - check_in: 18/01/2025
2024-11-15 14:35:10,475 [INFO] price_checker.py:457 - check_out: 19/01/2025
2024-11-15 14:35:10,475 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:35:10,475 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:35:10,475 [INFO] price_checker.py:457 - nightly_price: $184 NZD
2024-11-15 14:35:10,475 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 14:35:10,475 [INFO] price_checker.py:457 - service_fee: $33 NZD
2024-11-15 14:35:10,475 [INFO] price_checker.py:457 - taxes: $30 NZD
2024-11-15 14:35:10,475 [INFO] price_checker.py:457 - total: 
2024-11-15 14:35:10,475 [INFO] price_checker.py:559 - ✓ 成功获取 18/01/2025 的价格信息
2024-11-15 14:35:10,475 [INFO] price_checker.py:553 - [60/72] 处理日期: 19/01/2025
2024-11-15 14:35:10,476 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 14:35:10,476 [INFO] price_checker.py:255 - 入住日期: 19/01/2025
2024-11-15 14:35:11,044 [INFO] price_checker.py:271 - 开始检查日期 25/01/2025 的最小入住要求...
2024-11-15 14:35:11,048 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="25, Saturday, January 2025. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-25/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">25</div></td>
2024-11-15 14:35:11,058 [INFO] price_checker.py:158 - 找到日期: 25/01/2025
2024-11-15 14:35:11,058 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:35:12,280 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:35:15,594 [INFO] price_checker.py:271 - 开始检查日期 19/01/2025 的最小入住要求...
2024-11-15 14:35:15,598 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_1mv3p4vt" role="button" aria-disabled="false" aria-label="19, Sunday, January 2025. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-19/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">19</div></td>
2024-11-15 14:35:15,608 [INFO] price_checker.py:158 - 找到日期: 19/01/2025
2024-11-15 14:35:15,608 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:35:21,122 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:35:22,225 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:35:22,230 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:35:22,230 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 14:35:22,231 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:35:22,232 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:35:22,232 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:35:22,232 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/837352260137971048?check_in=2025-01-25&check_out=2025-01-26&adults=3&children=0&infants=0
2024-11-15 14:35:25,667 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:35:26,794 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:35:26,799 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:35:26,799 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 14:35:26,800 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:35:26,800 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:35:26,800 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:35:26,800 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2025-01-19&check_out=2025-01-20&adults=3&children=0&infants=0
2024-11-15 14:35:27,319 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:35:27,321 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:35:29,332 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:35:29,332 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:35:31,907 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:35:31,910 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:35:32,327 [WARNING] price_checker.py:443 - 尝试点击价格展开按钮失败: Message: no such element: Unable to locate element: {"method":"xpath","selector":"//button[contains(@class, '_12wl7g09')]"}
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00952BFE]
	(No symbol) [0x00952CDB]
	(No symbol) [0x0098EBD2]
	(No symbol) [0x00973954]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:35:32,327 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:35:32,328 [WARNING] price_checker.py:452 - ✗ cleaning_fee 未获取到
2024-11-15 14:35:32,328 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 14:35:32,328 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 14:35:32,328 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:35:32,328 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:35:32,328 [INFO] price_checker.py:457 - check_in: 28/01/2025
2024-11-15 14:35:32,328 [INFO] price_checker.py:457 - check_out: 29/01/2025
2024-11-15 14:35:32,328 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:35:32,328 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:35:32,328 [INFO] price_checker.py:457 - nightly_price: None
2024-11-15 14:35:32,328 [INFO] price_checker.py:457 - cleaning_fee: None
2024-11-15 14:35:32,328 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 14:35:32,328 [INFO] price_checker.py:457 - taxes: None
2024-11-15 14:35:32,328 [INFO] price_checker.py:457 - total: None
2024-11-15 14:35:32,329 [INFO] price_checker.py:559 - ✓ 成功获取 28/01/2025 的价格信息
2024-11-15 14:35:32,329 [INFO] price_checker.py:553 - [37/39] 处理日期: 29/01/2025
2024-11-15 14:35:32,329 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/43435162
2024-11-15 14:35:32,329 [INFO] price_checker.py:255 - 入住日期: 29/01/2025
2024-11-15 14:35:33,921 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:35:33,921 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:35:37,466 [INFO] price_checker.py:271 - 开始检查日期 29/01/2025 的最小入住要求...
2024-11-15 14:35:37,484 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="29, Wednesday, January 2025. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-29/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">29</div></td>
2024-11-15 14:35:37,502 [INFO] price_checker.py:158 - 找到日期: 29/01/2025
2024-11-15 14:35:37,503 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:35:39,361 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:35:39,361 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:35:43,951 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:35:43,951 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:35:47,536 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:35:48,647 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:35:48,653 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:35:48,653 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 14:35:48,655 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:35:48,656 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:35:48,656 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:35:48,656 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/43435162?check_in=2025-01-29&check_out=2025-01-30&adults=3&children=0&infants=0
2024-11-15 14:35:49,391 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:35:49,392 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:35:53,793 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:35:53,796 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:35:53,963 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:35:53,963 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:35:53,968 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:35:53,984 [INFO] price_checker.py:337 - 找到可见价格元素: $165 NZD 
night
$165 NZD per night
2024-11-15 14:35:53,989 [INFO] price_checker.py:350 - 找到每晚价格元素: $165 NZD 
night
$165 NZD per night
2024-11-15 14:35:53,989 [INFO] price_checker.py:356 - 成功解析折扣价格: $165 NZD
2024-11-15 14:35:53,989 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:35:53,996 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 14:35:54,499 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:35:54,507 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:35:54,517 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:35:54,518 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:35:54,518 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:35:54,530 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:35:54,536 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:35:54,536 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:35:54,536 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:35:54,543 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:35:54,547 [INFO] price_checker.py:403 - 找到价格元素: $30 NZD (HTML: <span class="_1k4xcdh">$30&nbsp;NZD</span>)
2024-11-15 14:35:54,547 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $30 NZD
2024-11-15 14:35:54,547 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:35:54,554 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:35:54,559 [INFO] price_checker.py:403 - 找到价格元素: $30 NZD (HTML: <span class="_1k4xcdh">$30&nbsp;NZD</span>)
2024-11-15 14:35:54,560 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $30 NZD
2024-11-15 14:35:54,560 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:35:54,566 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:35:54,571 [INFO] price_checker.py:403 - 找到价格元素: $28 NZD (HTML: <span class="_1k4xcdh">$28&nbsp;NZD</span>)
2024-11-15 14:35:54,571 [INFO] price_checker.py:416 - ✓ 成功设置税费: $28 NZD
2024-11-15 14:35:54,571 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:35:55,807 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:35:55,807 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:35:59,425 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:35:59,426 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w ._11jcbg2
2024-11-15 14:36:04,588 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:36:04,595 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:36:04,600 [INFO] price_checker.py:403 - 找到价格元素: $243 NZD (HTML: <span class="_j1kt73">$243&nbsp;NZD</span>)
2024-11-15 14:36:04,600 [INFO] price_checker.py:420 - ✓ 成功设置总价: $243 NZD
2024-11-15 14:36:04,600 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:36:04,606 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:36:04,611 [INFO] price_checker.py:403 - 找到价格元素: $243 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$243&nbsp;NZD</span></span>)
2024-11-15 14:36:04,611 [INFO] price_checker.py:420 - ✓ 成功设置总价: $243 NZD
2024-11-15 14:36:04,616 [INFO] price_checker.py:403 - 找到价格元素: $243 NZD (HTML: <span class="_j1kt73">$243&nbsp;NZD</span>)
2024-11-15 14:36:04,616 [INFO] price_checker.py:420 - ✓ 成功设置总价: $243 NZD
2024-11-15 14:36:04,620 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:36:04,620 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:36:04,620 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:36:04,620 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 14:36:04,620 [INFO] price_checker.py:450 - ✓ service_fee: $30 NZD
2024-11-15 14:36:04,620 [INFO] price_checker.py:450 - ✓ taxes: $28 NZD
2024-11-15 14:36:04,620 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:36:04,621 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:36:04,621 [INFO] price_checker.py:457 - check_in: 19/01/2025
2024-11-15 14:36:04,621 [INFO] price_checker.py:457 - check_out: 20/01/2025
2024-11-15 14:36:04,621 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:36:04,621 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:36:04,621 [INFO] price_checker.py:457 - nightly_price: $165 NZD
2024-11-15 14:36:04,621 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 14:36:04,621 [INFO] price_checker.py:457 - service_fee: $30 NZD
2024-11-15 14:36:04,621 [INFO] price_checker.py:457 - taxes: $28 NZD
2024-11-15 14:36:04,621 [INFO] price_checker.py:457 - total: 
2024-11-15 14:36:04,621 [INFO] price_checker.py:559 - ✓ 成功获取 19/01/2025 的价格信息
2024-11-15 14:36:04,621 [INFO] price_checker.py:573 - 已完成 60/72 个日期的处理
2024-11-15 14:36:05,832 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:36:05,832 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:36:09,431 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:36:09,431 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[contains(@class, '_wgmchy')]//span[contains(text(), '$') and contains(text(), 'NZD')]
2024-11-15 14:36:14,622 [INFO] price_checker.py:553 - [61/72] 处理日期: 20/01/2025
2024-11-15 14:36:14,622 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 14:36:14,622 [INFO] price_checker.py:255 - 入住日期: 20/01/2025
2024-11-15 14:36:15,887 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:36:15,887 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:36:19,485 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:36:19,485 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:36:19,747 [INFO] price_checker.py:271 - 开始检查日期 20/01/2025 的最小入住要求...
2024-11-15 14:36:19,750 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_sl5yz7r" role="button" aria-disabled="false" aria-label="20, Monday, January 2025. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-20/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">20</div></td>
2024-11-15 14:36:19,759 [INFO] price_checker.py:158 - 找到日期: 20/01/2025
2024-11-15 14:36:19,759 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:36:25,950 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:36:25,950 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w ._11jcbg2
2024-11-15 14:36:29,496 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 14:36:29,496 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:36:29,776 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:36:30,880 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:36:30,885 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:36:30,886 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 14:36:30,887 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:36:30,887 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:36:30,887 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:36:30,887 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2025-01-20&check_out=2025-01-21&adults=3&children=0&infants=0
2024-11-15 14:36:35,956 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:36:35,956 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[contains(@class, '_wgmchy')]//span[contains(text(), '$') and contains(text(), 'NZD')]
2024-11-15 14:36:35,976 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:36:35,979 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:36:37,990 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:36:37,990 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:36:39,549 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:36:45,977 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:36:45,977 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:36:48,014 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:36:48,014 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:36:49,573 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:36:55,997 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 14:36:55,997 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:36:58,041 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:36:58,042 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:36:58,047 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:36:58,062 [INFO] price_checker.py:337 - 找到可见价格元素: $174 NZD 
night
$174 NZD per night
2024-11-15 14:36:58,068 [INFO] price_checker.py:350 - 找到每晚价格元素: $174 NZD 
night
$174 NZD per night
2024-11-15 14:36:58,068 [INFO] price_checker.py:356 - 成功解析折扣价格: $174 NZD
2024-11-15 14:36:58,068 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:36:58,074 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 14:36:58,577 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:36:58,585 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:36:58,590 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:36:58,591 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:36:58,591 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:36:58,597 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:36:58,602 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:36:58,602 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:36:58,602 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:36:58,609 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:36:58,613 [INFO] price_checker.py:403 - 找到价格元素: $31 NZD (HTML: <span class="_1k4xcdh">$31&nbsp;NZD</span>)
2024-11-15 14:36:58,613 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $31 NZD
2024-11-15 14:36:58,614 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:36:58,620 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:36:58,624 [INFO] price_checker.py:403 - 找到价格元素: $31 NZD (HTML: <span class="_1k4xcdh">$31&nbsp;NZD</span>)
2024-11-15 14:36:58,625 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $31 NZD
2024-11-15 14:36:58,625 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:36:58,631 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:36:58,635 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 14:36:58,635 [INFO] price_checker.py:416 - ✓ 成功设置税费: $29 NZD
2024-11-15 14:36:58,635 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:36:59,596 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:37:06,021 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:37:08,666 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:37:08,673 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:37:08,682 [INFO] price_checker.py:403 - 找到价格元素: $253 NZD (HTML: <span class="_j1kt73">$253&nbsp;NZD</span>)
2024-11-15 14:37:08,682 [INFO] price_checker.py:420 - ✓ 成功设置总价: $253 NZD
2024-11-15 14:37:08,682 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:37:08,694 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:37:08,700 [INFO] price_checker.py:403 - 找到价格元素: $253 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$253&nbsp;NZD</span></span>)
2024-11-15 14:37:08,700 [INFO] price_checker.py:420 - ✓ 成功设置总价: $253 NZD
2024-11-15 14:37:08,704 [INFO] price_checker.py:403 - 找到价格元素: $253 NZD (HTML: <span class="_j1kt73">$253&nbsp;NZD</span>)
2024-11-15 14:37:08,705 [INFO] price_checker.py:420 - ✓ 成功设置总价: $253 NZD
2024-11-15 14:37:08,709 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:37:08,709 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:37:08,709 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:37:08,709 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 14:37:08,709 [INFO] price_checker.py:450 - ✓ service_fee: $31 NZD
2024-11-15 14:37:08,709 [INFO] price_checker.py:450 - ✓ taxes: $29 NZD
2024-11-15 14:37:08,710 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:37:08,710 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:37:08,710 [INFO] price_checker.py:457 - check_in: 20/01/2025
2024-11-15 14:37:08,710 [INFO] price_checker.py:457 - check_out: 21/01/2025
2024-11-15 14:37:08,710 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:37:08,710 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:37:08,710 [INFO] price_checker.py:457 - nightly_price: $174 NZD
2024-11-15 14:37:08,710 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 14:37:08,710 [INFO] price_checker.py:457 - service_fee: $31 NZD
2024-11-15 14:37:08,710 [INFO] price_checker.py:457 - taxes: $29 NZD
2024-11-15 14:37:08,710 [INFO] price_checker.py:457 - total: 
2024-11-15 14:37:08,710 [INFO] price_checker.py:559 - ✓ 成功获取 20/01/2025 的价格信息
2024-11-15 14:37:08,710 [INFO] price_checker.py:553 - [62/72] 处理日期: 21/01/2025
2024-11-15 14:37:08,710 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 14:37:08,710 [INFO] price_checker.py:255 - 入住日期: 21/01/2025
2024-11-15 14:37:09,618 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:37:13,827 [INFO] price_checker.py:271 - 开始检查日期 21/01/2025 的最小入住要求...
2024-11-15 14:37:13,830 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="21, Tuesday, January 2025. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-21/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">21</div></td>
2024-11-15 14:37:13,839 [INFO] price_checker.py:158 - 找到日期: 21/01/2025
2024-11-15 14:37:13,839 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:37:16,081 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:37:19,670 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:37:23,854 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:37:24,979 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:37:24,984 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:37:24,985 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 14:37:24,986 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:37:24,987 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:37:24,987 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:37:24,987 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2025-01-21&check_out=2025-01-22&adults=3&children=0&infants=0
2024-11-15 14:37:26,091 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:37:29,678 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:37:30,077 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:37:30,080 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:37:32,093 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:37:32,093 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:37:36,107 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:37:39,702 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:37:42,131 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:37:42,131 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:37:46,130 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:37:52,150 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:37:52,150 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:37:52,156 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:37:52,171 [INFO] price_checker.py:337 - 找到可见价格元素: $174 NZD 
night
$174 NZD per night
2024-11-15 14:37:52,176 [INFO] price_checker.py:350 - 找到每晚价格元素: $174 NZD 
night
$174 NZD per night
2024-11-15 14:37:52,177 [INFO] price_checker.py:356 - 成功解析折扣价格: $174 NZD
2024-11-15 14:37:52,177 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:37:52,183 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 14:37:52,686 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:37:52,694 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:37:52,700 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:37:52,700 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:37:52,701 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:37:52,707 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:37:52,712 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:37:52,712 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:37:52,712 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:37:52,718 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:37:52,723 [INFO] price_checker.py:403 - 找到价格元素: $31 NZD (HTML: <span class="_1k4xcdh">$31&nbsp;NZD</span>)
2024-11-15 14:37:52,723 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $31 NZD
2024-11-15 14:37:52,723 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:37:52,729 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:37:52,734 [INFO] price_checker.py:403 - 找到价格元素: $31 NZD (HTML: <span class="_1k4xcdh">$31&nbsp;NZD</span>)
2024-11-15 14:37:52,734 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $31 NZD
2024-11-15 14:37:52,734 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:37:52,741 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:37:52,746 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 14:37:52,746 [INFO] price_checker.py:416 - ✓ 成功设置税费: $29 NZD
2024-11-15 14:37:52,746 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:37:56,147 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:37:59,746 [WARNING] price_checker.py:443 - 尝试点击价格展开按钮失败: Message: no such element: Unable to locate element: {"method":"xpath","selector":"//button[contains(@class, '_12wl7g09')]"}
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00952BFE]
	(No symbol) [0x00952CDB]
	(No symbol) [0x0098EBD2]
	(No symbol) [0x00973954]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:37:59,746 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:37:59,746 [WARNING] price_checker.py:452 - ✗ cleaning_fee 未获取到
2024-11-15 14:37:59,746 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 14:37:59,747 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 14:37:59,747 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:37:59,747 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:37:59,747 [INFO] price_checker.py:457 - check_in: 25/01/2025
2024-11-15 14:37:59,747 [INFO] price_checker.py:457 - check_out: 26/01/2025
2024-11-15 14:37:59,747 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:37:59,747 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:37:59,747 [INFO] price_checker.py:457 - nightly_price: None
2024-11-15 14:37:59,747 [INFO] price_checker.py:457 - cleaning_fee: None
2024-11-15 14:37:59,747 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 14:37:59,747 [INFO] price_checker.py:457 - taxes: None
2024-11-15 14:37:59,747 [INFO] price_checker.py:457 - total: None
2024-11-15 14:37:59,747 [INFO] price_checker.py:559 - ✓ 成功获取 25/01/2025 的价格信息
2024-11-15 14:37:59,747 [INFO] price_checker.py:553 - [37/37] 处理日期: 26/01/2025
2024-11-15 14:37:59,748 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-15 14:37:59,748 [INFO] price_checker.py:255 - 入住日期: 26/01/2025
2024-11-15 14:38:02,755 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:38:02,761 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:38:02,766 [INFO] price_checker.py:403 - 找到价格元素: $253 NZD (HTML: <span class="_j1kt73">$253&nbsp;NZD</span>)
2024-11-15 14:38:02,767 [INFO] price_checker.py:420 - ✓ 成功设置总价: $253 NZD
2024-11-15 14:38:02,767 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:38:02,773 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:38:02,778 [INFO] price_checker.py:403 - 找到价格元素: $253 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$253&nbsp;NZD</span></span>)
2024-11-15 14:38:02,778 [INFO] price_checker.py:420 - ✓ 成功设置总价: $253 NZD
2024-11-15 14:38:02,782 [INFO] price_checker.py:403 - 找到价格元素: $253 NZD (HTML: <span class="_j1kt73">$253&nbsp;NZD</span>)
2024-11-15 14:38:02,782 [INFO] price_checker.py:420 - ✓ 成功设置总价: $253 NZD
2024-11-15 14:38:02,787 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:38:02,787 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:38:02,787 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:38:02,787 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 14:38:02,787 [INFO] price_checker.py:450 - ✓ service_fee: $31 NZD
2024-11-15 14:38:02,787 [INFO] price_checker.py:450 - ✓ taxes: $29 NZD
2024-11-15 14:38:02,787 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:38:02,788 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:38:02,788 [INFO] price_checker.py:457 - check_in: 21/01/2025
2024-11-15 14:38:02,788 [INFO] price_checker.py:457 - check_out: 22/01/2025
2024-11-15 14:38:02,788 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:38:02,788 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:38:02,788 [INFO] price_checker.py:457 - nightly_price: $174 NZD
2024-11-15 14:38:02,788 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 14:38:02,788 [INFO] price_checker.py:457 - service_fee: $31 NZD
2024-11-15 14:38:02,788 [INFO] price_checker.py:457 - taxes: $29 NZD
2024-11-15 14:38:02,788 [INFO] price_checker.py:457 - total: 
2024-11-15 14:38:02,788 [INFO] price_checker.py:559 - ✓ 成功获取 21/01/2025 的价格信息
2024-11-15 14:38:02,788 [INFO] price_checker.py:553 - [63/72] 处理日期: 22/01/2025
2024-11-15 14:38:02,788 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 14:38:02,789 [INFO] price_checker.py:255 - 入住日期: 22/01/2025
2024-11-15 14:38:04,868 [INFO] price_checker.py:271 - 开始检查日期 26/01/2025 的最小入住要求...
2024-11-15 14:38:04,871 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_1mv3p4vt" role="button" aria-disabled="false" aria-label="26, Sunday, January 2025. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-26/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">26</div></td>
2024-11-15 14:38:04,882 [INFO] price_checker.py:158 - 找到日期: 26/01/2025
2024-11-15 14:38:04,882 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:38:06,203 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:38:07,907 [INFO] price_checker.py:271 - 开始检查日期 22/01/2025 的最小入住要求...
2024-11-15 14:38:07,910 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="22, Wednesday, January 2025. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-22/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">22</div></td>
2024-11-15 14:38:07,919 [INFO] price_checker.py:158 - 找到日期: 22/01/2025
2024-11-15 14:38:07,919 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:38:14,893 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:38:15,992 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:38:15,997 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:38:15,997 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 14:38:15,998 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:38:15,999 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:38:15,999 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:38:15,999 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/837352260137971048?check_in=2025-01-26&check_out=2025-01-27&adults=3&children=0&infants=0
2024-11-15 14:38:17,938 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:38:19,048 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:38:19,053 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:38:19,053 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 14:38:19,054 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:38:19,054 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:38:19,055 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:38:19,055 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2025-01-22&check_out=2025-01-23&adults=3&children=0&infants=0
2024-11-15 14:38:21,120 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:38:21,123 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:38:23,133 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:38:23,134 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:38:24,149 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:38:24,152 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:38:26,163 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:38:26,163 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:38:26,263 [WARNING] price_checker.py:443 - 尝试点击价格展开按钮失败: Message: no such element: Unable to locate element: {"method":"xpath","selector":"//button[contains(@class, '_12wl7g09')]"}
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00952BFE]
	(No symbol) [0x00952CDB]
	(No symbol) [0x0098EBD2]
	(No symbol) [0x00973954]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:38:26,264 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:38:26,264 [WARNING] price_checker.py:452 - ✗ cleaning_fee 未获取到
2024-11-15 14:38:26,264 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 14:38:26,264 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 14:38:26,264 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:38:26,264 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:38:26,264 [INFO] price_checker.py:457 - check_in: 29/01/2025
2024-11-15 14:38:26,264 [INFO] price_checker.py:457 - check_out: 30/01/2025
2024-11-15 14:38:26,264 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:38:26,264 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:38:26,264 [INFO] price_checker.py:457 - nightly_price: None
2024-11-15 14:38:26,265 [INFO] price_checker.py:457 - cleaning_fee: None
2024-11-15 14:38:26,265 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 14:38:26,265 [INFO] price_checker.py:457 - taxes: None
2024-11-15 14:38:26,265 [INFO] price_checker.py:457 - total: None
2024-11-15 14:38:26,265 [INFO] price_checker.py:559 - ✓ 成功获取 29/01/2025 的价格信息
2024-11-15 14:38:26,265 [INFO] price_checker.py:553 - [38/39] 处理日期: 30/01/2025
2024-11-15 14:38:26,265 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/43435162
2024-11-15 14:38:26,265 [INFO] price_checker.py:255 - 入住日期: 30/01/2025
2024-11-15 14:38:31,395 [INFO] price_checker.py:271 - 开始检查日期 30/01/2025 的最小入住要求...
2024-11-15 14:38:31,399 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="30, Thursday, January 2025. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-30/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">30</div></td>
2024-11-15 14:38:31,409 [INFO] price_checker.py:158 - 找到日期: 30/01/2025
2024-11-15 14:38:31,409 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:38:33,174 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:38:33,174 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:38:36,217 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:38:36,217 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:38:41,425 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:38:42,538 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:38:42,543 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:38:42,543 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 14:38:42,544 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:38:42,544 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:38:42,545 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:38:42,545 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/43435162?check_in=2025-01-30&check_out=2025-01-31&adults=3&children=0&infants=0
2024-11-15 14:38:43,183 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:38:43,183 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:38:46,276 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:38:46,276 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:38:46,282 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:38:46,298 [INFO] price_checker.py:337 - 找到可见价格元素: $165 NZD 
night
$165 NZD per night
2024-11-15 14:38:46,305 [INFO] price_checker.py:350 - 找到每晚价格元素: $165 NZD 
night
$165 NZD per night
2024-11-15 14:38:46,305 [INFO] price_checker.py:356 - 成功解析折扣价格: $165 NZD
2024-11-15 14:38:46,305 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:38:46,311 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 14:38:46,814 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:38:46,821 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:38:46,827 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:38:46,828 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:38:46,828 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:38:46,834 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:38:46,839 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:38:46,839 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:38:46,839 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:38:46,846 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:38:46,852 [INFO] price_checker.py:403 - 找到价格元素: $30 NZD (HTML: <span class="_1k4xcdh">$30&nbsp;NZD</span>)
2024-11-15 14:38:46,852 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $30 NZD
2024-11-15 14:38:46,852 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:38:46,859 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:38:46,863 [INFO] price_checker.py:403 - 找到价格元素: $30 NZD (HTML: <span class="_1k4xcdh">$30&nbsp;NZD</span>)
2024-11-15 14:38:46,863 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $30 NZD
2024-11-15 14:38:46,864 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:38:46,870 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:38:46,874 [INFO] price_checker.py:403 - 找到价格元素: $28 NZD (HTML: <span class="_1k4xcdh">$28&nbsp;NZD</span>)
2024-11-15 14:38:46,874 [INFO] price_checker.py:416 - ✓ 成功设置税费: $28 NZD
2024-11-15 14:38:46,875 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:38:47,633 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:38:47,636 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:38:49,647 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:38:49,647 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:38:53,186 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:38:53,186 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w ._11jcbg2
2024-11-15 14:38:56,903 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:38:56,910 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:38:56,915 [INFO] price_checker.py:403 - 找到价格元素: $243 NZD (HTML: <span class="_j1kt73">$243&nbsp;NZD</span>)
2024-11-15 14:38:56,916 [INFO] price_checker.py:420 - ✓ 成功设置总价: $243 NZD
2024-11-15 14:38:56,916 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:38:56,922 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:38:56,927 [INFO] price_checker.py:403 - 找到价格元素: $243 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$243&nbsp;NZD</span></span>)
2024-11-15 14:38:56,927 [INFO] price_checker.py:420 - ✓ 成功设置总价: $243 NZD
2024-11-15 14:38:56,932 [INFO] price_checker.py:403 - 找到价格元素: $243 NZD (HTML: <span class="_j1kt73">$243&nbsp;NZD</span>)
2024-11-15 14:38:56,932 [INFO] price_checker.py:420 - ✓ 成功设置总价: $243 NZD
2024-11-15 14:38:56,937 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:38:56,937 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:38:56,937 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:38:56,937 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 14:38:56,937 [INFO] price_checker.py:450 - ✓ service_fee: $30 NZD
2024-11-15 14:38:56,938 [INFO] price_checker.py:450 - ✓ taxes: $28 NZD
2024-11-15 14:38:56,938 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:38:56,938 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:38:56,938 [INFO] price_checker.py:457 - check_in: 22/01/2025
2024-11-15 14:38:56,938 [INFO] price_checker.py:457 - check_out: 23/01/2025
2024-11-15 14:38:56,938 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:38:56,938 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:38:56,938 [INFO] price_checker.py:457 - nightly_price: $165 NZD
2024-11-15 14:38:56,938 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 14:38:56,938 [INFO] price_checker.py:457 - service_fee: $30 NZD
2024-11-15 14:38:56,938 [INFO] price_checker.py:457 - taxes: $28 NZD
2024-11-15 14:38:56,938 [INFO] price_checker.py:457 - total: 
2024-11-15 14:38:56,938 [INFO] price_checker.py:559 - ✓ 成功获取 22/01/2025 的价格信息
2024-11-15 14:38:56,939 [INFO] price_checker.py:553 - [64/72] 处理日期: 23/01/2025
2024-11-15 14:38:56,939 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 14:38:56,939 [INFO] price_checker.py:255 - 入住日期: 23/01/2025
2024-11-15 14:38:59,665 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:38:59,666 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:39:02,056 [INFO] price_checker.py:271 - 开始检查日期 23/01/2025 的最小入住要求...
2024-11-15 14:39:02,059 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="23, Thursday, January 2025. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-23/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">23</div></td>
2024-11-15 14:39:02,067 [INFO] price_checker.py:158 - 找到日期: 23/01/2025
2024-11-15 14:39:02,068 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:39:03,193 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:39:03,193 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[contains(@class, '_wgmchy')]//span[contains(text(), '$') and contains(text(), 'NZD')]
2024-11-15 14:39:09,722 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:39:09,722 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:39:12,131 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:39:13,248 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:39:13,249 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:39:13,251 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:39:13,256 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:39:13,256 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 14:39:13,257 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:39:13,257 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:39:13,258 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:39:13,258 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2025-01-23&check_out=2025-01-24&adults=3&children=0&infants=0
2024-11-15 14:39:18,387 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:39:18,390 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:39:19,773 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:39:19,773 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w ._11jcbg2
2024-11-15 14:39:20,400 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:39:20,400 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:39:23,299 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 14:39:23,300 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:39:29,792 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:39:29,792 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[contains(@class, '_wgmchy')]//span[contains(text(), '$') and contains(text(), 'NZD')]
2024-11-15 14:39:30,429 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:39:30,429 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:39:33,315 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:39:39,805 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:39:39,805 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:39:40,441 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:39:40,441 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:39:40,446 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:39:40,462 [INFO] price_checker.py:337 - 找到可见价格元素: $173 NZD 
night
$173 NZD per night
2024-11-15 14:39:40,468 [INFO] price_checker.py:350 - 找到每晚价格元素: $173 NZD 
night
$173 NZD per night
2024-11-15 14:39:40,468 [INFO] price_checker.py:356 - 成功解析折扣价格: $173 NZD
2024-11-15 14:39:40,468 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:39:40,474 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 14:39:40,977 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:39:40,984 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:39:40,990 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:39:40,991 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:39:40,991 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:39:40,997 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:39:41,002 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:39:41,002 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:39:41,003 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:39:41,009 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:39:41,014 [INFO] price_checker.py:403 - 找到价格元素: $31 NZD (HTML: <span class="_1k4xcdh">$31&nbsp;NZD</span>)
2024-11-15 14:39:41,015 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $31 NZD
2024-11-15 14:39:41,015 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:39:41,022 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:39:41,027 [INFO] price_checker.py:403 - 找到价格元素: $31 NZD (HTML: <span class="_1k4xcdh">$31&nbsp;NZD</span>)
2024-11-15 14:39:41,027 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $31 NZD
2024-11-15 14:39:41,027 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:39:41,034 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:39:41,039 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 14:39:41,039 [INFO] price_checker.py:416 - ✓ 成功设置税费: $29 NZD
2024-11-15 14:39:41,039 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:39:43,338 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:39:49,823 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 14:39:49,823 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:39:51,068 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:39:51,075 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:39:51,081 [INFO] price_checker.py:403 - 找到价格元素: $252 NZD (HTML: <span class="_j1kt73">$252&nbsp;NZD</span>)
2024-11-15 14:39:51,081 [INFO] price_checker.py:420 - ✓ 成功设置总价: $252 NZD
2024-11-15 14:39:51,081 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:39:51,088 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:39:51,093 [INFO] price_checker.py:403 - 找到价格元素: $252 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$252&nbsp;NZD</span></span>)
2024-11-15 14:39:51,093 [INFO] price_checker.py:420 - ✓ 成功设置总价: $252 NZD
2024-11-15 14:39:51,098 [INFO] price_checker.py:403 - 找到价格元素: $252 NZD (HTML: <span class="_j1kt73">$252&nbsp;NZD</span>)
2024-11-15 14:39:51,099 [INFO] price_checker.py:420 - ✓ 成功设置总价: $252 NZD
2024-11-15 14:39:51,103 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:39:51,103 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:39:51,104 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:39:51,104 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 14:39:51,104 [INFO] price_checker.py:450 - ✓ service_fee: $31 NZD
2024-11-15 14:39:51,104 [INFO] price_checker.py:450 - ✓ taxes: $29 NZD
2024-11-15 14:39:51,104 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:39:51,104 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:39:51,104 [INFO] price_checker.py:457 - check_in: 23/01/2025
2024-11-15 14:39:51,104 [INFO] price_checker.py:457 - check_out: 24/01/2025
2024-11-15 14:39:51,104 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:39:51,104 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:39:51,104 [INFO] price_checker.py:457 - nightly_price: $173 NZD
2024-11-15 14:39:51,104 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 14:39:51,105 [INFO] price_checker.py:457 - service_fee: $31 NZD
2024-11-15 14:39:51,105 [INFO] price_checker.py:457 - taxes: $29 NZD
2024-11-15 14:39:51,105 [INFO] price_checker.py:457 - total: 
2024-11-15 14:39:51,105 [INFO] price_checker.py:559 - ✓ 成功获取 23/01/2025 的价格信息
2024-11-15 14:39:51,105 [INFO] price_checker.py:553 - [65/72] 处理日期: 24/01/2025
2024-11-15 14:39:51,105 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 14:39:51,105 [INFO] price_checker.py:255 - 入住日期: 24/01/2025
2024-11-15 14:39:53,352 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:39:56,248 [INFO] price_checker.py:271 - 开始检查日期 24/01/2025 的最小入住要求...
2024-11-15 14:39:56,251 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="24, Friday, January 2025. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-24/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">24</div></td>
2024-11-15 14:39:56,261 [INFO] price_checker.py:158 - 找到日期: 24/01/2025
2024-11-15 14:39:56,261 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:39:59,835 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:40:03,362 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:40:06,302 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:40:07,417 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:40:07,423 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:40:07,423 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 14:40:07,424 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:40:07,424 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:40:07,425 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:40:07,425 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2025-01-24&check_out=2025-01-25&adults=3&children=0&infants=0
2024-11-15 14:40:09,841 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:40:12,553 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:40:12,556 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:40:13,418 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:40:14,567 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:40:14,568 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:40:19,854 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:40:23,432 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:40:24,584 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:40:24,584 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:40:29,869 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:40:33,448 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:40:34,597 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:40:34,597 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:40:34,603 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:40:34,618 [INFO] price_checker.py:337 - 找到可见价格元素: $179 NZD 
night
$179 NZD per night
2024-11-15 14:40:34,623 [INFO] price_checker.py:350 - 找到每晚价格元素: $179 NZD 
night
$179 NZD per night
2024-11-15 14:40:34,623 [INFO] price_checker.py:356 - 成功解析折扣价格: $179 NZD
2024-11-15 14:40:34,623 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:40:34,630 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 14:40:35,133 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:40:35,140 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:40:35,146 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:40:35,146 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:40:35,146 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:40:35,153 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:40:35,158 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:40:35,158 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:40:35,158 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:40:35,164 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:40:35,169 [INFO] price_checker.py:403 - 找到价格元素: $32 NZD (HTML: <span class="_1k4xcdh">$32&nbsp;NZD</span>)
2024-11-15 14:40:35,169 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $32 NZD
2024-11-15 14:40:35,169 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:40:35,176 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:40:35,180 [INFO] price_checker.py:403 - 找到价格元素: $32 NZD (HTML: <span class="_1k4xcdh">$32&nbsp;NZD</span>)
2024-11-15 14:40:35,181 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $32 NZD
2024-11-15 14:40:35,181 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:40:35,187 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:40:35,191 [INFO] price_checker.py:403 - 找到价格元素: $30 NZD (HTML: <span class="_1k4xcdh">$30&nbsp;NZD</span>)
2024-11-15 14:40:35,192 [INFO] price_checker.py:416 - ✓ 成功设置税费: $30 NZD
2024-11-15 14:40:35,192 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:40:39,887 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:40:45,225 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:40:45,232 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:40:45,242 [INFO] price_checker.py:403 - 找到价格元素: $259 NZD (HTML: <span class="_j1kt73">$259&nbsp;NZD</span>)
2024-11-15 14:40:45,242 [INFO] price_checker.py:420 - ✓ 成功设置总价: $259 NZD
2024-11-15 14:40:45,242 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:40:45,255 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:40:45,262 [INFO] price_checker.py:403 - 找到价格元素: $259 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$259&nbsp;NZD</span></span>)
2024-11-15 14:40:45,262 [INFO] price_checker.py:420 - ✓ 成功设置总价: $259 NZD
2024-11-15 14:40:45,267 [INFO] price_checker.py:403 - 找到价格元素: $259 NZD (HTML: <span class="_j1kt73">$259&nbsp;NZD</span>)
2024-11-15 14:40:45,267 [INFO] price_checker.py:420 - ✓ 成功设置总价: $259 NZD
2024-11-15 14:40:45,273 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:40:45,273 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:40:45,273 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:40:45,273 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 14:40:45,273 [INFO] price_checker.py:450 - ✓ service_fee: $32 NZD
2024-11-15 14:40:45,273 [INFO] price_checker.py:450 - ✓ taxes: $30 NZD
2024-11-15 14:40:45,273 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:40:45,274 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:40:45,274 [INFO] price_checker.py:457 - check_in: 24/01/2025
2024-11-15 14:40:45,274 [INFO] price_checker.py:457 - check_out: 25/01/2025
2024-11-15 14:40:45,274 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:40:45,274 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:40:45,274 [INFO] price_checker.py:457 - nightly_price: $179 NZD
2024-11-15 14:40:45,274 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 14:40:45,274 [INFO] price_checker.py:457 - service_fee: $32 NZD
2024-11-15 14:40:45,274 [INFO] price_checker.py:457 - taxes: $30 NZD
2024-11-15 14:40:45,274 [INFO] price_checker.py:457 - total: 
2024-11-15 14:40:45,274 [INFO] price_checker.py:559 - ✓ 成功获取 24/01/2025 的价格信息
2024-11-15 14:40:45,274 [INFO] price_checker.py:573 - 已完成 65/72 个日期的处理
2024-11-15 14:40:49,913 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:40:53,505 [WARNING] price_checker.py:443 - 尝试点击价格展开按钮失败: Message: no such element: Unable to locate element: {"method":"xpath","selector":"//button[contains(@class, '_12wl7g09')]"}
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00952BFE]
	(No symbol) [0x00952CDB]
	(No symbol) [0x0098EBD2]
	(No symbol) [0x00973954]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:40:53,506 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:40:53,506 [WARNING] price_checker.py:452 - ✗ cleaning_fee 未获取到
2024-11-15 14:40:53,506 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 14:40:53,506 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 14:40:53,506 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:40:53,506 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:40:53,506 [INFO] price_checker.py:457 - check_in: 26/01/2025
2024-11-15 14:40:53,506 [INFO] price_checker.py:457 - check_out: 27/01/2025
2024-11-15 14:40:53,506 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:40:53,506 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:40:53,506 [INFO] price_checker.py:457 - nightly_price: None
2024-11-15 14:40:53,506 [INFO] price_checker.py:457 - cleaning_fee: None
2024-11-15 14:40:53,506 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 14:40:53,507 [INFO] price_checker.py:457 - taxes: None
2024-11-15 14:40:53,507 [INFO] price_checker.py:457 - total: None
2024-11-15 14:40:53,507 [INFO] price_checker.py:559 - ✓ 成功获取 26/01/2025 的价格信息
2024-11-15 14:40:53,507 [INFO] price_checker.py:582 - 
=== 价格数据收集统计 ===
2024-11-15 14:40:53,507 [INFO] price_checker.py:583 - 总可预订日期: 37
2024-11-15 14:40:53,507 [INFO] price_checker.py:584 - 成功收集: 37
2024-11-15 14:40:53,507 [INFO] price_checker.py:585 - 失败日期: 0
2024-11-15 14:40:53,540 [INFO] price_checker.py:496 - 价格数据已保存到日期目录: data/20241115_144053/airbnb_price_837352260137971048.xlsx
2024-11-15 14:40:53,540 [INFO] price_checker.py:497 - 价格数据已保存到房间目录: data/room_837352260137971048/airbnb_price_20241115_144053.xlsx
2024-11-15 14:40:53,540 [INFO] price_checker.py:501 - 共导出 37 条价格记录
2024-11-15 14:40:53,541 [INFO] price_checker.py:511 - 价格统计: 平均=313.19, 最高=316.0, 最低=283.0
2024-11-15 14:40:53,541 [INFO] price_checker.py:596 - ✓ 所有价格数据已导出到日期目录: data/20241115_144053/airbnb_price_837352260137971048.xlsx
2024-11-15 14:40:53,541 [INFO] price_checker.py:597 - ✓ 所有价格数据已导出到房间目录: data/room_837352260137971048/airbnb_price_20241115_144053.xlsx
2024-11-15 14:40:53,541 [INFO] advanced_analyzer.py:213 - 成功获取价格数据
2024-11-15 14:40:53,541 [ERROR] advanced_analyzer.py:299 - 处理URL失败: 'BitBrowserManager' object has no attribute 'close_tab'
2024-11-15 14:40:53,541 [INFO] advanced_analyzer.py:275 - 线程 41216 使用浏览器 fa23ba7669ce4064b2fafb611daa22a3
2024-11-15 14:40:54,082 [INFO] bit_browser_manager.py:187 - 正在导航到: https://www.airbnb.co.nz/rooms/49525472
2024-11-15 14:40:54,181 [INFO] bit_browser_manager.py:195 - 成功加载页面: https://www.airbnb.co.nz/rooms/49525472
2024-11-15 14:40:54,181 [INFO] advanced_analyzer.py:197 - 
开始分析房源: https://www.airbnb.co.nz/rooms/49525472
2024-11-15 14:40:54,181 [INFO] airbnb_calendar_checker.py:70 - 开始检查房源日历: https://www.airbnb.co.nz/rooms/49525472
2024-11-15 14:40:54,263 [INFO] airbnb_calendar_checker.py:75 - 页面加载中...
2024-11-15 14:40:54,265 [INFO] airbnb_calendar_checker.py:82 - 页面基本加载完成
2024-11-15 14:40:55,275 [INFO] price_checker.py:553 - [66/72] 处理日期: 25/01/2025
2024-11-15 14:40:55,275 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 14:40:55,275 [INFO] price_checker.py:255 - 入住日期: 25/01/2025
2024-11-15 14:40:59,947 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:41:00,400 [INFO] price_checker.py:271 - 开始检查日期 25/01/2025 的最小入住要求...
2024-11-15 14:41:00,403 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="25, Saturday, January 2025. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-25/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">25</div></td>
2024-11-15 14:41:00,413 [INFO] price_checker.py:158 - 找到日期: 25/01/2025
2024-11-15 14:41:00,413 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:41:10,470 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:41:11,573 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:41:11,578 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:41:11,578 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 14:41:11,579 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:41:11,580 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:41:11,580 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:41:11,580 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2025-01-25&check_out=2025-01-26&adults=3&children=0&infants=0
2024-11-15 14:41:16,680 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:41:16,683 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:41:18,695 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:41:18,695 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:41:20,035 [WARNING] price_checker.py:443 - 尝试点击价格展开按钮失败: Message: no such element: Unable to locate element: {"method":"xpath","selector":"//button[contains(@class, '_12wl7g09')]"}
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00952BFE]
	(No symbol) [0x00952CDB]
	(No symbol) [0x0098EBD2]
	(No symbol) [0x00973954]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:41:20,035 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:41:20,035 [WARNING] price_checker.py:452 - ✗ cleaning_fee 未获取到
2024-11-15 14:41:20,035 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 14:41:20,035 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 14:41:20,035 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:41:20,035 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:41:20,036 [INFO] price_checker.py:457 - check_in: 30/01/2025
2024-11-15 14:41:20,036 [INFO] price_checker.py:457 - check_out: 31/01/2025
2024-11-15 14:41:20,036 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:41:20,036 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:41:20,036 [INFO] price_checker.py:457 - nightly_price: None
2024-11-15 14:41:20,036 [INFO] price_checker.py:457 - cleaning_fee: None
2024-11-15 14:41:20,036 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 14:41:20,036 [INFO] price_checker.py:457 - taxes: None
2024-11-15 14:41:20,036 [INFO] price_checker.py:457 - total: None
2024-11-15 14:41:20,036 [INFO] price_checker.py:559 - ✓ 成功获取 30/01/2025 的价格信息
2024-11-15 14:41:20,036 [INFO] price_checker.py:553 - [39/39] 处理日期: 31/01/2025
2024-11-15 14:41:20,036 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/43435162
2024-11-15 14:41:20,036 [INFO] price_checker.py:255 - 入住日期: 31/01/2025
2024-11-15 14:41:25,158 [INFO] price_checker.py:271 - 开始检查日期 31/01/2025 的最小入住要求...
2024-11-15 14:41:25,162 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_1qvi71ld" role="button" aria-disabled="false" aria-label="31, Friday, January 2025. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-31/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">31</div></td>
2024-11-15 14:41:25,172 [INFO] price_checker.py:158 - 找到日期: 31/01/2025
2024-11-15 14:41:25,172 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:41:28,756 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:41:28,756 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:41:35,188 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:41:36,293 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:41:36,298 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:41:36,298 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 14:41:36,299 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:41:36,299 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:41:36,299 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:41:36,300 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/43435162?check_in=2025-01-31&check_out=2025-02-01&adults=3&children=0&infants=0
2024-11-15 14:41:38,818 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:41:38,818 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:41:38,824 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:41:38,839 [INFO] price_checker.py:337 - 找到可见价格元素: $170 NZD 
night
$170 NZD per night
2024-11-15 14:41:38,844 [INFO] price_checker.py:350 - 找到每晚价格元素: $170 NZD 
night
$170 NZD per night
2024-11-15 14:41:38,844 [INFO] price_checker.py:356 - 成功解析折扣价格: $170 NZD
2024-11-15 14:41:38,844 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:41:38,850 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 14:41:39,353 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:41:39,360 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:41:39,366 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:41:39,366 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:41:39,367 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:41:39,373 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:41:39,379 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:41:39,379 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:41:39,379 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:41:39,386 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:41:39,390 [INFO] price_checker.py:403 - 找到价格元素: $31 NZD (HTML: <span class="_1k4xcdh">$31&nbsp;NZD</span>)
2024-11-15 14:41:39,390 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $31 NZD
2024-11-15 14:41:39,391 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:41:39,397 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:41:39,402 [INFO] price_checker.py:403 - 找到价格元素: $31 NZD (HTML: <span class="_1k4xcdh">$31&nbsp;NZD</span>)
2024-11-15 14:41:39,402 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $31 NZD
2024-11-15 14:41:39,402 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:41:39,408 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:41:39,413 [INFO] price_checker.py:403 - 找到价格元素: $28 NZD (HTML: <span class="_1k4xcdh">$28&nbsp;NZD</span>)
2024-11-15 14:41:39,413 [INFO] price_checker.py:416 - ✓ 成功设置税费: $28 NZD
2024-11-15 14:41:39,413 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:41:41,386 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:41:41,389 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:41:43,402 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:41:43,403 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:41:49,417 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:41:49,423 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:41:49,429 [INFO] price_checker.py:403 - 找到价格元素: $248 NZD (HTML: <span class="_j1kt73">$248&nbsp;NZD</span>)
2024-11-15 14:41:49,429 [INFO] price_checker.py:420 - ✓ 成功设置总价: $248 NZD
2024-11-15 14:41:49,429 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:41:49,436 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:41:49,440 [INFO] price_checker.py:403 - 找到价格元素: $248 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$248&nbsp;NZD</span></span>)
2024-11-15 14:41:49,440 [INFO] price_checker.py:420 - ✓ 成功设置总价: $248 NZD
2024-11-15 14:41:49,445 [INFO] price_checker.py:403 - 找到价格元素: $248 NZD (HTML: <span class="_j1kt73">$248&nbsp;NZD</span>)
2024-11-15 14:41:49,445 [INFO] price_checker.py:420 - ✓ 成功设置总价: $248 NZD
2024-11-15 14:41:49,449 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:41:49,449 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:41:49,449 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:41:49,449 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 14:41:49,449 [INFO] price_checker.py:450 - ✓ service_fee: $31 NZD
2024-11-15 14:41:49,450 [INFO] price_checker.py:450 - ✓ taxes: $28 NZD
2024-11-15 14:41:49,450 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:41:49,450 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:41:49,450 [INFO] price_checker.py:457 - check_in: 25/01/2025
2024-11-15 14:41:49,450 [INFO] price_checker.py:457 - check_out: 26/01/2025
2024-11-15 14:41:49,450 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:41:49,450 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:41:49,450 [INFO] price_checker.py:457 - nightly_price: $170 NZD
2024-11-15 14:41:49,450 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 14:41:49,450 [INFO] price_checker.py:457 - service_fee: $31 NZD
2024-11-15 14:41:49,450 [INFO] price_checker.py:457 - taxes: $28 NZD
2024-11-15 14:41:49,450 [INFO] price_checker.py:457 - total: 
2024-11-15 14:41:49,450 [INFO] price_checker.py:559 - ✓ 成功获取 25/01/2025 的价格信息
2024-11-15 14:41:49,451 [INFO] price_checker.py:553 - [67/72] 处理日期: 26/01/2025
2024-11-15 14:41:49,451 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 14:41:49,451 [INFO] price_checker.py:255 - 入住日期: 26/01/2025
2024-11-15 14:41:53,430 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:41:53,430 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:41:54,507 [INFO] airbnb_calendar_checker.py:120 - 找到日历按钮: //button[contains(@aria-label, 'Choose')]
2024-11-15 14:41:54,510 [INFO] airbnb_calendar_checker.py:134 - 已滚动到日历按钮位置
2024-11-15 14:41:54,566 [INFO] price_checker.py:271 - 开始检查日期 26/01/2025 的最小入住要求...
2024-11-15 14:41:54,569 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_1mv3p4vt" role="button" aria-disabled="false" aria-label="26, Sunday, January 2025. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-26/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">26</div></td>
2024-11-15 14:41:54,578 [INFO] price_checker.py:158 - 找到日期: 26/01/2025
2024-11-15 14:41:54,578 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:41:55,511 [INFO] airbnb_calendar_checker.py:139 - 日历按钮已准备就绪
2024-11-15 14:41:56,602 [INFO] airbnb_calendar_checker.py:153 - JavaScript点击日历按钮成功
2024-11-15 14:42:03,440 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:42:03,440 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:42:04,593 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:42:05,713 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:42:05,718 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:42:05,719 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 14:42:05,720 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:42:05,720 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:42:05,720 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:42:05,720 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2025-01-26&check_out=2025-01-27&adults=3&children=0&infants=0
2024-11-15 14:42:10,810 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:42:10,813 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:42:12,824 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:42:12,824 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:42:13,491 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:42:13,491 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w ._11jcbg2
2024-11-15 14:42:16,687 [INFO] airbnb_calendar_checker.py:184 - 日历内容已加载: //div[contains(@data-testid, 'calendar')]
2024-11-15 14:42:16,698 [INFO] airbnb_calendar_checker.py:199 - 找到 123 个日期单元格
2024-11-15 14:42:16,806 [INFO] airbnb_calendar_checker.py:211 - 找到 123 个日期单元格
2024-11-15 14:42:16,807 [INFO] airbnb_calendar_checker.py:256 - 原始单元格数量: 123
2024-11-15 14:42:16,807 [INFO] airbnb_calendar_checker.py:257 - 去重后数据条数: 123
2024-11-15 14:42:16,807 [INFO] airbnb_calendar_checker.py:258 - 处理的唯一日期数: 123
2024-11-15 14:42:16,808 [INFO] airbnb_calendar_checker.py:262 - 收集到 123 条有效日历数据
2024-11-15 14:42:16,808 [INFO] airbnb_calendar_checker.py:22 - 开始导出数据到Excel...
2024-11-15 14:42:16,808 [INFO] airbnb_calendar_checker.py:32 - 处理房源ID: 49525472
2024-11-15 14:42:16,808 [INFO] airbnb_calendar_checker.py:37 - 将创建文件: data/airbnb_calendar_49525472_20241115_144216.xlsx
2024-11-15 14:42:16,808 [INFO] airbnb_calendar_checker.py:41 - 创建DataFrame，共 123 行数据
2024-11-15 14:42:16,831 [INFO] airbnb_calendar_checker.py:52 - 数据已成功导出到Excel文件: data/airbnb_calendar_49525472_20241115_144216.xlsx
2024-11-15 14:42:16,831 [INFO] airbnb_calendar_checker.py:57 - 文件创建成功，大小: 9.03 KB
2024-11-15 14:42:16,831 [INFO] airbnb_calendar_checker.py:265 - 日历数据已成功导出到: data/airbnb_calendar_49525472_20241115_144216.xlsx
2024-11-15 14:42:16,831 [INFO] advanced_analyzer.py:206 - 成功获取日历数据: 123 条记录
2024-11-15 14:42:16,831 [INFO] price_checker.py:537 - 开始检查房源价格: https://www.airbnb.co.nz/rooms/49525472
2024-11-15 14:42:16,831 [INFO] price_checker.py:530 - 找到 50 个可预订日期
2024-11-15 14:42:16,831 [INFO] price_checker.py:553 - [1/50] 处理日期: 17/11/2024
2024-11-15 14:42:16,831 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/49525472
2024-11-15 14:42:16,831 [INFO] price_checker.py:255 - 入住日期: 17/11/2024
2024-11-15 14:42:21,968 [INFO] price_checker.py:271 - 开始检查日期 17/11/2024 的最小入住要求...
2024-11-15 14:42:21,971 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_1mv3p4vt" role="button" aria-disabled="false" aria-label="17, Sunday, November 2024. Available Select start date " tabindex="0" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-17/11/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">17</div></td>
2024-11-15 14:42:21,980 [INFO] price_checker.py:158 - 找到日期: 17/11/2024
2024-11-15 14:42:21,980 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:42:22,881 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:42:22,881 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:42:23,549 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:42:23,549 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[contains(@class, '_wgmchy')]//span[contains(text(), '$') and contains(text(), 'NZD')]
2024-11-15 14:42:31,985 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:42:32,885 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:42:32,886 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:42:32,891 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:42:32,905 [INFO] price_checker.py:337 - 找到可见价格元素: $174 NZD 
night
$174 NZD per night
2024-11-15 14:42:32,911 [INFO] price_checker.py:350 - 找到每晚价格元素: $174 NZD 
night
$174 NZD per night
2024-11-15 14:42:32,911 [INFO] price_checker.py:356 - 成功解析折扣价格: $174 NZD
2024-11-15 14:42:32,911 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:42:32,920 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 14:42:33,076 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:42:33,082 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:42:33,082 [ERROR] price_checker.py:246 - 错误类型: MoveTargetOutOfBoundsException
2024-11-15 14:42:33,083 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.MoveTargetOutOfBoundsException: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:42:33,084 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:42:33,084 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:42:33,084 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/49525472?check_in=2024-11-17&check_out=2024-11-18&adults=3&children=0&infants=0
2024-11-15 14:42:33,423 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:42:33,431 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:42:33,441 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:42:33,442 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:42:33,442 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:42:33,453 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:42:33,459 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:42:33,459 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:42:33,459 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:42:33,465 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:42:33,470 [INFO] price_checker.py:403 - 找到价格元素: $31 NZD (HTML: <span class="_1k4xcdh">$31&nbsp;NZD</span>)
2024-11-15 14:42:33,470 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $31 NZD
2024-11-15 14:42:33,470 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:42:33,478 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:42:33,482 [INFO] price_checker.py:403 - 找到价格元素: $31 NZD (HTML: <span class="_1k4xcdh">$31&nbsp;NZD</span>)
2024-11-15 14:42:33,482 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $31 NZD
2024-11-15 14:42:33,483 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:42:33,489 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:42:33,494 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 14:42:33,494 [INFO] price_checker.py:416 - ✓ 成功设置税费: $29 NZD
2024-11-15 14:42:33,494 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:42:33,552 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:42:33,552 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:42:38,175 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:42:38,178 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:42:40,189 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:42:40,189 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:42:43,524 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:42:43,530 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:42:43,536 [INFO] price_checker.py:403 - 找到价格元素: $253 NZD (HTML: <span class="_j1kt73">$253&nbsp;NZD</span>)
2024-11-15 14:42:43,536 [INFO] price_checker.py:420 - ✓ 成功设置总价: $253 NZD
2024-11-15 14:42:43,536 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:42:43,542 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:42:43,547 [INFO] price_checker.py:403 - 找到价格元素: $253 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$253&nbsp;NZD</span></span>)
2024-11-15 14:42:43,547 [INFO] price_checker.py:420 - ✓ 成功设置总价: $253 NZD
2024-11-15 14:42:43,551 [INFO] price_checker.py:403 - 找到价格元素: $253 NZD (HTML: <span class="_j1kt73">$253&nbsp;NZD</span>)
2024-11-15 14:42:43,552 [INFO] price_checker.py:420 - ✓ 成功设置总价: $253 NZD
2024-11-15 14:42:43,556 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:42:43,556 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:42:43,556 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:42:43,556 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 14:42:43,556 [INFO] price_checker.py:450 - ✓ service_fee: $31 NZD
2024-11-15 14:42:43,556 [INFO] price_checker.py:450 - ✓ taxes: $29 NZD
2024-11-15 14:42:43,556 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:42:43,556 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:42:43,557 [INFO] price_checker.py:457 - check_in: 26/01/2025
2024-11-15 14:42:43,557 [INFO] price_checker.py:457 - check_out: 27/01/2025
2024-11-15 14:42:43,557 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:42:43,557 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:42:43,557 [INFO] price_checker.py:457 - nightly_price: $174 NZD
2024-11-15 14:42:43,557 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 14:42:43,557 [INFO] price_checker.py:457 - service_fee: $31 NZD
2024-11-15 14:42:43,557 [INFO] price_checker.py:457 - taxes: $29 NZD
2024-11-15 14:42:43,557 [INFO] price_checker.py:457 - total: 
2024-11-15 14:42:43,557 [INFO] price_checker.py:559 - ✓ 成功获取 26/01/2025 的价格信息
2024-11-15 14:42:43,557 [INFO] price_checker.py:553 - [68/72] 处理日期: 27/01/2025
2024-11-15 14:42:43,557 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 14:42:43,558 [INFO] price_checker.py:255 - 入住日期: 27/01/2025
2024-11-15 14:42:43,571 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 14:42:43,571 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:42:48,677 [INFO] price_checker.py:271 - 开始检查日期 27/01/2025 的最小入住要求...
2024-11-15 14:42:48,680 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_sl5yz7r" role="button" aria-disabled="false" aria-label="27, Monday, January 2025. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-27/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">27</div></td>
2024-11-15 14:42:48,709 [INFO] price_checker.py:158 - 找到日期: 27/01/2025
2024-11-15 14:42:48,709 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:42:50,199 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:42:50,199 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:42:53,627 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:42:58,728 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:42:59,854 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:42:59,859 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:42:59,860 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 14:42:59,861 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:42:59,861 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:42:59,861 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:42:59,861 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2025-01-27&check_out=2025-01-28&adults=3&children=0&infants=0
2024-11-15 14:43:00,206 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:43:00,206 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:43:00,211 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:43:00,227 [INFO] price_checker.py:337 - 找到可见价格元素: $202 NZD 
night
$202 NZD per night
2024-11-15 14:43:00,233 [INFO] price_checker.py:350 - 找到每晚价格元素: $202 NZD 
night
$202 NZD per night
2024-11-15 14:43:00,233 [INFO] price_checker.py:356 - 成功解析折扣价格: $202 NZD
2024-11-15 14:43:00,233 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:43:00,239 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 14:43:00,742 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:43:00,749 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:43:00,755 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:43:00,755 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:43:00,755 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:43:00,762 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:43:00,766 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:43:00,767 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:43:00,767 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:43:03,638 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:43:04,971 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:43:04,973 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:43:06,985 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:43:06,985 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:43:10,786 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:43:13,642 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:43:16,994 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:43:16,994 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:43:20,841 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:43:20,847 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:43:20,854 [INFO] price_checker.py:403 - 找到价格元素: $38 NZD (HTML: <span class="_1k4xcdh">$38&nbsp;NZD</span>)
2024-11-15 14:43:20,854 [INFO] price_checker.py:416 - ✓ 成功设置税费: $38 NZD
2024-11-15 14:43:20,854 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:43:23,697 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:43:27,052 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:43:27,052 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:43:27,058 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:43:27,073 [INFO] price_checker.py:337 - 找到可见价格元素: $173 NZD 
night
$173 NZD per night
2024-11-15 14:43:27,079 [INFO] price_checker.py:350 - 找到每晚价格元素: $173 NZD 
night
$173 NZD per night
2024-11-15 14:43:27,079 [INFO] price_checker.py:356 - 成功解析折扣价格: $173 NZD
2024-11-15 14:43:27,079 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:43:27,087 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 14:43:27,590 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:43:27,597 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:43:27,603 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:43:27,603 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:43:27,603 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:43:27,611 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:43:27,616 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:43:27,616 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:43:27,616 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:43:27,622 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:43:27,627 [INFO] price_checker.py:403 - 找到价格元素: $31 NZD (HTML: <span class="_1k4xcdh">$31&nbsp;NZD</span>)
2024-11-15 14:43:27,627 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $31 NZD
2024-11-15 14:43:27,627 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:43:27,633 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:43:27,638 [INFO] price_checker.py:403 - 找到价格元素: $31 NZD (HTML: <span class="_1k4xcdh">$31&nbsp;NZD</span>)
2024-11-15 14:43:27,638 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $31 NZD
2024-11-15 14:43:27,638 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:43:27,645 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:43:27,649 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 14:43:27,649 [INFO] price_checker.py:416 - ✓ 成功设置税费: $29 NZD
2024-11-15 14:43:27,649 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:43:30,860 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:43:30,870 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:43:30,878 [INFO] price_checker.py:403 - 找到价格元素: $290 NZD (HTML: <span class="_j1kt73">$290&nbsp;NZD</span>)
2024-11-15 14:43:30,878 [INFO] price_checker.py:420 - ✓ 成功设置总价: $290 NZD
2024-11-15 14:43:30,878 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:43:30,891 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:43:30,897 [INFO] price_checker.py:403 - 找到价格元素: $290 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$290&nbsp;NZD</span></span>)
2024-11-15 14:43:30,897 [INFO] price_checker.py:420 - ✓ 成功设置总价: $290 NZD
2024-11-15 14:43:30,902 [INFO] price_checker.py:403 - 找到价格元素: $290 NZD (HTML: <span class="_j1kt73">$290&nbsp;NZD</span>)
2024-11-15 14:43:30,902 [INFO] price_checker.py:420 - ✓ 成功设置总价: $290 NZD
2024-11-15 14:43:30,907 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:43:30,907 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:43:30,907 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:43:30,907 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 14:43:30,907 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 14:43:30,908 [INFO] price_checker.py:450 - ✓ taxes: $38 NZD
2024-11-15 14:43:30,908 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:43:30,908 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:43:30,908 [INFO] price_checker.py:457 - check_in: 17/11/2024
2024-11-15 14:43:30,908 [INFO] price_checker.py:457 - check_out: 18/11/2024
2024-11-15 14:43:30,908 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:43:30,908 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:43:30,908 [INFO] price_checker.py:457 - nightly_price: $202 NZD
2024-11-15 14:43:30,908 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 14:43:30,908 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 14:43:30,908 [INFO] price_checker.py:457 - taxes: $38 NZD
2024-11-15 14:43:30,908 [INFO] price_checker.py:457 - total: 
2024-11-15 14:43:30,908 [INFO] price_checker.py:559 - ✓ 成功获取 17/11/2024 的价格信息
2024-11-15 14:43:30,908 [INFO] price_checker.py:553 - [2/50] 处理日期: 18/11/2024
2024-11-15 14:43:30,908 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/49525472
2024-11-15 14:43:30,909 [INFO] price_checker.py:255 - 入住日期: 18/11/2024
2024-11-15 14:43:33,759 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:43:36,032 [INFO] price_checker.py:271 - 开始检查日期 18/11/2024 的最小入住要求...
2024-11-15 14:43:36,035 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_sl5yz7r" role="button" aria-disabled="false" aria-label="18, Monday, November 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-18/11/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">18</div></td>
2024-11-15 14:43:36,045 [INFO] price_checker.py:158 - 找到日期: 18/11/2024
2024-11-15 14:43:36,045 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:43:37,653 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:43:37,660 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:43:37,665 [INFO] price_checker.py:403 - 找到价格元素: $252 NZD (HTML: <span class="_j1kt73">$252&nbsp;NZD</span>)
2024-11-15 14:43:37,665 [INFO] price_checker.py:420 - ✓ 成功设置总价: $252 NZD
2024-11-15 14:43:37,665 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:43:37,675 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:43:37,682 [INFO] price_checker.py:403 - 找到价格元素: $252 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$252&nbsp;NZD</span></span>)
2024-11-15 14:43:37,682 [INFO] price_checker.py:420 - ✓ 成功设置总价: $252 NZD
2024-11-15 14:43:37,691 [INFO] price_checker.py:403 - 找到价格元素: $252 NZD (HTML: <span class="_j1kt73">$252&nbsp;NZD</span>)
2024-11-15 14:43:37,691 [INFO] price_checker.py:420 - ✓ 成功设置总价: $252 NZD
2024-11-15 14:43:37,697 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:43:37,697 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:43:37,697 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:43:37,697 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 14:43:37,697 [INFO] price_checker.py:450 - ✓ service_fee: $31 NZD
2024-11-15 14:43:37,697 [INFO] price_checker.py:450 - ✓ taxes: $29 NZD
2024-11-15 14:43:37,697 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:43:37,697 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:43:37,697 [INFO] price_checker.py:457 - check_in: 27/01/2025
2024-11-15 14:43:37,697 [INFO] price_checker.py:457 - check_out: 28/01/2025
2024-11-15 14:43:37,697 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:43:37,698 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:43:37,698 [INFO] price_checker.py:457 - nightly_price: $173 NZD
2024-11-15 14:43:37,698 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 14:43:37,698 [INFO] price_checker.py:457 - service_fee: $31 NZD
2024-11-15 14:43:37,698 [INFO] price_checker.py:457 - taxes: $29 NZD
2024-11-15 14:43:37,698 [INFO] price_checker.py:457 - total: 
2024-11-15 14:43:37,698 [INFO] price_checker.py:559 - ✓ 成功获取 27/01/2025 的价格信息
2024-11-15 14:43:37,698 [INFO] price_checker.py:553 - [69/72] 处理日期: 28/01/2025
2024-11-15 14:43:37,698 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 14:43:37,698 [INFO] price_checker.py:255 - 入住日期: 28/01/2025
2024-11-15 14:43:42,834 [INFO] price_checker.py:271 - 开始检查日期 28/01/2025 的最小入住要求...
2024-11-15 14:43:42,837 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="28, Tuesday, January 2025. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-28/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">28</div></td>
2024-11-15 14:43:42,846 [INFO] price_checker.py:158 - 找到日期: 28/01/2025
2024-11-15 14:43:42,846 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:43:43,814 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:43:46,084 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:43:47,177 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:43:47,187 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:43:47,187 [ERROR] price_checker.py:246 - 错误类型: MoveTargetOutOfBoundsException
2024-11-15 14:43:47,189 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.MoveTargetOutOfBoundsException: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:43:47,189 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:43:47,189 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:43:47,189 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/49525472?check_in=2024-11-18&check_out=2024-11-19&adults=3&children=0&infants=0
2024-11-15 14:43:52,308 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:43:52,311 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:43:52,851 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:43:53,874 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:43:53,954 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:43:53,959 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:43:53,959 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 14:43:53,960 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:43:53,961 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:43:53,961 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:43:53,961 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2025-01-28&check_out=2025-01-29&adults=3&children=0&infants=0
2024-11-15 14:43:54,324 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:43:54,325 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:43:59,051 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:43:59,053 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:44:01,065 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:44:01,065 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:44:04,332 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:44:04,332 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:44:11,082 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:44:11,082 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:44:13,939 [WARNING] price_checker.py:443 - 尝试点击价格展开按钮失败: Message: no such element: Unable to locate element: {"method":"xpath","selector":"//button[contains(@class, '_12wl7g09')]"}
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00952BFE]
	(No symbol) [0x00952CDB]
	(No symbol) [0x0098EBD2]
	(No symbol) [0x00973954]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:44:13,940 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:44:13,940 [WARNING] price_checker.py:452 - ✗ cleaning_fee 未获取到
2024-11-15 14:44:13,940 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 14:44:13,940 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 14:44:13,940 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:44:13,940 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:44:13,940 [INFO] price_checker.py:457 - check_in: 31/01/2025
2024-11-15 14:44:13,940 [INFO] price_checker.py:457 - check_out: 01/02/2025
2024-11-15 14:44:13,940 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:44:13,940 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:44:13,940 [INFO] price_checker.py:457 - nightly_price: None
2024-11-15 14:44:13,941 [INFO] price_checker.py:457 - cleaning_fee: None
2024-11-15 14:44:13,941 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 14:44:13,941 [INFO] price_checker.py:457 - taxes: None
2024-11-15 14:44:13,941 [INFO] price_checker.py:457 - total: None
2024-11-15 14:44:13,941 [INFO] price_checker.py:559 - ✓ 成功获取 31/01/2025 的价格信息
2024-11-15 14:44:13,941 [INFO] price_checker.py:582 - 
=== 价格数据收集统计 ===
2024-11-15 14:44:13,941 [INFO] price_checker.py:583 - 总可预订日期: 39
2024-11-15 14:44:13,941 [INFO] price_checker.py:584 - 成功收集: 39
2024-11-15 14:44:13,941 [INFO] price_checker.py:585 - 失败日期: 0
2024-11-15 14:44:13,974 [INFO] price_checker.py:496 - 价格数据已保存到日期目录: data/20241115_144413/airbnb_price_43435162.xlsx
2024-11-15 14:44:13,975 [INFO] price_checker.py:497 - 价格数据已保存到房间目录: data/room_43435162/airbnb_price_20241115_144413.xlsx
2024-11-15 14:44:13,975 [INFO] price_checker.py:501 - 共导出 39 条价格记录
2024-11-15 14:44:13,975 [INFO] price_checker.py:511 - 价格统计: 平均=310.07, 最高=403.0, 最低=305.0
2024-11-15 14:44:13,975 [INFO] price_checker.py:596 - ✓ 所有价格数据已导出到日期目录: data/20241115_144413/airbnb_price_43435162.xlsx
2024-11-15 14:44:13,975 [INFO] price_checker.py:597 - ✓ 所有价格数据已导出到房间目录: data/room_43435162/airbnb_price_20241115_144413.xlsx
2024-11-15 14:44:13,975 [INFO] advanced_analyzer.py:213 - 成功获取价格数据
2024-11-15 14:44:13,975 [ERROR] advanced_analyzer.py:299 - 处理URL失败: 'BitBrowserManager' object has no attribute 'close_tab'
2024-11-15 14:44:13,975 [INFO] advanced_analyzer.py:275 - 线程 36928 使用浏览器 cf51683770d94ff3931408fce73c90f3
2024-11-15 14:44:14,343 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:44:14,343 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:44:14,349 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:44:14,366 [INFO] price_checker.py:337 - 找到可见价格元素: $202 NZD 
night
$202 NZD per night
2024-11-15 14:44:14,372 [INFO] price_checker.py:350 - 找到每晚价格元素: $202 NZD 
night
$202 NZD per night
2024-11-15 14:44:14,372 [INFO] price_checker.py:356 - 成功解析折扣价格: $202 NZD
2024-11-15 14:44:14,372 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:44:14,378 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 14:44:14,517 [INFO] bit_browser_manager.py:187 - 正在导航到: https://www.airbnb.co.nz/rooms/716883705085875481
2024-11-15 14:44:14,625 [INFO] bit_browser_manager.py:195 - 成功加载页面: https://www.airbnb.co.nz/rooms/716883705085875481
2024-11-15 14:44:14,625 [INFO] advanced_analyzer.py:197 - 
开始分析房源: https://www.airbnb.co.nz/rooms/716883705085875481
2024-11-15 14:44:14,625 [INFO] airbnb_calendar_checker.py:70 - 开始检查房源日历: https://www.airbnb.co.nz/rooms/716883705085875481
2024-11-15 14:44:14,704 [INFO] airbnb_calendar_checker.py:75 - 页面加载中...
2024-11-15 14:44:14,706 [INFO] airbnb_calendar_checker.py:82 - 页面基本加载完成
2024-11-15 14:44:14,881 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:44:14,888 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:44:14,894 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:44:14,894 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:44:14,894 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:44:14,901 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:44:14,906 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:44:14,906 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:44:14,906 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:44:21,137 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:44:21,137 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:44:21,143 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:44:21,158 [INFO] price_checker.py:337 - 找到可见价格元素: $165 NZD 
night
$165 NZD per night
2024-11-15 14:44:21,163 [INFO] price_checker.py:350 - 找到每晚价格元素: $165 NZD 
night
$165 NZD per night
2024-11-15 14:44:21,163 [INFO] price_checker.py:356 - 成功解析折扣价格: $165 NZD
2024-11-15 14:44:21,163 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:44:21,170 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 14:44:21,675 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:44:21,682 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:44:21,688 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:44:21,688 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:44:21,688 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:44:21,695 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:44:21,699 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:44:21,699 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:44:21,699 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:44:21,706 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:44:21,711 [INFO] price_checker.py:403 - 找到价格元素: $30 NZD (HTML: <span class="_1k4xcdh">$30&nbsp;NZD</span>)
2024-11-15 14:44:21,711 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $30 NZD
2024-11-15 14:44:21,711 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:44:21,717 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:44:21,722 [INFO] price_checker.py:403 - 找到价格元素: $30 NZD (HTML: <span class="_1k4xcdh">$30&nbsp;NZD</span>)
2024-11-15 14:44:21,722 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $30 NZD
2024-11-15 14:44:21,722 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:44:21,729 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:44:21,733 [INFO] price_checker.py:403 - 找到价格元素: $28 NZD (HTML: <span class="_1k4xcdh">$28&nbsp;NZD</span>)
2024-11-15 14:44:21,734 [INFO] price_checker.py:416 - ✓ 成功设置税费: $28 NZD
2024-11-15 14:44:21,734 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:44:24,960 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:44:31,761 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:44:31,768 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:44:31,773 [INFO] price_checker.py:403 - 找到价格元素: $243 NZD (HTML: <span class="_j1kt73">$243&nbsp;NZD</span>)
2024-11-15 14:44:31,773 [INFO] price_checker.py:420 - ✓ 成功设置总价: $243 NZD
2024-11-15 14:44:31,773 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:44:31,779 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:44:31,784 [INFO] price_checker.py:403 - 找到价格元素: $243 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$243&nbsp;NZD</span></span>)
2024-11-15 14:44:31,784 [INFO] price_checker.py:420 - ✓ 成功设置总价: $243 NZD
2024-11-15 14:44:31,788 [INFO] price_checker.py:403 - 找到价格元素: $243 NZD (HTML: <span class="_j1kt73">$243&nbsp;NZD</span>)
2024-11-15 14:44:31,788 [INFO] price_checker.py:420 - ✓ 成功设置总价: $243 NZD
2024-11-15 14:44:31,794 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:44:31,794 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:44:31,794 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:44:31,794 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 14:44:31,794 [INFO] price_checker.py:450 - ✓ service_fee: $30 NZD
2024-11-15 14:44:31,794 [INFO] price_checker.py:450 - ✓ taxes: $28 NZD
2024-11-15 14:44:31,795 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:44:31,795 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:44:31,795 [INFO] price_checker.py:457 - check_in: 28/01/2025
2024-11-15 14:44:31,795 [INFO] price_checker.py:457 - check_out: 29/01/2025
2024-11-15 14:44:31,795 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:44:31,795 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:44:31,795 [INFO] price_checker.py:457 - nightly_price: $165 NZD
2024-11-15 14:44:31,795 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 14:44:31,795 [INFO] price_checker.py:457 - service_fee: $30 NZD
2024-11-15 14:44:31,795 [INFO] price_checker.py:457 - taxes: $28 NZD
2024-11-15 14:44:31,795 [INFO] price_checker.py:457 - total: 
2024-11-15 14:44:31,795 [INFO] price_checker.py:559 - ✓ 成功获取 28/01/2025 的价格信息
2024-11-15 14:44:31,795 [INFO] price_checker.py:553 - [70/72] 处理日期: 29/01/2025
2024-11-15 14:44:31,796 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 14:44:31,796 [INFO] price_checker.py:255 - 入住日期: 29/01/2025
2024-11-15 14:44:34,972 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:44:34,979 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:44:34,986 [INFO] price_checker.py:403 - 找到价格元素: $38 NZD (HTML: <span class="_1k4xcdh">$38&nbsp;NZD</span>)
2024-11-15 14:44:34,986 [INFO] price_checker.py:416 - ✓ 成功设置税费: $38 NZD
2024-11-15 14:44:34,986 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:44:36,916 [INFO] price_checker.py:271 - 开始检查日期 29/01/2025 的最小入住要求...
2024-11-15 14:44:36,919 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="29, Wednesday, January 2025. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-29/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">29</div></td>
2024-11-15 14:44:36,930 [INFO] price_checker.py:158 - 找到日期: 29/01/2025
2024-11-15 14:44:36,931 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:44:44,994 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:44:45,001 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:44:45,006 [INFO] price_checker.py:403 - 找到价格元素: $290 NZD (HTML: <span class="_j1kt73">$290&nbsp;NZD</span>)
2024-11-15 14:44:45,006 [INFO] price_checker.py:420 - ✓ 成功设置总价: $290 NZD
2024-11-15 14:44:45,006 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:44:45,013 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:44:45,017 [INFO] price_checker.py:403 - 找到价格元素: $290 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$290&nbsp;NZD</span></span>)
2024-11-15 14:44:45,018 [INFO] price_checker.py:420 - ✓ 成功设置总价: $290 NZD
2024-11-15 14:44:45,022 [INFO] price_checker.py:403 - 找到价格元素: $290 NZD (HTML: <span class="_j1kt73">$290&nbsp;NZD</span>)
2024-11-15 14:44:45,022 [INFO] price_checker.py:420 - ✓ 成功设置总价: $290 NZD
2024-11-15 14:44:45,027 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:44:45,027 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:44:45,027 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:44:45,027 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 14:44:45,027 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 14:44:45,028 [INFO] price_checker.py:450 - ✓ taxes: $38 NZD
2024-11-15 14:44:45,028 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:44:45,028 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:44:45,028 [INFO] price_checker.py:457 - check_in: 18/11/2024
2024-11-15 14:44:45,028 [INFO] price_checker.py:457 - check_out: 19/11/2024
2024-11-15 14:44:45,028 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:44:45,028 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:44:45,028 [INFO] price_checker.py:457 - nightly_price: $202 NZD
2024-11-15 14:44:45,028 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 14:44:45,028 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 14:44:45,028 [INFO] price_checker.py:457 - taxes: $38 NZD
2024-11-15 14:44:45,028 [INFO] price_checker.py:457 - total: 
2024-11-15 14:44:45,028 [INFO] price_checker.py:559 - ✓ 成功获取 18/11/2024 的价格信息
2024-11-15 14:44:45,028 [INFO] price_checker.py:553 - [3/50] 处理日期: 19/11/2024
2024-11-15 14:44:45,029 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/49525472
2024-11-15 14:44:45,029 [INFO] price_checker.py:255 - 入住日期: 19/11/2024
2024-11-15 14:44:46,980 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:44:48,095 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:44:48,102 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:44:48,102 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 14:44:48,103 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:44:48,104 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:44:48,104 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:44:48,104 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2025-01-29&check_out=2025-01-30&adults=3&children=0&infants=0
2024-11-15 14:44:50,151 [INFO] price_checker.py:271 - 开始检查日期 19/11/2024 的最小入住要求...
2024-11-15 14:44:50,160 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="19, Tuesday, November 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-19/11/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">19</div></td>
2024-11-15 14:44:50,171 [INFO] price_checker.py:158 - 找到日期: 19/11/2024
2024-11-15 14:44:50,171 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:44:53,213 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:44:53,216 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:44:55,227 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:44:55,227 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:45:00,189 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:45:01,282 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:45:01,288 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:45:01,289 [ERROR] price_checker.py:246 - 错误类型: MoveTargetOutOfBoundsException
2024-11-15 14:45:01,290 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.MoveTargetOutOfBoundsException: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:45:01,290 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:45:01,290 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:45:01,290 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/49525472?check_in=2024-11-19&check_out=2024-11-20&adults=3&children=0&infants=0
2024-11-15 14:45:05,279 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:45:05,279 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:45:06,415 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:45:06,418 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:45:08,429 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:45:08,429 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:45:14,838 [INFO] airbnb_calendar_checker.py:120 - 找到日历按钮: //button[contains(@aria-label, 'Choose')]
2024-11-15 14:45:14,841 [INFO] airbnb_calendar_checker.py:134 - 已滚动到日历按钮位置
2024-11-15 14:45:15,282 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:45:15,283 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:45:15,288 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:45:15,304 [INFO] price_checker.py:337 - 找到可见价格元素: $165 NZD 
night
$165 NZD per night
2024-11-15 14:45:15,309 [INFO] price_checker.py:350 - 找到每晚价格元素: $165 NZD 
night
$165 NZD per night
2024-11-15 14:45:15,310 [INFO] price_checker.py:356 - 成功解析折扣价格: $165 NZD
2024-11-15 14:45:15,310 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:45:15,316 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 14:45:15,819 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:45:15,827 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:45:15,832 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:45:15,833 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:45:15,833 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:45:15,839 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:45:15,841 [INFO] airbnb_calendar_checker.py:139 - 日历按钮已准备就绪
2024-11-15 14:45:15,844 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:45:15,844 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:45:15,844 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:45:15,851 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:45:15,856 [INFO] price_checker.py:403 - 找到价格元素: $30 NZD (HTML: <span class="_1k4xcdh">$30&nbsp;NZD</span>)
2024-11-15 14:45:15,856 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $30 NZD
2024-11-15 14:45:15,856 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:45:15,863 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:45:15,868 [INFO] price_checker.py:403 - 找到价格元素: $30 NZD (HTML: <span class="_1k4xcdh">$30&nbsp;NZD</span>)
2024-11-15 14:45:15,868 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $30 NZD
2024-11-15 14:45:15,868 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:45:15,875 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:45:15,880 [INFO] price_checker.py:403 - 找到价格元素: $28 NZD (HTML: <span class="_1k4xcdh">$28&nbsp;NZD</span>)
2024-11-15 14:45:15,880 [INFO] price_checker.py:416 - ✓ 成功设置税费: $28 NZD
2024-11-15 14:45:15,880 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:45:15,915 [INFO] airbnb_calendar_checker.py:148 - 直接点击日历按钮成功
2024-11-15 14:45:18,443 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:45:18,443 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:45:25,914 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:45:25,921 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:45:25,926 [INFO] price_checker.py:403 - 找到价格元素: $243 NZD (HTML: <span class="_j1kt73">$243&nbsp;NZD</span>)
2024-11-15 14:45:25,926 [INFO] price_checker.py:420 - ✓ 成功设置总价: $243 NZD
2024-11-15 14:45:25,926 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:45:25,933 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:45:25,938 [INFO] price_checker.py:403 - 找到价格元素: $243 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$243&nbsp;NZD</span></span>)
2024-11-15 14:45:25,938 [INFO] price_checker.py:420 - ✓ 成功设置总价: $243 NZD
2024-11-15 14:45:25,942 [INFO] price_checker.py:403 - 找到价格元素: $243 NZD (HTML: <span class="_j1kt73">$243&nbsp;NZD</span>)
2024-11-15 14:45:25,942 [INFO] price_checker.py:420 - ✓ 成功设置总价: $243 NZD
2024-11-15 14:45:25,948 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:45:25,948 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:45:25,948 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:45:25,948 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 14:45:25,948 [INFO] price_checker.py:450 - ✓ service_fee: $30 NZD
2024-11-15 14:45:25,948 [INFO] price_checker.py:450 - ✓ taxes: $28 NZD
2024-11-15 14:45:25,948 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:45:25,948 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:45:25,948 [INFO] price_checker.py:457 - check_in: 29/01/2025
2024-11-15 14:45:25,948 [INFO] price_checker.py:457 - check_out: 30/01/2025
2024-11-15 14:45:25,949 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:45:25,949 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:45:25,949 [INFO] price_checker.py:457 - nightly_price: $165 NZD
2024-11-15 14:45:25,949 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 14:45:25,949 [INFO] price_checker.py:457 - service_fee: $30 NZD
2024-11-15 14:45:25,949 [INFO] price_checker.py:457 - taxes: $28 NZD
2024-11-15 14:45:25,949 [INFO] price_checker.py:457 - total: 
2024-11-15 14:45:25,949 [INFO] price_checker.py:559 - ✓ 成功获取 29/01/2025 的价格信息
2024-11-15 14:45:25,949 [INFO] price_checker.py:573 - 已完成 70/72 个日期的处理
2024-11-15 14:45:28,458 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:45:28,458 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:45:28,464 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:45:28,481 [INFO] price_checker.py:337 - 找到可见价格元素: $202 NZD 
night
$202 NZD per night
2024-11-15 14:45:28,488 [INFO] price_checker.py:350 - 找到每晚价格元素: $202 NZD 
night
$202 NZD per night
2024-11-15 14:45:28,488 [INFO] price_checker.py:356 - 成功解析折扣价格: $202 NZD
2024-11-15 14:45:28,488 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:45:28,494 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 14:45:28,997 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:45:29,004 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:45:29,011 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:45:29,011 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:45:29,011 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:45:29,018 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:45:29,022 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:45:29,022 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:45:29,022 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:45:35,950 [INFO] price_checker.py:553 - [71/72] 处理日期: 30/01/2025
2024-11-15 14:45:35,950 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 14:45:35,950 [INFO] price_checker.py:255 - 入住日期: 30/01/2025
2024-11-15 14:45:36,016 [INFO] airbnb_calendar_checker.py:184 - 日历内容已加载: //div[contains(@data-testid, 'calendar')]
2024-11-15 14:45:36,027 [INFO] airbnb_calendar_checker.py:199 - 找到 123 个日期单元格
2024-11-15 14:45:36,128 [INFO] airbnb_calendar_checker.py:211 - 找到 123 个日期单元格
2024-11-15 14:45:36,129 [INFO] airbnb_calendar_checker.py:256 - 原始单元格数量: 123
2024-11-15 14:45:36,129 [INFO] airbnb_calendar_checker.py:257 - 去重后数据条数: 123
2024-11-15 14:45:36,129 [INFO] airbnb_calendar_checker.py:258 - 处理的唯一日期数: 123
2024-11-15 14:45:36,129 [INFO] airbnb_calendar_checker.py:262 - 收集到 123 条有效日历数据
2024-11-15 14:45:36,129 [INFO] airbnb_calendar_checker.py:22 - 开始导出数据到Excel...
2024-11-15 14:45:36,130 [INFO] airbnb_calendar_checker.py:32 - 处理房源ID: 716883705085875481
2024-11-15 14:45:36,130 [INFO] airbnb_calendar_checker.py:37 - 将创建文件: data/airbnb_calendar_716883705085875481_20241115_144536.xlsx
2024-11-15 14:45:36,130 [INFO] airbnb_calendar_checker.py:41 - 创建DataFrame，共 123 行数据
2024-11-15 14:45:36,154 [INFO] airbnb_calendar_checker.py:52 - 数据已成功导出到Excel文件: data/airbnb_calendar_716883705085875481_20241115_144536.xlsx
2024-11-15 14:45:36,155 [INFO] airbnb_calendar_checker.py:57 - 文件创建成功，大小: 9.10 KB
2024-11-15 14:45:36,155 [INFO] airbnb_calendar_checker.py:265 - 日历数据已成功导出到: data/airbnb_calendar_716883705085875481_20241115_144536.xlsx
2024-11-15 14:45:36,155 [INFO] advanced_analyzer.py:206 - 成功获取日历数据: 123 条记录
2024-11-15 14:45:36,155 [INFO] price_checker.py:537 - 开始检查房源价格: https://www.airbnb.co.nz/rooms/716883705085875481
2024-11-15 14:45:36,155 [INFO] price_checker.py:530 - 找到 41 个可预订日期
2024-11-15 14:45:36,155 [INFO] price_checker.py:553 - [1/41] 处理日期: 17/11/2024
2024-11-15 14:45:36,155 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/716883705085875481
2024-11-15 14:45:36,155 [INFO] price_checker.py:255 - 入住日期: 17/11/2024
2024-11-15 14:45:39,031 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:45:41,076 [INFO] price_checker.py:271 - 开始检查日期 30/01/2025 的最小入住要求...
2024-11-15 14:45:41,079 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="30, Thursday, January 2025. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-30/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">30</div></td>
2024-11-15 14:45:41,089 [INFO] price_checker.py:158 - 找到日期: 30/01/2025
2024-11-15 14:45:41,089 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:45:41,801 [INFO] price_checker.py:271 - 开始检查日期 17/11/2024 的最小入住要求...
2024-11-15 14:45:41,805 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_1mv3p4vt" role="button" aria-disabled="false" aria-label="17, Sunday, November 2024. Available Select start date " tabindex="0" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-17/11/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">17</div></td>
2024-11-15 14:45:41,815 [INFO] price_checker.py:158 - 找到日期: 17/11/2024
2024-11-15 14:45:41,816 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:45:42,941 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:45:44,243 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_ubf03zg" role="button" aria-disabled="true" aria-label="17, Sunday, November 2024. Selected check-in date, 1 night minimum stay " tabindex="0" style="width: 41px; height: 41px;"><div class="_1qis3zbj notranslate" data-testid="calendar-day-17/11/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">17</div></td>
2024-11-15 14:45:44,252 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 14:45:44,252 [INFO] price_checker.py:218 - - aria-label: 17, Sunday, November 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 14:45:44,252 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 14:45:44,252 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 14:45:44,252 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 14:45:44,252 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:45:44,252 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/716883705085875481?check_in=2024-11-17&check_out=2024-11-18&adults=3&children=0&infants=0
2024-11-15 14:45:49,037 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:45:49,044 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:45:49,051 [INFO] price_checker.py:403 - 找到价格元素: $38 NZD (HTML: <span class="_1k4xcdh">$38&nbsp;NZD</span>)
2024-11-15 14:45:49,051 [INFO] price_checker.py:416 - ✓ 成功设置税费: $38 NZD
2024-11-15 14:45:49,051 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:45:49,338 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:45:49,341 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:45:51,145 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:45:51,356 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:45:51,357 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:45:52,251 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:45:52,257 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:45:52,257 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 14:45:52,259 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:45:52,259 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:45:52,259 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:45:52,259 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2025-01-30&check_out=2025-01-31&adults=3&children=0&infants=0
2024-11-15 14:45:57,361 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:45:57,364 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:45:59,092 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:45:59,099 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:45:59,104 [INFO] price_checker.py:403 - 找到价格元素: $290 NZD (HTML: <span class="_j1kt73">$290&nbsp;NZD</span>)
2024-11-15 14:45:59,104 [INFO] price_checker.py:420 - ✓ 成功设置总价: $290 NZD
2024-11-15 14:45:59,104 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:45:59,111 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:45:59,116 [INFO] price_checker.py:403 - 找到价格元素: $290 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$290&nbsp;NZD</span></span>)
2024-11-15 14:45:59,116 [INFO] price_checker.py:420 - ✓ 成功设置总价: $290 NZD
2024-11-15 14:45:59,121 [INFO] price_checker.py:403 - 找到价格元素: $290 NZD (HTML: <span class="_j1kt73">$290&nbsp;NZD</span>)
2024-11-15 14:45:59,121 [INFO] price_checker.py:420 - ✓ 成功设置总价: $290 NZD
2024-11-15 14:45:59,126 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:45:59,126 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:45:59,126 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:45:59,126 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 14:45:59,126 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 14:45:59,126 [INFO] price_checker.py:450 - ✓ taxes: $38 NZD
2024-11-15 14:45:59,126 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:45:59,127 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:45:59,127 [INFO] price_checker.py:457 - check_in: 19/11/2024
2024-11-15 14:45:59,127 [INFO] price_checker.py:457 - check_out: 20/11/2024
2024-11-15 14:45:59,127 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:45:59,127 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:45:59,127 [INFO] price_checker.py:457 - nightly_price: $202 NZD
2024-11-15 14:45:59,127 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 14:45:59,127 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 14:45:59,127 [INFO] price_checker.py:457 - taxes: $38 NZD
2024-11-15 14:45:59,127 [INFO] price_checker.py:457 - total: 
2024-11-15 14:45:59,127 [INFO] price_checker.py:559 - ✓ 成功获取 19/11/2024 的价格信息
2024-11-15 14:45:59,127 [INFO] price_checker.py:553 - [4/50] 处理日期: 20/11/2024
2024-11-15 14:45:59,128 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/49525472
2024-11-15 14:45:59,128 [INFO] price_checker.py:255 - 入住日期: 20/11/2024
2024-11-15 14:45:59,375 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:45:59,375 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:46:01,405 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:46:01,405 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:46:04,247 [INFO] price_checker.py:271 - 开始检查日期 20/11/2024 的最小入住要求...
2024-11-15 14:46:04,250 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="20, Wednesday, November 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-20/11/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">20</div></td>
2024-11-15 14:46:04,262 [INFO] price_checker.py:158 - 找到日期: 20/11/2024
2024-11-15 14:46:04,262 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:46:09,433 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:46:09,433 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:46:11,447 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:46:11,447 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:46:11,453 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:46:11,469 [INFO] price_checker.py:337 - 找到可见价格元素: $317 NZD 
$230 NZD 
night
$230 NZD per night, originally $317 NZD
2024-11-15 14:46:11,475 [INFO] price_checker.py:350 - 找到每晚价格元素: $317 NZD 
$230 NZD 
night
$230 NZD per night, originally $317 NZD
2024-11-15 14:46:11,475 [INFO] price_checker.py:356 - 成功解析折扣价格: $230 NZD
2024-11-15 14:46:11,476 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:46:11,481 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 14:46:11,984 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:46:11,991 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:46:11,998 [INFO] price_checker.py:403 - 找到价格元素: $170 NZD (HTML: <span class="_1k4xcdh">$170&nbsp;NZD</span>)
2024-11-15 14:46:11,998 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $170 NZD
2024-11-15 14:46:11,998 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:46:12,005 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:46:12,009 [INFO] price_checker.py:403 - 找到价格元素: $170 NZD (HTML: <span class="_1k4xcdh">$170&nbsp;NZD</span>)
2024-11-15 14:46:12,010 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $170 NZD
2024-11-15 14:46:12,010 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:46:14,272 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:46:15,368 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:46:15,374 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:46:15,375 [ERROR] price_checker.py:246 - 错误类型: MoveTargetOutOfBoundsException
2024-11-15 14:46:15,376 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.MoveTargetOutOfBoundsException: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:46:15,376 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:46:15,376 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:46:15,376 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/49525472?check_in=2024-11-20&check_out=2024-11-21&adults=3&children=0&infants=0
2024-11-15 14:46:19,480 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:46:19,480 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:46:19,486 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:46:19,503 [INFO] price_checker.py:337 - 找到可见价格元素: $171 NZD 
night
$171 NZD per night
2024-11-15 14:46:19,513 [INFO] price_checker.py:350 - 找到每晚价格元素: $171 NZD 
night
$171 NZD per night
2024-11-15 14:46:19,513 [INFO] price_checker.py:356 - 成功解析折扣价格: $171 NZD
2024-11-15 14:46:19,513 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:46:19,523 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 14:46:20,030 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:46:20,039 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:46:20,046 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:46:20,046 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:46:20,046 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:46:20,054 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:46:20,059 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:46:20,059 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:46:20,059 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:46:20,065 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:46:20,070 [INFO] price_checker.py:403 - 找到价格元素: $31 NZD (HTML: <span class="_1k4xcdh">$31&nbsp;NZD</span>)
2024-11-15 14:46:20,070 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $31 NZD
2024-11-15 14:46:20,071 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:46:20,077 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:46:20,082 [INFO] price_checker.py:403 - 找到价格元素: $31 NZD (HTML: <span class="_1k4xcdh">$31&nbsp;NZD</span>)
2024-11-15 14:46:20,082 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $31 NZD
2024-11-15 14:46:20,082 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:46:20,089 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:46:20,094 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 14:46:20,094 [INFO] price_checker.py:416 - ✓ 成功设置税费: $29 NZD
2024-11-15 14:46:20,094 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:46:20,472 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:46:20,475 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:46:22,067 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:46:22,487 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:46:22,487 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:46:30,107 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:46:30,114 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:46:30,119 [INFO] price_checker.py:403 - 找到价格元素: $250 NZD (HTML: <span class="_j1kt73">$250&nbsp;NZD</span>)
2024-11-15 14:46:30,119 [INFO] price_checker.py:420 - ✓ 成功设置总价: $250 NZD
2024-11-15 14:46:30,119 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:46:30,126 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:46:30,130 [INFO] price_checker.py:403 - 找到价格元素: $250 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$250&nbsp;NZD</span></span>)
2024-11-15 14:46:30,130 [INFO] price_checker.py:420 - ✓ 成功设置总价: $250 NZD
2024-11-15 14:46:30,135 [INFO] price_checker.py:403 - 找到价格元素: $250 NZD (HTML: <span class="_j1kt73">$250&nbsp;NZD</span>)
2024-11-15 14:46:30,135 [INFO] price_checker.py:420 - ✓ 成功设置总价: $250 NZD
2024-11-15 14:46:30,140 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:46:30,140 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:46:30,140 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:46:30,140 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 14:46:30,140 [INFO] price_checker.py:450 - ✓ service_fee: $31 NZD
2024-11-15 14:46:30,140 [INFO] price_checker.py:450 - ✓ taxes: $29 NZD
2024-11-15 14:46:30,140 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:46:30,141 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:46:30,141 [INFO] price_checker.py:457 - check_in: 30/01/2025
2024-11-15 14:46:30,141 [INFO] price_checker.py:457 - check_out: 31/01/2025
2024-11-15 14:46:30,141 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:46:30,141 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:46:30,141 [INFO] price_checker.py:457 - nightly_price: $171 NZD
2024-11-15 14:46:30,141 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 14:46:30,141 [INFO] price_checker.py:457 - service_fee: $31 NZD
2024-11-15 14:46:30,141 [INFO] price_checker.py:457 - taxes: $29 NZD
2024-11-15 14:46:30,141 [INFO] price_checker.py:457 - total: 
2024-11-15 14:46:30,141 [INFO] price_checker.py:559 - ✓ 成功获取 30/01/2025 的价格信息
2024-11-15 14:46:30,141 [INFO] price_checker.py:553 - [72/72] 处理日期: 31/01/2025
2024-11-15 14:46:30,141 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/830193102361409290
2024-11-15 14:46:30,141 [INFO] price_checker.py:255 - 入住日期: 31/01/2025
2024-11-15 14:46:32,076 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:46:32,494 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:46:32,494 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:46:35,259 [INFO] price_checker.py:271 - 开始检查日期 31/01/2025 的最小入住要求...
2024-11-15 14:46:35,262 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_1qvi71ld" role="button" aria-disabled="false" aria-label="31, Friday, January 2025. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-31/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">31</div></td>
2024-11-15 14:46:35,271 [INFO] price_checker.py:158 - 找到日期: 31/01/2025
2024-11-15 14:46:35,271 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:46:42,138 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:46:42,556 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:46:42,557 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:46:42,562 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:46:42,577 [INFO] price_checker.py:337 - 找到可见价格元素: $202 NZD 
night
$202 NZD per night
2024-11-15 14:46:42,582 [INFO] price_checker.py:350 - 找到每晚价格元素: $202 NZD 
night
$202 NZD per night
2024-11-15 14:46:42,583 [INFO] price_checker.py:356 - 成功解析折扣价格: $202 NZD
2024-11-15 14:46:42,583 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:46:42,588 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 14:46:43,091 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:46:43,098 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:46:43,104 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:46:43,104 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:46:43,104 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:46:43,110 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:46:43,116 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:46:43,116 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:46:43,116 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:46:45,275 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:46:46,390 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:46:46,395 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:46:46,395 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 14:46:46,396 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:46:46,396 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:46:46,397 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:46:46,397 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/830193102361409290?check_in=2025-01-31&check_out=2025-02-01&adults=3&children=0&infants=0
2024-11-15 14:46:51,512 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:46:51,516 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:46:52,177 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:46:52,187 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:46:52,196 [INFO] price_checker.py:403 - 找到价格元素: $400 NZD (HTML: <span class="_j1kt73">$400&nbsp;NZD</span>)
2024-11-15 14:46:52,196 [INFO] price_checker.py:420 - ✓ 成功设置总价: $400 NZD
2024-11-15 14:46:52,197 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:46:52,207 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:46:52,212 [INFO] price_checker.py:403 - 找到价格元素: $400 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$400&nbsp;NZD</span></span>)
2024-11-15 14:46:52,213 [INFO] price_checker.py:420 - ✓ 成功设置总价: $400 NZD
2024-11-15 14:46:52,217 [INFO] price_checker.py:403 - 找到价格元素: $400 NZD (HTML: <span class="_j1kt73">$400&nbsp;NZD</span>)
2024-11-15 14:46:52,217 [INFO] price_checker.py:420 - ✓ 成功设置总价: $400 NZD
2024-11-15 14:46:52,222 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:46:52,222 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:46:52,223 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:46:52,223 [INFO] price_checker.py:450 - ✓ cleaning_fee: $170 NZD
2024-11-15 14:46:52,223 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 14:46:52,223 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 14:46:52,223 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:46:52,223 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:46:52,223 [INFO] price_checker.py:457 - check_in: 17/11/2024
2024-11-15 14:46:52,223 [INFO] price_checker.py:457 - check_out: 18/11/2024
2024-11-15 14:46:52,223 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:46:52,223 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:46:52,223 [INFO] price_checker.py:457 - nightly_price: $230 NZD
2024-11-15 14:46:52,223 [INFO] price_checker.py:457 - cleaning_fee: $170 NZD
2024-11-15 14:46:52,224 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 14:46:52,224 [INFO] price_checker.py:457 - taxes: None
2024-11-15 14:46:52,224 [INFO] price_checker.py:457 - total: 
2024-11-15 14:46:52,224 [INFO] price_checker.py:559 - ✓ 成功获取 17/11/2024 的价格信息
2024-11-15 14:46:52,224 [INFO] price_checker.py:553 - [2/41] 处理日期: 18/11/2024
2024-11-15 14:46:52,224 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/716883705085875481
2024-11-15 14:46:52,224 [INFO] price_checker.py:255 - 入住日期: 18/11/2024
2024-11-15 14:46:53,155 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:46:53,529 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:46:53,529 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:46:57,724 [INFO] price_checker.py:271 - 开始检查日期 18/11/2024 的最小入住要求...
2024-11-15 14:46:57,726 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_sl5yz7r" role="button" aria-disabled="false" aria-label="18, Monday, November 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-18/11/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">18</div></td>
2024-11-15 14:46:57,736 [INFO] price_checker.py:158 - 找到日期: 18/11/2024
2024-11-15 14:46:57,736 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:46:58,845 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:47:00,133 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_5v1jabe" role="button" aria-disabled="true" aria-label="18, Monday, November 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1qis3zbj notranslate" data-testid="calendar-day-18/11/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">18</div></td>
2024-11-15 14:47:00,141 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 14:47:00,141 [INFO] price_checker.py:218 - - aria-label: 18, Monday, November 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 14:47:00,141 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 14:47:00,141 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 14:47:00,141 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 14:47:00,141 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:47:00,141 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/716883705085875481?check_in=2024-11-18&check_out=2024-11-19&adults=3&children=0&infants=0
2024-11-15 14:47:03,201 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:47:03,208 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:47:03,215 [INFO] price_checker.py:403 - 找到价格元素: $38 NZD (HTML: <span class="_1k4xcdh">$38&nbsp;NZD</span>)
2024-11-15 14:47:03,215 [INFO] price_checker.py:416 - ✓ 成功设置税费: $38 NZD
2024-11-15 14:47:03,215 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:47:03,585 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:47:03,586 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:47:05,227 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:47:05,230 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:47:07,241 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:47:07,241 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:47:13,225 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:47:13,232 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:47:13,238 [INFO] price_checker.py:403 - 找到价格元素: $290 NZD (HTML: <span class="_j1kt73">$290&nbsp;NZD</span>)
2024-11-15 14:47:13,238 [INFO] price_checker.py:420 - ✓ 成功设置总价: $290 NZD
2024-11-15 14:47:13,238 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:47:13,245 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:47:13,249 [INFO] price_checker.py:403 - 找到价格元素: $290 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$290&nbsp;NZD</span></span>)
2024-11-15 14:47:13,249 [INFO] price_checker.py:420 - ✓ 成功设置总价: $290 NZD
2024-11-15 14:47:13,254 [INFO] price_checker.py:403 - 找到价格元素: $290 NZD (HTML: <span class="_j1kt73">$290&nbsp;NZD</span>)
2024-11-15 14:47:13,254 [INFO] price_checker.py:420 - ✓ 成功设置总价: $290 NZD
2024-11-15 14:47:13,259 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:47:13,260 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:47:13,260 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:47:13,260 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 14:47:13,260 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 14:47:13,260 [INFO] price_checker.py:450 - ✓ taxes: $38 NZD
2024-11-15 14:47:13,260 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:47:13,260 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:47:13,260 [INFO] price_checker.py:457 - check_in: 20/11/2024
2024-11-15 14:47:13,260 [INFO] price_checker.py:457 - check_out: 21/11/2024
2024-11-15 14:47:13,260 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:47:13,260 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:47:13,260 [INFO] price_checker.py:457 - nightly_price: $202 NZD
2024-11-15 14:47:13,260 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 14:47:13,260 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 14:47:13,261 [INFO] price_checker.py:457 - taxes: $38 NZD
2024-11-15 14:47:13,261 [INFO] price_checker.py:457 - total: 
2024-11-15 14:47:13,261 [INFO] price_checker.py:559 - ✓ 成功获取 20/11/2024 的价格信息
2024-11-15 14:47:13,261 [INFO] price_checker.py:553 - [5/50] 处理日期: 21/11/2024
2024-11-15 14:47:13,261 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/49525472
2024-11-15 14:47:13,261 [INFO] price_checker.py:255 - 入住日期: 21/11/2024
2024-11-15 14:47:13,594 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:47:13,594 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:47:13,600 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:47:13,615 [INFO] price_checker.py:337 - 找到可见价格元素: $174 NZD 
night
$174 NZD per night
2024-11-15 14:47:13,620 [INFO] price_checker.py:350 - 找到每晚价格元素: $174 NZD 
night
$174 NZD per night
2024-11-15 14:47:13,620 [INFO] price_checker.py:356 - 成功解析折扣价格: $174 NZD
2024-11-15 14:47:13,620 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:47:13,627 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 14:47:14,130 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:47:14,138 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:47:14,144 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:47:14,144 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:47:14,144 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:47:14,150 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:47:14,155 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:47:14,155 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:47:14,155 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:47:14,162 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:47:14,167 [INFO] price_checker.py:403 - 找到价格元素: $31 NZD (HTML: <span class="_1k4xcdh">$31&nbsp;NZD</span>)
2024-11-15 14:47:14,167 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $31 NZD
2024-11-15 14:47:14,167 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:47:14,173 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:47:14,178 [INFO] price_checker.py:403 - 找到价格元素: $31 NZD (HTML: <span class="_1k4xcdh">$31&nbsp;NZD</span>)
2024-11-15 14:47:14,178 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $31 NZD
2024-11-15 14:47:14,178 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:47:14,185 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:47:14,190 [INFO] price_checker.py:403 - 找到价格元素: $29 NZD (HTML: <span class="_1k4xcdh">$29&nbsp;NZD</span>)
2024-11-15 14:47:14,190 [INFO] price_checker.py:416 - ✓ 成功设置税费: $29 NZD
2024-11-15 14:47:14,190 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:47:17,261 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:47:17,261 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:47:18,513 [INFO] price_checker.py:271 - 开始检查日期 21/11/2024 的最小入住要求...
2024-11-15 14:47:18,516 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="21, Thursday, November 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-21/11/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">21</div></td>
2024-11-15 14:47:18,528 [INFO] price_checker.py:158 - 找到日期: 21/11/2024
2024-11-15 14:47:18,528 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:47:24,196 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:47:24,203 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:47:24,208 [INFO] price_checker.py:403 - 找到价格元素: $253 NZD (HTML: <span class="_j1kt73">$253&nbsp;NZD</span>)
2024-11-15 14:47:24,209 [INFO] price_checker.py:420 - ✓ 成功设置总价: $253 NZD
2024-11-15 14:47:24,209 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:47:24,215 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:47:24,220 [INFO] price_checker.py:403 - 找到价格元素: $253 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$253&nbsp;NZD</span></span>)
2024-11-15 14:47:24,220 [INFO] price_checker.py:420 - ✓ 成功设置总价: $253 NZD
2024-11-15 14:47:24,224 [INFO] price_checker.py:403 - 找到价格元素: $253 NZD (HTML: <span class="_j1kt73">$253&nbsp;NZD</span>)
2024-11-15 14:47:24,225 [INFO] price_checker.py:420 - ✓ 成功设置总价: $253 NZD
2024-11-15 14:47:24,229 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:47:24,229 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:47:24,229 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:47:24,229 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 14:47:24,229 [INFO] price_checker.py:450 - ✓ service_fee: $31 NZD
2024-11-15 14:47:24,229 [INFO] price_checker.py:450 - ✓ taxes: $29 NZD
2024-11-15 14:47:24,229 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:47:24,229 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:47:24,230 [INFO] price_checker.py:457 - check_in: 31/01/2025
2024-11-15 14:47:24,230 [INFO] price_checker.py:457 - check_out: 01/02/2025
2024-11-15 14:47:24,230 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:47:24,230 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:47:24,230 [INFO] price_checker.py:457 - nightly_price: $174 NZD
2024-11-15 14:47:24,230 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 14:47:24,230 [INFO] price_checker.py:457 - service_fee: $31 NZD
2024-11-15 14:47:24,230 [INFO] price_checker.py:457 - taxes: $29 NZD
2024-11-15 14:47:24,230 [INFO] price_checker.py:457 - total: 
2024-11-15 14:47:24,230 [INFO] price_checker.py:559 - ✓ 成功获取 31/01/2025 的价格信息
2024-11-15 14:47:24,230 [INFO] price_checker.py:582 - 
=== 价格数据收集统计 ===
2024-11-15 14:47:24,230 [INFO] price_checker.py:583 - 总可预订日期: 72
2024-11-15 14:47:24,230 [INFO] price_checker.py:584 - 成功收集: 72
2024-11-15 14:47:24,231 [INFO] price_checker.py:585 - 失败日期: 0
2024-11-15 14:47:24,270 [INFO] price_checker.py:496 - 价格数据已保存到日期目录: data/20241115_144724/airbnb_price_830193102361409290.xlsx
2024-11-15 14:47:24,270 [INFO] price_checker.py:497 - 价格数据已保存到房间目录: data/room_830193102361409290/airbnb_price_20241115_144724.xlsx
2024-11-15 14:47:24,270 [INFO] price_checker.py:501 - 共导出 72 条价格记录
2024-11-15 14:47:24,270 [INFO] price_checker.py:511 - 价格统计: 平均=163.53, 最高=186.0, 最低=155.0
2024-11-15 14:47:24,271 [INFO] price_checker.py:596 - ✓ 所有价格数据已导出到日期目录: data/20241115_144724/airbnb_price_830193102361409290.xlsx
2024-11-15 14:47:24,271 [INFO] price_checker.py:597 - ✓ 所有价格数据已导出到房间目录: data/room_830193102361409290/airbnb_price_20241115_144724.xlsx
2024-11-15 14:47:24,271 [INFO] advanced_analyzer.py:213 - 成功获取价格数据
2024-11-15 14:47:24,271 [ERROR] advanced_analyzer.py:299 - 处理URL失败: 'BitBrowserManager' object has no attribute 'close_tab'
2024-11-15 14:47:24,271 [INFO] advanced_analyzer.py:275 - 线程 7212 使用浏览器 cd272b4525344db49309c826255465b8
2024-11-15 14:47:24,812 [INFO] bit_browser_manager.py:187 - 正在导航到: https://www.airbnb.co.nz/rooms/969823904189469776
2024-11-15 14:47:24,915 [INFO] bit_browser_manager.py:195 - 成功加载页面: https://www.airbnb.co.nz/rooms/969823904189469776
2024-11-15 14:47:24,915 [INFO] advanced_analyzer.py:197 - 
开始分析房源: https://www.airbnb.co.nz/rooms/969823904189469776
2024-11-15 14:47:24,915 [INFO] airbnb_calendar_checker.py:70 - 开始检查房源日历: https://www.airbnb.co.nz/rooms/969823904189469776
2024-11-15 14:47:24,996 [INFO] airbnb_calendar_checker.py:75 - 页面加载中...
2024-11-15 14:47:24,998 [INFO] airbnb_calendar_checker.py:82 - 页面基本加载完成
2024-11-15 14:47:27,310 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:47:27,310 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:47:27,316 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:47:27,331 [INFO] price_checker.py:337 - 找到可见价格元素: $317 NZD 
$230 NZD 
night
$230 NZD per night, originally $317 NZD
2024-11-15 14:47:27,337 [INFO] price_checker.py:350 - 找到每晚价格元素: $317 NZD 
$230 NZD 
night
$230 NZD per night, originally $317 NZD
2024-11-15 14:47:27,338 [INFO] price_checker.py:356 - 成功解析折扣价格: $230 NZD
2024-11-15 14:47:27,338 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:47:27,345 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 14:47:27,847 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:47:27,855 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:47:27,862 [INFO] price_checker.py:403 - 找到价格元素: $170 NZD (HTML: <span class="_1k4xcdh">$170&nbsp;NZD</span>)
2024-11-15 14:47:27,862 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $170 NZD
2024-11-15 14:47:27,863 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:47:27,869 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:47:27,875 [INFO] price_checker.py:403 - 找到价格元素: $170 NZD (HTML: <span class="_1k4xcdh">$170&nbsp;NZD</span>)
2024-11-15 14:47:27,876 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $170 NZD
2024-11-15 14:47:27,876 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:47:28,594 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:47:29,690 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:47:29,696 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:47:29,696 [ERROR] price_checker.py:246 - 错误类型: MoveTargetOutOfBoundsException
2024-11-15 14:47:29,697 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.MoveTargetOutOfBoundsException: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:47:29,698 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:47:29,698 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:47:29,698 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/49525472?check_in=2024-11-21&check_out=2024-11-22&adults=3&children=0&infants=0
2024-11-15 14:47:34,794 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:47:34,798 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:47:36,809 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:47:36,809 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:47:37,883 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:47:46,815 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:47:46,815 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:47:47,945 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:47:56,878 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:47:56,878 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:47:56,884 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:47:56,900 [INFO] price_checker.py:337 - 找到可见价格元素: $202 NZD 
night
$202 NZD per night
2024-11-15 14:47:56,905 [INFO] price_checker.py:350 - 找到每晚价格元素: $202 NZD 
night
$202 NZD per night
2024-11-15 14:47:56,906 [INFO] price_checker.py:356 - 成功解析折扣价格: $202 NZD
2024-11-15 14:47:56,906 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:47:56,911 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 14:47:57,414 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:47:57,421 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:47:57,427 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:47:57,427 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:47:57,427 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:47:57,434 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:47:57,439 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:47:57,439 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:47:57,439 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:47:57,949 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:48:07,453 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:48:08,012 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:48:08,018 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:48:08,025 [INFO] price_checker.py:403 - 找到价格元素: $400 NZD (HTML: <span class="_j1kt73">$400&nbsp;NZD</span>)
2024-11-15 14:48:08,025 [INFO] price_checker.py:420 - ✓ 成功设置总价: $400 NZD
2024-11-15 14:48:08,025 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:48:08,032 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:48:08,037 [INFO] price_checker.py:403 - 找到价格元素: $400 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$400&nbsp;NZD</span></span>)
2024-11-15 14:48:08,037 [INFO] price_checker.py:420 - ✓ 成功设置总价: $400 NZD
2024-11-15 14:48:08,041 [INFO] price_checker.py:403 - 找到价格元素: $400 NZD (HTML: <span class="_j1kt73">$400&nbsp;NZD</span>)
2024-11-15 14:48:08,041 [INFO] price_checker.py:420 - ✓ 成功设置总价: $400 NZD
2024-11-15 14:48:08,046 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:48:08,046 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:48:08,046 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:48:08,046 [INFO] price_checker.py:450 - ✓ cleaning_fee: $170 NZD
2024-11-15 14:48:08,046 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 14:48:08,046 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 14:48:08,046 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:48:08,046 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:48:08,046 [INFO] price_checker.py:457 - check_in: 18/11/2024
2024-11-15 14:48:08,047 [INFO] price_checker.py:457 - check_out: 19/11/2024
2024-11-15 14:48:08,047 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:48:08,047 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:48:08,047 [INFO] price_checker.py:457 - nightly_price: $230 NZD
2024-11-15 14:48:08,047 [INFO] price_checker.py:457 - cleaning_fee: $170 NZD
2024-11-15 14:48:08,047 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 14:48:08,047 [INFO] price_checker.py:457 - taxes: None
2024-11-15 14:48:08,047 [INFO] price_checker.py:457 - total: 
2024-11-15 14:48:08,047 [INFO] price_checker.py:559 - ✓ 成功获取 18/11/2024 的价格信息
2024-11-15 14:48:08,047 [INFO] price_checker.py:553 - [3/41] 处理日期: 19/11/2024
2024-11-15 14:48:08,047 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/716883705085875481
2024-11-15 14:48:08,047 [INFO] price_checker.py:255 - 入住日期: 19/11/2024
2024-11-15 14:48:13,172 [INFO] price_checker.py:271 - 开始检查日期 19/11/2024 的最小入住要求...
2024-11-15 14:48:13,176 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="19, Tuesday, November 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-19/11/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">19</div></td>
2024-11-15 14:48:13,186 [INFO] price_checker.py:158 - 找到日期: 19/11/2024
2024-11-15 14:48:13,187 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:48:14,315 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:48:15,609 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="19, Tuesday, November 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_ox7af8h notranslate" data-testid="calendar-day-19/11/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">19</div></td>
2024-11-15 14:48:15,619 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 14:48:15,619 [INFO] price_checker.py:218 - - aria-label: 19, Tuesday, November 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 14:48:15,619 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 14:48:15,619 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 14:48:15,619 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 14:48:15,620 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:48:15,620 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/716883705085875481?check_in=2024-11-19&check_out=2024-11-20&adults=3&children=0&infants=0
2024-11-15 14:48:17,491 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:48:17,498 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:48:17,505 [INFO] price_checker.py:403 - 找到价格元素: $38 NZD (HTML: <span class="_1k4xcdh">$38&nbsp;NZD</span>)
2024-11-15 14:48:17,506 [INFO] price_checker.py:416 - ✓ 成功设置税费: $38 NZD
2024-11-15 14:48:17,506 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:48:20,710 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:48:20,713 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:48:22,725 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:48:22,725 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:48:25,208 [INFO] airbnb_calendar_checker.py:120 - 找到日历按钮: //button[contains(@aria-label, 'Choose')]
2024-11-15 14:48:25,211 [INFO] airbnb_calendar_checker.py:134 - 已滚动到日历按钮位置
2024-11-15 14:48:26,211 [INFO] airbnb_calendar_checker.py:139 - 日历按钮已准备就绪
2024-11-15 14:48:26,261 [INFO] airbnb_calendar_checker.py:148 - 直接点击日历按钮成功
2024-11-15 14:48:27,556 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:48:27,563 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:48:27,568 [INFO] price_checker.py:403 - 找到价格元素: $290 NZD (HTML: <span class="_j1kt73">$290&nbsp;NZD</span>)
2024-11-15 14:48:27,568 [INFO] price_checker.py:420 - ✓ 成功设置总价: $290 NZD
2024-11-15 14:48:27,568 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:48:27,576 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:48:27,581 [INFO] price_checker.py:403 - 找到价格元素: $290 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$290&nbsp;NZD</span></span>)
2024-11-15 14:48:27,581 [INFO] price_checker.py:420 - ✓ 成功设置总价: $290 NZD
2024-11-15 14:48:27,586 [INFO] price_checker.py:403 - 找到价格元素: $290 NZD (HTML: <span class="_j1kt73">$290&nbsp;NZD</span>)
2024-11-15 14:48:27,586 [INFO] price_checker.py:420 - ✓ 成功设置总价: $290 NZD
2024-11-15 14:48:27,590 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:48:27,590 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:48:27,591 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:48:27,591 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 14:48:27,591 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 14:48:27,591 [INFO] price_checker.py:450 - ✓ taxes: $38 NZD
2024-11-15 14:48:27,591 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:48:27,591 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:48:27,591 [INFO] price_checker.py:457 - check_in: 21/11/2024
2024-11-15 14:48:27,591 [INFO] price_checker.py:457 - check_out: 22/11/2024
2024-11-15 14:48:27,591 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:48:27,591 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:48:27,591 [INFO] price_checker.py:457 - nightly_price: $202 NZD
2024-11-15 14:48:27,591 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 14:48:27,591 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 14:48:27,592 [INFO] price_checker.py:457 - taxes: $38 NZD
2024-11-15 14:48:27,592 [INFO] price_checker.py:457 - total: 
2024-11-15 14:48:27,592 [INFO] price_checker.py:559 - ✓ 成功获取 21/11/2024 的价格信息
2024-11-15 14:48:27,592 [INFO] price_checker.py:573 - 已完成 5/50 个日期的处理
2024-11-15 14:48:32,728 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:48:32,728 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:48:37,592 [INFO] price_checker.py:553 - [6/50] 处理日期: 22/11/2024
2024-11-15 14:48:37,592 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/49525472
2024-11-15 14:48:37,592 [INFO] price_checker.py:255 - 入住日期: 22/11/2024
2024-11-15 14:48:42,736 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:48:42,736 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:48:42,743 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:48:42,759 [INFO] price_checker.py:337 - 找到可见价格元素: $317 NZD 
$230 NZD 
night
$230 NZD per night, originally $317 NZD
2024-11-15 14:48:42,766 [INFO] price_checker.py:350 - 找到每晚价格元素: $317 NZD 
$230 NZD 
night
$230 NZD per night, originally $317 NZD
2024-11-15 14:48:42,766 [INFO] price_checker.py:356 - 成功解析折扣价格: $230 NZD
2024-11-15 14:48:42,766 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:48:42,773 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 14:48:42,864 [INFO] price_checker.py:271 - 开始检查日期 22/11/2024 的最小入住要求...
2024-11-15 14:48:42,867 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="22, Friday, November 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-22/11/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">22</div></td>
2024-11-15 14:48:42,876 [INFO] price_checker.py:158 - 找到日期: 22/11/2024
2024-11-15 14:48:42,876 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:48:43,276 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:48:43,284 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:48:43,290 [INFO] price_checker.py:403 - 找到价格元素: $170 NZD (HTML: <span class="_1k4xcdh">$170&nbsp;NZD</span>)
2024-11-15 14:48:43,290 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $170 NZD
2024-11-15 14:48:43,290 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:48:43,296 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:48:43,301 [INFO] price_checker.py:403 - 找到价格元素: $170 NZD (HTML: <span class="_1k4xcdh">$170&nbsp;NZD</span>)
2024-11-15 14:48:43,301 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $170 NZD
2024-11-15 14:48:43,301 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:48:46,316 [INFO] airbnb_calendar_checker.py:184 - 日历内容已加载: //div[contains(@data-testid, 'calendar')]
2024-11-15 14:48:46,327 [INFO] airbnb_calendar_checker.py:199 - 找到 123 个日期单元格
2024-11-15 14:48:46,429 [INFO] airbnb_calendar_checker.py:211 - 找到 123 个日期单元格
2024-11-15 14:48:46,431 [INFO] airbnb_calendar_checker.py:256 - 原始单元格数量: 123
2024-11-15 14:48:46,431 [INFO] airbnb_calendar_checker.py:257 - 去重后数据条数: 123
2024-11-15 14:48:46,431 [INFO] airbnb_calendar_checker.py:258 - 处理的唯一日期数: 123
2024-11-15 14:48:46,431 [INFO] airbnb_calendar_checker.py:262 - 收集到 123 条有效日历数据
2024-11-15 14:48:46,431 [INFO] airbnb_calendar_checker.py:22 - 开始导出数据到Excel...
2024-11-15 14:48:46,431 [INFO] airbnb_calendar_checker.py:32 - 处理房源ID: 969823904189469776
2024-11-15 14:48:46,431 [INFO] airbnb_calendar_checker.py:37 - 将创建文件: data/airbnb_calendar_969823904189469776_20241115_144846.xlsx
2024-11-15 14:48:46,432 [INFO] airbnb_calendar_checker.py:41 - 创建DataFrame，共 123 行数据
2024-11-15 14:48:46,454 [INFO] airbnb_calendar_checker.py:52 - 数据已成功导出到Excel文件: data/airbnb_calendar_969823904189469776_20241115_144846.xlsx
2024-11-15 14:48:46,455 [INFO] airbnb_calendar_checker.py:57 - 文件创建成功，大小: 8.71 KB
2024-11-15 14:48:46,455 [INFO] airbnb_calendar_checker.py:265 - 日历数据已成功导出到: data/airbnb_calendar_969823904189469776_20241115_144846.xlsx
2024-11-15 14:48:46,455 [INFO] advanced_analyzer.py:206 - 成功获取日历数据: 123 条记录
2024-11-15 14:48:46,455 [INFO] price_checker.py:537 - 开始检查房源价格: https://www.airbnb.co.nz/rooms/969823904189469776
2024-11-15 14:48:46,455 [INFO] price_checker.py:530 - 找到 0 个可预订日期
2024-11-15 14:48:46,455 [ERROR] price_checker.py:543 - 房 https://www.airbnb.co.nz/rooms/969823904189469776 未找到可预订日期
2024-11-15 14:48:46,455 [ERROR] advanced_analyzer.py:211 - 获取格数据失败: https://www.airbnb.co.nz/rooms/969823904189469776
2024-11-15 14:48:46,455 [ERROR] advanced_analyzer.py:299 - 处理URL失败: 'BitBrowserManager' object has no attribute 'close_tab'
2024-11-15 14:48:52,888 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:48:53,305 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:48:53,989 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:48:53,997 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:48:53,997 [ERROR] price_checker.py:246 - 错误类型: MoveTargetOutOfBoundsException
2024-11-15 14:48:53,999 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.MoveTargetOutOfBoundsException: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:48:54,000 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:48:54,000 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:48:54,000 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/49525472?check_in=2024-11-22&check_out=2024-11-23&adults=3&children=0&infants=0
2024-11-15 14:48:59,160 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:48:59,163 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:49:01,174 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:49:01,174 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:49:03,351 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:49:11,236 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:49:11,237 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:49:13,411 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:49:21,246 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:49:21,246 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:49:23,422 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:49:23,429 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:49:23,435 [INFO] price_checker.py:403 - 找到价格元素: $400 NZD (HTML: <span class="_j1kt73">$400&nbsp;NZD</span>)
2024-11-15 14:49:23,435 [INFO] price_checker.py:420 - ✓ 成功设置总价: $400 NZD
2024-11-15 14:49:23,435 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:49:23,442 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:49:23,446 [INFO] price_checker.py:403 - 找到价格元素: $400 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$400&nbsp;NZD</span></span>)
2024-11-15 14:49:23,446 [INFO] price_checker.py:420 - ✓ 成功设置总价: $400 NZD
2024-11-15 14:49:23,451 [INFO] price_checker.py:403 - 找到价格元素: $400 NZD (HTML: <span class="_j1kt73">$400&nbsp;NZD</span>)
2024-11-15 14:49:23,451 [INFO] price_checker.py:420 - ✓ 成功设置总价: $400 NZD
2024-11-15 14:49:23,455 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:49:23,455 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:49:23,455 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:49:23,455 [INFO] price_checker.py:450 - ✓ cleaning_fee: $170 NZD
2024-11-15 14:49:23,455 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 14:49:23,456 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 14:49:23,456 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:49:23,456 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:49:23,456 [INFO] price_checker.py:457 - check_in: 19/11/2024
2024-11-15 14:49:23,456 [INFO] price_checker.py:457 - check_out: 20/11/2024
2024-11-15 14:49:23,456 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:49:23,456 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:49:23,456 [INFO] price_checker.py:457 - nightly_price: $230 NZD
2024-11-15 14:49:23,456 [INFO] price_checker.py:457 - cleaning_fee: $170 NZD
2024-11-15 14:49:23,456 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 14:49:23,456 [INFO] price_checker.py:457 - taxes: None
2024-11-15 14:49:23,456 [INFO] price_checker.py:457 - total: 
2024-11-15 14:49:23,456 [INFO] price_checker.py:559 - ✓ 成功获取 19/11/2024 的价格信息
2024-11-15 14:49:23,456 [INFO] price_checker.py:553 - [4/41] 处理日期: 20/11/2024
2024-11-15 14:49:23,457 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/716883705085875481
2024-11-15 14:49:23,457 [INFO] price_checker.py:255 - 入住日期: 20/11/2024
2024-11-15 14:49:28,579 [INFO] price_checker.py:271 - 开始检查日期 20/11/2024 的最小入住要求...
2024-11-15 14:49:28,581 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="20, Wednesday, November 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-20/11/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">20</div></td>
2024-11-15 14:49:28,591 [INFO] price_checker.py:158 - 找到日期: 20/11/2024
2024-11-15 14:49:28,591 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:49:29,706 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:49:30,988 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="20, Wednesday, November 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_ox7af8h notranslate" data-testid="calendar-day-20/11/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">20</div></td>
2024-11-15 14:49:30,996 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 14:49:30,996 [INFO] price_checker.py:218 - - aria-label: 20, Wednesday, November 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 14:49:30,996 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 14:49:30,996 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 14:49:30,996 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 14:49:30,997 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:49:30,997 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/716883705085875481?check_in=2024-11-20&check_out=2024-11-21&adults=3&children=0&infants=0
2024-11-15 14:49:31,293 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:49:31,293 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w ._11jcbg2
2024-11-15 14:49:36,082 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:49:36,085 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:49:38,096 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:49:38,097 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:49:41,344 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:49:41,344 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[contains(@class, '_wgmchy')]//span[contains(text(), '$') and contains(text(), 'NZD')]
2024-11-15 14:49:48,099 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:49:48,099 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:49:51,407 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:49:51,407 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:49:58,104 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:49:58,104 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:49:58,110 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:49:58,126 [INFO] price_checker.py:337 - 找到可见价格元素: $317 NZD 
$230 NZD 
night
$230 NZD per night, originally $317 NZD
2024-11-15 14:49:58,132 [INFO] price_checker.py:350 - 找到每晚价格元素: $317 NZD 
$230 NZD 
night
$230 NZD per night, originally $317 NZD
2024-11-15 14:49:58,133 [INFO] price_checker.py:356 - 成功解析折扣价格: $230 NZD
2024-11-15 14:49:58,133 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:49:58,139 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 14:49:58,641 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:49:58,650 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:49:58,656 [INFO] price_checker.py:403 - 找到价格元素: $170 NZD (HTML: <span class="_1k4xcdh">$170&nbsp;NZD</span>)
2024-11-15 14:49:58,656 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $170 NZD
2024-11-15 14:49:58,656 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:49:58,663 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:49:58,667 [INFO] price_checker.py:403 - 找到价格元素: $170 NZD (HTML: <span class="_1k4xcdh">$170&nbsp;NZD</span>)
2024-11-15 14:49:58,668 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $170 NZD
2024-11-15 14:49:58,668 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:50:01,417 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 14:50:01,417 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:50:12,950 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:50:12,969 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:50:22,984 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:50:23,015 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:50:33,008 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:50:33,039 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:50:43,024 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:50:43,055 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:50:43,062 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:50:43,069 [INFO] price_checker.py:403 - 找到价格元素: $400 NZD (HTML: <span class="_j1kt73">$400&nbsp;NZD</span>)
2024-11-15 14:50:43,069 [INFO] price_checker.py:420 - ✓ 成功设置总价: $400 NZD
2024-11-15 14:50:43,069 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:50:43,076 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:50:43,081 [INFO] price_checker.py:403 - 找到价格元素: $400 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$400&nbsp;NZD</span></span>)
2024-11-15 14:50:43,081 [INFO] price_checker.py:420 - ✓ 成功设置总价: $400 NZD
2024-11-15 14:50:43,085 [INFO] price_checker.py:403 - 找到价格元素: $400 NZD (HTML: <span class="_j1kt73">$400&nbsp;NZD</span>)
2024-11-15 14:50:43,085 [INFO] price_checker.py:420 - ✓ 成功设置总价: $400 NZD
2024-11-15 14:50:43,090 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:50:43,090 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:50:43,090 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:50:43,090 [INFO] price_checker.py:450 - ✓ cleaning_fee: $170 NZD
2024-11-15 14:50:43,090 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 14:50:43,090 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 14:50:43,090 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:50:43,090 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:50:43,090 [INFO] price_checker.py:457 - check_in: 20/11/2024
2024-11-15 14:50:43,091 [INFO] price_checker.py:457 - check_out: 21/11/2024
2024-11-15 14:50:43,091 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:50:43,091 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:50:43,091 [INFO] price_checker.py:457 - nightly_price: $230 NZD
2024-11-15 14:50:43,091 [INFO] price_checker.py:457 - cleaning_fee: $170 NZD
2024-11-15 14:50:43,091 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 14:50:43,091 [INFO] price_checker.py:457 - taxes: None
2024-11-15 14:50:43,091 [INFO] price_checker.py:457 - total: 
2024-11-15 14:50:43,091 [INFO] price_checker.py:559 - ✓ 成功获取 20/11/2024 的价格信息
2024-11-15 14:50:43,091 [INFO] price_checker.py:553 - [5/41] 处理日期: 21/11/2024
2024-11-15 14:50:43,091 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/716883705085875481
2024-11-15 14:50:43,091 [INFO] price_checker.py:255 - 入住日期: 21/11/2024
2024-11-15 14:50:48,223 [INFO] price_checker.py:271 - 开始检查日期 21/11/2024 的最小入住要求...
2024-11-15 14:50:48,226 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="21, Thursday, November 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-21/11/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">21</div></td>
2024-11-15 14:50:48,236 [INFO] price_checker.py:158 - 找到日期: 21/11/2024
2024-11-15 14:50:48,236 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:50:49,347 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:50:50,642 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="21, Thursday, November 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_ox7af8h notranslate" data-testid="calendar-day-21/11/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">21</div></td>
2024-11-15 14:50:50,652 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 14:50:50,652 [INFO] price_checker.py:218 - - aria-label: 21, Thursday, November 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 14:50:50,652 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 14:50:50,652 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 14:50:50,652 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 14:50:50,653 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:50:50,653 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/716883705085875481?check_in=2024-11-21&check_out=2024-11-22&adults=3&children=0&infants=0
2024-11-15 14:50:53,062 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:50:55,751 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:50:55,754 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:50:57,765 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:50:57,765 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:51:03,104 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:51:07,825 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:51:07,825 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:51:13,119 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:51:17,847 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:51:17,847 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:51:17,853 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:51:17,872 [INFO] price_checker.py:337 - 找到可见价格元素: $317 NZD 
$230 NZD 
night
$230 NZD per night, originally $317 NZD
2024-11-15 14:51:17,879 [INFO] price_checker.py:350 - 找到每晚价格元素: $317 NZD 
$230 NZD 
night
$230 NZD per night, originally $317 NZD
2024-11-15 14:51:17,879 [INFO] price_checker.py:356 - 成功解析折扣价格: $230 NZD
2024-11-15 14:51:17,879 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:51:17,885 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 14:51:18,388 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:51:18,396 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:51:18,402 [INFO] price_checker.py:403 - 找到价格元素: $170 NZD (HTML: <span class="_1k4xcdh">$170&nbsp;NZD</span>)
2024-11-15 14:51:18,403 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $170 NZD
2024-11-15 14:51:18,403 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:51:18,410 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:51:18,420 [INFO] price_checker.py:403 - 找到价格元素: $170 NZD (HTML: <span class="_1k4xcdh">$170&nbsp;NZD</span>)
2024-11-15 14:51:18,420 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $170 NZD
2024-11-15 14:51:18,420 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:51:28,434 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:51:33,166 [WARNING] price_checker.py:443 - 尝试点击价格展开按钮失败: Message: no such element: Unable to locate element: {"method":"xpath","selector":"//button[contains(@class, '_12wl7g09')]"}
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00952BFE]
	(No symbol) [0x00952CDB]
	(No symbol) [0x0098EBD2]
	(No symbol) [0x00973954]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:51:33,166 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:51:33,166 [WARNING] price_checker.py:452 - ✗ cleaning_fee 未获取到
2024-11-15 14:51:33,166 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 14:51:33,166 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 14:51:33,166 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:51:33,167 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:51:33,167 [INFO] price_checker.py:457 - check_in: 22/11/2024
2024-11-15 14:51:33,167 [INFO] price_checker.py:457 - check_out: 23/11/2024
2024-11-15 14:51:33,167 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:51:33,167 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:51:33,167 [INFO] price_checker.py:457 - nightly_price: None
2024-11-15 14:51:33,167 [INFO] price_checker.py:457 - cleaning_fee: None
2024-11-15 14:51:33,167 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 14:51:33,167 [INFO] price_checker.py:457 - taxes: None
2024-11-15 14:51:33,167 [INFO] price_checker.py:457 - total: None
2024-11-15 14:51:33,167 [INFO] price_checker.py:559 - ✓ 成功获取 22/11/2024 的价格信息
2024-11-15 14:51:33,167 [INFO] price_checker.py:553 - [7/50] 处理日期: 23/11/2024
2024-11-15 14:51:33,167 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/49525472
2024-11-15 14:51:33,168 [INFO] price_checker.py:255 - 入住日期: 23/11/2024
2024-11-15 14:51:38,457 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:51:38,797 [INFO] price_checker.py:271 - 开始检查日期 23/11/2024 的最小入住要求...
2024-11-15 14:51:38,800 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="23, Saturday, November 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-23/11/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">23</div></td>
2024-11-15 14:51:38,811 [INFO] price_checker.py:158 - 找到日期: 23/11/2024
2024-11-15 14:51:38,811 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:51:48,479 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:51:48,852 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:51:49,941 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:51:49,947 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:51:49,948 [ERROR] price_checker.py:246 - 错误类型: MoveTargetOutOfBoundsException
2024-11-15 14:51:49,949 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.MoveTargetOutOfBoundsException: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:51:49,949 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:51:49,949 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:51:49,949 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/49525472?check_in=2024-11-23&check_out=2024-11-24&adults=3&children=0&infants=0
2024-11-15 14:51:55,041 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:51:55,044 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:51:57,055 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:51:57,056 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:51:58,506 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:51:58,513 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:51:58,520 [INFO] price_checker.py:403 - 找到价格元素: $400 NZD (HTML: <span class="_j1kt73">$400&nbsp;NZD</span>)
2024-11-15 14:51:58,520 [INFO] price_checker.py:420 - ✓ 成功设置总价: $400 NZD
2024-11-15 14:51:58,520 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:51:58,527 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:51:58,532 [INFO] price_checker.py:403 - 找到价格元素: $400 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$400&nbsp;NZD</span></span>)
2024-11-15 14:51:58,532 [INFO] price_checker.py:420 - ✓ 成功设置总价: $400 NZD
2024-11-15 14:51:58,537 [INFO] price_checker.py:403 - 找到价格元素: $400 NZD (HTML: <span class="_j1kt73">$400&nbsp;NZD</span>)
2024-11-15 14:51:58,537 [INFO] price_checker.py:420 - ✓ 成功设置总价: $400 NZD
2024-11-15 14:51:58,542 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:51:58,542 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:51:58,542 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:51:58,542 [INFO] price_checker.py:450 - ✓ cleaning_fee: $170 NZD
2024-11-15 14:51:58,542 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 14:51:58,542 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 14:51:58,542 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:51:58,543 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:51:58,543 [INFO] price_checker.py:457 - check_in: 21/11/2024
2024-11-15 14:51:58,543 [INFO] price_checker.py:457 - check_out: 22/11/2024
2024-11-15 14:51:58,543 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:51:58,543 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:51:58,543 [INFO] price_checker.py:457 - nightly_price: $230 NZD
2024-11-15 14:51:58,543 [INFO] price_checker.py:457 - cleaning_fee: $170 NZD
2024-11-15 14:51:58,543 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 14:51:58,543 [INFO] price_checker.py:457 - taxes: None
2024-11-15 14:51:58,543 [INFO] price_checker.py:457 - total: 
2024-11-15 14:51:58,543 [INFO] price_checker.py:559 - ✓ 成功获取 21/11/2024 的价格信息
2024-11-15 14:51:58,543 [INFO] price_checker.py:573 - 已完成 5/41 个日期的处理
2024-11-15 14:52:07,064 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:52:07,064 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:52:08,544 [INFO] price_checker.py:553 - [6/41] 处理日期: 22/11/2024
2024-11-15 14:52:08,544 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/716883705085875481
2024-11-15 14:52:08,544 [INFO] price_checker.py:255 - 入住日期: 22/11/2024
2024-11-15 14:52:13,675 [INFO] price_checker.py:271 - 开始检查日期 22/11/2024 的最小入住要求...
2024-11-15 14:52:13,678 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="22, Friday, November 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-22/11/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">22</div></td>
2024-11-15 14:52:13,687 [INFO] price_checker.py:158 - 找到日期: 22/11/2024
2024-11-15 14:52:13,687 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:52:14,812 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:52:16,100 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="22, Friday, November 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_ox7af8h notranslate" data-testid="calendar-day-22/11/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">22</div></td>
2024-11-15 14:52:16,109 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 14:52:16,109 [INFO] price_checker.py:218 - - aria-label: 22, Friday, November 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 14:52:16,109 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 14:52:16,109 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 14:52:16,110 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 14:52:16,110 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:52:16,110 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/716883705085875481?check_in=2024-11-22&check_out=2024-11-23&adults=3&children=0&infants=0
2024-11-15 14:52:17,093 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:52:17,093 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:52:21,231 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:52:21,234 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:52:23,245 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:52:23,246 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:52:27,104 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:52:27,104 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w ._11jcbg2
2024-11-15 14:52:33,273 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:52:33,273 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:52:37,131 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:52:37,131 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[contains(@class, '_wgmchy')]//span[contains(text(), '$') and contains(text(), 'NZD')]
2024-11-15 14:52:43,287 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:52:43,287 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:52:43,293 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:52:43,309 [INFO] price_checker.py:337 - 找到可见价格元素: $317 NZD 
$230 NZD 
night
$230 NZD per night, originally $317 NZD
2024-11-15 14:52:43,316 [INFO] price_checker.py:350 - 找到每晚价格元素: $317 NZD 
$230 NZD 
night
$230 NZD per night, originally $317 NZD
2024-11-15 14:52:43,316 [INFO] price_checker.py:356 - 成功解析折扣价格: $230 NZD
2024-11-15 14:52:43,316 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:52:43,322 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 14:52:43,825 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:52:43,832 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:52:43,838 [INFO] price_checker.py:403 - 找到价格元素: $170 NZD (HTML: <span class="_1k4xcdh">$170&nbsp;NZD</span>)
2024-11-15 14:52:43,839 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $170 NZD
2024-11-15 14:52:43,839 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:52:43,846 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:52:43,851 [INFO] price_checker.py:403 - 找到价格元素: $170 NZD (HTML: <span class="_1k4xcdh">$170&nbsp;NZD</span>)
2024-11-15 14:52:43,851 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $170 NZD
2024-11-15 14:52:43,851 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:52:47,155 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:52:47,155 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:52:53,901 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:52:57,206 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 14:52:57,207 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:53:03,936 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:53:07,231 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:53:13,961 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:53:17,262 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:53:23,990 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:53:23,996 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:53:24,004 [INFO] price_checker.py:403 - 找到价格元素: $400 NZD (HTML: <span class="_j1kt73">$400&nbsp;NZD</span>)
2024-11-15 14:53:24,004 [INFO] price_checker.py:420 - ✓ 成功设置总价: $400 NZD
2024-11-15 14:53:24,004 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:53:24,011 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:53:24,015 [INFO] price_checker.py:403 - 找到价格元素: $400 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$400&nbsp;NZD</span></span>)
2024-11-15 14:53:24,015 [INFO] price_checker.py:420 - ✓ 成功设置总价: $400 NZD
2024-11-15 14:53:24,020 [INFO] price_checker.py:403 - 找到价格元素: $400 NZD (HTML: <span class="_j1kt73">$400&nbsp;NZD</span>)
2024-11-15 14:53:24,020 [INFO] price_checker.py:420 - ✓ 成功设置总价: $400 NZD
2024-11-15 14:53:24,024 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:53:24,024 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:53:24,024 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:53:24,025 [INFO] price_checker.py:450 - ✓ cleaning_fee: $170 NZD
2024-11-15 14:53:24,025 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 14:53:24,025 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 14:53:24,025 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:53:24,025 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:53:24,025 [INFO] price_checker.py:457 - check_in: 22/11/2024
2024-11-15 14:53:24,025 [INFO] price_checker.py:457 - check_out: 23/11/2024
2024-11-15 14:53:24,025 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:53:24,025 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:53:24,025 [INFO] price_checker.py:457 - nightly_price: $230 NZD
2024-11-15 14:53:24,025 [INFO] price_checker.py:457 - cleaning_fee: $170 NZD
2024-11-15 14:53:24,025 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 14:53:24,026 [INFO] price_checker.py:457 - taxes: None
2024-11-15 14:53:24,026 [INFO] price_checker.py:457 - total: 
2024-11-15 14:53:24,026 [INFO] price_checker.py:559 - ✓ 成功获取 22/11/2024 的价格信息
2024-11-15 14:53:24,026 [INFO] price_checker.py:553 - [7/41] 处理日期: 01/12/2024
2024-11-15 14:53:24,026 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/716883705085875481
2024-11-15 14:53:24,026 [INFO] price_checker.py:255 - 入住日期: 01/12/2024
2024-11-15 14:53:27,282 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:53:29,152 [INFO] price_checker.py:271 - 开始检查日期 01/12/2024 的最小入住要求...
2024-11-15 14:53:29,155 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_11r6uykv" role="button" aria-disabled="false" aria-label="1, Sunday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_5nf23wc notranslate" data-testid="calendar-day-01/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">1</div></td>
2024-11-15 14:53:29,166 [INFO] price_checker.py:158 - 找到日期: 01/12/2024
2024-11-15 14:53:29,166 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:53:30,288 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:53:31,569 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_x0oa30i" role="button" aria-disabled="true" aria-label="1, Sunday, December 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1k5zxj8l notranslate" data-testid="calendar-day-01/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">1</div></td>
2024-11-15 14:53:31,577 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 14:53:31,577 [INFO] price_checker.py:218 - - aria-label: 1, Sunday, December 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 14:53:31,577 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 14:53:31,577 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 14:53:31,578 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 14:53:31,578 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:53:31,578 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/716883705085875481?check_in=2024-12-01&check_out=2024-12-02&adults=3&children=0&infants=0
2024-11-15 14:53:36,663 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:53:36,666 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:53:37,304 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:53:38,677 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:53:38,677 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:53:47,326 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:53:48,712 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:53:48,712 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:53:57,353 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:53:58,739 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:53:58,739 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:53:58,745 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:53:58,761 [INFO] price_checker.py:337 - 找到可见价格元素: $317 NZD 
$265 NZD 
night
$265 NZD per night, originally $317 NZD
2024-11-15 14:53:58,768 [INFO] price_checker.py:350 - 找到每晚价格元素: $317 NZD 
$265 NZD 
night
$265 NZD per night, originally $317 NZD
2024-11-15 14:53:58,768 [INFO] price_checker.py:356 - 成功解析折扣价格: $265 NZD
2024-11-15 14:53:58,768 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:53:58,773 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 14:53:59,276 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:53:59,284 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:53:59,290 [INFO] price_checker.py:403 - 找到价格元素: $170 NZD (HTML: <span class="_1k4xcdh">$170&nbsp;NZD</span>)
2024-11-15 14:53:59,290 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $170 NZD
2024-11-15 14:53:59,290 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:53:59,297 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:53:59,302 [INFO] price_checker.py:403 - 找到价格元素: $170 NZD (HTML: <span class="_1k4xcdh">$170&nbsp;NZD</span>)
2024-11-15 14:53:59,302 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $170 NZD
2024-11-15 14:53:59,302 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:54:07,374 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:54:09,337 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:54:19,376 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:54:27,438 [WARNING] price_checker.py:443 - 尝试点击价格展开按钮失败: Message: no such element: Unable to locate element: {"method":"xpath","selector":"//button[contains(@class, '_12wl7g09')]"}
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00952BFE]
	(No symbol) [0x00952CDB]
	(No symbol) [0x0098EBD2]
	(No symbol) [0x00973954]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:54:27,438 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:54:27,439 [WARNING] price_checker.py:452 - ✗ cleaning_fee 未获取到
2024-11-15 14:54:27,439 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 14:54:27,439 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 14:54:27,439 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:54:27,439 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:54:27,439 [INFO] price_checker.py:457 - check_in: 23/11/2024
2024-11-15 14:54:27,439 [INFO] price_checker.py:457 - check_out: 24/11/2024
2024-11-15 14:54:27,439 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:54:27,439 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:54:27,439 [INFO] price_checker.py:457 - nightly_price: None
2024-11-15 14:54:27,439 [INFO] price_checker.py:457 - cleaning_fee: None
2024-11-15 14:54:27,439 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 14:54:27,440 [INFO] price_checker.py:457 - taxes: None
2024-11-15 14:54:27,440 [INFO] price_checker.py:457 - total: None
2024-11-15 14:54:27,440 [INFO] price_checker.py:559 - ✓ 成功获取 23/11/2024 的价格信息
2024-11-15 14:54:27,440 [INFO] price_checker.py:553 - [8/50] 处理日期: 24/11/2024
2024-11-15 14:54:27,440 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/49525472
2024-11-15 14:54:27,440 [INFO] price_checker.py:255 - 入住日期: 24/11/2024
2024-11-15 14:54:29,400 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:54:32,566 [INFO] price_checker.py:271 - 开始检查日期 24/11/2024 的最小入住要求...
2024-11-15 14:54:32,569 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_1mv3p4vt" role="button" aria-disabled="false" aria-label="24, Sunday, November 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-24/11/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">24</div></td>
2024-11-15 14:54:32,579 [INFO] price_checker.py:158 - 找到日期: 24/11/2024
2024-11-15 14:54:32,579 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:54:39,414 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:54:39,421 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:54:39,428 [INFO] price_checker.py:403 - 找到价格元素: $435 NZD (HTML: <span class="_j1kt73">$435&nbsp;NZD</span>)
2024-11-15 14:54:39,428 [INFO] price_checker.py:420 - ✓ 成功设置总价: $435 NZD
2024-11-15 14:54:39,428 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:54:39,435 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:54:39,440 [INFO] price_checker.py:403 - 找到价格元素: $435 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$435&nbsp;NZD</span></span>)
2024-11-15 14:54:39,440 [INFO] price_checker.py:420 - ✓ 成功设置总价: $435 NZD
2024-11-15 14:54:39,445 [INFO] price_checker.py:403 - 找到价格元素: $435 NZD (HTML: <span class="_j1kt73">$435&nbsp;NZD</span>)
2024-11-15 14:54:39,445 [INFO] price_checker.py:420 - ✓ 成功设置总价: $435 NZD
2024-11-15 14:54:39,450 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:54:39,450 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:54:39,450 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:54:39,450 [INFO] price_checker.py:450 - ✓ cleaning_fee: $170 NZD
2024-11-15 14:54:39,450 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 14:54:39,450 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 14:54:39,450 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:54:39,450 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:54:39,451 [INFO] price_checker.py:457 - check_in: 01/12/2024
2024-11-15 14:54:39,451 [INFO] price_checker.py:457 - check_out: 02/12/2024
2024-11-15 14:54:39,451 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:54:39,451 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:54:39,451 [INFO] price_checker.py:457 - nightly_price: $265 NZD
2024-11-15 14:54:39,451 [INFO] price_checker.py:457 - cleaning_fee: $170 NZD
2024-11-15 14:54:39,451 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 14:54:39,451 [INFO] price_checker.py:457 - taxes: None
2024-11-15 14:54:39,451 [INFO] price_checker.py:457 - total: 
2024-11-15 14:54:39,451 [INFO] price_checker.py:559 - ✓ 成功获取 01/12/2024 的价格信息
2024-11-15 14:54:39,451 [INFO] price_checker.py:553 - [8/41] 处理日期: 06/12/2024
2024-11-15 14:54:39,451 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/716883705085875481
2024-11-15 14:54:39,452 [INFO] price_checker.py:255 - 入住日期: 06/12/2024
2024-11-15 14:54:42,594 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:54:43,681 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:54:43,688 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:54:43,688 [ERROR] price_checker.py:246 - 错误类型: MoveTargetOutOfBoundsException
2024-11-15 14:54:43,689 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.MoveTargetOutOfBoundsException: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:54:43,690 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:54:43,690 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:54:43,690 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/49525472?check_in=2024-11-24&check_out=2024-11-25&adults=3&children=0&infants=0
2024-11-15 14:54:44,613 [INFO] price_checker.py:271 - 开始检查日期 06/12/2024 的最小入住要求...
2024-11-15 14:54:44,617 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="6, Friday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-06/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">6</div></td>
2024-11-15 14:54:44,628 [INFO] price_checker.py:158 - 找到日期: 06/12/2024
2024-11-15 14:54:44,628 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:54:45,759 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:54:47,042 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="6, Friday, December 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_ox7af8h notranslate" data-testid="calendar-day-06/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">6</div></td>
2024-11-15 14:54:47,050 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 14:54:47,051 [INFO] price_checker.py:218 - - aria-label: 6, Friday, December 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 14:54:47,051 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 14:54:47,051 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 14:54:47,051 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 14:54:47,051 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:54:47,051 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/716883705085875481?check_in=2024-12-06&check_out=2024-12-07&adults=3&children=0&infants=0
2024-11-15 14:54:48,780 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:54:48,784 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:54:50,798 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:54:50,798 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:54:52,145 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:54:52,148 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:54:54,159 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:54:54,159 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:55:00,807 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:55:00,807 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:55:04,188 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:55:04,188 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:55:10,840 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:55:10,840 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:55:10,846 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:55:10,861 [INFO] price_checker.py:337 - 找到可见价格元素: $202 NZD 
night
$202 NZD per night
2024-11-15 14:55:10,866 [INFO] price_checker.py:350 - 找到每晚价格元素: $202 NZD 
night
$202 NZD per night
2024-11-15 14:55:10,867 [INFO] price_checker.py:356 - 成功解析折扣价格: $202 NZD
2024-11-15 14:55:10,867 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:55:10,873 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 14:55:11,376 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:55:11,383 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:55:11,390 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:55:11,390 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:55:11,391 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:55:11,397 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:55:11,403 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:55:11,403 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:55:11,403 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:55:14,220 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:55:14,220 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:55:14,226 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:55:14,247 [INFO] price_checker.py:337 - 找到可见价格元素: $317 NZD 
$265 NZD 
night
$265 NZD per night, originally $317 NZD
2024-11-15 14:55:14,262 [INFO] price_checker.py:350 - 找到每晚价格元素: $317 NZD 
$265 NZD 
night
$265 NZD per night, originally $317 NZD
2024-11-15 14:55:14,263 [INFO] price_checker.py:356 - 成功解析折扣价格: $265 NZD
2024-11-15 14:55:14,263 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:55:14,270 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 14:55:14,774 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:55:14,781 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:55:14,788 [INFO] price_checker.py:403 - 找到价格元素: $170 NZD (HTML: <span class="_1k4xcdh">$170&nbsp;NZD</span>)
2024-11-15 14:55:14,789 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $170 NZD
2024-11-15 14:55:14,789 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:55:14,795 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:55:14,801 [INFO] price_checker.py:403 - 找到价格元素: $170 NZD (HTML: <span class="_1k4xcdh">$170&nbsp;NZD</span>)
2024-11-15 14:55:14,801 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $170 NZD
2024-11-15 14:55:14,801 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:55:21,427 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:55:24,841 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:55:31,471 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:55:31,479 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:55:31,490 [INFO] price_checker.py:403 - 找到价格元素: $38 NZD (HTML: <span class="_1k4xcdh">$38&nbsp;NZD</span>)
2024-11-15 14:55:31,490 [INFO] price_checker.py:416 - ✓ 成功设置税费: $38 NZD
2024-11-15 14:55:31,490 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:55:34,877 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:55:41,533 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:55:41,540 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:55:41,545 [INFO] price_checker.py:403 - 找到价格元素: $290 NZD (HTML: <span class="_j1kt73">$290&nbsp;NZD</span>)
2024-11-15 14:55:41,545 [INFO] price_checker.py:420 - ✓ 成功设置总价: $290 NZD
2024-11-15 14:55:41,545 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:55:41,552 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:55:41,557 [INFO] price_checker.py:403 - 找到价格元素: $290 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$290&nbsp;NZD</span></span>)
2024-11-15 14:55:41,557 [INFO] price_checker.py:420 - ✓ 成功设置总价: $290 NZD
2024-11-15 14:55:41,562 [INFO] price_checker.py:403 - 找到价格元素: $290 NZD (HTML: <span class="_j1kt73">$290&nbsp;NZD</span>)
2024-11-15 14:55:41,562 [INFO] price_checker.py:420 - ✓ 成功设置总价: $290 NZD
2024-11-15 14:55:41,567 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:55:41,567 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:55:41,567 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:55:41,567 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 14:55:41,567 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 14:55:41,568 [INFO] price_checker.py:450 - ✓ taxes: $38 NZD
2024-11-15 14:55:41,568 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:55:41,568 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:55:41,568 [INFO] price_checker.py:457 - check_in: 24/11/2024
2024-11-15 14:55:41,568 [INFO] price_checker.py:457 - check_out: 25/11/2024
2024-11-15 14:55:41,568 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:55:41,568 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:55:41,568 [INFO] price_checker.py:457 - nightly_price: $202 NZD
2024-11-15 14:55:41,568 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 14:55:41,568 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 14:55:41,568 [INFO] price_checker.py:457 - taxes: $38 NZD
2024-11-15 14:55:41,568 [INFO] price_checker.py:457 - total: 
2024-11-15 14:55:41,568 [INFO] price_checker.py:559 - ✓ 成功获取 24/11/2024 的价格信息
2024-11-15 14:55:41,568 [INFO] price_checker.py:553 - [9/50] 处理日期: 25/11/2024
2024-11-15 14:55:41,569 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/49525472
2024-11-15 14:55:41,569 [INFO] price_checker.py:255 - 入住日期: 25/11/2024
2024-11-15 14:55:44,908 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:55:46,687 [INFO] price_checker.py:271 - 开始检查日期 25/11/2024 的最小入住要求...
2024-11-15 14:55:46,690 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_sl5yz7r" role="button" aria-disabled="false" aria-label="25, Monday, November 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-25/11/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">25</div></td>
2024-11-15 14:55:46,699 [INFO] price_checker.py:158 - 找到日期: 25/11/2024
2024-11-15 14:55:46,700 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:55:54,931 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:55:54,938 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:55:54,945 [INFO] price_checker.py:403 - 找到价格元素: $435 NZD (HTML: <span class="_j1kt73">$435&nbsp;NZD</span>)
2024-11-15 14:55:54,945 [INFO] price_checker.py:420 - ✓ 成功设置总价: $435 NZD
2024-11-15 14:55:54,945 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:55:54,952 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:55:54,957 [INFO] price_checker.py:403 - 找到价格元素: $435 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$435&nbsp;NZD</span></span>)
2024-11-15 14:55:54,958 [INFO] price_checker.py:420 - ✓ 成功设置总价: $435 NZD
2024-11-15 14:55:54,963 [INFO] price_checker.py:403 - 找到价格元素: $435 NZD (HTML: <span class="_j1kt73">$435&nbsp;NZD</span>)
2024-11-15 14:55:54,963 [INFO] price_checker.py:420 - ✓ 成功设置总价: $435 NZD
2024-11-15 14:55:54,967 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:55:54,967 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:55:54,967 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:55:54,967 [INFO] price_checker.py:450 - ✓ cleaning_fee: $170 NZD
2024-11-15 14:55:54,967 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 14:55:54,967 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 14:55:54,967 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:55:54,968 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:55:54,968 [INFO] price_checker.py:457 - check_in: 06/12/2024
2024-11-15 14:55:54,968 [INFO] price_checker.py:457 - check_out: 07/12/2024
2024-11-15 14:55:54,968 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:55:54,968 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:55:54,968 [INFO] price_checker.py:457 - nightly_price: $265 NZD
2024-11-15 14:55:54,968 [INFO] price_checker.py:457 - cleaning_fee: $170 NZD
2024-11-15 14:55:54,968 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 14:55:54,968 [INFO] price_checker.py:457 - taxes: None
2024-11-15 14:55:54,968 [INFO] price_checker.py:457 - total: 
2024-11-15 14:55:54,968 [INFO] price_checker.py:559 - ✓ 成功获取 06/12/2024 的价格信息
2024-11-15 14:55:54,968 [INFO] price_checker.py:553 - [9/41] 处理日期: 07/12/2024
2024-11-15 14:55:54,968 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/716883705085875481
2024-11-15 14:55:54,968 [INFO] price_checker.py:255 - 入住日期: 07/12/2024
2024-11-15 14:55:56,735 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:55:57,829 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:55:57,835 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:55:57,835 [ERROR] price_checker.py:246 - 错误类型: MoveTargetOutOfBoundsException
2024-11-15 14:55:57,836 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.MoveTargetOutOfBoundsException: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:55:57,837 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:55:57,837 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:55:57,837 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/49525472?check_in=2024-11-25&check_out=2024-11-26&adults=3&children=0&infants=0
2024-11-15 14:56:00,098 [INFO] price_checker.py:271 - 开始检查日期 07/12/2024 的最小入住要求...
2024-11-15 14:56:00,100 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="7, Saturday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-07/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">7</div></td>
2024-11-15 14:56:00,111 [INFO] price_checker.py:158 - 找到日期: 07/12/2024
2024-11-15 14:56:00,111 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:56:01,237 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:56:02,538 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="7, Saturday, December 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_ox7af8h notranslate" data-testid="calendar-day-07/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">7</div></td>
2024-11-15 14:56:02,547 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 14:56:02,547 [INFO] price_checker.py:218 - - aria-label: 7, Saturday, December 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 14:56:02,548 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 14:56:02,548 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 14:56:02,548 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 14:56:02,548 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:56:02,548 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/716883705085875481?check_in=2024-12-07&check_out=2024-12-08&adults=3&children=0&infants=0
2024-11-15 14:56:02,935 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:56:02,939 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:56:04,951 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:56:04,951 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:56:07,640 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:56:07,643 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:56:09,655 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:56:09,655 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:56:14,983 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:56:14,983 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:56:19,682 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:56:19,682 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:56:25,023 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:56:25,023 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:56:25,030 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:56:25,045 [INFO] price_checker.py:337 - 找到可见价格元素: $202 NZD 
night
$202 NZD per night
2024-11-15 14:56:25,051 [INFO] price_checker.py:350 - 找到每晚价格元素: $202 NZD 
night
$202 NZD per night
2024-11-15 14:56:25,051 [INFO] price_checker.py:356 - 成功解析折扣价格: $202 NZD
2024-11-15 14:56:25,051 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:56:25,057 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 14:56:25,560 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:56:25,567 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:56:25,574 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:56:25,574 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:56:25,574 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:56:25,580 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:56:25,585 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:56:25,585 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:56:25,585 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:56:29,704 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:56:29,704 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:56:29,710 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:56:29,726 [INFO] price_checker.py:337 - 找到可见价格元素: $317 NZD 
$265 NZD 
night
$265 NZD per night, originally $317 NZD
2024-11-15 14:56:29,733 [INFO] price_checker.py:350 - 找到每晚价格元素: $317 NZD 
$265 NZD 
night
$265 NZD per night, originally $317 NZD
2024-11-15 14:56:29,733 [INFO] price_checker.py:356 - 成功解析折扣价格: $265 NZD
2024-11-15 14:56:29,733 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:56:29,738 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 14:56:30,242 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:56:30,249 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:56:30,255 [INFO] price_checker.py:403 - 找到价格元素: $170 NZD (HTML: <span class="_1k4xcdh">$170&nbsp;NZD</span>)
2024-11-15 14:56:30,256 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $170 NZD
2024-11-15 14:56:30,256 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:56:30,263 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:56:30,268 [INFO] price_checker.py:403 - 找到价格元素: $170 NZD (HTML: <span class="_1k4xcdh">$170&nbsp;NZD</span>)
2024-11-15 14:56:30,268 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $170 NZD
2024-11-15 14:56:30,268 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:56:35,621 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:56:40,311 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:56:45,649 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:56:45,656 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:56:45,662 [INFO] price_checker.py:403 - 找到价格元素: $38 NZD (HTML: <span class="_1k4xcdh">$38&nbsp;NZD</span>)
2024-11-15 14:56:45,662 [INFO] price_checker.py:416 - ✓ 成功设置税费: $38 NZD
2024-11-15 14:56:45,662 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:56:50,341 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:56:55,690 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:56:55,697 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:56:55,703 [INFO] price_checker.py:403 - 找到价格元素: $290 NZD (HTML: <span class="_j1kt73">$290&nbsp;NZD</span>)
2024-11-15 14:56:55,703 [INFO] price_checker.py:420 - ✓ 成功设置总价: $290 NZD
2024-11-15 14:56:55,703 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:56:55,710 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:56:55,714 [INFO] price_checker.py:403 - 找到价格元素: $290 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$290&nbsp;NZD</span></span>)
2024-11-15 14:56:55,714 [INFO] price_checker.py:420 - ✓ 成功设置总价: $290 NZD
2024-11-15 14:56:55,719 [INFO] price_checker.py:403 - 找到价格元素: $290 NZD (HTML: <span class="_j1kt73">$290&nbsp;NZD</span>)
2024-11-15 14:56:55,719 [INFO] price_checker.py:420 - ✓ 成功设置总价: $290 NZD
2024-11-15 14:56:55,724 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:56:55,724 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:56:55,724 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:56:55,725 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 14:56:55,725 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 14:56:55,725 [INFO] price_checker.py:450 - ✓ taxes: $38 NZD
2024-11-15 14:56:55,725 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:56:55,725 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:56:55,725 [INFO] price_checker.py:457 - check_in: 25/11/2024
2024-11-15 14:56:55,725 [INFO] price_checker.py:457 - check_out: 26/11/2024
2024-11-15 14:56:55,725 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:56:55,725 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:56:55,725 [INFO] price_checker.py:457 - nightly_price: $202 NZD
2024-11-15 14:56:55,725 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 14:56:55,725 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 14:56:55,725 [INFO] price_checker.py:457 - taxes: $38 NZD
2024-11-15 14:56:55,725 [INFO] price_checker.py:457 - total: 
2024-11-15 14:56:55,726 [INFO] price_checker.py:559 - ✓ 成功获取 25/11/2024 的价格信息
2024-11-15 14:56:55,726 [INFO] price_checker.py:553 - [10/50] 处理日期: 26/11/2024
2024-11-15 14:56:55,726 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/49525472
2024-11-15 14:56:55,726 [INFO] price_checker.py:255 - 入住日期: 26/11/2024
2024-11-15 14:57:00,358 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:57:00,864 [INFO] price_checker.py:271 - 开始检查日期 26/11/2024 的最小入住要求...
2024-11-15 14:57:00,868 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="26, Tuesday, November 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-26/11/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">26</div></td>
2024-11-15 14:57:00,877 [INFO] price_checker.py:158 - 找到日期: 26/11/2024
2024-11-15 14:57:00,877 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:57:10,374 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:57:10,381 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:57:10,388 [INFO] price_checker.py:403 - 找到价格元素: $435 NZD (HTML: <span class="_j1kt73">$435&nbsp;NZD</span>)
2024-11-15 14:57:10,388 [INFO] price_checker.py:420 - ✓ 成功设置总价: $435 NZD
2024-11-15 14:57:10,388 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:57:10,395 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:57:10,400 [INFO] price_checker.py:403 - 找到价格元素: $435 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$435&nbsp;NZD</span></span>)
2024-11-15 14:57:10,401 [INFO] price_checker.py:420 - ✓ 成功设置总价: $435 NZD
2024-11-15 14:57:10,405 [INFO] price_checker.py:403 - 找到价格元素: $435 NZD (HTML: <span class="_j1kt73">$435&nbsp;NZD</span>)
2024-11-15 14:57:10,406 [INFO] price_checker.py:420 - ✓ 成功设置总价: $435 NZD
2024-11-15 14:57:10,410 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:57:10,410 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:57:10,411 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:57:10,411 [INFO] price_checker.py:450 - ✓ cleaning_fee: $170 NZD
2024-11-15 14:57:10,411 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 14:57:10,411 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 14:57:10,411 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:57:10,411 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:57:10,411 [INFO] price_checker.py:457 - check_in: 07/12/2024
2024-11-15 14:57:10,411 [INFO] price_checker.py:457 - check_out: 08/12/2024
2024-11-15 14:57:10,411 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:57:10,411 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:57:10,411 [INFO] price_checker.py:457 - nightly_price: $265 NZD
2024-11-15 14:57:10,411 [INFO] price_checker.py:457 - cleaning_fee: $170 NZD
2024-11-15 14:57:10,412 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 14:57:10,412 [INFO] price_checker.py:457 - taxes: None
2024-11-15 14:57:10,412 [INFO] price_checker.py:457 - total: 
2024-11-15 14:57:10,412 [INFO] price_checker.py:559 - ✓ 成功获取 07/12/2024 的价格信息
2024-11-15 14:57:10,412 [INFO] price_checker.py:553 - [10/41] 处理日期: 11/12/2024
2024-11-15 14:57:10,412 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/716883705085875481
2024-11-15 14:57:10,412 [INFO] price_checker.py:255 - 入住日期: 11/12/2024
2024-11-15 14:57:10,887 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:57:11,983 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:57:11,989 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:57:11,989 [ERROR] price_checker.py:246 - 错误类型: MoveTargetOutOfBoundsException
2024-11-15 14:57:11,990 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.MoveTargetOutOfBoundsException: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:57:11,990 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:57:11,990 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:57:11,991 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/49525472?check_in=2024-11-26&check_out=2024-11-27&adults=3&children=0&infants=0
2024-11-15 14:57:15,535 [INFO] price_checker.py:271 - 开始检查日期 11/12/2024 的最小入住要求...
2024-11-15 14:57:15,538 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="11, Wednesday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-11/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">11</div></td>
2024-11-15 14:57:15,549 [INFO] price_checker.py:158 - 找到日期: 11/12/2024
2024-11-15 14:57:15,549 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:57:16,671 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:57:17,119 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:57:17,122 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:57:17,958 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="11, Wednesday, December 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_ox7af8h notranslate" data-testid="calendar-day-11/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">11</div></td>
2024-11-15 14:57:17,971 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 14:57:17,971 [INFO] price_checker.py:218 - - aria-label: 11, Wednesday, December 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 14:57:17,971 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 14:57:17,971 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 14:57:17,971 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 14:57:17,971 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:57:17,971 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/716883705085875481?check_in=2024-12-11&check_out=2024-12-12&adults=3&children=0&infants=0
2024-11-15 14:57:19,134 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:57:19,135 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:57:23,060 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:57:23,063 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:57:25,074 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:57:25,074 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:57:29,156 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:57:29,156 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:57:35,106 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:57:35,106 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:57:39,190 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:57:39,190 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:57:39,197 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:57:39,212 [INFO] price_checker.py:337 - 找到可见价格元素: $202 NZD 
night
$202 NZD per night
2024-11-15 14:57:39,218 [INFO] price_checker.py:350 - 找到每晚价格元素: $202 NZD 
night
$202 NZD per night
2024-11-15 14:57:39,218 [INFO] price_checker.py:356 - 成功解析折扣价格: $202 NZD
2024-11-15 14:57:39,218 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:57:39,223 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 14:57:39,727 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:57:39,735 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:57:39,741 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:57:39,741 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:57:39,741 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:57:39,748 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:57:39,753 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:57:39,753 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:57:39,753 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:57:45,145 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:57:45,145 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:57:45,151 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:57:45,166 [INFO] price_checker.py:337 - 找到可见价格元素: $317 NZD 
$265 NZD 
night
$265 NZD per night, originally $317 NZD
2024-11-15 14:57:45,175 [INFO] price_checker.py:350 - 找到每晚价格元素: $317 NZD 
$265 NZD 
night
$265 NZD per night, originally $317 NZD
2024-11-15 14:57:45,175 [INFO] price_checker.py:356 - 成功解析折扣价格: $265 NZD
2024-11-15 14:57:45,176 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:57:45,181 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 14:57:45,684 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:57:45,691 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:57:45,698 [INFO] price_checker.py:403 - 找到价格元素: $170 NZD (HTML: <span class="_1k4xcdh">$170&nbsp;NZD</span>)
2024-11-15 14:57:45,699 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $170 NZD
2024-11-15 14:57:45,699 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:57:45,706 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:57:45,713 [INFO] price_checker.py:403 - 找到价格元素: $170 NZD (HTML: <span class="_1k4xcdh">$170&nbsp;NZD</span>)
2024-11-15 14:57:45,713 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $170 NZD
2024-11-15 14:57:45,714 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:57:49,788 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:57:55,752 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:57:59,817 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:57:59,824 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:57:59,831 [INFO] price_checker.py:403 - 找到价格元素: $38 NZD (HTML: <span class="_1k4xcdh">$38&nbsp;NZD</span>)
2024-11-15 14:57:59,831 [INFO] price_checker.py:416 - ✓ 成功设置税费: $38 NZD
2024-11-15 14:57:59,831 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:58:05,790 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:58:09,874 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:58:09,881 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:58:09,886 [INFO] price_checker.py:403 - 找到价格元素: $290 NZD (HTML: <span class="_j1kt73">$290&nbsp;NZD</span>)
2024-11-15 14:58:09,886 [INFO] price_checker.py:420 - ✓ 成功设置总价: $290 NZD
2024-11-15 14:58:09,886 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:58:09,893 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:58:09,899 [INFO] price_checker.py:403 - 找到价格元素: $290 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$290&nbsp;NZD</span></span>)
2024-11-15 14:58:09,899 [INFO] price_checker.py:420 - ✓ 成功设置总价: $290 NZD
2024-11-15 14:58:09,904 [INFO] price_checker.py:403 - 找到价格元素: $290 NZD (HTML: <span class="_j1kt73">$290&nbsp;NZD</span>)
2024-11-15 14:58:09,904 [INFO] price_checker.py:420 - ✓ 成功设置总价: $290 NZD
2024-11-15 14:58:09,909 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:58:09,909 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:58:09,909 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:58:09,909 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 14:58:09,909 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 14:58:09,909 [INFO] price_checker.py:450 - ✓ taxes: $38 NZD
2024-11-15 14:58:09,910 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:58:09,910 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:58:09,910 [INFO] price_checker.py:457 - check_in: 26/11/2024
2024-11-15 14:58:09,910 [INFO] price_checker.py:457 - check_out: 27/11/2024
2024-11-15 14:58:09,910 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:58:09,910 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:58:09,910 [INFO] price_checker.py:457 - nightly_price: $202 NZD
2024-11-15 14:58:09,910 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 14:58:09,910 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 14:58:09,910 [INFO] price_checker.py:457 - taxes: $38 NZD
2024-11-15 14:58:09,910 [INFO] price_checker.py:457 - total: 
2024-11-15 14:58:09,910 [INFO] price_checker.py:559 - ✓ 成功获取 26/11/2024 的价格信息
2024-11-15 14:58:09,910 [INFO] price_checker.py:573 - 已完成 10/50 个日期的处理
2024-11-15 14:58:15,820 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:58:19,911 [INFO] price_checker.py:553 - [11/50] 处理日期: 27/11/2024
2024-11-15 14:58:19,911 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/49525472
2024-11-15 14:58:19,911 [INFO] price_checker.py:255 - 入住日期: 27/11/2024
2024-11-15 14:58:25,046 [INFO] price_checker.py:271 - 开始检查日期 27/11/2024 的最小入住要求...
2024-11-15 14:58:25,049 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="27, Wednesday, November 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-27/11/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">27</div></td>
2024-11-15 14:58:25,059 [INFO] price_checker.py:158 - 找到日期: 27/11/2024
2024-11-15 14:58:25,059 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:58:25,837 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:58:25,843 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:58:25,851 [INFO] price_checker.py:403 - 找到价格元素: $435 NZD (HTML: <span class="_j1kt73">$435&nbsp;NZD</span>)
2024-11-15 14:58:25,851 [INFO] price_checker.py:420 - ✓ 成功设置总价: $435 NZD
2024-11-15 14:58:25,851 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:58:25,858 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:58:25,862 [INFO] price_checker.py:403 - 找到价格元素: $435 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$435&nbsp;NZD</span></span>)
2024-11-15 14:58:25,863 [INFO] price_checker.py:420 - ✓ 成功设置总价: $435 NZD
2024-11-15 14:58:25,868 [INFO] price_checker.py:403 - 找到价格元素: $435 NZD (HTML: <span class="_j1kt73">$435&nbsp;NZD</span>)
2024-11-15 14:58:25,868 [INFO] price_checker.py:420 - ✓ 成功设置总价: $435 NZD
2024-11-15 14:58:25,873 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:58:25,873 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:58:25,873 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:58:25,873 [INFO] price_checker.py:450 - ✓ cleaning_fee: $170 NZD
2024-11-15 14:58:25,873 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 14:58:25,873 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 14:58:25,873 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:58:25,873 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:58:25,873 [INFO] price_checker.py:457 - check_in: 11/12/2024
2024-11-15 14:58:25,874 [INFO] price_checker.py:457 - check_out: 12/12/2024
2024-11-15 14:58:25,874 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:58:25,874 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:58:25,874 [INFO] price_checker.py:457 - nightly_price: $265 NZD
2024-11-15 14:58:25,874 [INFO] price_checker.py:457 - cleaning_fee: $170 NZD
2024-11-15 14:58:25,874 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 14:58:25,874 [INFO] price_checker.py:457 - taxes: None
2024-11-15 14:58:25,874 [INFO] price_checker.py:457 - total: 
2024-11-15 14:58:25,874 [INFO] price_checker.py:559 - ✓ 成功获取 11/12/2024 的价格信息
2024-11-15 14:58:25,874 [INFO] price_checker.py:573 - 已完成 10/41 个日期的处理
2024-11-15 14:58:35,103 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:58:35,874 [INFO] price_checker.py:553 - [11/41] 处理日期: 12/12/2024
2024-11-15 14:58:35,875 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/716883705085875481
2024-11-15 14:58:35,875 [INFO] price_checker.py:255 - 入住日期: 12/12/2024
2024-11-15 14:58:36,193 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:58:36,199 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:58:36,199 [ERROR] price_checker.py:246 - 错误类型: MoveTargetOutOfBoundsException
2024-11-15 14:58:36,200 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.MoveTargetOutOfBoundsException: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:58:36,201 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:58:36,201 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:58:36,201 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/49525472?check_in=2024-11-27&check_out=2024-11-28&adults=3&children=0&infants=0
2024-11-15 14:58:41,004 [INFO] price_checker.py:271 - 开始检查日期 12/12/2024 的最小入住要求...
2024-11-15 14:58:41,007 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="12, Thursday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-12/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">12</div></td>
2024-11-15 14:58:41,016 [INFO] price_checker.py:158 - 找到日期: 12/12/2024
2024-11-15 14:58:41,016 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:58:41,309 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:58:41,313 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:58:42,170 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:58:43,324 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:58:43,324 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:58:43,463 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="12, Thursday, December 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_ox7af8h notranslate" data-testid="calendar-day-12/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">12</div></td>
2024-11-15 14:58:43,471 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 14:58:43,471 [INFO] price_checker.py:218 - - aria-label: 12, Thursday, December 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 14:58:43,471 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 14:58:43,472 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 14:58:43,472 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 14:58:43,472 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:58:43,472 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/716883705085875481?check_in=2024-12-12&check_out=2024-12-13&adults=3&children=0&infants=0
2024-11-15 14:58:48,563 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:58:48,566 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:58:50,577 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:58:50,578 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:58:53,365 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:58:53,365 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:59:00,611 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:59:00,612 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 14:59:03,400 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:59:03,400 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:59:03,407 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:59:03,422 [INFO] price_checker.py:337 - 找到可见价格元素: $202 NZD 
night
$202 NZD per night
2024-11-15 14:59:03,428 [INFO] price_checker.py:350 - 找到每晚价格元素: $202 NZD 
night
$202 NZD per night
2024-11-15 14:59:03,428 [INFO] price_checker.py:356 - 成功解析折扣价格: $202 NZD
2024-11-15 14:59:03,428 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:59:03,434 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 14:59:03,937 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:59:03,945 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:59:03,951 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:59:03,951 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:59:03,951 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:59:03,958 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:59:03,963 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 14:59:03,963 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 14:59:03,963 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:59:10,641 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 14:59:10,641 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 14:59:10,647 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 14:59:10,663 [INFO] price_checker.py:337 - 找到可见价格元素: $317 NZD 
$265 NZD 
night
$265 NZD per night, originally $317 NZD
2024-11-15 14:59:10,670 [INFO] price_checker.py:350 - 找到每晚价格元素: $317 NZD 
$265 NZD 
night
$265 NZD per night, originally $317 NZD
2024-11-15 14:59:10,670 [INFO] price_checker.py:356 - 成功解析折扣价格: $265 NZD
2024-11-15 14:59:10,670 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 14:59:10,676 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 14:59:11,179 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:59:11,186 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:59:11,193 [INFO] price_checker.py:403 - 找到价格元素: $170 NZD (HTML: <span class="_1k4xcdh">$170&nbsp;NZD</span>)
2024-11-15 14:59:11,193 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $170 NZD
2024-11-15 14:59:11,193 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:59:11,200 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:59:11,205 [INFO] price_checker.py:403 - 找到价格元素: $170 NZD (HTML: <span class="_1k4xcdh">$170&nbsp;NZD</span>)
2024-11-15 14:59:11,205 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $170 NZD
2024-11-15 14:59:11,205 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:59:13,979 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:59:21,232 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:59:24,004 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:59:24,011 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:59:24,017 [INFO] price_checker.py:403 - 找到价格元素: $38 NZD (HTML: <span class="_1k4xcdh">$38&nbsp;NZD</span>)
2024-11-15 14:59:24,018 [INFO] price_checker.py:416 - ✓ 成功设置税费: $38 NZD
2024-11-15 14:59:24,018 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:59:31,256 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:59:34,040 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:59:34,048 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:59:34,053 [INFO] price_checker.py:403 - 找到价格元素: $290 NZD (HTML: <span class="_j1kt73">$290&nbsp;NZD</span>)
2024-11-15 14:59:34,053 [INFO] price_checker.py:420 - ✓ 成功设置总价: $290 NZD
2024-11-15 14:59:34,053 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:59:34,060 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:59:34,065 [INFO] price_checker.py:403 - 找到价格元素: $290 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$290&nbsp;NZD</span></span>)
2024-11-15 14:59:34,065 [INFO] price_checker.py:420 - ✓ 成功设置总价: $290 NZD
2024-11-15 14:59:34,070 [INFO] price_checker.py:403 - 找到价格元素: $290 NZD (HTML: <span class="_j1kt73">$290&nbsp;NZD</span>)
2024-11-15 14:59:34,070 [INFO] price_checker.py:420 - ✓ 成功设置总价: $290 NZD
2024-11-15 14:59:34,075 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:59:34,075 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:59:34,075 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:59:34,075 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 14:59:34,075 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 14:59:34,075 [INFO] price_checker.py:450 - ✓ taxes: $38 NZD
2024-11-15 14:59:34,075 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:59:34,076 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:59:34,076 [INFO] price_checker.py:457 - check_in: 27/11/2024
2024-11-15 14:59:34,076 [INFO] price_checker.py:457 - check_out: 28/11/2024
2024-11-15 14:59:34,076 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:59:34,076 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:59:34,076 [INFO] price_checker.py:457 - nightly_price: $202 NZD
2024-11-15 14:59:34,076 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 14:59:34,076 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 14:59:34,076 [INFO] price_checker.py:457 - taxes: $38 NZD
2024-11-15 14:59:34,076 [INFO] price_checker.py:457 - total: 
2024-11-15 14:59:34,076 [INFO] price_checker.py:559 - ✓ 成功获取 27/11/2024 的价格信息
2024-11-15 14:59:34,076 [INFO] price_checker.py:553 - [12/50] 处理日期: 01/12/2024
2024-11-15 14:59:34,076 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/49525472
2024-11-15 14:59:34,076 [INFO] price_checker.py:255 - 入住日期: 01/12/2024
2024-11-15 14:59:39,200 [INFO] price_checker.py:271 - 开始检查日期 01/12/2024 的最小入住要求...
2024-11-15 14:59:39,203 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_11r6uykv" role="button" aria-disabled="false" aria-label="1, Sunday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_5nf23wc notranslate" data-testid="calendar-day-01/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">1</div></td>
2024-11-15 14:59:39,212 [INFO] price_checker.py:158 - 找到日期: 01/12/2024
2024-11-15 14:59:39,212 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:59:41,267 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 14:59:49,259 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:59:50,348 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:59:50,355 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 14:59:50,355 [ERROR] price_checker.py:246 - 错误类型: MoveTargetOutOfBoundsException
2024-11-15 14:59:50,356 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.MoveTargetOutOfBoundsException: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 14:59:50,356 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 14:59:50,357 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:59:50,357 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/49525472?check_in=2024-12-01&check_out=2024-12-02&adults=3&children=0&infants=0
2024-11-15 14:59:51,307 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 14:59:51,314 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 14:59:51,321 [INFO] price_checker.py:403 - 找到价格元素: $435 NZD (HTML: <span class="_j1kt73">$435&nbsp;NZD</span>)
2024-11-15 14:59:51,321 [INFO] price_checker.py:420 - ✓ 成功设置总价: $435 NZD
2024-11-15 14:59:51,321 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 14:59:51,329 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 14:59:51,334 [INFO] price_checker.py:403 - 找到价格元素: $435 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$435&nbsp;NZD</span></span>)
2024-11-15 14:59:51,335 [INFO] price_checker.py:420 - ✓ 成功设置总价: $435 NZD
2024-11-15 14:59:51,340 [INFO] price_checker.py:403 - 找到价格元素: $435 NZD (HTML: <span class="_j1kt73">$435&nbsp;NZD</span>)
2024-11-15 14:59:51,340 [INFO] price_checker.py:420 - ✓ 成功设置总价: $435 NZD
2024-11-15 14:59:51,344 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 14:59:51,344 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 14:59:51,345 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 14:59:51,345 [INFO] price_checker.py:450 - ✓ cleaning_fee: $170 NZD
2024-11-15 14:59:51,345 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 14:59:51,345 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 14:59:51,345 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 14:59:51,345 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 14:59:51,345 [INFO] price_checker.py:457 - check_in: 12/12/2024
2024-11-15 14:59:51,345 [INFO] price_checker.py:457 - check_out: 13/12/2024
2024-11-15 14:59:51,345 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 14:59:51,345 [INFO] price_checker.py:457 - guests: 3
2024-11-15 14:59:51,345 [INFO] price_checker.py:457 - nightly_price: $265 NZD
2024-11-15 14:59:51,345 [INFO] price_checker.py:457 - cleaning_fee: $170 NZD
2024-11-15 14:59:51,345 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 14:59:51,346 [INFO] price_checker.py:457 - taxes: None
2024-11-15 14:59:51,346 [INFO] price_checker.py:457 - total: 
2024-11-15 14:59:51,346 [INFO] price_checker.py:559 - ✓ 成功获取 12/12/2024 的价格信息
2024-11-15 14:59:51,346 [INFO] price_checker.py:553 - [12/41] 处理日期: 13/12/2024
2024-11-15 14:59:51,346 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/716883705085875481
2024-11-15 14:59:51,346 [INFO] price_checker.py:255 - 入住日期: 13/12/2024
2024-11-15 14:59:55,455 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 14:59:55,458 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 14:59:56,474 [INFO] price_checker.py:271 - 开始检查日期 13/12/2024 的最小入住要求...
2024-11-15 14:59:56,477 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="13, Friday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-13/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">13</div></td>
2024-11-15 14:59:56,487 [INFO] price_checker.py:158 - 找到日期: 13/12/2024
2024-11-15 14:59:56,488 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 14:59:57,470 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 14:59:57,470 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 14:59:57,603 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 14:59:58,886 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="13, Friday, December 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_ox7af8h notranslate" data-testid="calendar-day-13/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">13</div></td>
2024-11-15 14:59:58,895 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 14:59:58,895 [INFO] price_checker.py:218 - - aria-label: 13, Friday, December 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 14:59:58,895 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 14:59:58,895 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 14:59:58,895 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 14:59:58,895 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 14:59:58,895 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/716883705085875481?check_in=2024-12-13&check_out=2024-12-14&adults=3&children=0&infants=0
2024-11-15 15:00:03,984 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:00:03,987 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:00:05,998 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:00:05,998 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:00:07,474 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:00:07,474 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:00:16,044 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:00:16,045 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:00:17,510 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:00:17,510 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:00:17,516 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 15:00:17,532 [INFO] price_checker.py:337 - 找到可见价格元素: $224 NZD 
night
$224 NZD per night
2024-11-15 15:00:17,538 [INFO] price_checker.py:350 - 找到每晚价格元素: $224 NZD 
night
$224 NZD per night
2024-11-15 15:00:17,538 [INFO] price_checker.py:356 - 成功解析折扣价格: $224 NZD
2024-11-15 15:00:17,538 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:00:17,544 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 15:00:18,047 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:00:18,054 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:00:18,060 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 15:00:18,061 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 15:00:18,061 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:00:18,068 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:00:18,077 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 15:00:18,078 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 15:00:18,078 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:00:26,091 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:00:26,091 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:00:26,097 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 15:00:26,113 [INFO] price_checker.py:337 - 找到可见价格元素: $317 NZD 
$265 NZD 
night
$265 NZD per night, originally $317 NZD
2024-11-15 15:00:26,120 [INFO] price_checker.py:350 - 找到每晚价格元素: $317 NZD 
$265 NZD 
night
$265 NZD per night, originally $317 NZD
2024-11-15 15:00:26,120 [INFO] price_checker.py:356 - 成功解析折扣价格: $265 NZD
2024-11-15 15:00:26,120 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:00:26,126 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 15:00:26,628 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:00:26,636 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:00:26,642 [INFO] price_checker.py:403 - 找到价格元素: $170 NZD (HTML: <span class="_1k4xcdh">$170&nbsp;NZD</span>)
2024-11-15 15:00:26,642 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $170 NZD
2024-11-15 15:00:26,642 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:00:26,649 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:00:26,654 [INFO] price_checker.py:403 - 找到价格元素: $170 NZD (HTML: <span class="_1k4xcdh">$170&nbsp;NZD</span>)
2024-11-15 15:00:26,654 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $170 NZD
2024-11-15 15:00:26,654 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:00:28,126 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:00:36,688 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:00:38,170 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:00:38,177 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:00:38,183 [INFO] price_checker.py:403 - 找到价格元素: $41 NZD (HTML: <span class="_1k4xcdh">$41&nbsp;NZD</span>)
2024-11-15 15:00:38,183 [INFO] price_checker.py:416 - ✓ 成功设置税费: $41 NZD
2024-11-15 15:00:38,183 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:00:46,729 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:00:48,224 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:00:48,231 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:00:48,237 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span class="_j1kt73">$315&nbsp;NZD</span>)
2024-11-15 15:00:48,237 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:00:48,237 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:00:48,244 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 15:00:48,248 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$315&nbsp;NZD</span></span>)
2024-11-15 15:00:48,249 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:00:48,253 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span class="_j1kt73">$315&nbsp;NZD</span>)
2024-11-15 15:00:48,253 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:00:48,258 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 15:00:48,258 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 15:00:48,258 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:00:48,258 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 15:00:48,258 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:00:48,259 [INFO] price_checker.py:450 - ✓ taxes: $41 NZD
2024-11-15 15:00:48,259 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:00:48,259 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:00:48,259 [INFO] price_checker.py:457 - check_in: 01/12/2024
2024-11-15 15:00:48,259 [INFO] price_checker.py:457 - check_out: 02/12/2024
2024-11-15 15:00:48,259 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:00:48,259 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:00:48,259 [INFO] price_checker.py:457 - nightly_price: $224 NZD
2024-11-15 15:00:48,259 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 15:00:48,259 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:00:48,259 [INFO] price_checker.py:457 - taxes: $41 NZD
2024-11-15 15:00:48,259 [INFO] price_checker.py:457 - total: 
2024-11-15 15:00:48,259 [INFO] price_checker.py:559 - ✓ 成功获取 01/12/2024 的价格信息
2024-11-15 15:00:48,259 [INFO] price_checker.py:553 - [13/50] 处理日期: 02/12/2024
2024-11-15 15:00:48,260 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/49525472
2024-11-15 15:00:48,260 [INFO] price_checker.py:255 - 入住日期: 02/12/2024
2024-11-15 15:00:53,772 [INFO] price_checker.py:271 - 开始检查日期 02/12/2024 的最小入住要求...
2024-11-15 15:00:53,775 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_sl5yz7r" role="button" aria-disabled="false" aria-label="2, Monday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-02/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">2</div></td>
2024-11-15 15:00:53,786 [INFO] price_checker.py:158 - 找到日期: 02/12/2024
2024-11-15 15:00:53,786 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:00:56,742 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:01:03,831 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:01:04,931 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:01:04,937 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:01:04,938 [ERROR] price_checker.py:246 - 错误类型: MoveTargetOutOfBoundsException
2024-11-15 15:01:04,939 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.MoveTargetOutOfBoundsException: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 15:01:04,939 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 15:01:04,939 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:01:04,939 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/49525472?check_in=2024-12-02&check_out=2024-12-03&adults=3&children=0&infants=0
2024-11-15 15:01:06,772 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:01:06,780 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:01:06,789 [INFO] price_checker.py:403 - 找到价格元素: $435 NZD (HTML: <span class="_j1kt73">$435&nbsp;NZD</span>)
2024-11-15 15:01:06,789 [INFO] price_checker.py:420 - ✓ 成功设置总价: $435 NZD
2024-11-15 15:01:06,790 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:01:06,797 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 15:01:06,803 [INFO] price_checker.py:403 - 找到价格元素: $435 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$435&nbsp;NZD</span></span>)
2024-11-15 15:01:06,803 [INFO] price_checker.py:420 - ✓ 成功设置总价: $435 NZD
2024-11-15 15:01:06,807 [INFO] price_checker.py:403 - 找到价格元素: $435 NZD (HTML: <span class="_j1kt73">$435&nbsp;NZD</span>)
2024-11-15 15:01:06,807 [INFO] price_checker.py:420 - ✓ 成功设置总价: $435 NZD
2024-11-15 15:01:06,812 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 15:01:06,812 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 15:01:06,812 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:01:06,812 [INFO] price_checker.py:450 - ✓ cleaning_fee: $170 NZD
2024-11-15 15:01:06,812 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:01:06,812 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 15:01:06,812 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:01:06,812 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:01:06,812 [INFO] price_checker.py:457 - check_in: 13/12/2024
2024-11-15 15:01:06,812 [INFO] price_checker.py:457 - check_out: 14/12/2024
2024-11-15 15:01:06,813 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:01:06,813 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:01:06,813 [INFO] price_checker.py:457 - nightly_price: $265 NZD
2024-11-15 15:01:06,813 [INFO] price_checker.py:457 - cleaning_fee: $170 NZD
2024-11-15 15:01:06,813 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:01:06,813 [INFO] price_checker.py:457 - taxes: None
2024-11-15 15:01:06,813 [INFO] price_checker.py:457 - total: 
2024-11-15 15:01:06,813 [INFO] price_checker.py:559 - ✓ 成功获取 13/12/2024 的价格信息
2024-11-15 15:01:06,813 [INFO] price_checker.py:553 - [13/41] 处理日期: 14/12/2024
2024-11-15 15:01:06,813 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/716883705085875481
2024-11-15 15:01:06,813 [INFO] price_checker.py:255 - 入住日期: 14/12/2024
2024-11-15 15:01:10,039 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:01:10,042 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:01:11,937 [INFO] price_checker.py:271 - 开始检查日期 14/12/2024 的最小入住要求...
2024-11-15 15:01:11,940 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="14, Saturday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-14/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">14</div></td>
2024-11-15 15:01:11,949 [INFO] price_checker.py:158 - 找到日期: 14/12/2024
2024-11-15 15:01:11,949 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:01:12,054 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:01:12,054 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:01:13,066 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:01:14,354 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="14, Saturday, December 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_ox7af8h notranslate" data-testid="calendar-day-14/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">14</div></td>
2024-11-15 15:01:14,365 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 15:01:14,365 [INFO] price_checker.py:218 - - aria-label: 14, Saturday, December 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 15:01:14,365 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 15:01:14,365 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 15:01:14,365 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 15:01:14,366 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:01:14,366 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/716883705085875481?check_in=2024-12-14&check_out=2024-12-15&adults=3&children=0&infants=0
2024-11-15 15:01:19,456 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:01:19,459 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:01:21,469 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:01:21,470 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:01:22,062 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:01:22,062 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:01:31,502 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:01:31,502 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:01:32,092 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:01:32,093 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:01:32,099 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 15:01:32,114 [INFO] price_checker.py:337 - 找到可见价格元素: $224 NZD 
night
$224 NZD per night
2024-11-15 15:01:32,120 [INFO] price_checker.py:350 - 找到每晚价格元素: $224 NZD 
night
$224 NZD per night
2024-11-15 15:01:32,120 [INFO] price_checker.py:356 - 成功解析折扣价格: $224 NZD
2024-11-15 15:01:32,120 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:01:32,127 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 15:01:32,633 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:01:32,640 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:01:32,647 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 15:01:32,647 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 15:01:32,647 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:01:32,654 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:01:32,659 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 15:01:32,659 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 15:01:32,659 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:01:41,543 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:01:41,543 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:01:41,549 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 15:01:41,565 [INFO] price_checker.py:337 - 找到可见价格元素: $317 NZD 
$265 NZD 
night
$265 NZD per night, originally $317 NZD
2024-11-15 15:01:41,571 [INFO] price_checker.py:350 - 找到每晚价格元素: $317 NZD 
$265 NZD 
night
$265 NZD per night, originally $317 NZD
2024-11-15 15:01:41,571 [INFO] price_checker.py:356 - 成功解析折扣价格: $265 NZD
2024-11-15 15:01:41,571 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:01:41,577 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 15:01:42,080 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:01:42,087 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:01:42,094 [INFO] price_checker.py:403 - 找到价格元素: $170 NZD (HTML: <span class="_1k4xcdh">$170&nbsp;NZD</span>)
2024-11-15 15:01:42,094 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $170 NZD
2024-11-15 15:01:42,094 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:01:42,101 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:01:42,107 [INFO] price_checker.py:403 - 找到价格元素: $170 NZD (HTML: <span class="_1k4xcdh">$170&nbsp;NZD</span>)
2024-11-15 15:01:42,108 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $170 NZD
2024-11-15 15:01:42,108 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:01:42,712 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:01:52,147 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:01:52,736 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:01:52,743 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:01:52,749 [INFO] price_checker.py:403 - 找到价格元素: $41 NZD (HTML: <span class="_1k4xcdh">$41&nbsp;NZD</span>)
2024-11-15 15:01:52,749 [INFO] price_checker.py:416 - ✓ 成功设置税费: $41 NZD
2024-11-15 15:01:52,750 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:02:02,174 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:02:02,781 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:02:02,787 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:02:02,792 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span class="_j1kt73">$315&nbsp;NZD</span>)
2024-11-15 15:02:02,793 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:02:02,793 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:02:02,800 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 15:02:02,805 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$315&nbsp;NZD</span></span>)
2024-11-15 15:02:02,805 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:02:02,810 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span class="_j1kt73">$315&nbsp;NZD</span>)
2024-11-15 15:02:02,810 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:02:02,815 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 15:02:02,815 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 15:02:02,815 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:02:02,815 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 15:02:02,816 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:02:02,816 [INFO] price_checker.py:450 - ✓ taxes: $41 NZD
2024-11-15 15:02:02,816 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:02:02,816 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:02:02,816 [INFO] price_checker.py:457 - check_in: 02/12/2024
2024-11-15 15:02:02,816 [INFO] price_checker.py:457 - check_out: 03/12/2024
2024-11-15 15:02:02,816 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:02:02,816 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:02:02,816 [INFO] price_checker.py:457 - nightly_price: $224 NZD
2024-11-15 15:02:02,816 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 15:02:02,816 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:02:02,816 [INFO] price_checker.py:457 - taxes: $41 NZD
2024-11-15 15:02:02,816 [INFO] price_checker.py:457 - total: 
2024-11-15 15:02:02,816 [INFO] price_checker.py:559 - ✓ 成功获取 02/12/2024 的价格信息
2024-11-15 15:02:02,817 [INFO] price_checker.py:553 - [14/50] 处理日期: 03/12/2024
2024-11-15 15:02:02,817 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/49525472
2024-11-15 15:02:02,817 [INFO] price_checker.py:255 - 入住日期: 03/12/2024
2024-11-15 15:02:07,939 [INFO] price_checker.py:271 - 开始检查日期 03/12/2024 的最小入住要求...
2024-11-15 15:02:07,942 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="3, Tuesday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-03/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">3</div></td>
2024-11-15 15:02:07,952 [INFO] price_checker.py:158 - 找到日期: 03/12/2024
2024-11-15 15:02:07,952 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:02:12,198 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:02:17,991 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:02:19,089 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:02:19,095 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:02:19,095 [ERROR] price_checker.py:246 - 错误类型: MoveTargetOutOfBoundsException
2024-11-15 15:02:19,096 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.MoveTargetOutOfBoundsException: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 15:02:19,097 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 15:02:19,097 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:02:19,097 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/49525472?check_in=2024-12-03&check_out=2024-12-04&adults=3&children=0&infants=0
2024-11-15 15:02:22,223 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:02:22,230 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:02:22,237 [INFO] price_checker.py:403 - 找到价格元素: $435 NZD (HTML: <span class="_j1kt73">$435&nbsp;NZD</span>)
2024-11-15 15:02:22,238 [INFO] price_checker.py:420 - ✓ 成功设置总价: $435 NZD
2024-11-15 15:02:22,238 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:02:22,244 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 15:02:22,249 [INFO] price_checker.py:403 - 找到价格元素: $435 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$435&nbsp;NZD</span></span>)
2024-11-15 15:02:22,249 [INFO] price_checker.py:420 - ✓ 成功设置总价: $435 NZD
2024-11-15 15:02:22,254 [INFO] price_checker.py:403 - 找到价格元素: $435 NZD (HTML: <span class="_j1kt73">$435&nbsp;NZD</span>)
2024-11-15 15:02:22,254 [INFO] price_checker.py:420 - ✓ 成功设置总价: $435 NZD
2024-11-15 15:02:22,259 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 15:02:22,259 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 15:02:22,260 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:02:22,260 [INFO] price_checker.py:450 - ✓ cleaning_fee: $170 NZD
2024-11-15 15:02:22,260 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:02:22,260 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 15:02:22,260 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:02:22,260 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:02:22,260 [INFO] price_checker.py:457 - check_in: 14/12/2024
2024-11-15 15:02:22,260 [INFO] price_checker.py:457 - check_out: 15/12/2024
2024-11-15 15:02:22,260 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:02:22,260 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:02:22,260 [INFO] price_checker.py:457 - nightly_price: $265 NZD
2024-11-15 15:02:22,260 [INFO] price_checker.py:457 - cleaning_fee: $170 NZD
2024-11-15 15:02:22,260 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:02:22,261 [INFO] price_checker.py:457 - taxes: None
2024-11-15 15:02:22,261 [INFO] price_checker.py:457 - total: 
2024-11-15 15:02:22,261 [INFO] price_checker.py:559 - ✓ 成功获取 14/12/2024 的价格信息
2024-11-15 15:02:22,261 [INFO] price_checker.py:553 - [14/41] 处理日期: 15/12/2024
2024-11-15 15:02:22,261 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/716883705085875481
2024-11-15 15:02:22,261 [INFO] price_checker.py:255 - 入住日期: 15/12/2024
2024-11-15 15:02:24,192 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:02:24,196 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:02:26,207 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:02:26,207 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:02:27,388 [INFO] price_checker.py:271 - 开始检查日期 15/12/2024 的最小入住要求...
2024-11-15 15:02:27,391 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_1mv3p4vt" role="button" aria-disabled="false" aria-label="15, Sunday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-15/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">15</div></td>
2024-11-15 15:02:27,400 [INFO] price_checker.py:158 - 找到日期: 15/12/2024
2024-11-15 15:02:27,401 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:02:28,519 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:02:29,800 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_ubf03zg" role="button" aria-disabled="true" aria-label="15, Sunday, December 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1qis3zbj notranslate" data-testid="calendar-day-15/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">15</div></td>
2024-11-15 15:02:29,809 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 15:02:29,809 [INFO] price_checker.py:218 - - aria-label: 15, Sunday, December 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 15:02:29,809 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 15:02:29,809 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 15:02:29,810 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 15:02:29,810 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:02:29,810 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/716883705085875481?check_in=2024-12-15&check_out=2024-12-16&adults=3&children=0&infants=0
2024-11-15 15:02:34,908 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:02:34,911 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:02:36,241 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:02:36,241 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:02:36,922 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:02:36,922 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:02:46,271 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:02:46,271 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:02:46,277 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 15:02:46,294 [INFO] price_checker.py:337 - 找到可见价格元素: $224 NZD 
night
$224 NZD per night
2024-11-15 15:02:46,299 [INFO] price_checker.py:350 - 找到每晚价格元素: $224 NZD 
night
$224 NZD per night
2024-11-15 15:02:46,299 [INFO] price_checker.py:356 - 成功解析折扣价格: $224 NZD
2024-11-15 15:02:46,299 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:02:46,305 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 15:02:46,809 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:02:46,816 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:02:46,822 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 15:02:46,823 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 15:02:46,823 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:02:46,829 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:02:46,834 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 15:02:46,834 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 15:02:46,834 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:02:46,959 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:02:46,959 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:02:56,861 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:02:56,986 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:02:56,986 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:02:56,992 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 15:02:57,009 [INFO] price_checker.py:337 - 找到可见价格元素: $317 NZD 
$265 NZD 
night
$265 NZD per night, originally $317 NZD
2024-11-15 15:02:57,016 [INFO] price_checker.py:350 - 找到每晚价格元素: $317 NZD 
$265 NZD 
night
$265 NZD per night, originally $317 NZD
2024-11-15 15:02:57,016 [INFO] price_checker.py:356 - 成功解析折扣价格: $265 NZD
2024-11-15 15:02:57,016 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:02:57,022 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 15:02:57,525 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:02:57,534 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:02:57,540 [INFO] price_checker.py:403 - 找到价格元素: $170 NZD (HTML: <span class="_1k4xcdh">$170&nbsp;NZD</span>)
2024-11-15 15:02:57,541 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $170 NZD
2024-11-15 15:02:57,541 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:02:57,548 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:02:57,553 [INFO] price_checker.py:403 - 找到价格元素: $170 NZD (HTML: <span class="_1k4xcdh">$170&nbsp;NZD</span>)
2024-11-15 15:02:57,554 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $170 NZD
2024-11-15 15:02:57,554 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:03:06,888 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:03:06,895 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:03:06,906 [INFO] price_checker.py:403 - 找到价格元素: $41 NZD (HTML: <span class="_1k4xcdh">$41&nbsp;NZD</span>)
2024-11-15 15:03:06,907 [INFO] price_checker.py:416 - ✓ 成功设置税费: $41 NZD
2024-11-15 15:03:06,907 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:03:07,588 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:03:16,943 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:03:16,950 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:03:16,956 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span class="_j1kt73">$315&nbsp;NZD</span>)
2024-11-15 15:03:16,956 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:03:16,956 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:03:16,962 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 15:03:16,967 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$315&nbsp;NZD</span></span>)
2024-11-15 15:03:16,967 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:03:16,973 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span class="_j1kt73">$315&nbsp;NZD</span>)
2024-11-15 15:03:16,973 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:03:16,977 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 15:03:16,977 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 15:03:16,978 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:03:16,978 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 15:03:16,978 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:03:16,978 [INFO] price_checker.py:450 - ✓ taxes: $41 NZD
2024-11-15 15:03:16,978 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:03:16,978 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:03:16,978 [INFO] price_checker.py:457 - check_in: 03/12/2024
2024-11-15 15:03:16,978 [INFO] price_checker.py:457 - check_out: 04/12/2024
2024-11-15 15:03:16,978 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:03:16,978 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:03:16,978 [INFO] price_checker.py:457 - nightly_price: $224 NZD
2024-11-15 15:03:16,978 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 15:03:16,978 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:03:16,978 [INFO] price_checker.py:457 - taxes: $41 NZD
2024-11-15 15:03:16,979 [INFO] price_checker.py:457 - total: 
2024-11-15 15:03:16,979 [INFO] price_checker.py:559 - ✓ 成功获取 03/12/2024 的价格信息
2024-11-15 15:03:16,979 [INFO] price_checker.py:553 - [15/50] 处理日期: 08/12/2024
2024-11-15 15:03:16,979 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/49525472
2024-11-15 15:03:16,979 [INFO] price_checker.py:255 - 入住日期: 08/12/2024
2024-11-15 15:03:17,611 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:03:22,387 [INFO] price_checker.py:271 - 开始检查日期 08/12/2024 的最小入住要求...
2024-11-15 15:03:22,394 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_1mv3p4vt" role="button" aria-disabled="false" aria-label="8, Sunday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-08/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">8</div></td>
2024-11-15 15:03:22,421 [INFO] price_checker.py:158 - 找到日期: 08/12/2024
2024-11-15 15:03:22,421 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:03:27,674 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:03:32,463 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:03:33,560 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:03:33,566 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:03:33,566 [ERROR] price_checker.py:246 - 错误类型: MoveTargetOutOfBoundsException
2024-11-15 15:03:33,567 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.MoveTargetOutOfBoundsException: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 15:03:33,568 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 15:03:33,568 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:03:33,568 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/49525472?check_in=2024-12-08&check_out=2024-12-09&adults=3&children=0&infants=0
2024-11-15 15:03:37,688 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:03:37,695 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:03:37,703 [INFO] price_checker.py:403 - 找到价格元素: $435 NZD (HTML: <span class="_j1kt73">$435&nbsp;NZD</span>)
2024-11-15 15:03:37,703 [INFO] price_checker.py:420 - ✓ 成功设置总价: $435 NZD
2024-11-15 15:03:37,703 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:03:37,709 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 15:03:37,715 [INFO] price_checker.py:403 - 找到价格元素: $435 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$435&nbsp;NZD</span></span>)
2024-11-15 15:03:37,715 [INFO] price_checker.py:420 - ✓ 成功设置总价: $435 NZD
2024-11-15 15:03:37,719 [INFO] price_checker.py:403 - 找到价格元素: $435 NZD (HTML: <span class="_j1kt73">$435&nbsp;NZD</span>)
2024-11-15 15:03:37,719 [INFO] price_checker.py:420 - ✓ 成功设置总价: $435 NZD
2024-11-15 15:03:37,724 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 15:03:37,724 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 15:03:37,724 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:03:37,724 [INFO] price_checker.py:450 - ✓ cleaning_fee: $170 NZD
2024-11-15 15:03:37,724 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:03:37,724 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 15:03:37,724 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:03:37,724 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:03:37,724 [INFO] price_checker.py:457 - check_in: 15/12/2024
2024-11-15 15:03:37,724 [INFO] price_checker.py:457 - check_out: 16/12/2024
2024-11-15 15:03:37,725 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:03:37,725 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:03:37,725 [INFO] price_checker.py:457 - nightly_price: $265 NZD
2024-11-15 15:03:37,725 [INFO] price_checker.py:457 - cleaning_fee: $170 NZD
2024-11-15 15:03:37,725 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:03:37,725 [INFO] price_checker.py:457 - taxes: None
2024-11-15 15:03:37,725 [INFO] price_checker.py:457 - total: 
2024-11-15 15:03:37,725 [INFO] price_checker.py:559 - ✓ 成功获取 15/12/2024 的价格信息
2024-11-15 15:03:37,725 [INFO] price_checker.py:553 - [15/41] 处理日期: 16/12/2024
2024-11-15 15:03:37,725 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/716883705085875481
2024-11-15 15:03:37,725 [INFO] price_checker.py:255 - 入住日期: 16/12/2024
2024-11-15 15:03:38,677 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:03:38,681 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:03:40,692 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:03:40,693 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:03:42,853 [INFO] price_checker.py:271 - 开始检查日期 16/12/2024 的最小入住要求...
2024-11-15 15:03:42,856 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_sl5yz7r" role="button" aria-disabled="false" aria-label="16, Monday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-16/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">16</div></td>
2024-11-15 15:03:42,866 [INFO] price_checker.py:158 - 找到日期: 16/12/2024
2024-11-15 15:03:42,866 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:03:43,994 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:03:45,293 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_5v1jabe" role="button" aria-disabled="true" aria-label="16, Monday, December 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1qis3zbj notranslate" data-testid="calendar-day-16/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">16</div></td>
2024-11-15 15:03:45,303 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 15:03:45,303 [INFO] price_checker.py:218 - - aria-label: 16, Monday, December 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 15:03:45,303 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 15:03:45,303 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 15:03:45,303 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 15:03:45,303 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:03:45,304 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/716883705085875481?check_in=2024-12-16&check_out=2024-12-17&adults=3&children=0&infants=0
2024-11-15 15:03:50,421 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:03:50,424 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:03:50,706 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:03:50,706 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:03:52,436 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:03:52,436 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:04:00,743 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:04:00,744 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:04:00,750 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 15:04:00,768 [INFO] price_checker.py:337 - 找到可见价格元素: $224 NZD 
night
$224 NZD per night
2024-11-15 15:04:00,774 [INFO] price_checker.py:350 - 找到每晚价格元素: $224 NZD 
night
$224 NZD per night
2024-11-15 15:04:00,774 [INFO] price_checker.py:356 - 成功解析折扣价格: $224 NZD
2024-11-15 15:04:00,774 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:04:00,780 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 15:04:01,283 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:04:01,291 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:04:01,298 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 15:04:01,298 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 15:04:01,298 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:04:01,306 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:04:01,316 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 15:04:01,317 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 15:04:01,317 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:04:02,469 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:04:02,469 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:04:11,319 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:04:12,471 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:04:12,471 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:04:12,477 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 15:04:12,494 [INFO] price_checker.py:337 - 找到可见价格元素: $317 NZD 
$265 NZD 
night
$265 NZD per night, originally $317 NZD
2024-11-15 15:04:12,500 [INFO] price_checker.py:350 - 找到每晚价格元素: $317 NZD 
$265 NZD 
night
$265 NZD per night, originally $317 NZD
2024-11-15 15:04:12,501 [INFO] price_checker.py:356 - 成功解析折扣价格: $265 NZD
2024-11-15 15:04:12,501 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:04:12,506 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 15:04:13,009 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:04:13,017 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:04:13,023 [INFO] price_checker.py:403 - 找到价格元素: $170 NZD (HTML: <span class="_1k4xcdh">$170&nbsp;NZD</span>)
2024-11-15 15:04:13,023 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $170 NZD
2024-11-15 15:04:13,023 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:04:13,029 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:04:13,034 [INFO] price_checker.py:403 - 找到价格元素: $170 NZD (HTML: <span class="_1k4xcdh">$170&nbsp;NZD</span>)
2024-11-15 15:04:13,035 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $170 NZD
2024-11-15 15:04:13,035 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:04:21,343 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:04:21,350 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:04:21,357 [INFO] price_checker.py:403 - 找到价格元素: $41 NZD (HTML: <span class="_1k4xcdh">$41&nbsp;NZD</span>)
2024-11-15 15:04:21,357 [INFO] price_checker.py:416 - ✓ 成功设置税费: $41 NZD
2024-11-15 15:04:21,357 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:04:23,054 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:04:31,387 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:04:31,394 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:04:31,400 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span class="_j1kt73">$315&nbsp;NZD</span>)
2024-11-15 15:04:31,400 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:04:31,400 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:04:31,407 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 15:04:31,412 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$315&nbsp;NZD</span></span>)
2024-11-15 15:04:31,412 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:04:31,417 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span class="_j1kt73">$315&nbsp;NZD</span>)
2024-11-15 15:04:31,417 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:04:31,421 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 15:04:31,422 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 15:04:31,422 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:04:31,422 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 15:04:31,422 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:04:31,422 [INFO] price_checker.py:450 - ✓ taxes: $41 NZD
2024-11-15 15:04:31,422 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:04:31,422 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:04:31,422 [INFO] price_checker.py:457 - check_in: 08/12/2024
2024-11-15 15:04:31,422 [INFO] price_checker.py:457 - check_out: 09/12/2024
2024-11-15 15:04:31,422 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:04:31,422 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:04:31,422 [INFO] price_checker.py:457 - nightly_price: $224 NZD
2024-11-15 15:04:31,422 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 15:04:31,423 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:04:31,423 [INFO] price_checker.py:457 - taxes: $41 NZD
2024-11-15 15:04:31,423 [INFO] price_checker.py:457 - total: 
2024-11-15 15:04:31,423 [INFO] price_checker.py:559 - ✓ 成功获取 08/12/2024 的价格信息
2024-11-15 15:04:31,423 [INFO] price_checker.py:573 - 已完成 15/50 个日期的处理
2024-11-15 15:04:33,086 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:04:41,423 [INFO] price_checker.py:553 - [16/50] 处理日期: 09/12/2024
2024-11-15 15:04:41,423 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/49525472
2024-11-15 15:04:41,423 [INFO] price_checker.py:255 - 入住日期: 09/12/2024
2024-11-15 15:04:43,091 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:04:46,550 [INFO] price_checker.py:271 - 开始检查日期 09/12/2024 的最小入住要求...
2024-11-15 15:04:46,553 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_sl5yz7r" role="button" aria-disabled="false" aria-label="9, Monday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-09/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">9</div></td>
2024-11-15 15:04:46,563 [INFO] price_checker.py:158 - 找到日期: 09/12/2024
2024-11-15 15:04:46,563 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:04:53,118 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:04:53,125 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:04:53,132 [INFO] price_checker.py:403 - 找到价格元素: $435 NZD (HTML: <span class="_j1kt73">$435&nbsp;NZD</span>)
2024-11-15 15:04:53,132 [INFO] price_checker.py:420 - ✓ 成功设置总价: $435 NZD
2024-11-15 15:04:53,132 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:04:53,139 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 15:04:53,144 [INFO] price_checker.py:403 - 找到价格元素: $435 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$435&nbsp;NZD</span></span>)
2024-11-15 15:04:53,144 [INFO] price_checker.py:420 - ✓ 成功设置总价: $435 NZD
2024-11-15 15:04:53,148 [INFO] price_checker.py:403 - 找到价格元素: $435 NZD (HTML: <span class="_j1kt73">$435&nbsp;NZD</span>)
2024-11-15 15:04:53,149 [INFO] price_checker.py:420 - ✓ 成功设置总价: $435 NZD
2024-11-15 15:04:53,153 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 15:04:53,154 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 15:04:53,154 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:04:53,154 [INFO] price_checker.py:450 - ✓ cleaning_fee: $170 NZD
2024-11-15 15:04:53,154 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:04:53,154 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 15:04:53,154 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:04:53,154 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:04:53,154 [INFO] price_checker.py:457 - check_in: 16/12/2024
2024-11-15 15:04:53,154 [INFO] price_checker.py:457 - check_out: 17/12/2024
2024-11-15 15:04:53,154 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:04:53,155 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:04:53,155 [INFO] price_checker.py:457 - nightly_price: $265 NZD
2024-11-15 15:04:53,155 [INFO] price_checker.py:457 - cleaning_fee: $170 NZD
2024-11-15 15:04:53,155 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:04:53,155 [INFO] price_checker.py:457 - taxes: None
2024-11-15 15:04:53,155 [INFO] price_checker.py:457 - total: 
2024-11-15 15:04:53,155 [INFO] price_checker.py:559 - ✓ 成功获取 16/12/2024 的价格信息
2024-11-15 15:04:53,155 [INFO] price_checker.py:573 - 已完成 15/41 个日期的处理
2024-11-15 15:04:56,608 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:04:57,696 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:04:57,702 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:04:57,702 [ERROR] price_checker.py:246 - 错误类型: MoveTargetOutOfBoundsException
2024-11-15 15:04:57,703 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.MoveTargetOutOfBoundsException: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 15:04:57,704 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 15:04:57,704 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:04:57,704 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/49525472?check_in=2024-12-09&check_out=2024-12-10&adults=3&children=0&infants=0
2024-11-15 15:05:02,803 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:05:02,806 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:05:03,155 [INFO] price_checker.py:553 - [16/41] 处理日期: 17/12/2024
2024-11-15 15:05:03,156 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/716883705085875481
2024-11-15 15:05:03,156 [INFO] price_checker.py:255 - 入住日期: 17/12/2024
2024-11-15 15:05:04,819 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:05:04,819 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:05:08,288 [INFO] price_checker.py:271 - 开始检查日期 17/12/2024 的最小入住要求...
2024-11-15 15:05:08,291 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="17, Tuesday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-17/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">17</div></td>
2024-11-15 15:05:08,301 [INFO] price_checker.py:158 - 找到日期: 17/12/2024
2024-11-15 15:05:08,301 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:05:09,414 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:05:10,708 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="17, Tuesday, December 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_ox7af8h notranslate" data-testid="calendar-day-17/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">17</div></td>
2024-11-15 15:05:10,716 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 15:05:10,716 [INFO] price_checker.py:218 - - aria-label: 17, Tuesday, December 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 15:05:10,716 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 15:05:10,716 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 15:05:10,716 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 15:05:10,716 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:05:10,716 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/716883705085875481?check_in=2024-12-17&check_out=2024-12-18&adults=3&children=0&infants=0
2024-11-15 15:05:14,865 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:05:14,865 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:05:15,804 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:05:15,807 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:05:17,818 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:05:17,818 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:05:24,889 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:05:24,890 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:05:24,895 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 15:05:24,912 [INFO] price_checker.py:337 - 找到可见价格元素: $224 NZD 
night
$224 NZD per night
2024-11-15 15:05:24,918 [INFO] price_checker.py:350 - 找到每晚价格元素: $224 NZD 
night
$224 NZD per night
2024-11-15 15:05:24,918 [INFO] price_checker.py:356 - 成功解析折扣价格: $224 NZD
2024-11-15 15:05:24,918 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:05:24,924 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 15:05:25,428 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:05:25,435 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:05:25,441 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 15:05:25,441 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 15:05:25,441 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:05:25,447 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:05:25,453 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 15:05:25,453 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 15:05:25,453 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:05:27,861 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:05:27,861 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:05:35,482 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:05:37,897 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:05:37,897 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:05:37,903 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 15:05:37,919 [INFO] price_checker.py:337 - 找到可见价格元素: $317 NZD 
$265 NZD 
night
$265 NZD per night, originally $317 NZD
2024-11-15 15:05:37,925 [INFO] price_checker.py:350 - 找到每晚价格元素: $317 NZD 
$265 NZD 
night
$265 NZD per night, originally $317 NZD
2024-11-15 15:05:37,925 [INFO] price_checker.py:356 - 成功解析折扣价格: $265 NZD
2024-11-15 15:05:37,926 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:05:37,931 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 15:05:38,434 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:05:38,442 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:05:38,449 [INFO] price_checker.py:403 - 找到价格元素: $170 NZD (HTML: <span class="_1k4xcdh">$170&nbsp;NZD</span>)
2024-11-15 15:05:38,449 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $170 NZD
2024-11-15 15:05:38,449 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:05:38,456 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:05:38,461 [INFO] price_checker.py:403 - 找到价格元素: $170 NZD (HTML: <span class="_1k4xcdh">$170&nbsp;NZD</span>)
2024-11-15 15:05:38,461 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $170 NZD
2024-11-15 15:05:38,461 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:05:45,523 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:05:45,530 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:05:45,536 [INFO] price_checker.py:403 - 找到价格元素: $41 NZD (HTML: <span class="_1k4xcdh">$41&nbsp;NZD</span>)
2024-11-15 15:05:45,537 [INFO] price_checker.py:416 - ✓ 成功设置税费: $41 NZD
2024-11-15 15:05:45,537 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:05:48,512 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:05:55,575 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:05:55,582 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:05:55,588 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span class="_j1kt73">$315&nbsp;NZD</span>)
2024-11-15 15:05:55,588 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:05:55,588 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:05:55,594 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 15:05:55,599 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$315&nbsp;NZD</span></span>)
2024-11-15 15:05:55,599 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:05:55,605 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span class="_j1kt73">$315&nbsp;NZD</span>)
2024-11-15 15:05:55,605 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:05:55,610 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 15:05:55,610 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 15:05:55,610 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:05:55,610 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 15:05:55,610 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:05:55,610 [INFO] price_checker.py:450 - ✓ taxes: $41 NZD
2024-11-15 15:05:55,610 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:05:55,610 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:05:55,611 [INFO] price_checker.py:457 - check_in: 09/12/2024
2024-11-15 15:05:55,611 [INFO] price_checker.py:457 - check_out: 10/12/2024
2024-11-15 15:05:55,611 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:05:55,611 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:05:55,611 [INFO] price_checker.py:457 - nightly_price: $224 NZD
2024-11-15 15:05:55,611 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 15:05:55,611 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:05:55,611 [INFO] price_checker.py:457 - taxes: $41 NZD
2024-11-15 15:05:55,611 [INFO] price_checker.py:457 - total: 
2024-11-15 15:05:55,611 [INFO] price_checker.py:559 - ✓ 成功获取 09/12/2024 的价格信息
2024-11-15 15:05:55,611 [INFO] price_checker.py:553 - [17/50] 处理日期: 10/12/2024
2024-11-15 15:05:55,611 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/49525472
2024-11-15 15:05:55,611 [INFO] price_checker.py:255 - 入住日期: 10/12/2024
2024-11-15 15:05:58,544 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:06:00,733 [INFO] price_checker.py:271 - 开始检查日期 10/12/2024 的最小入住要求...
2024-11-15 15:06:00,735 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="10, Tuesday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-10/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">10</div></td>
2024-11-15 15:06:00,747 [INFO] price_checker.py:158 - 找到日期: 10/12/2024
2024-11-15 15:06:00,747 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:06:08,576 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:06:10,793 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:06:11,882 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:06:11,888 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:06:11,888 [ERROR] price_checker.py:246 - 错误类型: MoveTargetOutOfBoundsException
2024-11-15 15:06:11,889 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.MoveTargetOutOfBoundsException: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 15:06:11,890 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 15:06:11,890 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:06:11,890 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/49525472?check_in=2024-12-10&check_out=2024-12-11&adults=3&children=0&infants=0
2024-11-15 15:06:16,991 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:06:17,073 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:06:18,612 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:06:18,620 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:06:18,627 [INFO] price_checker.py:403 - 找到价格元素: $435 NZD (HTML: <span class="_j1kt73">$435&nbsp;NZD</span>)
2024-11-15 15:06:18,627 [INFO] price_checker.py:420 - ✓ 成功设置总价: $435 NZD
2024-11-15 15:06:18,627 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:06:18,634 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 15:06:18,639 [INFO] price_checker.py:403 - 找到价格元素: $435 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$435&nbsp;NZD</span></span>)
2024-11-15 15:06:18,639 [INFO] price_checker.py:420 - ✓ 成功设置总价: $435 NZD
2024-11-15 15:06:18,643 [INFO] price_checker.py:403 - 找到价格元素: $435 NZD (HTML: <span class="_j1kt73">$435&nbsp;NZD</span>)
2024-11-15 15:06:18,643 [INFO] price_checker.py:420 - ✓ 成功设置总价: $435 NZD
2024-11-15 15:06:18,648 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 15:06:18,648 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 15:06:18,648 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:06:18,648 [INFO] price_checker.py:450 - ✓ cleaning_fee: $170 NZD
2024-11-15 15:06:18,648 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:06:18,648 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 15:06:18,648 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:06:18,649 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:06:18,649 [INFO] price_checker.py:457 - check_in: 17/12/2024
2024-11-15 15:06:18,649 [INFO] price_checker.py:457 - check_out: 18/12/2024
2024-11-15 15:06:18,649 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:06:18,649 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:06:18,649 [INFO] price_checker.py:457 - nightly_price: $265 NZD
2024-11-15 15:06:18,649 [INFO] price_checker.py:457 - cleaning_fee: $170 NZD
2024-11-15 15:06:18,649 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:06:18,649 [INFO] price_checker.py:457 - taxes: None
2024-11-15 15:06:18,649 [INFO] price_checker.py:457 - total: 
2024-11-15 15:06:18,649 [INFO] price_checker.py:559 - ✓ 成功获取 17/12/2024 的价格信息
2024-11-15 15:06:18,649 [INFO] price_checker.py:553 - [17/41] 处理日期: 18/12/2024
2024-11-15 15:06:18,649 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/716883705085875481
2024-11-15 15:06:18,650 [INFO] price_checker.py:255 - 入住日期: 18/12/2024
2024-11-15 15:06:19,095 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:06:19,095 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:06:23,770 [INFO] price_checker.py:271 - 开始检查日期 18/12/2024 的最小入住要求...
2024-11-15 15:06:23,773 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="18, Wednesday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-18/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">18</div></td>
2024-11-15 15:06:23,782 [INFO] price_checker.py:158 - 找到日期: 18/12/2024
2024-11-15 15:06:23,782 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:06:24,895 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:06:26,193 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="18, Wednesday, December 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_ox7af8h notranslate" data-testid="calendar-day-18/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">18</div></td>
2024-11-15 15:06:26,201 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 15:06:26,201 [INFO] price_checker.py:218 - - aria-label: 18, Wednesday, December 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 15:06:26,201 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 15:06:26,201 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 15:06:26,201 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 15:06:26,201 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:06:26,201 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/716883705085875481?check_in=2024-12-18&check_out=2024-12-19&adults=3&children=0&infants=0
2024-11-15 15:06:29,141 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:06:29,141 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:06:31,322 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:06:31,324 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:06:33,335 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:06:33,335 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:06:39,182 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:06:39,182 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:06:39,188 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 15:06:39,204 [INFO] price_checker.py:337 - 找到可见价格元素: $224 NZD 
night
$224 NZD per night
2024-11-15 15:06:39,209 [INFO] price_checker.py:350 - 找到每晚价格元素: $224 NZD 
night
$224 NZD per night
2024-11-15 15:06:39,210 [INFO] price_checker.py:356 - 成功解析折扣价格: $224 NZD
2024-11-15 15:06:39,210 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:06:39,215 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 15:06:39,718 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:06:39,725 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:06:39,731 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 15:06:39,731 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 15:06:39,731 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:06:39,738 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:06:39,743 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 15:06:39,743 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 15:06:39,743 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:06:43,382 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:06:43,383 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:06:49,793 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:06:53,425 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:06:53,426 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:06:53,432 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 15:06:53,447 [INFO] price_checker.py:337 - 找到可见价格元素: $317 NZD 
$265 NZD 
night
$265 NZD per night, originally $317 NZD
2024-11-15 15:06:53,454 [INFO] price_checker.py:350 - 找到每晚价格元素: $317 NZD 
$265 NZD 
night
$265 NZD per night, originally $317 NZD
2024-11-15 15:06:53,454 [INFO] price_checker.py:356 - 成功解析折扣价格: $265 NZD
2024-11-15 15:06:53,454 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:06:53,460 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 15:06:53,963 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:06:53,971 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:06:53,981 [INFO] price_checker.py:403 - 找到价格元素: $170 NZD (HTML: <span class="_1k4xcdh">$170&nbsp;NZD</span>)
2024-11-15 15:06:53,981 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $170 NZD
2024-11-15 15:06:53,981 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:06:53,989 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:06:53,996 [INFO] price_checker.py:403 - 找到价格元素: $170 NZD (HTML: <span class="_1k4xcdh">$170&nbsp;NZD</span>)
2024-11-15 15:06:53,996 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $170 NZD
2024-11-15 15:06:53,996 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:06:59,845 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:06:59,852 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:06:59,858 [INFO] price_checker.py:403 - 找到价格元素: $41 NZD (HTML: <span class="_1k4xcdh">$41&nbsp;NZD</span>)
2024-11-15 15:06:59,858 [INFO] price_checker.py:416 - ✓ 成功设置税费: $41 NZD
2024-11-15 15:06:59,858 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:07:04,065 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:07:09,897 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:07:09,904 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:07:09,910 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span class="_j1kt73">$315&nbsp;NZD</span>)
2024-11-15 15:07:09,910 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:07:09,910 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:07:09,917 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 15:07:09,922 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$315&nbsp;NZD</span></span>)
2024-11-15 15:07:09,922 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:07:09,927 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span class="_j1kt73">$315&nbsp;NZD</span>)
2024-11-15 15:07:09,927 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:07:09,931 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 15:07:09,931 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 15:07:09,932 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:07:09,932 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 15:07:09,932 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:07:09,932 [INFO] price_checker.py:450 - ✓ taxes: $41 NZD
2024-11-15 15:07:09,932 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:07:09,932 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:07:09,932 [INFO] price_checker.py:457 - check_in: 10/12/2024
2024-11-15 15:07:09,932 [INFO] price_checker.py:457 - check_out: 11/12/2024
2024-11-15 15:07:09,932 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:07:09,932 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:07:09,932 [INFO] price_checker.py:457 - nightly_price: $224 NZD
2024-11-15 15:07:09,932 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 15:07:09,932 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:07:09,932 [INFO] price_checker.py:457 - taxes: $41 NZD
2024-11-15 15:07:09,933 [INFO] price_checker.py:457 - total: 
2024-11-15 15:07:09,933 [INFO] price_checker.py:559 - ✓ 成功获取 10/12/2024 的价格信息
2024-11-15 15:07:09,933 [INFO] price_checker.py:553 - [18/50] 处理日期: 11/12/2024
2024-11-15 15:07:09,933 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/49525472
2024-11-15 15:07:09,933 [INFO] price_checker.py:255 - 入住日期: 11/12/2024
2024-11-15 15:07:14,073 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:07:15,049 [INFO] price_checker.py:271 - 开始检查日期 11/12/2024 的最小入住要求...
2024-11-15 15:07:15,052 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="11, Wednesday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-11/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">11</div></td>
2024-11-15 15:07:15,077 [INFO] price_checker.py:158 - 找到日期: 11/12/2024
2024-11-15 15:07:15,077 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:07:24,095 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:07:25,123 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:07:26,224 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:07:26,231 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:07:26,231 [ERROR] price_checker.py:246 - 错误类型: MoveTargetOutOfBoundsException
2024-11-15 15:07:26,232 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.MoveTargetOutOfBoundsException: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 15:07:26,232 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 15:07:26,233 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:07:26,233 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/49525472?check_in=2024-12-11&check_out=2024-12-12&adults=3&children=0&infants=0
2024-11-15 15:07:31,324 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:07:31,327 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:07:33,338 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:07:33,338 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:07:34,113 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:07:34,120 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:07:34,127 [INFO] price_checker.py:403 - 找到价格元素: $435 NZD (HTML: <span class="_j1kt73">$435&nbsp;NZD</span>)
2024-11-15 15:07:34,127 [INFO] price_checker.py:420 - ✓ 成功设置总价: $435 NZD
2024-11-15 15:07:34,127 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:07:34,133 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 15:07:34,138 [INFO] price_checker.py:403 - 找到价格元素: $435 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$435&nbsp;NZD</span></span>)
2024-11-15 15:07:34,138 [INFO] price_checker.py:420 - ✓ 成功设置总价: $435 NZD
2024-11-15 15:07:34,142 [INFO] price_checker.py:403 - 找到价格元素: $435 NZD (HTML: <span class="_j1kt73">$435&nbsp;NZD</span>)
2024-11-15 15:07:34,143 [INFO] price_checker.py:420 - ✓ 成功设置总价: $435 NZD
2024-11-15 15:07:34,147 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 15:07:34,147 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 15:07:34,147 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:07:34,147 [INFO] price_checker.py:450 - ✓ cleaning_fee: $170 NZD
2024-11-15 15:07:34,147 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:07:34,147 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 15:07:34,147 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:07:34,147 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:07:34,147 [INFO] price_checker.py:457 - check_in: 18/12/2024
2024-11-15 15:07:34,147 [INFO] price_checker.py:457 - check_out: 19/12/2024
2024-11-15 15:07:34,148 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:07:34,148 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:07:34,148 [INFO] price_checker.py:457 - nightly_price: $265 NZD
2024-11-15 15:07:34,148 [INFO] price_checker.py:457 - cleaning_fee: $170 NZD
2024-11-15 15:07:34,148 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:07:34,148 [INFO] price_checker.py:457 - taxes: None
2024-11-15 15:07:34,148 [INFO] price_checker.py:457 - total: 
2024-11-15 15:07:34,148 [INFO] price_checker.py:559 - ✓ 成功获取 18/12/2024 的价格信息
2024-11-15 15:07:34,148 [INFO] price_checker.py:553 - [18/41] 处理日期: 19/12/2024
2024-11-15 15:07:34,148 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/716883705085875481
2024-11-15 15:07:34,148 [INFO] price_checker.py:255 - 入住日期: 19/12/2024
2024-11-15 15:07:39,269 [INFO] price_checker.py:271 - 开始检查日期 19/12/2024 的最小入住要求...
2024-11-15 15:07:39,271 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="19, Thursday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-19/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">19</div></td>
2024-11-15 15:07:39,280 [INFO] price_checker.py:158 - 找到日期: 19/12/2024
2024-11-15 15:07:39,280 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:07:40,393 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:07:41,692 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="19, Thursday, December 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_ox7af8h notranslate" data-testid="calendar-day-19/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">19</div></td>
2024-11-15 15:07:41,700 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 15:07:41,700 [INFO] price_checker.py:218 - - aria-label: 19, Thursday, December 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 15:07:41,700 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 15:07:41,700 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 15:07:41,700 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 15:07:41,700 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:07:41,700 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/716883705085875481?check_in=2024-12-19&check_out=2024-12-20&adults=3&children=0&infants=0
2024-11-15 15:07:43,360 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:07:43,360 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:07:46,801 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:07:46,804 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:07:48,816 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:07:48,816 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:07:53,397 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:07:53,397 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:07:53,403 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 15:07:53,419 [INFO] price_checker.py:337 - 找到可见价格元素: $224 NZD 
night
$224 NZD per night
2024-11-15 15:07:53,429 [INFO] price_checker.py:350 - 找到每晚价格元素: $224 NZD 
night
$224 NZD per night
2024-11-15 15:07:53,429 [INFO] price_checker.py:356 - 成功解析折扣价格: $224 NZD
2024-11-15 15:07:53,430 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:07:53,436 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 15:07:53,940 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:07:53,947 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:07:53,954 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 15:07:53,954 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 15:07:53,954 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:07:53,961 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:07:53,967 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 15:07:53,967 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 15:07:53,967 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:07:58,825 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:07:58,825 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:08:03,979 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:08:08,880 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:08:08,880 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:08:08,886 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 15:08:08,901 [INFO] price_checker.py:337 - 找到可见价格元素: $317 NZD 
$265 NZD 
night
$265 NZD per night, originally $317 NZD
2024-11-15 15:08:08,908 [INFO] price_checker.py:350 - 找到每晚价格元素: $317 NZD 
$265 NZD 
night
$265 NZD per night, originally $317 NZD
2024-11-15 15:08:08,908 [INFO] price_checker.py:356 - 成功解析折扣价格: $265 NZD
2024-11-15 15:08:08,908 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:08:08,913 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 15:08:09,416 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:08:09,423 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:08:09,429 [INFO] price_checker.py:403 - 找到价格元素: $170 NZD (HTML: <span class="_1k4xcdh">$170&nbsp;NZD</span>)
2024-11-15 15:08:09,430 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $170 NZD
2024-11-15 15:08:09,430 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:08:09,436 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:08:09,442 [INFO] price_checker.py:403 - 找到价格元素: $170 NZD (HTML: <span class="_1k4xcdh">$170&nbsp;NZD</span>)
2024-11-15 15:08:09,442 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $170 NZD
2024-11-15 15:08:09,442 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:08:14,015 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:08:14,022 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:08:14,028 [INFO] price_checker.py:403 - 找到价格元素: $41 NZD (HTML: <span class="_1k4xcdh">$41&nbsp;NZD</span>)
2024-11-15 15:08:14,028 [INFO] price_checker.py:416 - ✓ 成功设置税费: $41 NZD
2024-11-15 15:08:14,029 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:08:19,493 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:08:24,085 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:08:24,091 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:08:24,097 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span class="_j1kt73">$315&nbsp;NZD</span>)
2024-11-15 15:08:24,097 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:08:24,097 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:08:24,104 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 15:08:24,109 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$315&nbsp;NZD</span></span>)
2024-11-15 15:08:24,109 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:08:24,114 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span class="_j1kt73">$315&nbsp;NZD</span>)
2024-11-15 15:08:24,114 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:08:24,119 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 15:08:24,119 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 15:08:24,119 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:08:24,119 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 15:08:24,119 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:08:24,119 [INFO] price_checker.py:450 - ✓ taxes: $41 NZD
2024-11-15 15:08:24,120 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:08:24,120 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:08:24,120 [INFO] price_checker.py:457 - check_in: 11/12/2024
2024-11-15 15:08:24,120 [INFO] price_checker.py:457 - check_out: 12/12/2024
2024-11-15 15:08:24,120 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:08:24,120 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:08:24,120 [INFO] price_checker.py:457 - nightly_price: $224 NZD
2024-11-15 15:08:24,120 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 15:08:24,120 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:08:24,120 [INFO] price_checker.py:457 - taxes: $41 NZD
2024-11-15 15:08:24,120 [INFO] price_checker.py:457 - total: 
2024-11-15 15:08:24,120 [INFO] price_checker.py:559 - ✓ 成功获取 11/12/2024 的价格信息
2024-11-15 15:08:24,120 [INFO] price_checker.py:553 - [19/50] 处理日期: 14/12/2024
2024-11-15 15:08:24,120 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/49525472
2024-11-15 15:08:24,121 [INFO] price_checker.py:255 - 入住日期: 14/12/2024
2024-11-15 15:08:29,515 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:08:29,683 [INFO] price_checker.py:271 - 开始检查日期 14/12/2024 的最小入住要求...
2024-11-15 15:08:29,686 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="14, Saturday, December 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-14/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">14</div></td>
2024-11-15 15:08:29,696 [INFO] price_checker.py:158 - 找到日期: 14/12/2024
2024-11-15 15:08:29,696 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:08:39,575 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:08:39,716 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:08:40,815 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:08:40,821 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:08:40,822 [ERROR] price_checker.py:246 - 错误类型: MoveTargetOutOfBoundsException
2024-11-15 15:08:40,823 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.MoveTargetOutOfBoundsException: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 15:08:40,823 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 15:08:40,823 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:08:40,823 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/49525472?check_in=2024-12-14&check_out=2024-12-15&adults=3&children=0&infants=0
2024-11-15 15:08:45,917 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:08:45,920 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:08:47,932 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:08:47,932 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:08:49,633 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:08:49,640 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:08:49,646 [INFO] price_checker.py:403 - 找到价格元素: $435 NZD (HTML: <span class="_j1kt73">$435&nbsp;NZD</span>)
2024-11-15 15:08:49,646 [INFO] price_checker.py:420 - ✓ 成功设置总价: $435 NZD
2024-11-15 15:08:49,646 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:08:49,653 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 15:08:49,657 [INFO] price_checker.py:403 - 找到价格元素: $435 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$435&nbsp;NZD</span></span>)
2024-11-15 15:08:49,658 [INFO] price_checker.py:420 - ✓ 成功设置总价: $435 NZD
2024-11-15 15:08:49,662 [INFO] price_checker.py:403 - 找到价格元素: $435 NZD (HTML: <span class="_j1kt73">$435&nbsp;NZD</span>)
2024-11-15 15:08:49,662 [INFO] price_checker.py:420 - ✓ 成功设置总价: $435 NZD
2024-11-15 15:08:49,667 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 15:08:49,667 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 15:08:49,667 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:08:49,667 [INFO] price_checker.py:450 - ✓ cleaning_fee: $170 NZD
2024-11-15 15:08:49,667 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:08:49,667 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 15:08:49,667 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:08:49,667 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:08:49,667 [INFO] price_checker.py:457 - check_in: 19/12/2024
2024-11-15 15:08:49,667 [INFO] price_checker.py:457 - check_out: 20/12/2024
2024-11-15 15:08:49,667 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:08:49,667 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:08:49,667 [INFO] price_checker.py:457 - nightly_price: $265 NZD
2024-11-15 15:08:49,668 [INFO] price_checker.py:457 - cleaning_fee: $170 NZD
2024-11-15 15:08:49,668 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:08:49,668 [INFO] price_checker.py:457 - taxes: None
2024-11-15 15:08:49,668 [INFO] price_checker.py:457 - total: 
2024-11-15 15:08:49,668 [INFO] price_checker.py:559 - ✓ 成功获取 19/12/2024 的价格信息
2024-11-15 15:08:49,668 [INFO] price_checker.py:553 - [19/41] 处理日期: 20/12/2024
2024-11-15 15:08:49,668 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/716883705085875481
2024-11-15 15:08:49,668 [INFO] price_checker.py:255 - 入住日期: 20/12/2024
2024-11-15 15:08:54,796 [INFO] price_checker.py:271 - 开始检查日期 20/12/2024 的最小入住要求...
2024-11-15 15:08:54,799 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="20, Friday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-20/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">20</div></td>
2024-11-15 15:08:54,808 [INFO] price_checker.py:158 - 找到日期: 20/12/2024
2024-11-15 15:08:54,808 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:08:55,921 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:08:57,218 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="20, Friday, December 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_ox7af8h notranslate" data-testid="calendar-day-20/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">20</div></td>
2024-11-15 15:08:57,227 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 15:08:57,227 [INFO] price_checker.py:218 - - aria-label: 20, Friday, December 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 15:08:57,227 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 15:08:57,227 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 15:08:57,227 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 15:08:57,228 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:08:57,228 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/716883705085875481?check_in=2024-12-20&check_out=2024-12-21&adults=3&children=0&infants=0
2024-11-15 15:08:57,938 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:08:57,938 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:09:02,317 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:09:02,320 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:09:04,332 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:09:04,332 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:09:07,958 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:09:07,958 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:09:14,373 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:09:14,373 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:09:17,988 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:09:17,989 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w ._11jcbg2
2024-11-15 15:09:24,431 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:09:24,432 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:09:24,437 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 15:09:24,453 [INFO] price_checker.py:337 - 找到可见价格元素: $317 NZD 
$265 NZD 
night
$265 NZD per night, originally $317 NZD
2024-11-15 15:09:24,460 [INFO] price_checker.py:350 - 找到每晚价格元素: $317 NZD 
$265 NZD 
night
$265 NZD per night, originally $317 NZD
2024-11-15 15:09:24,460 [INFO] price_checker.py:356 - 成功解析折扣价格: $265 NZD
2024-11-15 15:09:24,460 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:09:24,466 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 15:09:24,968 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:09:24,976 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:09:24,982 [INFO] price_checker.py:403 - 找到价格元素: $170 NZD (HTML: <span class="_1k4xcdh">$170&nbsp;NZD</span>)
2024-11-15 15:09:24,982 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $170 NZD
2024-11-15 15:09:24,982 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:09:24,989 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:09:24,994 [INFO] price_checker.py:403 - 找到价格元素: $170 NZD (HTML: <span class="_1k4xcdh">$170&nbsp;NZD</span>)
2024-11-15 15:09:24,994 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $170 NZD
2024-11-15 15:09:24,994 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:09:28,051 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:09:28,051 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[contains(@class, '_wgmchy')]//span[contains(text(), '$') and contains(text(), 'NZD')]
2024-11-15 15:09:35,049 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:09:38,103 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:09:38,103 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:09:45,086 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:09:48,150 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 15:09:48,150 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:09:55,139 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:09:58,193 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:10:05,182 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:10:05,189 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:10:05,196 [INFO] price_checker.py:403 - 找到价格元素: $435 NZD (HTML: <span class="_j1kt73">$435&nbsp;NZD</span>)
2024-11-15 15:10:05,196 [INFO] price_checker.py:420 - ✓ 成功设置总价: $435 NZD
2024-11-15 15:10:05,196 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:10:05,202 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 15:10:05,207 [INFO] price_checker.py:403 - 找到价格元素: $435 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$435&nbsp;NZD</span></span>)
2024-11-15 15:10:05,207 [INFO] price_checker.py:420 - ✓ 成功设置总价: $435 NZD
2024-11-15 15:10:05,212 [INFO] price_checker.py:403 - 找到价格元素: $435 NZD (HTML: <span class="_j1kt73">$435&nbsp;NZD</span>)
2024-11-15 15:10:05,212 [INFO] price_checker.py:420 - ✓ 成功设置总价: $435 NZD
2024-11-15 15:10:05,217 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 15:10:05,217 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 15:10:05,217 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:10:05,217 [INFO] price_checker.py:450 - ✓ cleaning_fee: $170 NZD
2024-11-15 15:10:05,218 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:10:05,218 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 15:10:05,218 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:10:05,218 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:10:05,218 [INFO] price_checker.py:457 - check_in: 20/12/2024
2024-11-15 15:10:05,218 [INFO] price_checker.py:457 - check_out: 21/12/2024
2024-11-15 15:10:05,218 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:10:05,218 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:10:05,218 [INFO] price_checker.py:457 - nightly_price: $265 NZD
2024-11-15 15:10:05,218 [INFO] price_checker.py:457 - cleaning_fee: $170 NZD
2024-11-15 15:10:05,218 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:10:05,218 [INFO] price_checker.py:457 - taxes: None
2024-11-15 15:10:05,218 [INFO] price_checker.py:457 - total: 
2024-11-15 15:10:05,218 [INFO] price_checker.py:559 - ✓ 成功获取 20/12/2024 的价格信息
2024-11-15 15:10:05,219 [INFO] price_checker.py:553 - [20/41] 处理日期: 21/12/2024
2024-11-15 15:10:05,219 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/716883705085875481
2024-11-15 15:10:05,219 [INFO] price_checker.py:255 - 入住日期: 21/12/2024
2024-11-15 15:10:08,228 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:10:10,345 [INFO] price_checker.py:271 - 开始检查日期 21/12/2024 的最小入住要求...
2024-11-15 15:10:10,348 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="21, Saturday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-21/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">21</div></td>
2024-11-15 15:10:10,357 [INFO] price_checker.py:158 - 找到日期: 21/12/2024
2024-11-15 15:10:10,357 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:10:11,492 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:10:12,793 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="21, Saturday, December 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_ox7af8h notranslate" data-testid="calendar-day-21/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">21</div></td>
2024-11-15 15:10:12,801 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 15:10:12,801 [INFO] price_checker.py:218 - - aria-label: 21, Saturday, December 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 15:10:12,801 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 15:10:12,801 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 15:10:12,801 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 15:10:12,802 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:10:12,802 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/716883705085875481?check_in=2024-12-21&check_out=2024-12-22&adults=3&children=0&infants=0
2024-11-15 15:10:17,888 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:10:17,891 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:10:18,231 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:10:19,902 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:10:19,902 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:10:28,290 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:10:29,962 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:10:29,962 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:10:38,353 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:10:40,012 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:10:40,012 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:10:40,018 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 15:10:40,033 [INFO] price_checker.py:337 - 找到可见价格元素: $317 NZD 
$265 NZD 
night
$265 NZD per night, originally $317 NZD
2024-11-15 15:10:40,039 [INFO] price_checker.py:350 - 找到每晚价格元素: $317 NZD 
$265 NZD 
night
$265 NZD per night, originally $317 NZD
2024-11-15 15:10:40,039 [INFO] price_checker.py:356 - 成功解析折扣价格: $265 NZD
2024-11-15 15:10:40,039 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:10:40,045 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 15:10:40,547 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:10:40,555 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:10:40,561 [INFO] price_checker.py:403 - 找到价格元素: $170 NZD (HTML: <span class="_1k4xcdh">$170&nbsp;NZD</span>)
2024-11-15 15:10:40,561 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $170 NZD
2024-11-15 15:10:40,561 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:10:40,568 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:10:40,572 [INFO] price_checker.py:403 - 找到价格元素: $170 NZD (HTML: <span class="_1k4xcdh">$170&nbsp;NZD</span>)
2024-11-15 15:10:40,572 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $170 NZD
2024-11-15 15:10:40,572 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:10:48,406 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:10:50,635 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:10:58,465 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:11:00,695 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:11:10,696 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:11:18,513 [WARNING] price_checker.py:443 - 尝试点击价格展开按钮失败: Message: no such element: Unable to locate element: {"method":"xpath","selector":"//button[contains(@class, '_12wl7g09')]"}
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00952BFE]
	(No symbol) [0x00952CDB]
	(No symbol) [0x0098EBD2]
	(No symbol) [0x00973954]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:11:18,513 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:11:18,513 [WARNING] price_checker.py:452 - ✗ cleaning_fee 未获取到
2024-11-15 15:11:18,513 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:11:18,514 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 15:11:18,514 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:11:18,514 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:11:18,514 [INFO] price_checker.py:457 - check_in: 14/12/2024
2024-11-15 15:11:18,514 [INFO] price_checker.py:457 - check_out: 15/12/2024
2024-11-15 15:11:18,514 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:11:18,514 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:11:18,514 [INFO] price_checker.py:457 - nightly_price: None
2024-11-15 15:11:18,514 [INFO] price_checker.py:457 - cleaning_fee: None
2024-11-15 15:11:18,514 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:11:18,514 [INFO] price_checker.py:457 - taxes: None
2024-11-15 15:11:18,514 [INFO] price_checker.py:457 - total: None
2024-11-15 15:11:18,514 [INFO] price_checker.py:559 - ✓ 成功获取 14/12/2024 的价格信息
2024-11-15 15:11:18,515 [INFO] price_checker.py:553 - [20/50] 处理日期: 15/12/2024
2024-11-15 15:11:18,515 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/49525472
2024-11-15 15:11:18,515 [INFO] price_checker.py:255 - 入住日期: 15/12/2024
2024-11-15 15:11:20,714 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:11:20,721 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:11:20,728 [INFO] price_checker.py:403 - 找到价格元素: $435 NZD (HTML: <span class="_j1kt73">$435&nbsp;NZD</span>)
2024-11-15 15:11:20,729 [INFO] price_checker.py:420 - ✓ 成功设置总价: $435 NZD
2024-11-15 15:11:20,729 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:11:20,736 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 15:11:20,745 [INFO] price_checker.py:403 - 找到价格元素: $435 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$435&nbsp;NZD</span></span>)
2024-11-15 15:11:20,745 [INFO] price_checker.py:420 - ✓ 成功设置总价: $435 NZD
2024-11-15 15:11:20,752 [INFO] price_checker.py:403 - 找到价格元素: $435 NZD (HTML: <span class="_j1kt73">$435&nbsp;NZD</span>)
2024-11-15 15:11:20,752 [INFO] price_checker.py:420 - ✓ 成功设置总价: $435 NZD
2024-11-15 15:11:20,760 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 15:11:20,760 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 15:11:20,760 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:11:20,760 [INFO] price_checker.py:450 - ✓ cleaning_fee: $170 NZD
2024-11-15 15:11:20,760 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:11:20,760 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 15:11:20,760 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:11:20,760 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:11:20,761 [INFO] price_checker.py:457 - check_in: 21/12/2024
2024-11-15 15:11:20,761 [INFO] price_checker.py:457 - check_out: 22/12/2024
2024-11-15 15:11:20,761 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:11:20,761 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:11:20,761 [INFO] price_checker.py:457 - nightly_price: $265 NZD
2024-11-15 15:11:20,761 [INFO] price_checker.py:457 - cleaning_fee: $170 NZD
2024-11-15 15:11:20,761 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:11:20,761 [INFO] price_checker.py:457 - taxes: None
2024-11-15 15:11:20,761 [INFO] price_checker.py:457 - total: 
2024-11-15 15:11:20,761 [INFO] price_checker.py:559 - ✓ 成功获取 21/12/2024 的价格信息
2024-11-15 15:11:20,761 [INFO] price_checker.py:573 - 已完成 20/41 个日期的处理
2024-11-15 15:11:23,637 [INFO] price_checker.py:271 - 开始检查日期 15/12/2024 的最小入住要求...
2024-11-15 15:11:23,640 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_1mv3p4vt" role="button" aria-disabled="false" aria-label="15, Sunday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-15/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">15</div></td>
2024-11-15 15:11:23,649 [INFO] price_checker.py:158 - 找到日期: 15/12/2024
2024-11-15 15:11:23,649 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:11:30,762 [INFO] price_checker.py:553 - [21/41] 处理日期: 22/12/2024
2024-11-15 15:11:30,762 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/716883705085875481
2024-11-15 15:11:30,762 [INFO] price_checker.py:255 - 入住日期: 22/12/2024
2024-11-15 15:11:33,686 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:11:34,772 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:11:34,778 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:11:34,778 [ERROR] price_checker.py:246 - 错误类型: MoveTargetOutOfBoundsException
2024-11-15 15:11:34,780 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.MoveTargetOutOfBoundsException: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 15:11:34,780 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 15:11:34,780 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:11:34,780 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/49525472?check_in=2024-12-15&check_out=2024-12-16&adults=3&children=0&infants=0
2024-11-15 15:11:35,894 [INFO] price_checker.py:271 - 开始检查日期 22/12/2024 的最小入住要求...
2024-11-15 15:11:35,897 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_1mv3p4vt" role="button" aria-disabled="false" aria-label="22, Sunday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-22/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">22</div></td>
2024-11-15 15:11:35,906 [INFO] price_checker.py:158 - 找到日期: 22/12/2024
2024-11-15 15:11:35,906 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:11:37,015 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:11:38,316 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_ubf03zg" role="button" aria-disabled="true" aria-label="22, Sunday, December 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1qis3zbj notranslate" data-testid="calendar-day-22/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">22</div></td>
2024-11-15 15:11:38,324 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 15:11:38,324 [INFO] price_checker.py:218 - - aria-label: 22, Sunday, December 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 15:11:38,325 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 15:11:38,325 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 15:11:38,325 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 15:11:38,325 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:11:38,325 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/716883705085875481?check_in=2024-12-22&check_out=2024-12-23&adults=3&children=0&infants=0
2024-11-15 15:11:39,872 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:11:39,875 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:11:41,886 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:11:41,886 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:11:43,416 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:11:43,419 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:11:45,429 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:11:45,429 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:11:51,916 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:11:51,916 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:11:55,462 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:11:55,462 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:12:01,969 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:12:01,969 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:12:01,975 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 15:12:01,993 [INFO] price_checker.py:337 - 找到可见价格元素: $224 NZD 
night
$224 NZD per night
2024-11-15 15:12:01,999 [INFO] price_checker.py:350 - 找到每晚价格元素: $224 NZD 
night
$224 NZD per night
2024-11-15 15:12:02,000 [INFO] price_checker.py:356 - 成功解析折扣价格: $224 NZD
2024-11-15 15:12:02,000 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:12:02,007 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 15:12:02,510 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:12:02,517 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:12:02,524 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 15:12:02,524 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 15:12:02,524 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:12:02,530 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:12:02,535 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 15:12:02,535 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 15:12:02,535 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:12:05,506 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:12:05,506 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:12:05,511 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 15:12:05,527 [INFO] price_checker.py:337 - 找到可见价格元素: $317 NZD 
$265 NZD 
night
$265 NZD per night, originally $317 NZD
2024-11-15 15:12:05,534 [INFO] price_checker.py:350 - 找到每晚价格元素: $317 NZD 
$265 NZD 
night
$265 NZD per night, originally $317 NZD
2024-11-15 15:12:05,535 [INFO] price_checker.py:356 - 成功解析折扣价格: $265 NZD
2024-11-15 15:12:05,535 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:12:05,541 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 15:12:06,043 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:12:06,051 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:12:06,057 [INFO] price_checker.py:403 - 找到价格元素: $170 NZD (HTML: <span class="_1k4xcdh">$170&nbsp;NZD</span>)
2024-11-15 15:12:06,057 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $170 NZD
2024-11-15 15:12:06,057 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:12:06,063 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:12:06,068 [INFO] price_checker.py:403 - 找到价格元素: $170 NZD (HTML: <span class="_1k4xcdh">$170&nbsp;NZD</span>)
2024-11-15 15:12:06,068 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $170 NZD
2024-11-15 15:12:06,068 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:12:12,557 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:12:16,118 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:12:22,617 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:12:22,623 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:12:22,629 [INFO] price_checker.py:403 - 找到价格元素: $41 NZD (HTML: <span class="_1k4xcdh">$41&nbsp;NZD</span>)
2024-11-15 15:12:22,629 [INFO] price_checker.py:416 - ✓ 成功设置税费: $41 NZD
2024-11-15 15:12:22,629 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:12:26,172 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:12:32,631 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:12:32,638 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:12:32,643 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span class="_j1kt73">$315&nbsp;NZD</span>)
2024-11-15 15:12:32,643 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:12:32,643 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:12:32,649 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 15:12:32,654 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$315&nbsp;NZD</span></span>)
2024-11-15 15:12:32,654 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:12:32,658 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span class="_j1kt73">$315&nbsp;NZD</span>)
2024-11-15 15:12:32,659 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:12:32,663 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 15:12:32,663 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 15:12:32,663 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:12:32,663 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 15:12:32,663 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:12:32,663 [INFO] price_checker.py:450 - ✓ taxes: $41 NZD
2024-11-15 15:12:32,663 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:12:32,664 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:12:32,664 [INFO] price_checker.py:457 - check_in: 15/12/2024
2024-11-15 15:12:32,664 [INFO] price_checker.py:457 - check_out: 16/12/2024
2024-11-15 15:12:32,664 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:12:32,664 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:12:32,664 [INFO] price_checker.py:457 - nightly_price: $224 NZD
2024-11-15 15:12:32,664 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 15:12:32,664 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:12:32,664 [INFO] price_checker.py:457 - taxes: $41 NZD
2024-11-15 15:12:32,664 [INFO] price_checker.py:457 - total: 
2024-11-15 15:12:32,664 [INFO] price_checker.py:559 - ✓ 成功获取 15/12/2024 的价格信息
2024-11-15 15:12:32,664 [INFO] price_checker.py:573 - 已完成 20/50 个日期的处理
2024-11-15 15:12:36,232 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:12:42,665 [INFO] price_checker.py:553 - [21/50] 处理日期: 16/12/2024
2024-11-15 15:12:42,665 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/49525472
2024-11-15 15:12:42,665 [INFO] price_checker.py:255 - 入住日期: 16/12/2024
2024-11-15 15:12:46,270 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:12:46,277 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:12:46,285 [INFO] price_checker.py:403 - 找到价格元素: $435 NZD (HTML: <span class="_j1kt73">$435&nbsp;NZD</span>)
2024-11-15 15:12:46,286 [INFO] price_checker.py:420 - ✓ 成功设置总价: $435 NZD
2024-11-15 15:12:46,286 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:12:46,293 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 15:12:46,298 [INFO] price_checker.py:403 - 找到价格元素: $435 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$435&nbsp;NZD</span></span>)
2024-11-15 15:12:46,298 [INFO] price_checker.py:420 - ✓ 成功设置总价: $435 NZD
2024-11-15 15:12:46,303 [INFO] price_checker.py:403 - 找到价格元素: $435 NZD (HTML: <span class="_j1kt73">$435&nbsp;NZD</span>)
2024-11-15 15:12:46,303 [INFO] price_checker.py:420 - ✓ 成功设置总价: $435 NZD
2024-11-15 15:12:46,308 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 15:12:46,308 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 15:12:46,308 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:12:46,308 [INFO] price_checker.py:450 - ✓ cleaning_fee: $170 NZD
2024-11-15 15:12:46,308 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:12:46,308 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 15:12:46,308 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:12:46,308 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:12:46,309 [INFO] price_checker.py:457 - check_in: 22/12/2024
2024-11-15 15:12:46,309 [INFO] price_checker.py:457 - check_out: 23/12/2024
2024-11-15 15:12:46,309 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:12:46,309 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:12:46,309 [INFO] price_checker.py:457 - nightly_price: $265 NZD
2024-11-15 15:12:46,309 [INFO] price_checker.py:457 - cleaning_fee: $170 NZD
2024-11-15 15:12:46,309 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:12:46,309 [INFO] price_checker.py:457 - taxes: None
2024-11-15 15:12:46,309 [INFO] price_checker.py:457 - total: 
2024-11-15 15:12:46,309 [INFO] price_checker.py:559 - ✓ 成功获取 22/12/2024 的价格信息
2024-11-15 15:12:46,309 [INFO] price_checker.py:553 - [22/41] 处理日期: 23/12/2024
2024-11-15 15:12:46,309 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/716883705085875481
2024-11-15 15:12:46,309 [INFO] price_checker.py:255 - 入住日期: 23/12/2024
2024-11-15 15:12:47,802 [INFO] price_checker.py:271 - 开始检查日期 16/12/2024 的最小入住要求...
2024-11-15 15:12:47,805 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_sl5yz7r" role="button" aria-disabled="false" aria-label="16, Monday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-16/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">16</div></td>
2024-11-15 15:12:47,816 [INFO] price_checker.py:158 - 找到日期: 16/12/2024
2024-11-15 15:12:47,816 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:12:51,433 [INFO] price_checker.py:271 - 开始检查日期 23/12/2024 的最小入住要求...
2024-11-15 15:12:51,436 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_sl5yz7r" role="button" aria-disabled="false" aria-label="23, Monday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-23/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">23</div></td>
2024-11-15 15:12:51,444 [INFO] price_checker.py:158 - 找到日期: 23/12/2024
2024-11-15 15:12:51,445 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:12:52,582 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:12:53,882 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_5v1jabe" role="button" aria-disabled="true" aria-label="23, Monday, December 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1qis3zbj notranslate" data-testid="calendar-day-23/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">23</div></td>
2024-11-15 15:12:53,890 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 15:12:53,890 [INFO] price_checker.py:218 - - aria-label: 23, Monday, December 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 15:12:53,890 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 15:12:53,890 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 15:12:53,890 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 15:12:53,890 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:12:53,890 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/716883705085875481?check_in=2024-12-23&check_out=2024-12-24&adults=3&children=0&infants=0
2024-11-15 15:12:57,870 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:12:58,958 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:12:58,965 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:12:58,965 [ERROR] price_checker.py:246 - 错误类型: MoveTargetOutOfBoundsException
2024-11-15 15:12:58,966 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.MoveTargetOutOfBoundsException: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 15:12:58,966 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 15:12:58,966 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:12:58,967 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/49525472?check_in=2024-12-16&check_out=2024-12-17&adults=3&children=0&infants=0
2024-11-15 15:12:59,008 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:12:59,013 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:13:01,027 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:13:01,027 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:13:04,065 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:13:04,068 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:13:06,096 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:13:06,096 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:13:11,045 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:13:11,045 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:13:16,146 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:13:16,147 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:13:21,090 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:13:21,090 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:13:21,096 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 15:13:21,115 [INFO] price_checker.py:337 - 找到可见价格元素: $317 NZD 
$265 NZD 
night
$265 NZD per night, originally $317 NZD
2024-11-15 15:13:21,122 [INFO] price_checker.py:350 - 找到每晚价格元素: $317 NZD 
$265 NZD 
night
$265 NZD per night, originally $317 NZD
2024-11-15 15:13:21,122 [INFO] price_checker.py:356 - 成功解析折扣价格: $265 NZD
2024-11-15 15:13:21,122 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:13:21,128 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 15:13:21,631 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:13:21,638 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:13:21,645 [INFO] price_checker.py:403 - 找到价格元素: $170 NZD (HTML: <span class="_1k4xcdh">$170&nbsp;NZD</span>)
2024-11-15 15:13:21,645 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $170 NZD
2024-11-15 15:13:21,645 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:13:21,651 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:13:21,656 [INFO] price_checker.py:403 - 找到价格元素: $170 NZD (HTML: <span class="_1k4xcdh">$170&nbsp;NZD</span>)
2024-11-15 15:13:21,656 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $170 NZD
2024-11-15 15:13:21,656 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:13:26,193 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:13:26,193 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:13:26,199 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 15:13:26,214 [INFO] price_checker.py:337 - 找到可见价格元素: $224 NZD 
night
$224 NZD per night
2024-11-15 15:13:26,219 [INFO] price_checker.py:350 - 找到每晚价格元素: $224 NZD 
night
$224 NZD per night
2024-11-15 15:13:26,219 [INFO] price_checker.py:356 - 成功解析折扣价格: $224 NZD
2024-11-15 15:13:26,219 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:13:26,225 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 15:13:26,728 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:13:26,735 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:13:26,741 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 15:13:26,741 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 15:13:26,742 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:13:26,748 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:13:26,753 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 15:13:26,753 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 15:13:26,753 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:13:31,657 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:13:36,813 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:13:41,701 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:13:46,866 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:13:46,873 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:13:46,879 [INFO] price_checker.py:403 - 找到价格元素: $41 NZD (HTML: <span class="_1k4xcdh">$41&nbsp;NZD</span>)
2024-11-15 15:13:46,879 [INFO] price_checker.py:416 - ✓ 成功设置税费: $41 NZD
2024-11-15 15:13:46,880 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:13:51,747 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:13:56,940 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:13:56,947 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:13:56,952 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span class="_j1kt73">$315&nbsp;NZD</span>)
2024-11-15 15:13:56,952 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:13:56,952 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:13:56,958 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 15:13:56,964 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$315&nbsp;NZD</span></span>)
2024-11-15 15:13:56,964 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:13:56,968 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span class="_j1kt73">$315&nbsp;NZD</span>)
2024-11-15 15:13:56,968 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:13:56,973 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 15:13:56,973 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 15:13:56,973 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:13:56,973 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 15:13:56,973 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:13:56,973 [INFO] price_checker.py:450 - ✓ taxes: $41 NZD
2024-11-15 15:13:56,973 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:13:56,973 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:13:56,974 [INFO] price_checker.py:457 - check_in: 16/12/2024
2024-11-15 15:13:56,974 [INFO] price_checker.py:457 - check_out: 17/12/2024
2024-11-15 15:13:56,974 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:13:56,974 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:13:56,974 [INFO] price_checker.py:457 - nightly_price: $224 NZD
2024-11-15 15:13:56,974 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 15:13:56,974 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:13:56,974 [INFO] price_checker.py:457 - taxes: $41 NZD
2024-11-15 15:13:56,974 [INFO] price_checker.py:457 - total: 
2024-11-15 15:13:56,974 [INFO] price_checker.py:559 - ✓ 成功获取 16/12/2024 的价格信息
2024-11-15 15:13:56,974 [INFO] price_checker.py:553 - [22/50] 处理日期: 17/12/2024
2024-11-15 15:13:56,974 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/49525472
2024-11-15 15:13:56,974 [INFO] price_checker.py:255 - 入住日期: 17/12/2024
2024-11-15 15:14:01,784 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:14:01,791 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:14:01,798 [INFO] price_checker.py:403 - 找到价格元素: $435 NZD (HTML: <span class="_j1kt73">$435&nbsp;NZD</span>)
2024-11-15 15:14:01,798 [INFO] price_checker.py:420 - ✓ 成功设置总价: $435 NZD
2024-11-15 15:14:01,798 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:14:01,805 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 15:14:01,810 [INFO] price_checker.py:403 - 找到价格元素: $435 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$435&nbsp;NZD</span></span>)
2024-11-15 15:14:01,810 [INFO] price_checker.py:420 - ✓ 成功设置总价: $435 NZD
2024-11-15 15:14:01,815 [INFO] price_checker.py:403 - 找到价格元素: $435 NZD (HTML: <span class="_j1kt73">$435&nbsp;NZD</span>)
2024-11-15 15:14:01,815 [INFO] price_checker.py:420 - ✓ 成功设置总价: $435 NZD
2024-11-15 15:14:01,819 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 15:14:01,820 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 15:14:01,820 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:14:01,820 [INFO] price_checker.py:450 - ✓ cleaning_fee: $170 NZD
2024-11-15 15:14:01,820 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:14:01,820 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 15:14:01,820 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:14:01,820 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:14:01,820 [INFO] price_checker.py:457 - check_in: 23/12/2024
2024-11-15 15:14:01,820 [INFO] price_checker.py:457 - check_out: 24/12/2024
2024-11-15 15:14:01,820 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:14:01,820 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:14:01,820 [INFO] price_checker.py:457 - nightly_price: $265 NZD
2024-11-15 15:14:01,820 [INFO] price_checker.py:457 - cleaning_fee: $170 NZD
2024-11-15 15:14:01,821 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:14:01,821 [INFO] price_checker.py:457 - taxes: None
2024-11-15 15:14:01,821 [INFO] price_checker.py:457 - total: 
2024-11-15 15:14:01,821 [INFO] price_checker.py:559 - ✓ 成功获取 23/12/2024 的价格信息
2024-11-15 15:14:01,821 [INFO] price_checker.py:553 - [23/41] 处理日期: 30/12/2024
2024-11-15 15:14:01,821 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/716883705085875481
2024-11-15 15:14:01,821 [INFO] price_checker.py:255 - 入住日期: 30/12/2024
2024-11-15 15:14:02,096 [INFO] price_checker.py:271 - 开始检查日期 17/12/2024 的最小入住要求...
2024-11-15 15:14:02,099 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="17, Tuesday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-17/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">17</div></td>
2024-11-15 15:14:02,110 [INFO] price_checker.py:158 - 找到日期: 17/12/2024
2024-11-15 15:14:02,110 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:14:06,942 [INFO] price_checker.py:271 - 开始检查日期 30/12/2024 的最小入住要求...
2024-11-15 15:14:06,945 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_sl5yz7r" role="button" aria-disabled="false" aria-label="30, Monday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-30/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">30</div></td>
2024-11-15 15:14:06,956 [INFO] price_checker.py:158 - 找到日期: 30/12/2024
2024-11-15 15:14:06,956 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:14:08,092 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:14:09,368 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_5v1jabe" role="button" aria-disabled="true" aria-label="30, Monday, December 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1qis3zbj notranslate" data-testid="calendar-day-30/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">30</div></td>
2024-11-15 15:14:09,377 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 15:14:09,378 [INFO] price_checker.py:218 - - aria-label: 30, Monday, December 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 15:14:09,378 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 15:14:09,378 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 15:14:09,378 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 15:14:09,378 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:14:09,378 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/716883705085875481?check_in=2024-12-30&check_out=2024-12-31&adults=3&children=0&infants=0
2024-11-15 15:14:12,161 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:14:13,261 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:14:13,267 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:14:13,267 [ERROR] price_checker.py:246 - 错误类型: MoveTargetOutOfBoundsException
2024-11-15 15:14:13,268 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.MoveTargetOutOfBoundsException: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 15:14:13,269 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 15:14:13,269 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:14:13,269 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/49525472?check_in=2024-12-17&check_out=2024-12-18&adults=3&children=0&infants=0
2024-11-15 15:14:14,469 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:14:14,472 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:14:16,484 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:14:16,484 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:14:18,395 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:14:18,398 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:14:20,409 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:14:20,409 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:14:26,533 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:14:26,533 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:14:30,461 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:14:30,461 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:14:36,592 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:14:36,592 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:14:36,598 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 15:14:36,613 [INFO] price_checker.py:337 - 找到可见价格元素: $419 NZD 
$265 NZD 
night
$265 NZD per night, originally $419 NZD
2024-11-15 15:14:36,619 [INFO] price_checker.py:350 - 找到每晚价格元素: $419 NZD 
$265 NZD 
night
$265 NZD per night, originally $419 NZD
2024-11-15 15:14:36,619 [INFO] price_checker.py:356 - 成功解析折扣价格: $265 NZD
2024-11-15 15:14:36,619 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:14:36,625 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 15:14:37,129 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:14:37,136 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:14:37,143 [INFO] price_checker.py:403 - 找到价格元素: $170 NZD (HTML: <span class="_1k4xcdh">$170&nbsp;NZD</span>)
2024-11-15 15:14:37,143 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $170 NZD
2024-11-15 15:14:37,143 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:14:37,150 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:14:37,154 [INFO] price_checker.py:403 - 找到价格元素: $170 NZD (HTML: <span class="_1k4xcdh">$170&nbsp;NZD</span>)
2024-11-15 15:14:37,154 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $170 NZD
2024-11-15 15:14:37,154 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:14:40,521 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:14:40,522 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:14:40,527 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 15:14:40,543 [INFO] price_checker.py:337 - 找到可见价格元素: $224 NZD 
night
$224 NZD per night
2024-11-15 15:14:40,548 [INFO] price_checker.py:350 - 找到每晚价格元素: $224 NZD 
night
$224 NZD per night
2024-11-15 15:14:40,549 [INFO] price_checker.py:356 - 成功解析折扣价格: $224 NZD
2024-11-15 15:14:40,549 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:14:40,554 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 15:14:41,057 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:14:41,064 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:14:41,070 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 15:14:41,070 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 15:14:41,070 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:14:41,077 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:14:41,087 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 15:14:41,087 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 15:14:41,087 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:14:47,211 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:14:51,137 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:14:57,267 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:15:01,190 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:15:01,197 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:15:01,205 [INFO] price_checker.py:403 - 找到价格元素: $41 NZD (HTML: <span class="_1k4xcdh">$41&nbsp;NZD</span>)
2024-11-15 15:15:01,205 [INFO] price_checker.py:416 - ✓ 成功设置税费: $41 NZD
2024-11-15 15:15:01,205 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:15:07,312 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:15:11,253 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:15:11,260 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:15:11,265 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span class="_j1kt73">$315&nbsp;NZD</span>)
2024-11-15 15:15:11,265 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:15:11,266 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:15:11,272 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 15:15:11,277 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$315&nbsp;NZD</span></span>)
2024-11-15 15:15:11,277 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:15:11,282 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span class="_j1kt73">$315&nbsp;NZD</span>)
2024-11-15 15:15:11,282 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:15:11,286 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 15:15:11,286 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 15:15:11,287 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:15:11,287 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 15:15:11,287 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:15:11,287 [INFO] price_checker.py:450 - ✓ taxes: $41 NZD
2024-11-15 15:15:11,287 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:15:11,287 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:15:11,287 [INFO] price_checker.py:457 - check_in: 17/12/2024
2024-11-15 15:15:11,287 [INFO] price_checker.py:457 - check_out: 18/12/2024
2024-11-15 15:15:11,287 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:15:11,287 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:15:11,287 [INFO] price_checker.py:457 - nightly_price: $224 NZD
2024-11-15 15:15:11,287 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 15:15:11,287 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:15:11,287 [INFO] price_checker.py:457 - taxes: $41 NZD
2024-11-15 15:15:11,288 [INFO] price_checker.py:457 - total: 
2024-11-15 15:15:11,288 [INFO] price_checker.py:559 - ✓ 成功获取 17/12/2024 的价格信息
2024-11-15 15:15:11,288 [INFO] price_checker.py:553 - [23/50] 处理日期: 18/12/2024
2024-11-15 15:15:11,288 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/49525472
2024-11-15 15:15:11,288 [INFO] price_checker.py:255 - 入住日期: 18/12/2024
2024-11-15 15:15:16,406 [INFO] price_checker.py:271 - 开始检查日期 18/12/2024 的最小入住要求...
2024-11-15 15:15:16,409 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="18, Wednesday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-18/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">18</div></td>
2024-11-15 15:15:16,419 [INFO] price_checker.py:158 - 找到日期: 18/12/2024
2024-11-15 15:15:16,419 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:15:17,376 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:15:17,383 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:15:17,390 [INFO] price_checker.py:403 - 找到价格元素: $435 NZD (HTML: <span class="_j1kt73">$435&nbsp;NZD</span>)
2024-11-15 15:15:17,390 [INFO] price_checker.py:420 - ✓ 成功设置总价: $435 NZD
2024-11-15 15:15:17,390 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:15:17,397 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 15:15:17,401 [INFO] price_checker.py:403 - 找到价格元素: $435 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$435&nbsp;NZD</span></span>)
2024-11-15 15:15:17,401 [INFO] price_checker.py:420 - ✓ 成功设置总价: $435 NZD
2024-11-15 15:15:17,406 [INFO] price_checker.py:403 - 找到价格元素: $435 NZD (HTML: <span class="_j1kt73">$435&nbsp;NZD</span>)
2024-11-15 15:15:17,406 [INFO] price_checker.py:420 - ✓ 成功设置总价: $435 NZD
2024-11-15 15:15:17,410 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 15:15:17,410 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 15:15:17,411 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:15:17,411 [INFO] price_checker.py:450 - ✓ cleaning_fee: $170 NZD
2024-11-15 15:15:17,411 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:15:17,411 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 15:15:17,411 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:15:17,411 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:15:17,411 [INFO] price_checker.py:457 - check_in: 30/12/2024
2024-11-15 15:15:17,411 [INFO] price_checker.py:457 - check_out: 31/12/2024
2024-11-15 15:15:17,411 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:15:17,411 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:15:17,411 [INFO] price_checker.py:457 - nightly_price: $265 NZD
2024-11-15 15:15:17,411 [INFO] price_checker.py:457 - cleaning_fee: $170 NZD
2024-11-15 15:15:17,411 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:15:17,411 [INFO] price_checker.py:457 - taxes: None
2024-11-15 15:15:17,412 [INFO] price_checker.py:457 - total: 
2024-11-15 15:15:17,412 [INFO] price_checker.py:559 - ✓ 成功获取 30/12/2024 的价格信息
2024-11-15 15:15:17,412 [INFO] price_checker.py:553 - [24/41] 处理日期: 31/12/2024
2024-11-15 15:15:17,412 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/716883705085875481
2024-11-15 15:15:17,412 [INFO] price_checker.py:255 - 入住日期: 31/12/2024
2024-11-15 15:15:22,532 [INFO] price_checker.py:271 - 开始检查日期 31/12/2024 的最小入住要求...
2024-11-15 15:15:22,535 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_1qvi71ld" role="button" aria-disabled="false" aria-label="31, Tuesday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-31/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">31</div></td>
2024-11-15 15:15:22,544 [INFO] price_checker.py:158 - 找到日期: 31/12/2024
2024-11-15 15:15:22,545 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:15:23,661 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:15:24,954 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1jaqd3t0" role="button" aria-disabled="true" aria-label="31, Tuesday, December 2024. Selected check-in date, 1 night minimum stay " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1qis3zbj notranslate" data-testid="calendar-day-31/12/2024" data-is-day-blocked="true" style="width: 41px; height: 41px;">31</div></td>
2024-11-15 15:15:24,962 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-15 15:15:24,963 [INFO] price_checker.py:218 - - aria-label: 31, Tuesday, December 2024. Selected check-in date, 1 night minimum stay 
2024-11-15 15:15:24,963 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-15 15:15:24,963 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-15 15:15:24,963 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 1晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-15 15:15:24,963 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:15:24,963 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/716883705085875481?check_in=2024-12-31&check_out=2025-01-01&adults=3&children=0&infants=0
2024-11-15 15:15:26,425 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:15:27,521 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:15:27,527 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:15:27,527 [ERROR] price_checker.py:246 - 错误类型: MoveTargetOutOfBoundsException
2024-11-15 15:15:27,528 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.MoveTargetOutOfBoundsException: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 15:15:27,528 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 15:15:27,529 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:15:27,529 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/49525472?check_in=2024-12-18&check_out=2024-12-19&adults=3&children=0&infants=0
2024-11-15 15:15:30,063 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:15:30,066 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:15:32,078 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:15:32,078 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:15:32,671 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:15:32,674 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:15:34,686 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:15:34,687 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:15:42,142 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:15:42,142 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:15:44,742 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:15:44,742 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:15:52,184 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:15:52,184 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:15:52,190 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 15:15:52,206 [INFO] price_checker.py:337 - 找到可见价格元素: $419 NZD 
$265 NZD 
night
$265 NZD per night, originally $419 NZD
2024-11-15 15:15:52,212 [INFO] price_checker.py:350 - 找到每晚价格元素: $419 NZD 
$265 NZD 
night
$265 NZD per night, originally $419 NZD
2024-11-15 15:15:52,212 [INFO] price_checker.py:356 - 成功解析折扣价格: $265 NZD
2024-11-15 15:15:52,212 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:15:52,218 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 15:15:52,720 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:15:52,728 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:15:52,734 [INFO] price_checker.py:403 - 找到价格元素: $170 NZD (HTML: <span class="_1k4xcdh">$170&nbsp;NZD</span>)
2024-11-15 15:15:52,734 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $170 NZD
2024-11-15 15:15:52,734 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:15:52,741 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:15:52,746 [INFO] price_checker.py:403 - 找到价格元素: $170 NZD (HTML: <span class="_1k4xcdh">$170&nbsp;NZD</span>)
2024-11-15 15:15:52,746 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $170 NZD
2024-11-15 15:15:52,746 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:15:54,793 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:15:54,793 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:15:54,799 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 15:15:54,816 [INFO] price_checker.py:337 - 找到可见价格元素: $224 NZD 
night
$224 NZD per night
2024-11-15 15:15:54,822 [INFO] price_checker.py:350 - 找到每晚价格元素: $224 NZD 
night
$224 NZD per night
2024-11-15 15:15:54,822 [INFO] price_checker.py:356 - 成功解析折扣价格: $224 NZD
2024-11-15 15:15:54,822 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:15:54,827 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 15:15:55,330 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:15:55,337 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:15:55,343 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 15:15:55,343 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 15:15:55,343 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:15:55,349 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:15:55,355 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 15:15:55,355 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 15:15:55,355 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:16:02,758 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:16:05,370 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:16:12,807 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:16:15,416 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:16:15,423 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:16:15,429 [INFO] price_checker.py:403 - 找到价格元素: $41 NZD (HTML: <span class="_1k4xcdh">$41&nbsp;NZD</span>)
2024-11-15 15:16:15,429 [INFO] price_checker.py:416 - ✓ 成功设置税费: $41 NZD
2024-11-15 15:16:15,429 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:16:22,864 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:16:25,482 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:16:25,489 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:16:25,495 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span class="_j1kt73">$315&nbsp;NZD</span>)
2024-11-15 15:16:25,495 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:16:25,495 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:16:25,502 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 15:16:25,508 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$315&nbsp;NZD</span></span>)
2024-11-15 15:16:25,508 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:16:25,514 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span class="_j1kt73">$315&nbsp;NZD</span>)
2024-11-15 15:16:25,514 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:16:25,519 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 15:16:25,519 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 15:16:25,519 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:16:25,519 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 15:16:25,519 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:16:25,519 [INFO] price_checker.py:450 - ✓ taxes: $41 NZD
2024-11-15 15:16:25,519 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:16:25,519 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:16:25,519 [INFO] price_checker.py:457 - check_in: 18/12/2024
2024-11-15 15:16:25,519 [INFO] price_checker.py:457 - check_out: 19/12/2024
2024-11-15 15:16:25,519 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:16:25,520 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:16:25,520 [INFO] price_checker.py:457 - nightly_price: $224 NZD
2024-11-15 15:16:25,520 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 15:16:25,520 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:16:25,520 [INFO] price_checker.py:457 - taxes: $41 NZD
2024-11-15 15:16:25,520 [INFO] price_checker.py:457 - total: 
2024-11-15 15:16:25,520 [INFO] price_checker.py:559 - ✓ 成功获取 18/12/2024 的价格信息
2024-11-15 15:16:25,520 [INFO] price_checker.py:553 - [24/50] 处理日期: 19/12/2024
2024-11-15 15:16:25,520 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/49525472
2024-11-15 15:16:25,520 [INFO] price_checker.py:255 - 入住日期: 19/12/2024
2024-11-15 15:16:30,651 [INFO] price_checker.py:271 - 开始检查日期 19/12/2024 的最小入住要求...
2024-11-15 15:16:30,654 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="19, Thursday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-19/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">19</div></td>
2024-11-15 15:16:30,663 [INFO] price_checker.py:158 - 找到日期: 19/12/2024
2024-11-15 15:16:30,663 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:16:32,874 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:16:32,880 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:16:32,887 [INFO] price_checker.py:403 - 找到价格元素: $435 NZD (HTML: <span class="_j1kt73">$435&nbsp;NZD</span>)
2024-11-15 15:16:32,887 [INFO] price_checker.py:420 - ✓ 成功设置总价: $435 NZD
2024-11-15 15:16:32,887 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:16:32,894 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 15:16:32,898 [INFO] price_checker.py:403 - 找到价格元素: $435 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$435&nbsp;NZD</span></span>)
2024-11-15 15:16:32,898 [INFO] price_checker.py:420 - ✓ 成功设置总价: $435 NZD
2024-11-15 15:16:32,903 [INFO] price_checker.py:403 - 找到价格元素: $435 NZD (HTML: <span class="_j1kt73">$435&nbsp;NZD</span>)
2024-11-15 15:16:32,903 [INFO] price_checker.py:420 - ✓ 成功设置总价: $435 NZD
2024-11-15 15:16:32,908 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 15:16:32,909 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 15:16:32,909 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:16:32,909 [INFO] price_checker.py:450 - ✓ cleaning_fee: $170 NZD
2024-11-15 15:16:32,909 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:16:32,909 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 15:16:32,909 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:16:32,909 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:16:32,909 [INFO] price_checker.py:457 - check_in: 31/12/2024
2024-11-15 15:16:32,909 [INFO] price_checker.py:457 - check_out: 01/01/2025
2024-11-15 15:16:32,909 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:16:32,909 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:16:32,909 [INFO] price_checker.py:457 - nightly_price: $265 NZD
2024-11-15 15:16:32,910 [INFO] price_checker.py:457 - cleaning_fee: $170 NZD
2024-11-15 15:16:32,910 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:16:32,910 [INFO] price_checker.py:457 - taxes: None
2024-11-15 15:16:32,910 [INFO] price_checker.py:457 - total: 
2024-11-15 15:16:32,910 [INFO] price_checker.py:559 - ✓ 成功获取 31/12/2024 的价格信息
2024-11-15 15:16:32,910 [INFO] price_checker.py:553 - [25/41] 处理日期: 01/01/2025
2024-11-15 15:16:32,910 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/716883705085875481
2024-11-15 15:16:32,910 [INFO] price_checker.py:255 - 入住日期: 01/01/2025
2024-11-15 15:16:38,029 [INFO] price_checker.py:271 - 开始检查日期 01/01/2025 的最小入住要求...
2024-11-15 15:16:38,032 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_1qvi71ld" role="button" aria-disabled="false" aria-label="1, Wednesday, January 2025. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-01/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">1</div></td>
2024-11-15 15:16:38,041 [INFO] price_checker.py:158 - 找到日期: 01/01/2025
2024-11-15 15:16:38,041 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:16:40,675 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:16:41,770 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:16:41,777 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:16:41,777 [ERROR] price_checker.py:246 - 错误类型: MoveTargetOutOfBoundsException
2024-11-15 15:16:41,778 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.MoveTargetOutOfBoundsException: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 15:16:41,778 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 15:16:41,778 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:16:41,779 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/49525472?check_in=2024-12-19&check_out=2024-12-20&adults=3&children=0&infants=0
2024-11-15 15:16:46,873 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:16:46,875 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:16:48,104 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:16:48,886 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:16:48,886 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:16:49,223 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:16:49,228 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:16:49,229 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 15:16:49,230 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 15:16:49,230 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 15:16:49,230 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:16:49,230 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/716883705085875481?check_in=2025-01-01&check_out=2025-01-02&adults=3&children=0&infants=0
2024-11-15 15:16:54,349 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:16:54,352 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:16:56,363 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:16:56,363 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:16:58,900 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:16:58,900 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:17:06,365 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:17:06,365 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:17:08,950 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:17:08,951 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:17:08,957 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 15:17:08,972 [INFO] price_checker.py:337 - 找到可见价格元素: $224 NZD 
night
$224 NZD per night
2024-11-15 15:17:08,977 [INFO] price_checker.py:350 - 找到每晚价格元素: $224 NZD 
night
$224 NZD per night
2024-11-15 15:17:08,977 [INFO] price_checker.py:356 - 成功解析折扣价格: $224 NZD
2024-11-15 15:17:08,977 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:17:08,983 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 15:17:09,486 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:17:09,493 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:17:09,499 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 15:17:09,499 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 15:17:09,499 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:17:09,506 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:17:09,511 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 15:17:09,511 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 15:17:09,511 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:17:16,407 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:17:16,407 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:17:19,565 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:17:26,414 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:17:26,414 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w ._11jcbg2
2024-11-15 15:17:29,624 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:17:29,630 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:17:29,636 [INFO] price_checker.py:403 - 找到价格元素: $41 NZD (HTML: <span class="_1k4xcdh">$41&nbsp;NZD</span>)
2024-11-15 15:17:29,636 [INFO] price_checker.py:416 - ✓ 成功设置税费: $41 NZD
2024-11-15 15:17:29,637 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:17:36,465 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:17:36,465 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[contains(@class, '_wgmchy')]//span[contains(text(), '$') and contains(text(), 'NZD')]
2024-11-15 15:17:39,698 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:17:39,704 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:17:39,709 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span class="_j1kt73">$315&nbsp;NZD</span>)
2024-11-15 15:17:39,710 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:17:39,710 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:17:39,717 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 15:17:39,721 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$315&nbsp;NZD</span></span>)
2024-11-15 15:17:39,721 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:17:39,726 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span class="_j1kt73">$315&nbsp;NZD</span>)
2024-11-15 15:17:39,726 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:17:39,731 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 15:17:39,731 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 15:17:39,731 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:17:39,731 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 15:17:39,731 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:17:39,731 [INFO] price_checker.py:450 - ✓ taxes: $41 NZD
2024-11-15 15:17:39,731 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:17:39,731 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:17:39,731 [INFO] price_checker.py:457 - check_in: 19/12/2024
2024-11-15 15:17:39,731 [INFO] price_checker.py:457 - check_out: 20/12/2024
2024-11-15 15:17:39,731 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:17:39,732 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:17:39,732 [INFO] price_checker.py:457 - nightly_price: $224 NZD
2024-11-15 15:17:39,732 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 15:17:39,732 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:17:39,732 [INFO] price_checker.py:457 - taxes: $41 NZD
2024-11-15 15:17:39,732 [INFO] price_checker.py:457 - total: 
2024-11-15 15:17:39,732 [INFO] price_checker.py:559 - ✓ 成功获取 19/12/2024 的价格信息
2024-11-15 15:17:39,732 [INFO] price_checker.py:553 - [25/50] 处理日期: 20/12/2024
2024-11-15 15:17:39,732 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/49525472
2024-11-15 15:17:39,732 [INFO] price_checker.py:255 - 入住日期: 20/12/2024
2024-11-15 15:17:44,851 [INFO] price_checker.py:271 - 开始检查日期 20/12/2024 的最小入住要求...
2024-11-15 15:17:44,854 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="20, Friday, December 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-20/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">20</div></td>
2024-11-15 15:17:44,863 [INFO] price_checker.py:158 - 找到日期: 20/12/2024
2024-11-15 15:17:44,863 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:17:46,488 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:17:46,489 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:17:54,903 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:17:56,000 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:17:56,007 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:17:56,007 [ERROR] price_checker.py:246 - 错误类型: MoveTargetOutOfBoundsException
2024-11-15 15:17:56,008 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.MoveTargetOutOfBoundsException: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 15:17:56,009 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 15:17:56,009 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:17:56,009 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/49525472?check_in=2024-12-20&check_out=2024-12-21&adults=3&children=0&infants=0
2024-11-15 15:17:56,528 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 15:17:56,528 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:18:01,108 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:18:01,111 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:18:03,122 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:18:03,122 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:18:06,544 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:18:13,186 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:18:13,186 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:18:16,594 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:18:23,240 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:18:23,240 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:18:26,635 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:18:33,293 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:18:33,293 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w ._11jcbg2
2024-11-15 15:18:36,689 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:18:43,348 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:18:43,348 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[contains(@class, '_wgmchy')]//span[contains(text(), '$') and contains(text(), 'NZD')]
2024-11-15 15:18:46,731 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:18:53,375 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:18:53,375 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:18:56,764 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:19:03,419 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 15:19:03,419 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:19:06,824 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:19:13,445 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:19:23,500 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:19:26,908 [WARNING] price_checker.py:443 - 尝试点击价格展开按钮失败: Message: no such element: Unable to locate element: {"method":"xpath","selector":"//button[contains(@class, '_12wl7g09')]"}
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00952BFE]
	(No symbol) [0x00952CDB]
	(No symbol) [0x0098EBD2]
	(No symbol) [0x00973954]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:19:26,909 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:19:26,909 [WARNING] price_checker.py:452 - ✗ cleaning_fee 未获取到
2024-11-15 15:19:26,909 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:19:26,909 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 15:19:26,909 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:19:26,909 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:19:26,909 [INFO] price_checker.py:457 - check_in: 01/01/2025
2024-11-15 15:19:26,909 [INFO] price_checker.py:457 - check_out: 02/01/2025
2024-11-15 15:19:26,909 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:19:26,910 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:19:26,910 [INFO] price_checker.py:457 - nightly_price: None
2024-11-15 15:19:26,910 [INFO] price_checker.py:457 - cleaning_fee: None
2024-11-15 15:19:26,910 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:19:26,910 [INFO] price_checker.py:457 - taxes: None
2024-11-15 15:19:26,910 [INFO] price_checker.py:457 - total: None
2024-11-15 15:19:26,910 [INFO] price_checker.py:559 - ✓ 成功获取 01/01/2025 的价格信息
2024-11-15 15:19:26,910 [INFO] price_checker.py:573 - 已完成 25/41 个日期的处理
2024-11-15 15:19:33,559 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:19:36,911 [INFO] price_checker.py:553 - [26/41] 处理日期: 02/01/2025
2024-11-15 15:19:36,911 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/716883705085875481
2024-11-15 15:19:36,911 [INFO] price_checker.py:255 - 入住日期: 02/01/2025
2024-11-15 15:19:42,036 [INFO] price_checker.py:271 - 开始检查日期 02/01/2025 的最小入住要求...
2024-11-15 15:19:42,040 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="2, Thursday, January 2025. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-02/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">2</div></td>
2024-11-15 15:19:42,049 [INFO] price_checker.py:158 - 找到日期: 02/01/2025
2024-11-15 15:19:42,049 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:19:43,602 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:19:52,107 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:19:53,219 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:19:53,224 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:19:53,224 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 15:19:53,225 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 15:19:53,226 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 15:19:53,226 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:19:53,226 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/716883705085875481?check_in=2025-01-02&check_out=2025-01-03&adults=3&children=0&infants=0
2024-11-15 15:19:53,651 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:19:58,327 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:19:58,330 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:20:00,340 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:20:00,340 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:20:03,675 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:20:10,387 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:20:10,387 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:20:13,726 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:20:20,437 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:20:20,437 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:20:30,482 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:20:30,482 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w ._11jcbg2
2024-11-15 15:20:33,819 [WARNING] price_checker.py:443 - 尝试点击价格展开按钮失败: Message: no such element: Unable to locate element: {"method":"xpath","selector":"//button[contains(@class, '_12wl7g09')]"}
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00952BFE]
	(No symbol) [0x00952CDB]
	(No symbol) [0x0098EBD2]
	(No symbol) [0x00973954]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:20:33,819 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:20:33,819 [WARNING] price_checker.py:452 - ✗ cleaning_fee 未获取到
2024-11-15 15:20:33,819 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:20:33,819 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 15:20:33,819 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:20:33,820 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:20:33,820 [INFO] price_checker.py:457 - check_in: 20/12/2024
2024-11-15 15:20:33,820 [INFO] price_checker.py:457 - check_out: 21/12/2024
2024-11-15 15:20:33,820 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:20:33,820 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:20:33,820 [INFO] price_checker.py:457 - nightly_price: None
2024-11-15 15:20:33,820 [INFO] price_checker.py:457 - cleaning_fee: None
2024-11-15 15:20:33,820 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:20:33,820 [INFO] price_checker.py:457 - taxes: None
2024-11-15 15:20:33,820 [INFO] price_checker.py:457 - total: None
2024-11-15 15:20:33,820 [INFO] price_checker.py:559 - ✓ 成功获取 20/12/2024 的价格信息
2024-11-15 15:20:33,820 [INFO] price_checker.py:573 - 已完成 25/50 个日期的处理
2024-11-15 15:20:40,538 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:20:40,539 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[contains(@class, '_wgmchy')]//span[contains(text(), '$') and contains(text(), 'NZD')]
2024-11-15 15:20:43,821 [INFO] price_checker.py:553 - [26/50] 处理日期: 21/12/2024
2024-11-15 15:20:43,821 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/49525472
2024-11-15 15:20:43,821 [INFO] price_checker.py:255 - 入住日期: 21/12/2024
2024-11-15 15:20:49,692 [INFO] price_checker.py:271 - 开始检查日期 21/12/2024 的最小入住要求...
2024-11-15 15:20:49,696 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="21, Saturday, December 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-21/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">21</div></td>
2024-11-15 15:20:49,705 [INFO] price_checker.py:158 - 找到日期: 21/12/2024
2024-11-15 15:20:49,705 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:20:50,541 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:20:50,541 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:20:59,720 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:21:00,555 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 15:21:00,555 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:21:00,809 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:21:00,816 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:21:00,816 [ERROR] price_checker.py:246 - 错误类型: MoveTargetOutOfBoundsException
2024-11-15 15:21:00,818 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.MoveTargetOutOfBoundsException: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 15:21:00,818 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 15:21:00,818 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:21:00,818 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/49525472?check_in=2024-12-21&check_out=2024-12-22&adults=3&children=0&infants=0
2024-11-15 15:21:05,946 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:21:05,948 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:21:07,960 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:21:07,960 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:21:10,573 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:21:18,011 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:21:18,011 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:21:20,612 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:21:28,070 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:21:28,071 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:21:30,616 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:21:38,129 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:21:38,129 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w ._11jcbg2
2024-11-15 15:21:40,619 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:21:48,138 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:21:48,138 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[contains(@class, '_wgmchy')]//span[contains(text(), '$') and contains(text(), 'NZD')]
2024-11-15 15:21:50,676 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:21:58,185 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:21:58,186 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:22:00,733 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:22:08,247 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 15:22:08,247 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:22:10,791 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:22:18,300 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:22:28,362 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:22:30,849 [WARNING] price_checker.py:443 - 尝试点击价格展开按钮失败: Message: no such element: Unable to locate element: {"method":"xpath","selector":"//button[contains(@class, '_12wl7g09')]"}
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00952BFE]
	(No symbol) [0x00952CDB]
	(No symbol) [0x0098EBD2]
	(No symbol) [0x00973954]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:22:30,849 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:22:30,849 [WARNING] price_checker.py:452 - ✗ cleaning_fee 未获取到
2024-11-15 15:22:30,849 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:22:30,849 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 15:22:30,849 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:22:30,849 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:22:30,850 [INFO] price_checker.py:457 - check_in: 02/01/2025
2024-11-15 15:22:30,850 [INFO] price_checker.py:457 - check_out: 03/01/2025
2024-11-15 15:22:30,850 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:22:30,850 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:22:30,850 [INFO] price_checker.py:457 - nightly_price: None
2024-11-15 15:22:30,850 [INFO] price_checker.py:457 - cleaning_fee: None
2024-11-15 15:22:30,850 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:22:30,850 [INFO] price_checker.py:457 - taxes: None
2024-11-15 15:22:30,850 [INFO] price_checker.py:457 - total: None
2024-11-15 15:22:30,850 [INFO] price_checker.py:559 - ✓ 成功获取 02/01/2025 的价格信息
2024-11-15 15:22:30,850 [INFO] price_checker.py:553 - [27/41] 处理日期: 03/01/2025
2024-11-15 15:22:30,850 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/716883705085875481
2024-11-15 15:22:30,850 [INFO] price_checker.py:255 - 入住日期: 03/01/2025
2024-11-15 15:22:35,973 [INFO] price_checker.py:271 - 开始检查日期 03/01/2025 的最小入住要求...
2024-11-15 15:22:35,977 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="3, Friday, January 2025. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-03/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">3</div></td>
2024-11-15 15:22:35,987 [INFO] price_checker.py:158 - 找到日期: 03/01/2025
2024-11-15 15:22:35,987 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:22:38,394 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:22:46,046 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:22:47,148 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:22:47,153 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:22:47,154 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 15:22:47,155 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 15:22:47,155 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 15:22:47,155 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:22:47,155 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/716883705085875481?check_in=2025-01-03&check_out=2025-01-04&adults=3&children=0&infants=0
2024-11-15 15:22:48,442 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:22:52,244 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:22:52,247 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:22:54,258 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:22:54,258 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:22:58,477 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:23:04,313 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:23:04,313 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:23:08,525 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:23:14,316 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:23:14,317 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:23:18,582 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:23:24,368 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:23:24,368 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w ._11jcbg2
2024-11-15 15:23:34,387 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:23:34,387 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[contains(@class, '_wgmchy')]//span[contains(text(), '$') and contains(text(), 'NZD')]
2024-11-15 15:23:38,614 [WARNING] price_checker.py:443 - 尝试点击价格展开按钮失败: Message: no such element: Unable to locate element: {"method":"xpath","selector":"//button[contains(@class, '_12wl7g09')]"}
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00952BFE]
	(No symbol) [0x00952CDB]
	(No symbol) [0x0098EBD2]
	(No symbol) [0x00973954]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:23:38,615 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:23:38,615 [WARNING] price_checker.py:452 - ✗ cleaning_fee 未获取到
2024-11-15 15:23:38,615 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:23:38,615 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 15:23:38,615 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:23:38,615 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:23:38,616 [INFO] price_checker.py:457 - check_in: 21/12/2024
2024-11-15 15:23:38,616 [INFO] price_checker.py:457 - check_out: 22/12/2024
2024-11-15 15:23:38,616 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:23:38,616 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:23:38,616 [INFO] price_checker.py:457 - nightly_price: None
2024-11-15 15:23:38,616 [INFO] price_checker.py:457 - cleaning_fee: None
2024-11-15 15:23:38,616 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:23:38,616 [INFO] price_checker.py:457 - taxes: None
2024-11-15 15:23:38,617 [INFO] price_checker.py:457 - total: None
2024-11-15 15:23:38,617 [INFO] price_checker.py:559 - ✓ 成功获取 21/12/2024 的价格信息
2024-11-15 15:23:38,617 [INFO] price_checker.py:553 - [27/50] 处理日期: 22/12/2024
2024-11-15 15:23:38,617 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/49525472
2024-11-15 15:23:38,617 [INFO] price_checker.py:255 - 入住日期: 22/12/2024
2024-11-15 15:23:43,743 [INFO] price_checker.py:271 - 开始检查日期 22/12/2024 的最小入住要求...
2024-11-15 15:23:43,746 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_1mv3p4vt" role="button" aria-disabled="false" aria-label="22, Sunday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-22/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">22</div></td>
2024-11-15 15:23:43,756 [INFO] price_checker.py:158 - 找到日期: 22/12/2024
2024-11-15 15:23:43,756 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:23:44,408 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:23:44,409 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:23:53,781 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:23:54,428 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 15:23:54,428 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:23:54,867 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:23:54,876 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:23:54,876 [ERROR] price_checker.py:246 - 错误类型: MoveTargetOutOfBoundsException
2024-11-15 15:23:54,878 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.MoveTargetOutOfBoundsException: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 15:23:54,878 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 15:23:54,878 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:23:54,878 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/49525472?check_in=2024-12-22&check_out=2024-12-23&adults=3&children=0&infants=0
2024-11-15 15:23:59,992 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:23:59,994 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:24:02,008 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:24:02,008 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:24:04,452 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:24:12,068 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:24:12,068 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:24:14,506 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:24:22,122 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:24:22,123 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:24:22,129 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 15:24:22,144 [INFO] price_checker.py:337 - 找到可见价格元素: $224 NZD 
night
$224 NZD per night
2024-11-15 15:24:22,150 [INFO] price_checker.py:350 - 找到每晚价格元素: $224 NZD 
night
$224 NZD per night
2024-11-15 15:24:22,150 [INFO] price_checker.py:356 - 成功解析折扣价格: $224 NZD
2024-11-15 15:24:22,150 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:24:22,156 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 15:24:22,659 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:24:22,668 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:24:22,676 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 15:24:22,676 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 15:24:22,676 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:24:22,684 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:24:22,689 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 15:24:22,689 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 15:24:22,689 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:24:24,560 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:24:32,697 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:24:34,563 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:24:42,751 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:24:42,758 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:24:42,765 [INFO] price_checker.py:403 - 找到价格元素: $41 NZD (HTML: <span class="_1k4xcdh">$41&nbsp;NZD</span>)
2024-11-15 15:24:42,765 [INFO] price_checker.py:416 - ✓ 成功设置税费: $41 NZD
2024-11-15 15:24:42,765 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:24:44,608 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:24:52,796 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:24:52,803 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:24:52,809 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span class="_j1kt73">$315&nbsp;NZD</span>)
2024-11-15 15:24:52,809 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:24:52,809 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:24:52,816 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 15:24:52,820 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$315&nbsp;NZD</span></span>)
2024-11-15 15:24:52,820 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:24:52,825 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span class="_j1kt73">$315&nbsp;NZD</span>)
2024-11-15 15:24:52,825 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:24:52,829 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 15:24:52,830 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 15:24:52,830 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:24:52,830 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 15:24:52,830 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:24:52,830 [INFO] price_checker.py:450 - ✓ taxes: $41 NZD
2024-11-15 15:24:52,830 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:24:52,830 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:24:52,830 [INFO] price_checker.py:457 - check_in: 22/12/2024
2024-11-15 15:24:52,830 [INFO] price_checker.py:457 - check_out: 23/12/2024
2024-11-15 15:24:52,830 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:24:52,830 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:24:52,830 [INFO] price_checker.py:457 - nightly_price: $224 NZD
2024-11-15 15:24:52,831 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 15:24:52,831 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:24:52,831 [INFO] price_checker.py:457 - taxes: $41 NZD
2024-11-15 15:24:52,831 [INFO] price_checker.py:457 - total: 
2024-11-15 15:24:52,831 [INFO] price_checker.py:559 - ✓ 成功获取 22/12/2024 的价格信息
2024-11-15 15:24:52,831 [INFO] price_checker.py:553 - [28/50] 处理日期: 26/12/2024
2024-11-15 15:24:52,831 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/49525472
2024-11-15 15:24:52,831 [INFO] price_checker.py:255 - 入住日期: 26/12/2024
2024-11-15 15:24:54,623 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:24:58,587 [INFO] price_checker.py:271 - 开始检查日期 26/12/2024 的最小入住要求...
2024-11-15 15:24:58,589 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="26, Thursday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-26/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">26</div></td>
2024-11-15 15:24:58,599 [INFO] price_checker.py:158 - 找到日期: 26/12/2024
2024-11-15 15:24:58,599 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:25:04,629 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:25:08,632 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:25:09,726 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:25:09,732 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:25:09,732 [ERROR] price_checker.py:246 - 错误类型: MoveTargetOutOfBoundsException
2024-11-15 15:25:09,733 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.MoveTargetOutOfBoundsException: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 15:25:09,734 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 15:25:09,734 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:25:09,734 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/49525472?check_in=2024-12-26&check_out=2024-12-27&adults=3&children=0&infants=0
2024-11-15 15:25:14,855 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:25:14,859 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:25:16,871 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:25:16,871 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:25:24,659 [WARNING] price_checker.py:443 - 尝试点击价格展开按钮失败: Message: no such element: Unable to locate element: {"method":"xpath","selector":"//button[contains(@class, '_12wl7g09')]"}
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00952BFE]
	(No symbol) [0x00952CDB]
	(No symbol) [0x0098EBD2]
	(No symbol) [0x00973954]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:25:24,659 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:25:24,659 [WARNING] price_checker.py:452 - ✗ cleaning_fee 未获取到
2024-11-15 15:25:24,659 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:25:24,660 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 15:25:24,660 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:25:24,660 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:25:24,660 [INFO] price_checker.py:457 - check_in: 03/01/2025
2024-11-15 15:25:24,660 [INFO] price_checker.py:457 - check_out: 04/01/2025
2024-11-15 15:25:24,660 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:25:24,660 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:25:24,660 [INFO] price_checker.py:457 - nightly_price: None
2024-11-15 15:25:24,660 [INFO] price_checker.py:457 - cleaning_fee: None
2024-11-15 15:25:24,660 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:25:24,660 [INFO] price_checker.py:457 - taxes: None
2024-11-15 15:25:24,660 [INFO] price_checker.py:457 - total: None
2024-11-15 15:25:24,660 [INFO] price_checker.py:559 - ✓ 成功获取 03/01/2025 的价格信息
2024-11-15 15:25:24,660 [INFO] price_checker.py:553 - [28/41] 处理日期: 04/01/2025
2024-11-15 15:25:24,661 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/716883705085875481
2024-11-15 15:25:24,661 [INFO] price_checker.py:255 - 入住日期: 04/01/2025
2024-11-15 15:25:26,917 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:25:26,917 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:25:29,785 [INFO] price_checker.py:271 - 开始检查日期 04/01/2025 的最小入住要求...
2024-11-15 15:25:29,789 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="4, Saturday, January 2025. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-04/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">4</div></td>
2024-11-15 15:25:29,802 [INFO] price_checker.py:158 - 找到日期: 04/01/2025
2024-11-15 15:25:29,802 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:25:36,963 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:25:36,963 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:25:36,969 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 15:25:36,984 [INFO] price_checker.py:337 - 找到可见价格元素: $242 NZD 
night
$242 NZD per night
2024-11-15 15:25:36,989 [INFO] price_checker.py:350 - 找到每晚价格元素: $242 NZD 
night
$242 NZD per night
2024-11-15 15:25:36,989 [INFO] price_checker.py:356 - 成功解析折扣价格: $242 NZD
2024-11-15 15:25:36,989 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:25:36,995 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 15:25:37,498 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:25:37,505 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:25:37,511 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 15:25:37,511 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 15:25:37,511 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:25:37,519 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:25:37,523 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 15:25:37,524 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 15:25:37,524 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:25:39,818 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:25:40,920 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:25:40,925 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:25:40,925 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 15:25:40,926 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 15:25:40,926 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 15:25:40,927 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:25:40,927 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/716883705085875481?check_in=2025-01-04&check_out=2025-01-05&adults=3&children=0&infants=0
2024-11-15 15:25:46,016 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:25:46,018 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:25:47,529 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:25:48,029 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:25:48,029 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:25:57,562 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:25:57,569 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:25:57,575 [INFO] price_checker.py:403 - 找到价格元素: $44 NZD (HTML: <span class="_1k4xcdh">$44&nbsp;NZD</span>)
2024-11-15 15:25:57,575 [INFO] price_checker.py:416 - ✓ 成功设置税费: $44 NZD
2024-11-15 15:25:57,575 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:25:58,071 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:25:58,072 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:26:07,630 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:26:07,637 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:26:07,643 [INFO] price_checker.py:403 - 找到价格元素: $336 NZD (HTML: <span class="_j1kt73">$336&nbsp;NZD</span>)
2024-11-15 15:26:07,643 [INFO] price_checker.py:420 - ✓ 成功设置总价: $336 NZD
2024-11-15 15:26:07,643 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:26:07,650 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 15:26:07,655 [INFO] price_checker.py:403 - 找到价格元素: $336 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$336&nbsp;NZD</span></span>)
2024-11-15 15:26:07,655 [INFO] price_checker.py:420 - ✓ 成功设置总价: $336 NZD
2024-11-15 15:26:07,659 [INFO] price_checker.py:403 - 找到价格元素: $336 NZD (HTML: <span class="_j1kt73">$336&nbsp;NZD</span>)
2024-11-15 15:26:07,659 [INFO] price_checker.py:420 - ✓ 成功设置总价: $336 NZD
2024-11-15 15:26:07,664 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 15:26:07,664 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 15:26:07,664 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:26:07,664 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 15:26:07,664 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:26:07,664 [INFO] price_checker.py:450 - ✓ taxes: $44 NZD
2024-11-15 15:26:07,664 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:26:07,664 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:26:07,664 [INFO] price_checker.py:457 - check_in: 26/12/2024
2024-11-15 15:26:07,665 [INFO] price_checker.py:457 - check_out: 27/12/2024
2024-11-15 15:26:07,665 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:26:07,665 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:26:07,665 [INFO] price_checker.py:457 - nightly_price: $242 NZD
2024-11-15 15:26:07,665 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 15:26:07,665 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:26:07,665 [INFO] price_checker.py:457 - taxes: $44 NZD
2024-11-15 15:26:07,665 [INFO] price_checker.py:457 - total: 
2024-11-15 15:26:07,665 [INFO] price_checker.py:559 - ✓ 成功获取 26/12/2024 的价格信息
2024-11-15 15:26:07,665 [INFO] price_checker.py:553 - [29/50] 处理日期: 27/12/2024
2024-11-15 15:26:07,665 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/49525472
2024-11-15 15:26:07,665 [INFO] price_checker.py:255 - 入住日期: 27/12/2024
2024-11-15 15:26:08,076 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:26:08,076 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:26:12,786 [INFO] price_checker.py:271 - 开始检查日期 27/12/2024 的最小入住要求...
2024-11-15 15:26:12,789 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="27, Friday, December 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-27/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">27</div></td>
2024-11-15 15:26:12,799 [INFO] price_checker.py:158 - 找到日期: 27/12/2024
2024-11-15 15:26:12,799 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:26:18,082 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:26:18,082 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w ._11jcbg2
2024-11-15 15:26:22,859 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:26:23,946 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:26:23,955 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:26:23,956 [ERROR] price_checker.py:246 - 错误类型: MoveTargetOutOfBoundsException
2024-11-15 15:26:23,957 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.MoveTargetOutOfBoundsException: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 15:26:23,957 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 15:26:23,957 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:26:23,957 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/49525472?check_in=2024-12-27&check_out=2024-12-28&adults=3&children=0&infants=0
2024-11-15 15:26:28,097 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:26:28,097 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[contains(@class, '_wgmchy')]//span[contains(text(), '$') and contains(text(), 'NZD')]
2024-11-15 15:26:29,051 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:26:29,054 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:26:31,066 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:26:31,066 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:26:38,118 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:26:38,118 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:26:41,082 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:26:41,082 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:26:48,167 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 15:26:48,168 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:26:51,128 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:26:51,128 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:26:58,208 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:27:01,170 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:27:01,170 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w ._11jcbg2
2024-11-15 15:27:08,252 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:27:11,211 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:27:11,211 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[contains(@class, '_wgmchy')]//span[contains(text(), '$') and contains(text(), 'NZD')]
2024-11-15 15:27:18,282 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:27:21,244 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:27:21,244 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:27:28,283 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:27:31,246 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 15:27:31,246 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:27:38,285 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:27:41,307 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:27:48,335 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:27:51,315 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:27:58,338 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:28:01,377 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:28:11,428 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:28:18,437 [WARNING] price_checker.py:443 - 尝试点击价格展开按钮失败: Message: no such element: Unable to locate element: {"method":"xpath","selector":"//button[contains(@class, '_12wl7g09')]"}
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00952BFE]
	(No symbol) [0x00952CDB]
	(No symbol) [0x0098EBD2]
	(No symbol) [0x00973954]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:28:18,438 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:28:18,438 [WARNING] price_checker.py:452 - ✗ cleaning_fee 未获取到
2024-11-15 15:28:18,438 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:28:18,438 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 15:28:18,438 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:28:18,438 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:28:18,438 [INFO] price_checker.py:457 - check_in: 04/01/2025
2024-11-15 15:28:18,438 [INFO] price_checker.py:457 - check_out: 05/01/2025
2024-11-15 15:28:18,438 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:28:18,438 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:28:18,438 [INFO] price_checker.py:457 - nightly_price: None
2024-11-15 15:28:18,439 [INFO] price_checker.py:457 - cleaning_fee: None
2024-11-15 15:28:18,439 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:28:18,439 [INFO] price_checker.py:457 - taxes: None
2024-11-15 15:28:18,439 [INFO] price_checker.py:457 - total: None
2024-11-15 15:28:18,439 [INFO] price_checker.py:559 - ✓ 成功获取 04/01/2025 的价格信息
2024-11-15 15:28:18,439 [INFO] price_checker.py:553 - [29/41] 处理日期: 10/01/2025
2024-11-15 15:28:18,439 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/716883705085875481
2024-11-15 15:28:18,439 [INFO] price_checker.py:255 - 入住日期: 10/01/2025
2024-11-15 15:28:21,463 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:28:23,563 [INFO] price_checker.py:271 - 开始检查日期 10/01/2025 的最小入住要求...
2024-11-15 15:28:23,566 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="10, Friday, January 2025. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-10/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">10</div></td>
2024-11-15 15:28:23,576 [INFO] price_checker.py:158 - 找到日期: 10/01/2025
2024-11-15 15:28:23,576 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:28:31,488 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:28:33,613 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:28:34,716 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:28:34,721 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:28:34,721 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 15:28:34,723 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 15:28:34,723 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 15:28:34,723 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:28:34,723 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/716883705085875481?check_in=2025-01-10&check_out=2025-01-11&adults=3&children=0&infants=0
2024-11-15 15:28:39,842 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:28:39,845 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:28:41,520 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:28:42,820 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:28:42,820 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:28:52,852 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:28:52,852 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:29:01,585 [WARNING] price_checker.py:443 - 尝试点击价格展开按钮失败: Message: no such element: Unable to locate element: {"method":"xpath","selector":"//button[contains(@class, '_12wl7g09')]"}
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00952BFE]
	(No symbol) [0x00952CDB]
	(No symbol) [0x0098EBD2]
	(No symbol) [0x00973954]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:29:01,585 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:29:01,585 [WARNING] price_checker.py:452 - ✗ cleaning_fee 未获取到
2024-11-15 15:29:01,585 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:29:01,585 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 15:29:01,586 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:29:01,586 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:29:01,586 [INFO] price_checker.py:457 - check_in: 27/12/2024
2024-11-15 15:29:01,586 [INFO] price_checker.py:457 - check_out: 28/12/2024
2024-11-15 15:29:01,586 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:29:01,586 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:29:01,586 [INFO] price_checker.py:457 - nightly_price: None
2024-11-15 15:29:01,586 [INFO] price_checker.py:457 - cleaning_fee: None
2024-11-15 15:29:01,586 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:29:01,586 [INFO] price_checker.py:457 - taxes: None
2024-11-15 15:29:01,586 [INFO] price_checker.py:457 - total: None
2024-11-15 15:29:01,586 [INFO] price_checker.py:559 - ✓ 成功获取 27/12/2024 的价格信息
2024-11-15 15:29:01,586 [INFO] price_checker.py:553 - [30/50] 处理日期: 28/12/2024
2024-11-15 15:29:01,586 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/49525472
2024-11-15 15:29:01,587 [INFO] price_checker.py:255 - 入住日期: 28/12/2024
2024-11-15 15:29:02,893 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:29:02,893 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:29:06,706 [INFO] price_checker.py:271 - 开始检查日期 28/12/2024 的最小入住要求...
2024-11-15 15:29:06,709 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="28, Saturday, December 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-28/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">28</div></td>
2024-11-15 15:29:06,718 [INFO] price_checker.py:158 - 找到日期: 28/12/2024
2024-11-15 15:29:06,718 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:29:12,919 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:29:12,919 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w ._11jcbg2
2024-11-15 15:29:16,736 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:29:17,824 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:29:17,830 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:29:17,830 [ERROR] price_checker.py:246 - 错误类型: MoveTargetOutOfBoundsException
2024-11-15 15:29:17,832 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.MoveTargetOutOfBoundsException: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 15:29:17,832 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 15:29:17,832 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:29:17,832 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/49525472?check_in=2024-12-28&check_out=2024-12-29&adults=3&children=0&infants=0
2024-11-15 15:29:22,923 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:29:22,925 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:29:22,925 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[contains(@class, '_wgmchy')]//span[contains(text(), '$') and contains(text(), 'NZD')]
2024-11-15 15:29:22,926 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:29:24,936 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:29:24,936 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:29:32,979 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:29:32,979 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:29:34,990 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:29:34,991 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:29:43,029 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 15:29:43,029 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:29:45,044 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:29:45,044 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:29:53,072 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:29:55,104 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:29:55,104 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w ._11jcbg2
2024-11-15 15:30:03,109 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:30:05,142 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:30:05,142 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[contains(@class, '_wgmchy')]//span[contains(text(), '$') and contains(text(), 'NZD')]
2024-11-15 15:30:13,160 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:30:15,193 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:30:15,193 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:30:23,206 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:30:25,229 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 15:30:25,229 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:30:33,255 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:30:35,285 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:30:43,316 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:30:45,333 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:30:53,352 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:30:55,364 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:31:05,417 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:31:13,462 [WARNING] price_checker.py:443 - 尝试点击价格展开按钮失败: Message: no such element: Unable to locate element: {"method":"xpath","selector":"//button[contains(@class, '_12wl7g09')]"}
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00952BFE]
	(No symbol) [0x00952CDB]
	(No symbol) [0x0098EBD2]
	(No symbol) [0x00973954]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:31:13,462 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:31:13,463 [WARNING] price_checker.py:452 - ✗ cleaning_fee 未获取到
2024-11-15 15:31:13,463 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:31:13,463 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 15:31:13,463 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:31:13,463 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:31:13,463 [INFO] price_checker.py:457 - check_in: 10/01/2025
2024-11-15 15:31:13,463 [INFO] price_checker.py:457 - check_out: 11/01/2025
2024-11-15 15:31:13,463 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:31:13,463 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:31:13,463 [INFO] price_checker.py:457 - nightly_price: None
2024-11-15 15:31:13,463 [INFO] price_checker.py:457 - cleaning_fee: None
2024-11-15 15:31:13,463 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:31:13,463 [INFO] price_checker.py:457 - taxes: None
2024-11-15 15:31:13,464 [INFO] price_checker.py:457 - total: None
2024-11-15 15:31:13,464 [INFO] price_checker.py:559 - ✓ 成功获取 10/01/2025 的价格信息
2024-11-15 15:31:13,464 [INFO] price_checker.py:553 - [30/41] 处理日期: 11/01/2025
2024-11-15 15:31:13,464 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/716883705085875481
2024-11-15 15:31:13,464 [INFO] price_checker.py:255 - 入住日期: 11/01/2025
2024-11-15 15:31:15,455 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:31:21,695 [INFO] price_checker.py:271 - 开始检查日期 11/01/2025 的最小入住要求...
2024-11-15 15:31:21,699 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="11, Saturday, January 2025. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-11/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">11</div></td>
2024-11-15 15:31:21,710 [INFO] price_checker.py:158 - 找到日期: 11/01/2025
2024-11-15 15:31:21,710 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:31:25,466 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:31:31,771 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:31:32,874 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:31:32,879 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:31:32,879 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 15:31:32,880 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 15:31:32,880 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 15:31:32,881 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:31:32,881 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/716883705085875481?check_in=2025-01-11&check_out=2025-01-12&adults=3&children=0&infants=0
2024-11-15 15:31:35,505 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:31:37,969 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:31:37,972 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:31:39,984 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:31:39,984 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:31:50,046 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:31:50,046 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:31:55,613 [WARNING] price_checker.py:443 - 尝试点击价格展开按钮失败: Message: no such element: Unable to locate element: {"method":"xpath","selector":"//button[contains(@class, '_12wl7g09')]"}
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00952BFE]
	(No symbol) [0x00952CDB]
	(No symbol) [0x0098EBD2]
	(No symbol) [0x00973954]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:31:55,614 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:31:55,614 [WARNING] price_checker.py:452 - ✗ cleaning_fee 未获取到
2024-11-15 15:31:55,614 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:31:55,614 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 15:31:55,614 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:31:55,614 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:31:55,614 [INFO] price_checker.py:457 - check_in: 28/12/2024
2024-11-15 15:31:55,614 [INFO] price_checker.py:457 - check_out: 29/12/2024
2024-11-15 15:31:55,614 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:31:55,614 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:31:55,614 [INFO] price_checker.py:457 - nightly_price: None
2024-11-15 15:31:55,615 [INFO] price_checker.py:457 - cleaning_fee: None
2024-11-15 15:31:55,615 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:31:55,615 [INFO] price_checker.py:457 - taxes: None
2024-11-15 15:31:55,615 [INFO] price_checker.py:457 - total: None
2024-11-15 15:31:55,615 [INFO] price_checker.py:559 - ✓ 成功获取 28/12/2024 的价格信息
2024-11-15 15:31:55,615 [INFO] price_checker.py:573 - 已完成 30/50 个日期的处理
2024-11-15 15:32:00,108 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:32:00,109 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:32:05,615 [INFO] price_checker.py:553 - [31/50] 处理日期: 29/12/2024
2024-11-15 15:32:05,615 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/49525472
2024-11-15 15:32:05,615 [INFO] price_checker.py:255 - 入住日期: 29/12/2024
2024-11-15 15:32:10,137 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:32:10,137 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w ._11jcbg2
2024-11-15 15:32:10,736 [INFO] price_checker.py:271 - 开始检查日期 29/12/2024 的最小入住要求...
2024-11-15 15:32:10,740 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_1mv3p4vt" role="button" aria-disabled="false" aria-label="29, Sunday, December 2024. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-29/12/2024" data-is-day-blocked="false" style="width: 41px; height: 41px;">29</div></td>
2024-11-15 15:32:10,749 [INFO] price_checker.py:158 - 找到日期: 29/12/2024
2024-11-15 15:32:10,749 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:32:20,178 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:32:20,178 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[contains(@class, '_wgmchy')]//span[contains(text(), '$') and contains(text(), 'NZD')]
2024-11-15 15:32:20,795 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:32:21,882 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:32:21,888 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:32:21,888 [ERROR] price_checker.py:246 - 错误类型: MoveTargetOutOfBoundsException
2024-11-15 15:32:21,889 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.MoveTargetOutOfBoundsException: Message: move target out of bounds
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x0099416B]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 15:32:21,889 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 15:32:21,890 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:32:21,890 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/49525472?check_in=2024-12-29&check_out=2024-12-30&adults=3&children=0&infants=0
2024-11-15 15:32:27,011 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:32:27,014 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:32:29,026 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:32:29,026 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:32:30,180 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:32:30,180 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:32:39,082 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:32:39,083 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:32:40,233 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 15:32:40,233 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:32:49,135 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:32:49,136 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:32:49,141 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 15:32:49,157 [INFO] price_checker.py:337 - 找到可见价格元素: $242 NZD 
night
$242 NZD per night
2024-11-15 15:32:49,163 [INFO] price_checker.py:350 - 找到每晚价格元素: $242 NZD 
night
$242 NZD per night
2024-11-15 15:32:49,164 [INFO] price_checker.py:356 - 成功解析折扣价格: $242 NZD
2024-11-15 15:32:49,164 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:32:49,169 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 15:32:49,672 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:32:49,679 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:32:49,685 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 15:32:49,685 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 15:32:49,685 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:32:49,692 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:32:49,696 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 15:32:49,696 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 15:32:49,697 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:32:50,281 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:32:59,745 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:33:00,332 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:33:09,799 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:33:09,806 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:33:09,812 [INFO] price_checker.py:403 - 找到价格元素: $44 NZD (HTML: <span class="_1k4xcdh">$44&nbsp;NZD</span>)
2024-11-15 15:33:09,812 [INFO] price_checker.py:416 - ✓ 成功设置税费: $44 NZD
2024-11-15 15:33:09,812 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:33:10,387 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:33:19,847 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:33:19,853 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:33:19,858 [INFO] price_checker.py:403 - 找到价格元素: $336 NZD (HTML: <span class="_j1kt73">$336&nbsp;NZD</span>)
2024-11-15 15:33:19,859 [INFO] price_checker.py:420 - ✓ 成功设置总价: $336 NZD
2024-11-15 15:33:19,859 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:33:19,868 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 15:33:19,875 [INFO] price_checker.py:403 - 找到价格元素: $336 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$336&nbsp;NZD</span></span>)
2024-11-15 15:33:19,875 [INFO] price_checker.py:420 - ✓ 成功设置总价: $336 NZD
2024-11-15 15:33:19,881 [INFO] price_checker.py:403 - 找到价格元素: $336 NZD (HTML: <span class="_j1kt73">$336&nbsp;NZD</span>)
2024-11-15 15:33:19,882 [INFO] price_checker.py:420 - ✓ 成功设置总价: $336 NZD
2024-11-15 15:33:19,893 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 15:33:19,893 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 15:33:19,893 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:33:19,893 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 15:33:19,894 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:33:19,894 [INFO] price_checker.py:450 - ✓ taxes: $44 NZD
2024-11-15 15:33:19,894 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:33:19,894 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:33:19,894 [INFO] price_checker.py:457 - check_in: 29/12/2024
2024-11-15 15:33:19,894 [INFO] price_checker.py:457 - check_out: 30/12/2024
2024-11-15 15:33:19,894 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:33:19,894 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:33:19,894 [INFO] price_checker.py:457 - nightly_price: $242 NZD
2024-11-15 15:33:19,894 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 15:33:19,894 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:33:19,894 [INFO] price_checker.py:457 - taxes: $44 NZD
2024-11-15 15:33:19,894 [INFO] price_checker.py:457 - total: 
2024-11-15 15:33:19,895 [INFO] price_checker.py:559 - ✓ 成功获取 29/12/2024 的价格信息
2024-11-15 15:33:19,895 [INFO] price_checker.py:553 - [32/50] 处理日期: 01/01/2025
2024-11-15 15:33:19,895 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/49525472
2024-11-15 15:33:19,895 [INFO] price_checker.py:255 - 入住日期: 01/01/2025
2024-11-15 15:33:20,414 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:33:25,014 [INFO] price_checker.py:271 - 开始检查日期 01/01/2025 的最小入住要求...
2024-11-15 15:33:25,017 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_1qvi71ld" role="button" aria-disabled="false" aria-label="1, Wednesday, January 2025. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-01/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">1</div></td>
2024-11-15 15:33:25,026 [INFO] price_checker.py:158 - 找到日期: 01/01/2025
2024-11-15 15:33:25,026 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:33:30,460 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:33:35,068 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:33:36,179 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:33:36,185 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:33:36,185 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 15:33:36,187 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 15:33:36,187 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 15:33:36,187 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:33:36,187 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/49525472?check_in=2025-01-01&check_out=2025-01-02&adults=3&children=0&infants=0
2024-11-15 15:33:40,474 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:33:41,317 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:33:41,320 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:33:43,331 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:33:43,331 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:33:50,506 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:33:53,356 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:33:53,356 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:34:03,399 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:34:03,399 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:34:03,405 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 15:34:03,420 [INFO] price_checker.py:337 - 找到可见价格元素: $242 NZD 
night
$242 NZD per night
2024-11-15 15:34:03,425 [INFO] price_checker.py:350 - 找到每晚价格元素: $242 NZD 
night
$242 NZD per night
2024-11-15 15:34:03,425 [INFO] price_checker.py:356 - 成功解析折扣价格: $242 NZD
2024-11-15 15:34:03,425 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:34:03,431 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 15:34:03,934 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:34:03,944 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:34:03,950 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 15:34:03,950 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 15:34:03,950 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:34:03,957 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:34:03,962 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 15:34:03,963 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 15:34:03,963 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:34:10,548 [WARNING] price_checker.py:443 - 尝试点击价格展开按钮失败: Message: no such element: Unable to locate element: {"method":"xpath","selector":"//button[contains(@class, '_12wl7g09')]"}
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00952BFE]
	(No symbol) [0x00952CDB]
	(No symbol) [0x0098EBD2]
	(No symbol) [0x00973954]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:34:10,548 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:34:10,548 [WARNING] price_checker.py:452 - ✗ cleaning_fee 未获取到
2024-11-15 15:34:10,548 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:34:10,548 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 15:34:10,549 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:34:10,549 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:34:10,549 [INFO] price_checker.py:457 - check_in: 11/01/2025
2024-11-15 15:34:10,549 [INFO] price_checker.py:457 - check_out: 12/01/2025
2024-11-15 15:34:10,549 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:34:10,549 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:34:10,549 [INFO] price_checker.py:457 - nightly_price: None
2024-11-15 15:34:10,549 [INFO] price_checker.py:457 - cleaning_fee: None
2024-11-15 15:34:10,549 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:34:10,549 [INFO] price_checker.py:457 - taxes: None
2024-11-15 15:34:10,549 [INFO] price_checker.py:457 - total: None
2024-11-15 15:34:10,549 [INFO] price_checker.py:559 - ✓ 成功获取 11/01/2025 的价格信息
2024-11-15 15:34:10,550 [INFO] price_checker.py:573 - 已完成 30/41 个日期的处理
2024-11-15 15:34:14,002 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:34:20,550 [INFO] price_checker.py:553 - [31/41] 处理日期: 12/01/2025
2024-11-15 15:34:20,550 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/716883705085875481
2024-11-15 15:34:20,550 [INFO] price_checker.py:255 - 入住日期: 12/01/2025
2024-11-15 15:34:24,024 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:34:24,031 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:34:24,037 [INFO] price_checker.py:403 - 找到价格元素: $44 NZD (HTML: <span class="_1k4xcdh">$44&nbsp;NZD</span>)
2024-11-15 15:34:24,037 [INFO] price_checker.py:416 - ✓ 成功设置税费: $44 NZD
2024-11-15 15:34:24,037 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:34:25,678 [INFO] price_checker.py:271 - 开始检查日期 12/01/2025 的最小入住要求...
2024-11-15 15:34:25,682 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_1mv3p4vt" role="button" aria-disabled="false" aria-label="12, Sunday, January 2025. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-12/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">12</div></td>
2024-11-15 15:34:25,692 [INFO] price_checker.py:158 - 找到日期: 12/01/2025
2024-11-15 15:34:25,692 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:34:34,066 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:34:34,073 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:34:34,078 [INFO] price_checker.py:403 - 找到价格元素: $336 NZD (HTML: <span class="_j1kt73">$336&nbsp;NZD</span>)
2024-11-15 15:34:34,078 [INFO] price_checker.py:420 - ✓ 成功设置总价: $336 NZD
2024-11-15 15:34:34,078 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:34:34,085 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 15:34:34,090 [INFO] price_checker.py:403 - 找到价格元素: $336 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$336&nbsp;NZD</span></span>)
2024-11-15 15:34:34,090 [INFO] price_checker.py:420 - ✓ 成功设置总价: $336 NZD
2024-11-15 15:34:34,095 [INFO] price_checker.py:403 - 找到价格元素: $336 NZD (HTML: <span class="_j1kt73">$336&nbsp;NZD</span>)
2024-11-15 15:34:34,095 [INFO] price_checker.py:420 - ✓ 成功设置总价: $336 NZD
2024-11-15 15:34:34,099 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 15:34:34,099 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 15:34:34,099 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:34:34,099 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 15:34:34,099 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:34:34,100 [INFO] price_checker.py:450 - ✓ taxes: $44 NZD
2024-11-15 15:34:34,100 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:34:34,100 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:34:34,100 [INFO] price_checker.py:457 - check_in: 01/01/2025
2024-11-15 15:34:34,100 [INFO] price_checker.py:457 - check_out: 02/01/2025
2024-11-15 15:34:34,100 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:34:34,100 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:34:34,100 [INFO] price_checker.py:457 - nightly_price: $242 NZD
2024-11-15 15:34:34,100 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 15:34:34,100 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:34:34,100 [INFO] price_checker.py:457 - taxes: $44 NZD
2024-11-15 15:34:34,100 [INFO] price_checker.py:457 - total: 
2024-11-15 15:34:34,100 [INFO] price_checker.py:559 - ✓ 成功获取 01/01/2025 的价格信息
2024-11-15 15:34:34,101 [INFO] price_checker.py:553 - [33/50] 处理日期: 02/01/2025
2024-11-15 15:34:34,101 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/49525472
2024-11-15 15:34:34,101 [INFO] price_checker.py:255 - 入住日期: 02/01/2025
2024-11-15 15:34:35,726 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:34:36,830 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:34:36,835 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:34:36,835 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 15:34:36,836 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 15:34:36,836 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 15:34:36,837 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:34:36,837 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/716883705085875481?check_in=2025-01-12&check_out=2025-01-13&adults=3&children=0&infants=0
2024-11-15 15:34:39,224 [INFO] price_checker.py:271 - 开始检查日期 02/01/2025 的最小入住要求...
2024-11-15 15:34:39,228 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="2, Thursday, January 2025. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-02/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">2</div></td>
2024-11-15 15:34:39,238 [INFO] price_checker.py:158 - 找到日期: 02/01/2025
2024-11-15 15:34:39,239 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:34:41,927 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:34:41,930 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:34:43,940 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:34:43,941 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:34:49,297 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:34:50,407 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:34:50,412 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:34:50,413 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 15:34:50,414 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 15:34:50,414 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 15:34:50,414 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:34:50,415 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/49525472?check_in=2025-01-02&check_out=2025-01-03&adults=3&children=0&infants=0
2024-11-15 15:34:53,964 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:34:53,965 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:34:55,544 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:34:55,547 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:34:57,558 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:34:57,558 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:35:04,012 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:35:04,012 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:35:07,603 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:35:07,603 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:35:14,068 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:35:14,068 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w ._11jcbg2
2024-11-15 15:35:17,637 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:35:17,637 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:35:17,643 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 15:35:17,657 [INFO] price_checker.py:337 - 找到可见价格元素: $242 NZD 
night
$242 NZD per night
2024-11-15 15:35:17,663 [INFO] price_checker.py:350 - 找到每晚价格元素: $242 NZD 
night
$242 NZD per night
2024-11-15 15:35:17,663 [INFO] price_checker.py:356 - 成功解析折扣价格: $242 NZD
2024-11-15 15:35:17,663 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:35:17,669 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 15:35:18,172 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:35:18,180 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:35:18,190 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 15:35:18,190 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 15:35:18,190 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:35:18,199 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:35:18,206 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 15:35:18,206 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 15:35:18,206 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:35:24,109 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:35:24,109 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[contains(@class, '_wgmchy')]//span[contains(text(), '$') and contains(text(), 'NZD')]
2024-11-15 15:35:28,246 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:35:34,143 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:35:34,143 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:35:38,281 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:35:38,288 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:35:38,294 [INFO] price_checker.py:403 - 找到价格元素: $44 NZD (HTML: <span class="_1k4xcdh">$44&nbsp;NZD</span>)
2024-11-15 15:35:38,294 [INFO] price_checker.py:416 - ✓ 成功设置税费: $44 NZD
2024-11-15 15:35:38,294 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:35:44,176 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 15:35:44,176 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:35:48,334 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:35:48,341 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:35:48,346 [INFO] price_checker.py:403 - 找到价格元素: $336 NZD (HTML: <span class="_j1kt73">$336&nbsp;NZD</span>)
2024-11-15 15:35:48,347 [INFO] price_checker.py:420 - ✓ 成功设置总价: $336 NZD
2024-11-15 15:35:48,347 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:35:48,354 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 15:35:48,363 [INFO] price_checker.py:403 - 找到价格元素: $336 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$336&nbsp;NZD</span></span>)
2024-11-15 15:35:48,363 [INFO] price_checker.py:420 - ✓ 成功设置总价: $336 NZD
2024-11-15 15:35:48,370 [INFO] price_checker.py:403 - 找到价格元素: $336 NZD (HTML: <span class="_j1kt73">$336&nbsp;NZD</span>)
2024-11-15 15:35:48,370 [INFO] price_checker.py:420 - ✓ 成功设置总价: $336 NZD
2024-11-15 15:35:48,381 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 15:35:48,382 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 15:35:48,382 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:35:48,382 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 15:35:48,382 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:35:48,382 [INFO] price_checker.py:450 - ✓ taxes: $44 NZD
2024-11-15 15:35:48,382 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:35:48,382 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:35:48,382 [INFO] price_checker.py:457 - check_in: 02/01/2025
2024-11-15 15:35:48,382 [INFO] price_checker.py:457 - check_out: 03/01/2025
2024-11-15 15:35:48,383 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:35:48,383 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:35:48,383 [INFO] price_checker.py:457 - nightly_price: $242 NZD
2024-11-15 15:35:48,383 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 15:35:48,383 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:35:48,383 [INFO] price_checker.py:457 - taxes: $44 NZD
2024-11-15 15:35:48,383 [INFO] price_checker.py:457 - total: 
2024-11-15 15:35:48,383 [INFO] price_checker.py:559 - ✓ 成功获取 02/01/2025 的价格信息
2024-11-15 15:35:48,383 [INFO] price_checker.py:553 - [34/50] 处理日期: 03/01/2025
2024-11-15 15:35:48,383 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/49525472
2024-11-15 15:35:48,383 [INFO] price_checker.py:255 - 入住日期: 03/01/2025
2024-11-15 15:35:53,620 [INFO] price_checker.py:271 - 开始检查日期 03/01/2025 的最小入住要求...
2024-11-15 15:35:53,623 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="3, Friday, January 2025. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-03/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">3</div></td>
2024-11-15 15:35:53,632 [INFO] price_checker.py:158 - 找到日期: 03/01/2025
2024-11-15 15:35:53,633 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:35:54,193 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:36:03,640 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:36:04,226 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:36:04,756 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:36:04,762 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:36:04,762 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 15:36:04,763 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 15:36:04,764 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 15:36:04,764 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:36:04,764 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/49525472?check_in=2025-01-03&check_out=2025-01-04&adults=3&children=0&infants=0
2024-11-15 15:36:09,914 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:36:09,917 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:36:11,928 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:36:11,928 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:36:14,287 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:36:21,986 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:36:21,986 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:36:24,345 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:36:32,031 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:36:32,031 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:36:34,395 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:36:42,095 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:36:42,095 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w ._11jcbg2
2024-11-15 15:36:44,431 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:36:52,149 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:36:52,150 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[contains(@class, '_wgmchy')]//span[contains(text(), '$') and contains(text(), 'NZD')]
2024-11-15 15:36:54,485 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:37:02,199 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:37:02,199 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:37:12,240 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 15:37:12,240 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:37:14,566 [WARNING] price_checker.py:443 - 尝试点击价格展开按钮失败: Message: no such element: Unable to locate element: {"method":"xpath","selector":"//button[contains(@class, '_12wl7g09')]"}
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00952BFE]
	(No symbol) [0x00952CDB]
	(No symbol) [0x0098EBD2]
	(No symbol) [0x00973954]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:37:14,567 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:37:14,567 [WARNING] price_checker.py:452 - ✗ cleaning_fee 未获取到
2024-11-15 15:37:14,567 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:37:14,567 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 15:37:14,567 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:37:14,567 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:37:14,567 [INFO] price_checker.py:457 - check_in: 12/01/2025
2024-11-15 15:37:14,567 [INFO] price_checker.py:457 - check_out: 13/01/2025
2024-11-15 15:37:14,567 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:37:14,568 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:37:14,568 [INFO] price_checker.py:457 - nightly_price: None
2024-11-15 15:37:14,568 [INFO] price_checker.py:457 - cleaning_fee: None
2024-11-15 15:37:14,568 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:37:14,568 [INFO] price_checker.py:457 - taxes: None
2024-11-15 15:37:14,568 [INFO] price_checker.py:457 - total: None
2024-11-15 15:37:14,568 [INFO] price_checker.py:559 - ✓ 成功获取 12/01/2025 的价格信息
2024-11-15 15:37:14,568 [INFO] price_checker.py:553 - [32/41] 处理日期: 17/01/2025
2024-11-15 15:37:14,568 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/716883705085875481
2024-11-15 15:37:14,568 [INFO] price_checker.py:255 - 入住日期: 17/01/2025
2024-11-15 15:37:19,691 [INFO] price_checker.py:271 - 开始检查日期 17/01/2025 的最小入住要求...
2024-11-15 15:37:19,695 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="17, Friday, January 2025. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-17/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">17</div></td>
2024-11-15 15:37:19,704 [INFO] price_checker.py:158 - 找到日期: 17/01/2025
2024-11-15 15:37:19,704 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:37:22,258 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:37:29,748 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:37:30,862 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:37:30,867 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:37:30,868 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 15:37:30,869 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 15:37:30,869 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 15:37:30,869 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:37:30,870 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/716883705085875481?check_in=2025-01-17&check_out=2025-01-18&adults=3&children=0&infants=0
2024-11-15 15:37:32,286 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:37:35,960 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:37:35,963 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:37:37,974 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:37:37,974 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:37:42,301 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:37:48,022 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:37:48,022 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:37:52,333 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:37:58,065 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:37:58,065 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:38:02,373 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:38:08,117 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:38:08,118 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w ._11jcbg2
2024-11-15 15:38:12,415 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:38:18,148 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:38:18,148 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[contains(@class, '_wgmchy')]//span[contains(text(), '$') and contains(text(), 'NZD')]
2024-11-15 15:38:22,458 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:38:28,187 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:38:28,187 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:38:38,236 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 15:38:38,236 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:38:42,541 [WARNING] price_checker.py:443 - 尝试点击价格展开按钮失败: Message: no such element: Unable to locate element: {"method":"xpath","selector":"//button[contains(@class, '_12wl7g09')]"}
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00952BFE]
	(No symbol) [0x00952CDB]
	(No symbol) [0x0098EBD2]
	(No symbol) [0x00973954]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:38:42,541 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:38:42,542 [WARNING] price_checker.py:452 - ✗ cleaning_fee 未获取到
2024-11-15 15:38:42,542 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:38:42,542 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 15:38:42,542 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:38:42,542 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:38:42,542 [INFO] price_checker.py:457 - check_in: 03/01/2025
2024-11-15 15:38:42,542 [INFO] price_checker.py:457 - check_out: 04/01/2025
2024-11-15 15:38:42,542 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:38:42,542 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:38:42,542 [INFO] price_checker.py:457 - nightly_price: None
2024-11-15 15:38:42,542 [INFO] price_checker.py:457 - cleaning_fee: None
2024-11-15 15:38:42,542 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:38:42,542 [INFO] price_checker.py:457 - taxes: None
2024-11-15 15:38:42,543 [INFO] price_checker.py:457 - total: None
2024-11-15 15:38:42,543 [INFO] price_checker.py:559 - ✓ 成功获取 03/01/2025 的价格信息
2024-11-15 15:38:42,543 [INFO] price_checker.py:553 - [35/50] 处理日期: 04/01/2025
2024-11-15 15:38:42,543 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/49525472
2024-11-15 15:38:42,543 [INFO] price_checker.py:255 - 入住日期: 04/01/2025
2024-11-15 15:38:47,665 [INFO] price_checker.py:271 - 开始检查日期 04/01/2025 的最小入住要求...
2024-11-15 15:38:47,674 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="4, Saturday, January 2025. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-04/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">4</div></td>
2024-11-15 15:38:47,684 [INFO] price_checker.py:158 - 找到日期: 04/01/2025
2024-11-15 15:38:47,684 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:38:48,243 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:38:57,742 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:38:58,265 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:38:58,858 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:38:58,863 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:38:58,863 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 15:38:58,865 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 15:38:58,865 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 15:38:58,865 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:38:58,865 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/49525472?check_in=2025-01-04&check_out=2025-01-05&adults=3&children=0&infants=0
2024-11-15 15:39:03,970 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:39:03,973 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:39:05,983 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:39:05,983 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:39:08,312 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:39:16,005 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:39:16,005 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:39:18,348 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:39:26,061 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:39:26,061 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:39:28,393 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:39:36,101 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:39:36,101 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w ._11jcbg2
2024-11-15 15:39:38,452 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:39:46,162 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:39:46,162 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[contains(@class, '_wgmchy')]//span[contains(text(), '$') and contains(text(), 'NZD')]
2024-11-15 15:39:48,511 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:39:56,205 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:39:56,206 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:40:06,244 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 15:40:06,244 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:40:08,580 [WARNING] price_checker.py:443 - 尝试点击价格展开按钮失败: Message: no such element: Unable to locate element: {"method":"xpath","selector":"//button[contains(@class, '_12wl7g09')]"}
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00952BFE]
	(No symbol) [0x00952CDB]
	(No symbol) [0x0098EBD2]
	(No symbol) [0x00973954]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:40:08,581 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:40:08,581 [WARNING] price_checker.py:452 - ✗ cleaning_fee 未获取到
2024-11-15 15:40:08,581 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:40:08,581 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 15:40:08,581 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:40:08,581 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:40:08,581 [INFO] price_checker.py:457 - check_in: 17/01/2025
2024-11-15 15:40:08,581 [INFO] price_checker.py:457 - check_out: 18/01/2025
2024-11-15 15:40:08,581 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:40:08,581 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:40:08,581 [INFO] price_checker.py:457 - nightly_price: None
2024-11-15 15:40:08,581 [INFO] price_checker.py:457 - cleaning_fee: None
2024-11-15 15:40:08,581 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:40:08,582 [INFO] price_checker.py:457 - taxes: None
2024-11-15 15:40:08,582 [INFO] price_checker.py:457 - total: None
2024-11-15 15:40:08,582 [INFO] price_checker.py:559 - ✓ 成功获取 17/01/2025 的价格信息
2024-11-15 15:40:08,582 [INFO] price_checker.py:553 - [33/41] 处理日期: 18/01/2025
2024-11-15 15:40:08,582 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/716883705085875481
2024-11-15 15:40:08,582 [INFO] price_checker.py:255 - 入住日期: 18/01/2025
2024-11-15 15:40:13,705 [INFO] price_checker.py:271 - 开始检查日期 18/01/2025 的最小入住要求...
2024-11-15 15:40:13,708 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="18, Saturday, January 2025. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-18/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">18</div></td>
2024-11-15 15:40:13,718 [INFO] price_checker.py:158 - 找到日期: 18/01/2025
2024-11-15 15:40:13,718 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:40:16,252 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:40:23,757 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:40:24,856 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:40:24,862 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:40:24,862 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 15:40:24,863 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 15:40:24,864 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 15:40:24,864 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:40:24,864 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/716883705085875481?check_in=2025-01-18&check_out=2025-01-19&adults=3&children=0&infants=0
2024-11-15 15:40:26,275 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:40:29,976 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:40:29,979 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:40:31,989 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:40:31,989 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:40:36,281 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:40:42,044 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:40:42,044 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:40:46,322 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:40:52,098 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:40:52,098 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:40:56,354 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:41:02,123 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:41:02,123 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w ._11jcbg2
2024-11-15 15:41:06,382 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:41:12,167 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:41:12,167 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[contains(@class, '_wgmchy')]//span[contains(text(), '$') and contains(text(), 'NZD')]
2024-11-15 15:41:16,429 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:41:22,210 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:41:22,210 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:41:32,225 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 15:41:32,225 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:41:36,483 [WARNING] price_checker.py:443 - 尝试点击价格展开按钮失败: Message: no such element: Unable to locate element: {"method":"xpath","selector":"//button[contains(@class, '_12wl7g09')]"}
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00952BFE]
	(No symbol) [0x00952CDB]
	(No symbol) [0x0098EBD2]
	(No symbol) [0x00973954]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:41:36,484 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:41:36,484 [WARNING] price_checker.py:452 - ✗ cleaning_fee 未获取到
2024-11-15 15:41:36,484 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:41:36,484 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 15:41:36,484 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:41:36,484 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:41:36,484 [INFO] price_checker.py:457 - check_in: 04/01/2025
2024-11-15 15:41:36,484 [INFO] price_checker.py:457 - check_out: 05/01/2025
2024-11-15 15:41:36,484 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:41:36,484 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:41:36,484 [INFO] price_checker.py:457 - nightly_price: None
2024-11-15 15:41:36,484 [INFO] price_checker.py:457 - cleaning_fee: None
2024-11-15 15:41:36,485 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:41:36,485 [INFO] price_checker.py:457 - taxes: None
2024-11-15 15:41:36,485 [INFO] price_checker.py:457 - total: None
2024-11-15 15:41:36,485 [INFO] price_checker.py:559 - ✓ 成功获取 04/01/2025 的价格信息
2024-11-15 15:41:36,485 [INFO] price_checker.py:573 - 已完成 35/50 个日期的处理
2024-11-15 15:41:42,277 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:41:46,485 [INFO] price_checker.py:553 - [36/50] 处理日期: 05/01/2025
2024-11-15 15:41:46,486 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/49525472
2024-11-15 15:41:46,486 [INFO] price_checker.py:255 - 入住日期: 05/01/2025
2024-11-15 15:41:52,097 [INFO] price_checker.py:271 - 开始检查日期 05/01/2025 的最小入住要求...
2024-11-15 15:41:52,101 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_1mv3p4vt" role="button" aria-disabled="false" aria-label="5, Sunday, January 2025. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-05/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">5</div></td>
2024-11-15 15:41:52,111 [INFO] price_checker.py:158 - 找到日期: 05/01/2025
2024-11-15 15:41:52,111 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:41:52,283 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:42:02,126 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:42:02,294 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:42:03,232 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:42:03,237 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:42:03,237 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 15:42:03,239 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 15:42:03,239 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 15:42:03,239 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:42:03,239 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/49525472?check_in=2025-01-05&check_out=2025-01-06&adults=3&children=0&infants=0
2024-11-15 15:42:08,327 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:42:08,330 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:42:10,341 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:42:10,342 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:42:12,296 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:42:20,352 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:42:20,352 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:42:22,344 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:42:30,407 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:42:30,407 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:42:30,413 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 15:42:30,428 [INFO] price_checker.py:337 - 找到可见价格元素: $224 NZD 
night
$224 NZD per night
2024-11-15 15:42:30,433 [INFO] price_checker.py:350 - 找到每晚价格元素: $224 NZD 
night
$224 NZD per night
2024-11-15 15:42:30,433 [INFO] price_checker.py:356 - 成功解析折扣价格: $224 NZD
2024-11-15 15:42:30,433 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:42:30,439 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 15:42:30,942 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:42:30,949 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:42:30,956 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 15:42:30,956 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 15:42:30,956 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:42:30,962 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:42:30,967 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 15:42:30,967 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 15:42:30,967 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:42:32,385 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:42:41,008 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:42:42,426 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:42:51,052 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:42:51,059 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:42:51,065 [INFO] price_checker.py:403 - 找到价格元素: $41 NZD (HTML: <span class="_1k4xcdh">$41&nbsp;NZD</span>)
2024-11-15 15:42:51,065 [INFO] price_checker.py:416 - ✓ 成功设置税费: $41 NZD
2024-11-15 15:42:51,066 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:43:01,090 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:43:01,097 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:43:01,102 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span class="_j1kt73">$315&nbsp;NZD</span>)
2024-11-15 15:43:01,102 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:43:01,102 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:43:01,109 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 15:43:01,115 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$315&nbsp;NZD</span></span>)
2024-11-15 15:43:01,115 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:43:01,120 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span class="_j1kt73">$315&nbsp;NZD</span>)
2024-11-15 15:43:01,120 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:43:01,124 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 15:43:01,125 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 15:43:01,125 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:43:01,125 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 15:43:01,125 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:43:01,125 [INFO] price_checker.py:450 - ✓ taxes: $41 NZD
2024-11-15 15:43:01,125 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:43:01,125 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:43:01,125 [INFO] price_checker.py:457 - check_in: 05/01/2025
2024-11-15 15:43:01,125 [INFO] price_checker.py:457 - check_out: 06/01/2025
2024-11-15 15:43:01,125 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:43:01,125 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:43:01,125 [INFO] price_checker.py:457 - nightly_price: $224 NZD
2024-11-15 15:43:01,125 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 15:43:01,126 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:43:01,126 [INFO] price_checker.py:457 - taxes: $41 NZD
2024-11-15 15:43:01,126 [INFO] price_checker.py:457 - total: 
2024-11-15 15:43:01,126 [INFO] price_checker.py:559 - ✓ 成功获取 05/01/2025 的价格信息
2024-11-15 15:43:01,126 [INFO] price_checker.py:553 - [37/50] 处理日期: 09/01/2025
2024-11-15 15:43:01,126 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/49525472
2024-11-15 15:43:01,126 [INFO] price_checker.py:255 - 入住日期: 09/01/2025
2024-11-15 15:43:02,475 [WARNING] price_checker.py:443 - 尝试点击价格展开按钮失败: Message: no such element: Unable to locate element: {"method":"xpath","selector":"//button[contains(@class, '_12wl7g09')]"}
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00952BFE]
	(No symbol) [0x00952CDB]
	(No symbol) [0x0098EBD2]
	(No symbol) [0x00973954]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:43:02,476 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:43:02,476 [WARNING] price_checker.py:452 - ✗ cleaning_fee 未获取到
2024-11-15 15:43:02,476 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:43:02,476 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 15:43:02,476 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:43:02,476 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:43:02,476 [INFO] price_checker.py:457 - check_in: 18/01/2025
2024-11-15 15:43:02,476 [INFO] price_checker.py:457 - check_out: 19/01/2025
2024-11-15 15:43:02,476 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:43:02,477 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:43:02,477 [INFO] price_checker.py:457 - nightly_price: None
2024-11-15 15:43:02,477 [INFO] price_checker.py:457 - cleaning_fee: None
2024-11-15 15:43:02,477 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:43:02,477 [INFO] price_checker.py:457 - taxes: None
2024-11-15 15:43:02,477 [INFO] price_checker.py:457 - total: None
2024-11-15 15:43:02,477 [INFO] price_checker.py:559 - ✓ 成功获取 18/01/2025 的价格信息
2024-11-15 15:43:02,477 [INFO] price_checker.py:553 - [34/41] 处理日期: 24/01/2025
2024-11-15 15:43:02,477 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/716883705085875481
2024-11-15 15:43:02,477 [INFO] price_checker.py:255 - 入住日期: 24/01/2025
2024-11-15 15:43:06,484 [INFO] price_checker.py:271 - 开始检查日期 09/01/2025 的最小入住要求...
2024-11-15 15:43:06,487 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="9, Thursday, January 2025. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-09/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">9</div></td>
2024-11-15 15:43:06,497 [INFO] price_checker.py:158 - 找到日期: 09/01/2025
2024-11-15 15:43:06,497 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:43:07,605 [INFO] price_checker.py:271 - 开始检查日期 24/01/2025 的最小入住要求...
2024-11-15 15:43:07,611 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="24, Friday, January 2025. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-24/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">24</div></td>
2024-11-15 15:43:07,643 [INFO] price_checker.py:158 - 找到日期: 24/01/2025
2024-11-15 15:43:07,643 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:43:16,550 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:43:17,656 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:43:17,661 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:43:17,662 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 15:43:17,663 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 15:43:17,663 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 15:43:17,663 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:43:17,664 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/49525472?check_in=2025-01-09&check_out=2025-01-10&adults=3&children=0&infants=0
2024-11-15 15:43:17,711 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:43:18,832 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:43:18,837 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:43:18,837 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 15:43:18,838 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 15:43:18,839 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 15:43:18,839 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:43:18,839 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/716883705085875481?check_in=2025-01-24&check_out=2025-01-25&adults=3&children=0&infants=0
2024-11-15 15:43:22,769 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:43:22,771 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:43:23,929 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:43:23,933 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:43:24,783 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:43:24,783 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:43:25,944 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:43:25,944 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:43:34,798 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:43:34,799 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:43:35,980 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:43:35,980 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:43:44,838 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:43:44,838 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:43:44,844 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 15:43:44,859 [INFO] price_checker.py:337 - 找到可见价格元素: $224 NZD 
night
$224 NZD per night
2024-11-15 15:43:44,864 [INFO] price_checker.py:350 - 找到每晚价格元素: $224 NZD 
night
$224 NZD per night
2024-11-15 15:43:44,865 [INFO] price_checker.py:356 - 成功解析折扣价格: $224 NZD
2024-11-15 15:43:44,865 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:43:44,870 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 15:43:45,373 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:43:45,382 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:43:45,389 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 15:43:45,389 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 15:43:45,390 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:43:45,397 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:43:45,403 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 15:43:45,403 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 15:43:45,403 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:43:46,013 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:43:46,013 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:43:55,455 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:43:56,016 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:43:56,016 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w ._11jcbg2
2024-11-15 15:44:05,509 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:44:05,515 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:44:05,522 [INFO] price_checker.py:403 - 找到价格元素: $41 NZD (HTML: <span class="_1k4xcdh">$41&nbsp;NZD</span>)
2024-11-15 15:44:05,522 [INFO] price_checker.py:416 - ✓ 成功设置税费: $41 NZD
2024-11-15 15:44:05,522 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:44:06,064 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:44:06,064 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[contains(@class, '_wgmchy')]//span[contains(text(), '$') and contains(text(), 'NZD')]
2024-11-15 15:44:15,541 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:44:15,548 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:44:15,554 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span class="_j1kt73">$315&nbsp;NZD</span>)
2024-11-15 15:44:15,554 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:44:15,554 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:44:15,561 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 15:44:15,566 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$315&nbsp;NZD</span></span>)
2024-11-15 15:44:15,566 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:44:15,571 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span class="_j1kt73">$315&nbsp;NZD</span>)
2024-11-15 15:44:15,571 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:44:15,575 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 15:44:15,576 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 15:44:15,576 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:44:15,576 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 15:44:15,576 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:44:15,576 [INFO] price_checker.py:450 - ✓ taxes: $41 NZD
2024-11-15 15:44:15,576 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:44:15,576 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:44:15,576 [INFO] price_checker.py:457 - check_in: 09/01/2025
2024-11-15 15:44:15,576 [INFO] price_checker.py:457 - check_out: 10/01/2025
2024-11-15 15:44:15,576 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:44:15,576 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:44:15,576 [INFO] price_checker.py:457 - nightly_price: $224 NZD
2024-11-15 15:44:15,576 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 15:44:15,577 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:44:15,577 [INFO] price_checker.py:457 - taxes: $41 NZD
2024-11-15 15:44:15,577 [INFO] price_checker.py:457 - total: 
2024-11-15 15:44:15,577 [INFO] price_checker.py:559 - ✓ 成功获取 09/01/2025 的价格信息
2024-11-15 15:44:15,577 [INFO] price_checker.py:553 - [38/50] 处理日期: 10/01/2025
2024-11-15 15:44:15,577 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/49525472
2024-11-15 15:44:15,577 [INFO] price_checker.py:255 - 入住日期: 10/01/2025
2024-11-15 15:44:16,090 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:44:16,090 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:44:20,702 [INFO] price_checker.py:271 - 开始检查日期 10/01/2025 的最小入住要求...
2024-11-15 15:44:20,706 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="10, Friday, January 2025. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-10/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">10</div></td>
2024-11-15 15:44:20,715 [INFO] price_checker.py:158 - 找到日期: 10/01/2025
2024-11-15 15:44:20,715 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:44:26,144 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 15:44:26,144 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:44:30,745 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:44:31,849 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:44:31,854 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:44:31,854 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 15:44:31,855 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 15:44:31,856 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 15:44:31,856 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:44:31,856 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/49525472?check_in=2025-01-10&check_out=2025-01-11&adults=3&children=0&infants=0
2024-11-15 15:44:36,145 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:44:36,943 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:44:36,946 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:44:38,959 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:44:38,959 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:44:46,162 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:44:48,962 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:44:48,962 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:44:56,178 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:44:58,984 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:44:58,984 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:45:06,213 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:45:09,005 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:45:09,005 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w ._11jcbg2
2024-11-15 15:45:16,231 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:45:19,038 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:45:19,038 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[contains(@class, '_wgmchy')]//span[contains(text(), '$') and contains(text(), 'NZD')]
2024-11-15 15:45:26,254 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:45:29,055 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:45:29,055 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:45:36,300 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:45:39,098 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 15:45:39,098 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:45:49,122 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:45:56,350 [WARNING] price_checker.py:443 - 尝试点击价格展开按钮失败: Message: no such element: Unable to locate element: {"method":"xpath","selector":"//button[contains(@class, '_12wl7g09')]"}
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00952BFE]
	(No symbol) [0x00952CDB]
	(No symbol) [0x0098EBD2]
	(No symbol) [0x00973954]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:45:56,350 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:45:56,350 [WARNING] price_checker.py:452 - ✗ cleaning_fee 未获取到
2024-11-15 15:45:56,350 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:45:56,350 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 15:45:56,350 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:45:56,350 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:45:56,351 [INFO] price_checker.py:457 - check_in: 24/01/2025
2024-11-15 15:45:56,351 [INFO] price_checker.py:457 - check_out: 25/01/2025
2024-11-15 15:45:56,351 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:45:56,351 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:45:56,351 [INFO] price_checker.py:457 - nightly_price: None
2024-11-15 15:45:56,351 [INFO] price_checker.py:457 - cleaning_fee: None
2024-11-15 15:45:56,351 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:45:56,351 [INFO] price_checker.py:457 - taxes: None
2024-11-15 15:45:56,351 [INFO] price_checker.py:457 - total: None
2024-11-15 15:45:56,351 [INFO] price_checker.py:559 - ✓ 成功获取 24/01/2025 的价格信息
2024-11-15 15:45:56,351 [INFO] price_checker.py:553 - [35/41] 处理日期: 25/01/2025
2024-11-15 15:45:56,351 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/716883705085875481
2024-11-15 15:45:56,352 [INFO] price_checker.py:255 - 入住日期: 25/01/2025
2024-11-15 15:45:59,142 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:46:01,475 [INFO] price_checker.py:271 - 开始检查日期 25/01/2025 的最小入住要求...
2024-11-15 15:46:01,479 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="25, Saturday, January 2025. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-25/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">25</div></td>
2024-11-15 15:46:01,489 [INFO] price_checker.py:158 - 找到日期: 25/01/2025
2024-11-15 15:46:01,489 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:46:09,159 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:46:11,525 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:46:12,641 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:46:12,646 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:46:12,646 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 15:46:12,647 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 15:46:12,647 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 15:46:12,647 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:46:12,648 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/716883705085875481?check_in=2025-01-25&check_out=2025-01-26&adults=3&children=0&infants=0
2024-11-15 15:46:17,765 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:46:17,768 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:46:19,185 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:46:19,781 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:46:19,781 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:46:29,227 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:46:29,829 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:46:29,829 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:46:39,263 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:46:39,864 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:46:39,864 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:46:49,313 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:46:49,871 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:46:49,871 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w ._11jcbg2
2024-11-15 15:46:59,906 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:46:59,906 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[contains(@class, '_wgmchy')]//span[contains(text(), '$') and contains(text(), 'NZD')]
2024-11-15 15:47:09,383 [WARNING] price_checker.py:443 - 尝试点击价格展开按钮失败: Message: no such element: Unable to locate element: {"method":"xpath","selector":"//button[contains(@class, '_12wl7g09')]"}
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00952BFE]
	(No symbol) [0x00952CDB]
	(No symbol) [0x0098EBD2]
	(No symbol) [0x00973954]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:47:09,384 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:47:09,384 [WARNING] price_checker.py:452 - ✗ cleaning_fee 未获取到
2024-11-15 15:47:09,384 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:47:09,384 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 15:47:09,384 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:47:09,384 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:47:09,384 [INFO] price_checker.py:457 - check_in: 10/01/2025
2024-11-15 15:47:09,384 [INFO] price_checker.py:457 - check_out: 11/01/2025
2024-11-15 15:47:09,384 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:47:09,384 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:47:09,385 [INFO] price_checker.py:457 - nightly_price: None
2024-11-15 15:47:09,385 [INFO] price_checker.py:457 - cleaning_fee: None
2024-11-15 15:47:09,385 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:47:09,385 [INFO] price_checker.py:457 - taxes: None
2024-11-15 15:47:09,385 [INFO] price_checker.py:457 - total: None
2024-11-15 15:47:09,385 [INFO] price_checker.py:559 - ✓ 成功获取 10/01/2025 的价格信息
2024-11-15 15:47:09,385 [INFO] price_checker.py:553 - [39/50] 处理日期: 11/01/2025
2024-11-15 15:47:09,385 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/49525472
2024-11-15 15:47:09,385 [INFO] price_checker.py:255 - 入住日期: 11/01/2025
2024-11-15 15:47:09,935 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:47:09,935 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:47:14,510 [INFO] price_checker.py:271 - 开始检查日期 11/01/2025 的最小入住要求...
2024-11-15 15:47:14,513 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="11, Saturday, January 2025. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-11/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">11</div></td>
2024-11-15 15:47:14,523 [INFO] price_checker.py:158 - 找到日期: 11/01/2025
2024-11-15 15:47:14,524 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:47:19,989 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 15:47:19,989 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:47:24,553 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:47:25,654 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:47:25,659 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:47:25,659 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 15:47:25,660 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 15:47:25,661 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 15:47:25,661 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:47:25,661 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/49525472?check_in=2025-01-11&check_out=2025-01-12&adults=3&children=0&infants=0
2024-11-15 15:47:30,045 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:47:30,748 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:47:30,751 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:47:32,763 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:47:32,763 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:47:40,069 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:47:42,821 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:47:42,821 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:47:50,085 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:47:52,837 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:47:52,837 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:48:00,093 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:48:02,852 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:48:02,852 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w ._11jcbg2
2024-11-15 15:48:10,136 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:48:12,886 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:48:12,886 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[contains(@class, '_wgmchy')]//span[contains(text(), '$') and contains(text(), 'NZD')]
2024-11-15 15:48:20,166 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:48:22,920 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:48:22,920 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:48:30,185 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:48:32,945 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 15:48:32,945 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:48:42,976 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:48:50,269 [WARNING] price_checker.py:443 - 尝试点击价格展开按钮失败: Message: no such element: Unable to locate element: {"method":"xpath","selector":"//button[contains(@class, '_12wl7g09')]"}
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00952BFE]
	(No symbol) [0x00952CDB]
	(No symbol) [0x0098EBD2]
	(No symbol) [0x00973954]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:48:50,270 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:48:50,270 [WARNING] price_checker.py:452 - ✗ cleaning_fee 未获取到
2024-11-15 15:48:50,270 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:48:50,270 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 15:48:50,270 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:48:50,270 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:48:50,271 [INFO] price_checker.py:457 - check_in: 25/01/2025
2024-11-15 15:48:50,271 [INFO] price_checker.py:457 - check_out: 26/01/2025
2024-11-15 15:48:50,271 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:48:50,271 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:48:50,271 [INFO] price_checker.py:457 - nightly_price: None
2024-11-15 15:48:50,271 [INFO] price_checker.py:457 - cleaning_fee: None
2024-11-15 15:48:50,271 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:48:50,271 [INFO] price_checker.py:457 - taxes: None
2024-11-15 15:48:50,271 [INFO] price_checker.py:457 - total: None
2024-11-15 15:48:50,271 [INFO] price_checker.py:559 - ✓ 成功获取 25/01/2025 的价格信息
2024-11-15 15:48:50,272 [INFO] price_checker.py:573 - 已完成 35/41 个日期的处理
2024-11-15 15:48:53,014 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:49:00,272 [INFO] price_checker.py:553 - [36/41] 处理日期: 26/01/2025
2024-11-15 15:49:00,272 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/716883705085875481
2024-11-15 15:49:00,272 [INFO] price_checker.py:255 - 入住日期: 26/01/2025
2024-11-15 15:49:03,021 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:49:05,396 [INFO] price_checker.py:271 - 开始检查日期 26/01/2025 的最小入住要求...
2024-11-15 15:49:05,400 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_1mv3p4vt" role="button" aria-disabled="false" aria-label="26, Sunday, January 2025. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-26/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">26</div></td>
2024-11-15 15:49:05,409 [INFO] price_checker.py:158 - 找到日期: 26/01/2025
2024-11-15 15:49:05,409 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:49:13,081 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:49:15,440 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:49:16,552 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:49:16,557 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:49:16,558 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 15:49:16,559 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 15:49:16,559 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 15:49:16,559 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:49:16,559 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/716883705085875481?check_in=2025-01-26&check_out=2025-01-27&adults=3&children=0&infants=0
2024-11-15 15:49:21,648 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:49:21,651 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:49:23,137 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:49:23,662 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:49:23,662 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:49:33,167 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:49:33,709 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:49:33,709 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:49:43,198 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:49:43,743 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:49:43,743 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:49:53,780 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:49:53,780 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w ._11jcbg2
2024-11-15 15:50:03,279 [WARNING] price_checker.py:443 - 尝试点击价格展开按钮失败: Message: no such element: Unable to locate element: {"method":"xpath","selector":"//button[contains(@class, '_12wl7g09')]"}
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00952BFE]
	(No symbol) [0x00952CDB]
	(No symbol) [0x0098EBD2]
	(No symbol) [0x00973954]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:50:03,279 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:50:03,279 [WARNING] price_checker.py:452 - ✗ cleaning_fee 未获取到
2024-11-15 15:50:03,279 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:50:03,279 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 15:50:03,279 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:50:03,279 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:50:03,279 [INFO] price_checker.py:457 - check_in: 11/01/2025
2024-11-15 15:50:03,280 [INFO] price_checker.py:457 - check_out: 12/01/2025
2024-11-15 15:50:03,280 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:50:03,280 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:50:03,280 [INFO] price_checker.py:457 - nightly_price: None
2024-11-15 15:50:03,280 [INFO] price_checker.py:457 - cleaning_fee: None
2024-11-15 15:50:03,280 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:50:03,280 [INFO] price_checker.py:457 - taxes: None
2024-11-15 15:50:03,280 [INFO] price_checker.py:457 - total: None
2024-11-15 15:50:03,280 [INFO] price_checker.py:559 - ✓ 成功获取 11/01/2025 的价格信息
2024-11-15 15:50:03,280 [INFO] price_checker.py:553 - [40/50] 处理日期: 12/01/2025
2024-11-15 15:50:03,280 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/49525472
2024-11-15 15:50:03,280 [INFO] price_checker.py:255 - 入住日期: 12/01/2025
2024-11-15 15:50:03,814 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:50:03,814 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[contains(@class, '_wgmchy')]//span[contains(text(), '$') and contains(text(), 'NZD')]
2024-11-15 15:50:08,415 [INFO] price_checker.py:271 - 开始检查日期 12/01/2025 的最小入住要求...
2024-11-15 15:50:08,419 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_1mv3p4vt" role="button" aria-disabled="false" aria-label="12, Sunday, January 2025. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-12/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">12</div></td>
2024-11-15 15:50:08,429 [INFO] price_checker.py:158 - 找到日期: 12/01/2025
2024-11-15 15:50:08,429 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:50:13,852 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:50:13,853 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:50:18,438 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:50:19,550 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:50:19,555 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:50:19,555 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 15:50:19,556 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 15:50:19,557 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 15:50:19,557 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:50:19,557 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/49525472?check_in=2025-01-12&check_out=2025-01-13&adults=3&children=0&infants=0
2024-11-15 15:50:23,896 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 15:50:23,896 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:50:24,650 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:50:24,653 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:50:26,664 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:50:26,664 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:50:33,906 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:50:36,687 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:50:36,687 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:50:43,941 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:50:46,727 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:50:46,728 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:50:46,733 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 15:50:46,748 [INFO] price_checker.py:337 - 找到可见价格元素: $224 NZD 
night
$224 NZD per night
2024-11-15 15:50:46,754 [INFO] price_checker.py:350 - 找到每晚价格元素: $224 NZD 
night
$224 NZD per night
2024-11-15 15:50:46,754 [INFO] price_checker.py:356 - 成功解析折扣价格: $224 NZD
2024-11-15 15:50:46,754 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:50:46,760 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 15:50:47,263 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:50:47,271 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:50:47,278 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 15:50:47,278 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 15:50:47,278 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:50:47,285 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:50:47,290 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 15:50:47,290 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 15:50:47,290 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:50:53,967 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:50:57,323 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:51:03,993 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:51:07,342 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:51:07,349 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:51:07,355 [INFO] price_checker.py:403 - 找到价格元素: $41 NZD (HTML: <span class="_1k4xcdh">$41&nbsp;NZD</span>)
2024-11-15 15:51:07,355 [INFO] price_checker.py:416 - ✓ 成功设置税费: $41 NZD
2024-11-15 15:51:07,355 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:51:14,006 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:51:17,378 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:51:17,385 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:51:17,390 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span class="_j1kt73">$315&nbsp;NZD</span>)
2024-11-15 15:51:17,391 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:51:17,391 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:51:17,398 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 15:51:17,403 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$315&nbsp;NZD</span></span>)
2024-11-15 15:51:17,403 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:51:17,408 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span class="_j1kt73">$315&nbsp;NZD</span>)
2024-11-15 15:51:17,408 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:51:17,413 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 15:51:17,413 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 15:51:17,413 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:51:17,413 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 15:51:17,413 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:51:17,414 [INFO] price_checker.py:450 - ✓ taxes: $41 NZD
2024-11-15 15:51:17,414 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:51:17,414 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:51:17,414 [INFO] price_checker.py:457 - check_in: 12/01/2025
2024-11-15 15:51:17,414 [INFO] price_checker.py:457 - check_out: 13/01/2025
2024-11-15 15:51:17,414 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:51:17,414 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:51:17,414 [INFO] price_checker.py:457 - nightly_price: $224 NZD
2024-11-15 15:51:17,414 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 15:51:17,414 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:51:17,414 [INFO] price_checker.py:457 - taxes: $41 NZD
2024-11-15 15:51:17,414 [INFO] price_checker.py:457 - total: 
2024-11-15 15:51:17,414 [INFO] price_checker.py:559 - ✓ 成功获取 12/01/2025 的价格信息
2024-11-15 15:51:17,414 [INFO] price_checker.py:573 - 已完成 40/50 个日期的处理
2024-11-15 15:51:24,043 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:51:27,415 [INFO] price_checker.py:553 - [41/50] 处理日期: 13/01/2025
2024-11-15 15:51:27,415 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/49525472
2024-11-15 15:51:27,415 [INFO] price_checker.py:255 - 入住日期: 13/01/2025
2024-11-15 15:51:32,540 [INFO] price_checker.py:271 - 开始检查日期 13/01/2025 的最小入住要求...
2024-11-15 15:51:32,543 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_sl5yz7r" role="button" aria-disabled="false" aria-label="13, Monday, January 2025. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-13/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">13</div></td>
2024-11-15 15:51:32,559 [INFO] price_checker.py:158 - 找到日期: 13/01/2025
2024-11-15 15:51:32,559 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:51:34,062 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:51:42,605 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:51:43,705 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:51:43,710 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:51:43,710 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 15:51:43,712 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 15:51:43,712 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 15:51:43,712 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:51:43,712 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/49525472?check_in=2025-01-13&check_out=2025-01-14&adults=3&children=0&infants=0
2024-11-15 15:51:48,803 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:51:48,806 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:51:50,818 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:51:50,818 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:51:54,083 [WARNING] price_checker.py:443 - 尝试点击价格展开按钮失败: Message: no such element: Unable to locate element: {"method":"xpath","selector":"//button[contains(@class, '_12wl7g09')]"}
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00952BFE]
	(No symbol) [0x00952CDB]
	(No symbol) [0x0098EBD2]
	(No symbol) [0x00973954]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:51:54,084 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:51:54,084 [WARNING] price_checker.py:452 - ✗ cleaning_fee 未获取到
2024-11-15 15:51:54,084 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:51:54,084 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 15:51:54,084 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:51:54,084 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:51:54,084 [INFO] price_checker.py:457 - check_in: 26/01/2025
2024-11-15 15:51:54,084 [INFO] price_checker.py:457 - check_out: 27/01/2025
2024-11-15 15:51:54,084 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:51:54,084 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:51:54,085 [INFO] price_checker.py:457 - nightly_price: None
2024-11-15 15:51:54,085 [INFO] price_checker.py:457 - cleaning_fee: None
2024-11-15 15:51:54,085 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:51:54,085 [INFO] price_checker.py:457 - taxes: None
2024-11-15 15:51:54,085 [INFO] price_checker.py:457 - total: None
2024-11-15 15:51:54,085 [INFO] price_checker.py:559 - ✓ 成功获取 26/01/2025 的价格信息
2024-11-15 15:51:54,085 [INFO] price_checker.py:553 - [37/41] 处理日期: 27/01/2025
2024-11-15 15:51:54,085 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/716883705085875481
2024-11-15 15:51:54,085 [INFO] price_checker.py:255 - 入住日期: 27/01/2025
2024-11-15 15:51:59,210 [INFO] price_checker.py:271 - 开始检查日期 27/01/2025 的最小入住要求...
2024-11-15 15:51:59,214 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_sl5yz7r" role="button" aria-disabled="false" aria-label="27, Monday, January 2025. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-27/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">27</div></td>
2024-11-15 15:51:59,223 [INFO] price_checker.py:158 - 找到日期: 27/01/2025
2024-11-15 15:51:59,223 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:52:00,842 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:52:00,842 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:52:09,258 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:52:10,387 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:52:10,392 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:52:10,392 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 15:52:10,393 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 15:52:10,393 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 15:52:10,393 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:52:10,393 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/716883705085875481?check_in=2025-01-27&check_out=2025-01-28&adults=3&children=0&infants=0
2024-11-15 15:52:10,868 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:52:10,868 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:52:10,874 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 15:52:10,888 [INFO] price_checker.py:337 - 找到可见价格元素: $224 NZD 
night
$224 NZD per night
2024-11-15 15:52:10,894 [INFO] price_checker.py:350 - 找到每晚价格元素: $224 NZD 
night
$224 NZD per night
2024-11-15 15:52:10,894 [INFO] price_checker.py:356 - 成功解析折扣价格: $224 NZD
2024-11-15 15:52:10,894 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:52:10,900 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 15:52:11,404 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:52:11,412 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:52:11,419 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 15:52:11,419 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 15:52:11,419 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:52:11,426 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:52:11,431 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 15:52:11,431 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 15:52:11,431 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:52:15,481 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:52:15,484 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:52:17,495 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:52:17,496 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:52:21,454 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:52:27,533 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:52:27,533 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:52:31,485 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:52:31,492 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:52:31,498 [INFO] price_checker.py:403 - 找到价格元素: $41 NZD (HTML: <span class="_1k4xcdh">$41&nbsp;NZD</span>)
2024-11-15 15:52:31,498 [INFO] price_checker.py:416 - ✓ 成功设置税费: $41 NZD
2024-11-15 15:52:31,498 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:52:37,566 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:52:37,567 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:52:41,522 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:52:41,529 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:52:41,534 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span class="_j1kt73">$315&nbsp;NZD</span>)
2024-11-15 15:52:41,534 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:52:41,534 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:52:41,541 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 15:52:41,545 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$315&nbsp;NZD</span></span>)
2024-11-15 15:52:41,546 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:52:41,550 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span class="_j1kt73">$315&nbsp;NZD</span>)
2024-11-15 15:52:41,550 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:52:41,555 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 15:52:41,555 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 15:52:41,555 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:52:41,555 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 15:52:41,555 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:52:41,555 [INFO] price_checker.py:450 - ✓ taxes: $41 NZD
2024-11-15 15:52:41,555 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:52:41,556 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:52:41,556 [INFO] price_checker.py:457 - check_in: 13/01/2025
2024-11-15 15:52:41,556 [INFO] price_checker.py:457 - check_out: 14/01/2025
2024-11-15 15:52:41,556 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:52:41,556 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:52:41,556 [INFO] price_checker.py:457 - nightly_price: $224 NZD
2024-11-15 15:52:41,556 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 15:52:41,556 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:52:41,556 [INFO] price_checker.py:457 - taxes: $41 NZD
2024-11-15 15:52:41,556 [INFO] price_checker.py:457 - total: 
2024-11-15 15:52:41,556 [INFO] price_checker.py:559 - ✓ 成功获取 13/01/2025 的价格信息
2024-11-15 15:52:41,556 [INFO] price_checker.py:553 - [42/50] 处理日期: 14/01/2025
2024-11-15 15:52:41,556 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/49525472
2024-11-15 15:52:41,557 [INFO] price_checker.py:255 - 入住日期: 14/01/2025
2024-11-15 15:52:46,682 [INFO] price_checker.py:271 - 开始检查日期 14/01/2025 的最小入住要求...
2024-11-15 15:52:46,685 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="14, Tuesday, January 2025. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-14/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">14</div></td>
2024-11-15 15:52:46,695 [INFO] price_checker.py:158 - 找到日期: 14/01/2025
2024-11-15 15:52:46,695 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:52:47,616 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:52:47,616 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w ._11jcbg2
2024-11-15 15:52:56,701 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:52:57,654 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:52:57,654 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[contains(@class, '_wgmchy')]//span[contains(text(), '$') and contains(text(), 'NZD')]
2024-11-15 15:52:57,799 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:52:57,804 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:52:57,805 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 15:52:57,806 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 15:52:57,806 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 15:52:57,806 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:52:57,806 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/49525472?check_in=2025-01-14&check_out=2025-01-15&adults=3&children=0&infants=0
2024-11-15 15:53:02,895 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:53:02,898 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:53:04,909 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:53:04,909 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:53:07,720 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:53:07,720 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:53:14,943 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:53:14,943 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:53:17,766 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 15:53:17,766 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:53:24,973 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:53:24,973 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:53:24,979 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 15:53:24,993 [INFO] price_checker.py:337 - 找到可见价格元素: $224 NZD 
night
$224 NZD per night
2024-11-15 15:53:24,999 [INFO] price_checker.py:350 - 找到每晚价格元素: $224 NZD 
night
$224 NZD per night
2024-11-15 15:53:24,999 [INFO] price_checker.py:356 - 成功解析折扣价格: $224 NZD
2024-11-15 15:53:24,999 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:53:25,005 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 15:53:25,508 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:53:25,515 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:53:25,521 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 15:53:25,521 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 15:53:25,521 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:53:25,527 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:53:25,533 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 15:53:25,533 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 15:53:25,533 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:53:27,785 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:53:35,568 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:53:37,813 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:53:45,604 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:53:45,611 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:53:45,618 [INFO] price_checker.py:403 - 找到价格元素: $41 NZD (HTML: <span class="_1k4xcdh">$41&nbsp;NZD</span>)
2024-11-15 15:53:45,618 [INFO] price_checker.py:416 - ✓ 成功设置税费: $41 NZD
2024-11-15 15:53:45,618 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:53:47,855 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:53:55,664 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:53:55,671 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:53:55,681 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span class="_j1kt73">$315&nbsp;NZD</span>)
2024-11-15 15:53:55,681 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:53:55,681 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:53:55,689 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 15:53:55,699 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$315&nbsp;NZD</span></span>)
2024-11-15 15:53:55,700 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:53:55,705 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span class="_j1kt73">$315&nbsp;NZD</span>)
2024-11-15 15:53:55,705 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:53:55,711 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 15:53:55,711 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 15:53:55,711 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:53:55,711 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 15:53:55,712 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:53:55,712 [INFO] price_checker.py:450 - ✓ taxes: $41 NZD
2024-11-15 15:53:55,712 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:53:55,712 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:53:55,712 [INFO] price_checker.py:457 - check_in: 14/01/2025
2024-11-15 15:53:55,712 [INFO] price_checker.py:457 - check_out: 15/01/2025
2024-11-15 15:53:55,712 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:53:55,712 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:53:55,712 [INFO] price_checker.py:457 - nightly_price: $224 NZD
2024-11-15 15:53:55,712 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 15:53:55,712 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:53:55,712 [INFO] price_checker.py:457 - taxes: $41 NZD
2024-11-15 15:53:55,712 [INFO] price_checker.py:457 - total: 
2024-11-15 15:53:55,713 [INFO] price_checker.py:559 - ✓ 成功获取 14/01/2025 的价格信息
2024-11-15 15:53:55,713 [INFO] price_checker.py:553 - [43/50] 处理日期: 15/01/2025
2024-11-15 15:53:55,713 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/49525472
2024-11-15 15:53:55,713 [INFO] price_checker.py:255 - 入住日期: 15/01/2025
2024-11-15 15:53:57,872 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:54:00,847 [INFO] price_checker.py:271 - 开始检查日期 15/01/2025 的最小入住要求...
2024-11-15 15:54:00,850 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="15, Wednesday, January 2025. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-15/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">15</div></td>
2024-11-15 15:54:00,859 [INFO] price_checker.py:158 - 找到日期: 15/01/2025
2024-11-15 15:54:00,859 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:54:07,875 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:54:10,872 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:54:11,973 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:54:11,978 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:54:11,978 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 15:54:11,980 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 15:54:11,980 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 15:54:11,980 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:54:11,980 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/49525472?check_in=2025-01-15&check_out=2025-01-16&adults=3&children=0&infants=0
2024-11-15 15:54:17,085 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:54:17,089 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:54:17,879 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:54:19,099 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:54:19,099 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:54:27,902 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:54:29,142 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:54:29,142 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:54:39,196 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:54:39,196 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:54:39,202 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 15:54:39,216 [INFO] price_checker.py:337 - 找到可见价格元素: $224 NZD 
night
$224 NZD per night
2024-11-15 15:54:39,222 [INFO] price_checker.py:350 - 找到每晚价格元素: $224 NZD 
night
$224 NZD per night
2024-11-15 15:54:39,222 [INFO] price_checker.py:356 - 成功解析折扣价格: $224 NZD
2024-11-15 15:54:39,222 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:54:39,228 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 15:54:39,731 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:54:39,738 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:54:39,745 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 15:54:39,745 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 15:54:39,745 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:54:39,753 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:54:39,758 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 15:54:39,758 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 15:54:39,758 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:54:47,999 [WARNING] price_checker.py:443 - 尝试点击价格展开按钮失败: Message: no such element: Unable to locate element: {"method":"xpath","selector":"//button[contains(@class, '_12wl7g09')]"}
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00952BFE]
	(No symbol) [0x00952CDB]
	(No symbol) [0x0098EBD2]
	(No symbol) [0x00973954]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:54:48,000 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:54:48,000 [WARNING] price_checker.py:452 - ✗ cleaning_fee 未获取到
2024-11-15 15:54:48,000 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:54:48,000 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 15:54:48,000 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:54:48,000 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:54:48,000 [INFO] price_checker.py:457 - check_in: 27/01/2025
2024-11-15 15:54:48,000 [INFO] price_checker.py:457 - check_out: 28/01/2025
2024-11-15 15:54:48,000 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:54:48,000 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:54:48,000 [INFO] price_checker.py:457 - nightly_price: None
2024-11-15 15:54:48,000 [INFO] price_checker.py:457 - cleaning_fee: None
2024-11-15 15:54:48,000 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:54:48,001 [INFO] price_checker.py:457 - taxes: None
2024-11-15 15:54:48,001 [INFO] price_checker.py:457 - total: None
2024-11-15 15:54:48,001 [INFO] price_checker.py:559 - ✓ 成功获取 27/01/2025 的价格信息
2024-11-15 15:54:48,001 [INFO] price_checker.py:553 - [38/41] 处理日期: 28/01/2025
2024-11-15 15:54:48,001 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/716883705085875481
2024-11-15 15:54:48,001 [INFO] price_checker.py:255 - 入住日期: 28/01/2025
2024-11-15 15:54:49,809 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:54:53,611 [INFO] price_checker.py:271 - 开始检查日期 28/01/2025 的最小入住要求...
2024-11-15 15:54:53,615 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="28, Tuesday, January 2025. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-28/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">28</div></td>
2024-11-15 15:54:53,625 [INFO] price_checker.py:158 - 找到日期: 28/01/2025
2024-11-15 15:54:53,625 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:54:59,814 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:54:59,821 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:54:59,827 [INFO] price_checker.py:403 - 找到价格元素: $41 NZD (HTML: <span class="_1k4xcdh">$41&nbsp;NZD</span>)
2024-11-15 15:54:59,827 [INFO] price_checker.py:416 - ✓ 成功设置税费: $41 NZD
2024-11-15 15:54:59,827 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:55:03,657 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:55:04,767 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:55:04,772 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:55:04,773 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 15:55:04,774 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 15:55:04,774 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 15:55:04,774 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:55:04,774 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/716883705085875481?check_in=2025-01-28&check_out=2025-01-29&adults=3&children=0&infants=0
2024-11-15 15:55:09,871 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:55:09,872 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:55:09,875 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:55:09,878 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:55:09,883 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span class="_j1kt73">$315&nbsp;NZD</span>)
2024-11-15 15:55:09,883 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:55:09,884 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:55:09,890 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 15:55:09,895 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$315&nbsp;NZD</span></span>)
2024-11-15 15:55:09,896 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:55:09,901 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span class="_j1kt73">$315&nbsp;NZD</span>)
2024-11-15 15:55:09,901 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:55:09,906 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 15:55:09,906 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 15:55:09,906 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:55:09,906 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 15:55:09,906 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:55:09,907 [INFO] price_checker.py:450 - ✓ taxes: $41 NZD
2024-11-15 15:55:09,907 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:55:09,907 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:55:09,907 [INFO] price_checker.py:457 - check_in: 15/01/2025
2024-11-15 15:55:09,907 [INFO] price_checker.py:457 - check_out: 16/01/2025
2024-11-15 15:55:09,907 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:55:09,907 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:55:09,907 [INFO] price_checker.py:457 - nightly_price: $224 NZD
2024-11-15 15:55:09,907 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 15:55:09,907 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:55:09,907 [INFO] price_checker.py:457 - taxes: $41 NZD
2024-11-15 15:55:09,907 [INFO] price_checker.py:457 - total: 
2024-11-15 15:55:09,907 [INFO] price_checker.py:559 - ✓ 成功获取 15/01/2025 的价格信息
2024-11-15 15:55:09,907 [INFO] price_checker.py:553 - [44/50] 处理日期: 16/01/2025
2024-11-15 15:55:09,908 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/49525472
2024-11-15 15:55:09,908 [INFO] price_checker.py:255 - 入住日期: 16/01/2025
2024-11-15 15:55:11,886 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:55:11,887 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:55:15,032 [INFO] price_checker.py:271 - 开始检查日期 16/01/2025 的最小入住要求...
2024-11-15 15:55:15,035 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="16, Thursday, January 2025. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-16/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">16</div></td>
2024-11-15 15:55:15,044 [INFO] price_checker.py:158 - 找到日期: 16/01/2025
2024-11-15 15:55:15,044 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:55:21,923 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:55:21,923 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:55:25,063 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:55:26,171 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:55:26,176 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:55:26,177 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 15:55:26,178 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 15:55:26,178 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 15:55:26,178 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:55:26,178 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/49525472?check_in=2025-01-16&check_out=2025-01-17&adults=3&children=0&infants=0
2024-11-15 15:55:31,274 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:55:31,277 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:55:31,985 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:55:31,985 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:55:33,288 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:55:33,288 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:55:42,016 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:55:42,016 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w ._11jcbg2
2024-11-15 15:55:43,339 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:55:43,339 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:55:52,056 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:55:52,056 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[contains(@class, '_wgmchy')]//span[contains(text(), '$') and contains(text(), 'NZD')]
2024-11-15 15:55:53,375 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:55:53,376 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:55:53,382 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 15:55:53,399 [INFO] price_checker.py:337 - 找到可见价格元素: $224 NZD 
night
$224 NZD per night
2024-11-15 15:55:53,405 [INFO] price_checker.py:350 - 找到每晚价格元素: $224 NZD 
night
$224 NZD per night
2024-11-15 15:55:53,405 [INFO] price_checker.py:356 - 成功解析折扣价格: $224 NZD
2024-11-15 15:55:53,405 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:55:53,411 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 15:55:53,913 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:55:53,920 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:55:53,926 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 15:55:53,926 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 15:55:53,926 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:55:53,933 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:55:53,937 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 15:55:53,937 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 15:55:53,937 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:56:02,097 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:56:02,097 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:56:03,988 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:56:12,129 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 15:56:12,129 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:56:14,026 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:56:14,033 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:56:14,039 [INFO] price_checker.py:403 - 找到价格元素: $41 NZD (HTML: <span class="_1k4xcdh">$41&nbsp;NZD</span>)
2024-11-15 15:56:14,039 [INFO] price_checker.py:416 - ✓ 成功设置税费: $41 NZD
2024-11-15 15:56:14,039 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:56:22,190 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:56:24,090 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:56:24,096 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:56:24,101 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span class="_j1kt73">$315&nbsp;NZD</span>)
2024-11-15 15:56:24,102 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:56:24,102 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:56:24,108 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 15:56:24,113 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$315&nbsp;NZD</span></span>)
2024-11-15 15:56:24,113 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:56:24,118 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span class="_j1kt73">$315&nbsp;NZD</span>)
2024-11-15 15:56:24,118 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:56:24,123 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 15:56:24,123 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 15:56:24,123 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:56:24,123 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 15:56:24,123 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:56:24,123 [INFO] price_checker.py:450 - ✓ taxes: $41 NZD
2024-11-15 15:56:24,123 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:56:24,123 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:56:24,123 [INFO] price_checker.py:457 - check_in: 16/01/2025
2024-11-15 15:56:24,123 [INFO] price_checker.py:457 - check_out: 17/01/2025
2024-11-15 15:56:24,123 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:56:24,123 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:56:24,123 [INFO] price_checker.py:457 - nightly_price: $224 NZD
2024-11-15 15:56:24,124 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 15:56:24,124 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:56:24,124 [INFO] price_checker.py:457 - taxes: $41 NZD
2024-11-15 15:56:24,124 [INFO] price_checker.py:457 - total: 
2024-11-15 15:56:24,124 [INFO] price_checker.py:559 - ✓ 成功获取 16/01/2025 的价格信息
2024-11-15 15:56:24,124 [INFO] price_checker.py:553 - [45/50] 处理日期: 22/01/2025
2024-11-15 15:56:24,124 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/49525472
2024-11-15 15:56:24,124 [INFO] price_checker.py:255 - 入住日期: 22/01/2025
2024-11-15 15:56:29,243 [INFO] price_checker.py:271 - 开始检查日期 22/01/2025 的最小入住要求...
2024-11-15 15:56:29,246 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="22, Wednesday, January 2025. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-22/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">22</div></td>
2024-11-15 15:56:29,273 [INFO] price_checker.py:158 - 找到日期: 22/01/2025
2024-11-15 15:56:29,273 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:56:32,193 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:56:39,311 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:56:40,420 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:56:40,426 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:56:40,426 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 15:56:40,427 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 15:56:40,428 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 15:56:40,428 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:56:40,428 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/49525472?check_in=2025-01-22&check_out=2025-01-23&adults=3&children=0&infants=0
2024-11-15 15:56:42,223 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:56:45,557 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:56:45,561 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:56:47,572 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:56:47,572 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:56:52,258 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:56:57,612 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:56:57,612 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:57:02,293 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:57:07,665 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:57:07,665 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:57:07,671 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 15:57:07,686 [INFO] price_checker.py:337 - 找到可见价格元素: $224 NZD 
night
$224 NZD per night
2024-11-15 15:57:07,691 [INFO] price_checker.py:350 - 找到每晚价格元素: $224 NZD 
night
$224 NZD per night
2024-11-15 15:57:07,691 [INFO] price_checker.py:356 - 成功解析折扣价格: $224 NZD
2024-11-15 15:57:07,691 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:57:07,697 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 15:57:08,200 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:57:08,208 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:57:08,214 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 15:57:08,214 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 15:57:08,214 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:57:08,221 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:57:08,226 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 15:57:08,227 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 15:57:08,227 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:57:12,321 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:57:18,244 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:57:22,352 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:57:28,277 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:57:28,283 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:57:28,290 [INFO] price_checker.py:403 - 找到价格元素: $41 NZD (HTML: <span class="_1k4xcdh">$41&nbsp;NZD</span>)
2024-11-15 15:57:28,290 [INFO] price_checker.py:416 - ✓ 成功设置税费: $41 NZD
2024-11-15 15:57:28,290 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:57:38,349 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:57:38,356 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:57:38,361 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span class="_j1kt73">$315&nbsp;NZD</span>)
2024-11-15 15:57:38,361 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:57:38,362 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:57:38,368 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 15:57:38,373 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$315&nbsp;NZD</span></span>)
2024-11-15 15:57:38,373 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:57:38,377 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span class="_j1kt73">$315&nbsp;NZD</span>)
2024-11-15 15:57:38,378 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:57:38,383 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 15:57:38,383 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 15:57:38,383 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:57:38,383 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 15:57:38,383 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:57:38,383 [INFO] price_checker.py:450 - ✓ taxes: $41 NZD
2024-11-15 15:57:38,383 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:57:38,383 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:57:38,383 [INFO] price_checker.py:457 - check_in: 22/01/2025
2024-11-15 15:57:38,384 [INFO] price_checker.py:457 - check_out: 23/01/2025
2024-11-15 15:57:38,384 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:57:38,384 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:57:38,384 [INFO] price_checker.py:457 - nightly_price: $224 NZD
2024-11-15 15:57:38,384 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 15:57:38,384 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:57:38,384 [INFO] price_checker.py:457 - taxes: $41 NZD
2024-11-15 15:57:38,384 [INFO] price_checker.py:457 - total: 
2024-11-15 15:57:38,384 [INFO] price_checker.py:559 - ✓ 成功获取 22/01/2025 的价格信息
2024-11-15 15:57:38,384 [INFO] price_checker.py:573 - 已完成 45/50 个日期的处理
2024-11-15 15:57:42,442 [WARNING] price_checker.py:443 - 尝试点击价格展开按钮失败: Message: no such element: Unable to locate element: {"method":"xpath","selector":"//button[contains(@class, '_12wl7g09')]"}
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00952BFE]
	(No symbol) [0x00952CDB]
	(No symbol) [0x0098EBD2]
	(No symbol) [0x00973954]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:57:42,443 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:57:42,443 [WARNING] price_checker.py:452 - ✗ cleaning_fee 未获取到
2024-11-15 15:57:42,443 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:57:42,443 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 15:57:42,443 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:57:42,443 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:57:42,443 [INFO] price_checker.py:457 - check_in: 28/01/2025
2024-11-15 15:57:42,443 [INFO] price_checker.py:457 - check_out: 29/01/2025
2024-11-15 15:57:42,443 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:57:42,444 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:57:42,444 [INFO] price_checker.py:457 - nightly_price: None
2024-11-15 15:57:42,444 [INFO] price_checker.py:457 - cleaning_fee: None
2024-11-15 15:57:42,444 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:57:42,444 [INFO] price_checker.py:457 - taxes: None
2024-11-15 15:57:42,444 [INFO] price_checker.py:457 - total: None
2024-11-15 15:57:42,444 [INFO] price_checker.py:559 - ✓ 成功获取 28/01/2025 的价格信息
2024-11-15 15:57:42,444 [INFO] price_checker.py:553 - [39/41] 处理日期: 29/01/2025
2024-11-15 15:57:42,444 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/716883705085875481
2024-11-15 15:57:42,444 [INFO] price_checker.py:255 - 入住日期: 29/01/2025
2024-11-15 15:57:47,569 [INFO] price_checker.py:271 - 开始检查日期 29/01/2025 的最小入住要求...
2024-11-15 15:57:47,573 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="29, Wednesday, January 2025. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-29/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">29</div></td>
2024-11-15 15:57:47,583 [INFO] price_checker.py:158 - 找到日期: 29/01/2025
2024-11-15 15:57:47,583 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:57:48,384 [INFO] price_checker.py:553 - [46/50] 处理日期: 27/01/2025
2024-11-15 15:57:48,384 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/49525472
2024-11-15 15:57:48,385 [INFO] price_checker.py:255 - 入住日期: 27/01/2025
2024-11-15 15:57:53,513 [INFO] price_checker.py:271 - 开始检查日期 27/01/2025 的最小入住要求...
2024-11-15 15:57:53,516 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_sl5yz7r" role="button" aria-disabled="false" aria-label="27, Monday, January 2025. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-27/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">27</div></td>
2024-11-15 15:57:53,525 [INFO] price_checker.py:158 - 找到日期: 27/01/2025
2024-11-15 15:57:53,525 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:57:57,592 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:57:58,741 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:57:58,746 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:57:58,746 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 15:57:58,747 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 15:57:58,748 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 15:57:58,748 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:57:58,748 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/716883705085875481?check_in=2025-01-29&check_out=2025-01-30&adults=3&children=0&infants=0
2024-11-15 15:58:03,542 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:58:03,837 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:58:03,839 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:58:04,671 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:58:04,676 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:58:04,676 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 15:58:04,678 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 15:58:04,678 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 15:58:04,678 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:58:04,678 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/49525472?check_in=2025-01-27&check_out=2025-01-28&adults=3&children=0&infants=0
2024-11-15 15:58:05,850 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:58:05,850 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:58:09,767 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:58:09,770 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:58:11,783 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:58:11,783 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:58:15,866 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:58:15,866 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:58:21,835 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:58:21,835 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:58:25,916 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:58:25,917 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:58:31,879 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:58:31,879 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:58:31,885 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 15:58:31,899 [INFO] price_checker.py:337 - 找到可见价格元素: $224 NZD 
night
$224 NZD per night
2024-11-15 15:58:31,905 [INFO] price_checker.py:350 - 找到每晚价格元素: $224 NZD 
night
$224 NZD per night
2024-11-15 15:58:31,905 [INFO] price_checker.py:356 - 成功解析折扣价格: $224 NZD
2024-11-15 15:58:31,905 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:58:31,912 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 15:58:32,415 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:58:32,422 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:58:32,428 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 15:58:32,429 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 15:58:32,429 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:58:32,435 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:58:32,440 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 15:58:32,440 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 15:58:32,440 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:58:35,932 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:58:35,932 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w ._11jcbg2
2024-11-15 15:58:42,443 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:58:45,974 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:58:45,974 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[contains(@class, '_wgmchy')]//span[contains(text(), '$') and contains(text(), 'NZD')]
2024-11-15 15:58:52,489 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:58:52,496 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:58:52,502 [INFO] price_checker.py:403 - 找到价格元素: $41 NZD (HTML: <span class="_1k4xcdh">$41&nbsp;NZD</span>)
2024-11-15 15:58:52,502 [INFO] price_checker.py:416 - ✓ 成功设置税费: $41 NZD
2024-11-15 15:58:52,502 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:58:56,023 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:58:56,023 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:59:02,542 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 15:59:02,549 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:59:02,554 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span class="_j1kt73">$315&nbsp;NZD</span>)
2024-11-15 15:59:02,554 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:59:02,554 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 15:59:02,560 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 15:59:02,565 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$315&nbsp;NZD</span></span>)
2024-11-15 15:59:02,565 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:59:02,569 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span class="_j1kt73">$315&nbsp;NZD</span>)
2024-11-15 15:59:02,569 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 15:59:02,574 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 15:59:02,574 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 15:59:02,574 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 15:59:02,574 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 15:59:02,574 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 15:59:02,574 [INFO] price_checker.py:450 - ✓ taxes: $41 NZD
2024-11-15 15:59:02,574 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 15:59:02,574 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 15:59:02,574 [INFO] price_checker.py:457 - check_in: 27/01/2025
2024-11-15 15:59:02,575 [INFO] price_checker.py:457 - check_out: 28/01/2025
2024-11-15 15:59:02,575 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 15:59:02,575 [INFO] price_checker.py:457 - guests: 3
2024-11-15 15:59:02,575 [INFO] price_checker.py:457 - nightly_price: $224 NZD
2024-11-15 15:59:02,575 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 15:59:02,575 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 15:59:02,575 [INFO] price_checker.py:457 - taxes: $41 NZD
2024-11-15 15:59:02,575 [INFO] price_checker.py:457 - total: 
2024-11-15 15:59:02,575 [INFO] price_checker.py:559 - ✓ 成功获取 27/01/2025 的价格信息
2024-11-15 15:59:02,575 [INFO] price_checker.py:553 - [47/50] 处理日期: 28/01/2025
2024-11-15 15:59:02,575 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/49525472
2024-11-15 15:59:02,575 [INFO] price_checker.py:255 - 入住日期: 28/01/2025
2024-11-15 15:59:06,044 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 15:59:06,044 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:59:07,957 [INFO] price_checker.py:271 - 开始检查日期 28/01/2025 的最小入住要求...
2024-11-15 15:59:07,960 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="28, Tuesday, January 2025. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-28/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">28</div></td>
2024-11-15 15:59:07,970 [INFO] price_checker.py:158 - 找到日期: 28/01/2025
2024-11-15 15:59:07,970 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 15:59:16,107 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:59:17,985 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:59:19,116 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 15:59:19,122 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 15:59:19,122 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 15:59:19,123 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 15:59:19,123 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 15:59:19,123 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 15:59:19,124 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/49525472?check_in=2025-01-28&check_out=2025-01-29&adults=3&children=0&infants=0
2024-11-15 15:59:24,214 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 15:59:24,217 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 15:59:26,167 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:59:26,228 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 15:59:26,228 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 15:59:36,219 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:59:36,282 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:59:36,282 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 15:59:46,225 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:59:46,288 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 15:59:46,289 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 15:59:46,294 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 15:59:46,309 [INFO] price_checker.py:337 - 找到可见价格元素: $224 NZD 
night
$224 NZD per night
2024-11-15 15:59:46,315 [INFO] price_checker.py:350 - 找到每晚价格元素: $224 NZD 
night
$224 NZD per night
2024-11-15 15:59:46,315 [INFO] price_checker.py:356 - 成功解析折扣价格: $224 NZD
2024-11-15 15:59:46,315 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 15:59:46,321 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 15:59:46,824 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:59:46,831 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:59:46,836 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 15:59:46,837 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 15:59:46,837 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:59:46,843 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 15:59:46,848 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 15:59:46,848 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 15:59:46,848 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:59:56,273 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 15:59:56,911 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 16:00:06,328 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 16:00:06,957 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 16:00:06,964 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 16:00:06,971 [INFO] price_checker.py:403 - 找到价格元素: $41 NZD (HTML: <span class="_1k4xcdh">$41&nbsp;NZD</span>)
2024-11-15 16:00:06,971 [INFO] price_checker.py:416 - ✓ 成功设置税费: $41 NZD
2024-11-15 16:00:06,971 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 16:00:16,358 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 16:00:17,009 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 16:00:17,016 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 16:00:17,020 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span class="_j1kt73">$315&nbsp;NZD</span>)
2024-11-15 16:00:17,021 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 16:00:17,021 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 16:00:17,027 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 16:00:17,032 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$315&nbsp;NZD</span></span>)
2024-11-15 16:00:17,032 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 16:00:17,037 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span class="_j1kt73">$315&nbsp;NZD</span>)
2024-11-15 16:00:17,037 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 16:00:17,041 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 16:00:17,041 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 16:00:17,041 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 16:00:17,041 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 16:00:17,041 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 16:00:17,042 [INFO] price_checker.py:450 - ✓ taxes: $41 NZD
2024-11-15 16:00:17,042 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 16:00:17,042 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 16:00:17,042 [INFO] price_checker.py:457 - check_in: 28/01/2025
2024-11-15 16:00:17,042 [INFO] price_checker.py:457 - check_out: 29/01/2025
2024-11-15 16:00:17,042 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 16:00:17,042 [INFO] price_checker.py:457 - guests: 3
2024-11-15 16:00:17,042 [INFO] price_checker.py:457 - nightly_price: $224 NZD
2024-11-15 16:00:17,042 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 16:00:17,042 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 16:00:17,042 [INFO] price_checker.py:457 - taxes: $41 NZD
2024-11-15 16:00:17,042 [INFO] price_checker.py:457 - total: 
2024-11-15 16:00:17,042 [INFO] price_checker.py:559 - ✓ 成功获取 28/01/2025 的价格信息
2024-11-15 16:00:17,042 [INFO] price_checker.py:553 - [48/50] 处理日期: 29/01/2025
2024-11-15 16:00:17,043 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/49525472
2024-11-15 16:00:17,043 [INFO] price_checker.py:255 - 入住日期: 29/01/2025
2024-11-15 16:00:22,163 [INFO] price_checker.py:271 - 开始检查日期 29/01/2025 的最小入住要求...
2024-11-15 16:00:22,166 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="29, Wednesday, January 2025. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-29/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">29</div></td>
2024-11-15 16:00:22,175 [INFO] price_checker.py:158 - 找到日期: 29/01/2025
2024-11-15 16:00:22,175 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 16:00:32,215 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 16:00:33,342 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 16:00:33,347 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 16:00:33,347 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 16:00:33,349 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 16:00:33,349 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 16:00:33,349 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 16:00:33,349 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/49525472?check_in=2025-01-29&check_out=2025-01-30&adults=3&children=0&infants=0
2024-11-15 16:00:36,382 [WARNING] price_checker.py:443 - 尝试点击价格展开按钮失败: Message: no such element: Unable to locate element: {"method":"xpath","selector":"//button[contains(@class, '_12wl7g09')]"}
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00952BFE]
	(No symbol) [0x00952CDB]
	(No symbol) [0x0098EBD2]
	(No symbol) [0x00973954]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 16:00:36,382 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 16:00:36,382 [WARNING] price_checker.py:452 - ✗ cleaning_fee 未获取到
2024-11-15 16:00:36,383 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 16:00:36,383 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 16:00:36,383 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 16:00:36,383 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 16:00:36,383 [INFO] price_checker.py:457 - check_in: 29/01/2025
2024-11-15 16:00:36,383 [INFO] price_checker.py:457 - check_out: 30/01/2025
2024-11-15 16:00:36,383 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 16:00:36,383 [INFO] price_checker.py:457 - guests: 3
2024-11-15 16:00:36,383 [INFO] price_checker.py:457 - nightly_price: None
2024-11-15 16:00:36,383 [INFO] price_checker.py:457 - cleaning_fee: None
2024-11-15 16:00:36,383 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 16:00:36,383 [INFO] price_checker.py:457 - taxes: None
2024-11-15 16:00:36,384 [INFO] price_checker.py:457 - total: None
2024-11-15 16:00:36,384 [INFO] price_checker.py:559 - ✓ 成功获取 29/01/2025 的价格信息
2024-11-15 16:00:36,384 [INFO] price_checker.py:553 - [40/41] 处理日期: 30/01/2025
2024-11-15 16:00:36,384 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/716883705085875481
2024-11-15 16:00:36,384 [INFO] price_checker.py:255 - 入住日期: 30/01/2025
2024-11-15 16:00:38,439 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 16:00:38,442 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 16:00:40,453 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 16:00:40,453 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 16:00:41,510 [INFO] price_checker.py:271 - 开始检查日期 30/01/2025 的最小入住要求...
2024-11-15 16:00:41,515 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="30, Thursday, January 2025. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-30/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">30</div></td>
2024-11-15 16:00:41,526 [INFO] price_checker.py:158 - 找到日期: 30/01/2025
2024-11-15 16:00:41,526 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 16:00:50,490 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 16:00:50,490 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 16:00:51,574 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 16:00:52,683 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 16:00:52,688 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 16:00:52,688 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 16:00:52,689 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 16:00:52,689 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 16:00:52,689 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 16:00:52,690 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/716883705085875481?check_in=2025-01-30&check_out=2025-01-31&adults=3&children=0&infants=0
2024-11-15 16:00:57,793 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 16:00:57,796 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 16:00:59,806 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 16:00:59,806 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 16:01:00,492 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 16:01:00,492 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 16:01:00,498 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 16:01:00,513 [INFO] price_checker.py:337 - 找到可见价格元素: $224 NZD 
night
$224 NZD per night
2024-11-15 16:01:00,518 [INFO] price_checker.py:350 - 找到每晚价格元素: $224 NZD 
night
$224 NZD per night
2024-11-15 16:01:00,518 [INFO] price_checker.py:356 - 成功解析折扣价格: $224 NZD
2024-11-15 16:01:00,518 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 16:01:00,524 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 16:01:01,027 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 16:01:01,034 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 16:01:01,040 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 16:01:01,041 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 16:01:01,041 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 16:01:01,048 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 16:01:01,052 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 16:01:01,052 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 16:01:01,053 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 16:01:09,810 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 16:01:09,811 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 16:01:11,108 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 16:01:19,834 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 16:01:19,834 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 16:01:21,144 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 16:01:21,151 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 16:01:21,157 [INFO] price_checker.py:403 - 找到价格元素: $41 NZD (HTML: <span class="_1k4xcdh">$41&nbsp;NZD</span>)
2024-11-15 16:01:21,157 [INFO] price_checker.py:416 - ✓ 成功设置税费: $41 NZD
2024-11-15 16:01:21,157 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 16:01:29,886 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 16:01:29,886 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w ._11jcbg2
2024-11-15 16:01:31,159 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 16:01:31,166 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 16:01:31,171 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span class="_j1kt73">$315&nbsp;NZD</span>)
2024-11-15 16:01:31,171 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 16:01:31,171 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 16:01:31,178 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 16:01:31,182 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$315&nbsp;NZD</span></span>)
2024-11-15 16:01:31,182 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 16:01:31,187 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span class="_j1kt73">$315&nbsp;NZD</span>)
2024-11-15 16:01:31,187 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 16:01:31,192 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 16:01:31,192 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 16:01:31,192 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 16:01:31,192 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 16:01:31,192 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 16:01:31,192 [INFO] price_checker.py:450 - ✓ taxes: $41 NZD
2024-11-15 16:01:31,192 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 16:01:31,192 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 16:01:31,192 [INFO] price_checker.py:457 - check_in: 29/01/2025
2024-11-15 16:01:31,192 [INFO] price_checker.py:457 - check_out: 30/01/2025
2024-11-15 16:01:31,193 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 16:01:31,193 [INFO] price_checker.py:457 - guests: 3
2024-11-15 16:01:31,193 [INFO] price_checker.py:457 - nightly_price: $224 NZD
2024-11-15 16:01:31,193 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 16:01:31,193 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 16:01:31,193 [INFO] price_checker.py:457 - taxes: $41 NZD
2024-11-15 16:01:31,193 [INFO] price_checker.py:457 - total: 
2024-11-15 16:01:31,193 [INFO] price_checker.py:559 - ✓ 成功获取 29/01/2025 的价格信息
2024-11-15 16:01:31,193 [INFO] price_checker.py:553 - [49/50] 处理日期: 30/01/2025
2024-11-15 16:01:31,193 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/49525472
2024-11-15 16:01:31,193 [INFO] price_checker.py:255 - 入住日期: 30/01/2025
2024-11-15 16:01:36,314 [INFO] price_checker.py:271 - 开始检查日期 30/01/2025 的最小入住要求...
2024-11-15 16:01:36,317 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="30, Thursday, January 2025. Available Select start date " tabindex="-1" style="width: 41px; height: 41px;"><div class="_697u988 notranslate" data-testid="calendar-day-30/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">30</div></td>
2024-11-15 16:01:36,326 [INFO] price_checker.py:158 - 找到日期: 30/01/2025
2024-11-15 16:01:36,326 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 16:01:39,898 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 16:01:39,898 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[contains(@class, '_wgmchy')]//span[contains(text(), '$') and contains(text(), 'NZD')]
2024-11-15 16:01:46,359 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 16:01:47,514 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 16:01:47,519 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 16:01:47,520 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 16:01:47,521 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 16:01:47,521 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 16:01:47,521 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 16:01:47,521 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/49525472?check_in=2025-01-30&check_out=2025-01-31&adults=3&children=0&infants=0
2024-11-15 16:01:49,923 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 16:01:49,924 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 16:01:52,628 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 16:01:52,631 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 16:01:54,641 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 16:01:54,642 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 16:01:59,960 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 16:01:59,960 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 16:02:04,704 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 16:02:04,704 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 16:02:10,016 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 16:02:14,756 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 16:02:14,756 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 16:02:14,762 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-15 16:02:14,777 [INFO] price_checker.py:337 - 找到可见价格元素: $224 NZD 
night
$224 NZD per night
2024-11-15 16:02:14,783 [INFO] price_checker.py:350 - 找到每晚价格元素: $224 NZD 
night
$224 NZD per night
2024-11-15 16:02:14,783 [INFO] price_checker.py:356 - 成功解析折扣价格: $224 NZD
2024-11-15 16:02:14,783 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 16:02:14,789 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-15 16:02:15,292 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 16:02:15,299 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 16:02:15,304 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 16:02:15,305 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 16:02:15,305 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 16:02:15,311 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 16:02:15,316 [INFO] price_checker.py:403 - 找到价格元素: $50 NZD (HTML: <span class="_1k4xcdh">$50&nbsp;NZD</span>)
2024-11-15 16:02:15,316 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $50 NZD
2024-11-15 16:02:15,316 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 16:02:20,057 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 16:02:25,345 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 16:02:30,090 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 16:02:35,391 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 16:02:35,398 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 16:02:35,404 [INFO] price_checker.py:403 - 找到价格元素: $41 NZD (HTML: <span class="_1k4xcdh">$41&nbsp;NZD</span>)
2024-11-15 16:02:35,404 [INFO] price_checker.py:416 - ✓ 成功设置税费: $41 NZD
2024-11-15 16:02:35,404 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 16:02:40,093 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 16:02:45,461 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 16:02:45,473 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-15 16:02:45,481 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span class="_j1kt73">$315&nbsp;NZD</span>)
2024-11-15 16:02:45,481 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 16:02:45,481 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 16:02:45,492 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-15 16:02:45,497 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$315&nbsp;NZD</span></span>)
2024-11-15 16:02:45,498 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 16:02:45,503 [INFO] price_checker.py:403 - 找到价格元素: $315 NZD (HTML: <span class="_j1kt73">$315&nbsp;NZD</span>)
2024-11-15 16:02:45,503 [INFO] price_checker.py:420 - ✓ 成功设置总价: $315 NZD
2024-11-15 16:02:45,508 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-15 16:02:45,509 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-15 16:02:45,509 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 16:02:45,509 [INFO] price_checker.py:450 - ✓ cleaning_fee: $50 NZD
2024-11-15 16:02:45,509 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 16:02:45,509 [INFO] price_checker.py:450 - ✓ taxes: $41 NZD
2024-11-15 16:02:45,509 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 16:02:45,509 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 16:02:45,509 [INFO] price_checker.py:457 - check_in: 30/01/2025
2024-11-15 16:02:45,509 [INFO] price_checker.py:457 - check_out: 31/01/2025
2024-11-15 16:02:45,509 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 16:02:45,509 [INFO] price_checker.py:457 - guests: 3
2024-11-15 16:02:45,509 [INFO] price_checker.py:457 - nightly_price: $224 NZD
2024-11-15 16:02:45,510 [INFO] price_checker.py:457 - cleaning_fee: $50 NZD
2024-11-15 16:02:45,510 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 16:02:45,510 [INFO] price_checker.py:457 - taxes: $41 NZD
2024-11-15 16:02:45,510 [INFO] price_checker.py:457 - total: 
2024-11-15 16:02:45,510 [INFO] price_checker.py:559 - ✓ 成功获取 30/01/2025 的价格信息
2024-11-15 16:02:45,510 [INFO] price_checker.py:553 - [50/50] 处理日期: 31/01/2025
2024-11-15 16:02:45,510 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/49525472
2024-11-15 16:02:45,510 [INFO] price_checker.py:255 - 入住日期: 31/01/2025
2024-11-15 16:02:50,108 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 16:02:50,629 [INFO] price_checker.py:271 - 开始检查日期 31/01/2025 的最小入住要求...
2024-11-15 16:02:50,632 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_1qvi71ld" role="button" aria-disabled="false" aria-label="31, Friday, January 2025. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-31/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">31</div></td>
2024-11-15 16:02:50,642 [INFO] price_checker.py:158 - 找到日期: 31/01/2025
2024-11-15 16:02:50,642 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 16:03:00,124 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 16:03:00,700 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 16:03:01,835 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 16:03:01,840 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 16:03:01,840 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 16:03:01,841 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 16:03:01,841 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 16:03:01,842 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 16:03:01,842 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/49525472?check_in=2025-01-31&check_out=2025-02-01&adults=3&children=0&infants=0
2024-11-15 16:03:06,970 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 16:03:06,972 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 16:03:08,984 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 16:03:08,984 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 16:03:10,148 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 16:03:19,040 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 16:03:19,040 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 16:03:29,095 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 16:03:29,096 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 16:03:30,240 [WARNING] price_checker.py:443 - 尝试点击价格展开按钮失败: Message: no such element: Unable to locate element: {"method":"xpath","selector":"//button[contains(@class, '_12wl7g09')]"}
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00952BFE]
	(No symbol) [0x00952CDB]
	(No symbol) [0x0098EBD2]
	(No symbol) [0x00973954]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 16:03:30,240 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 16:03:30,240 [WARNING] price_checker.py:452 - ✗ cleaning_fee 未获取到
2024-11-15 16:03:30,240 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 16:03:30,240 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 16:03:30,241 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 16:03:30,241 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 16:03:30,241 [INFO] price_checker.py:457 - check_in: 30/01/2025
2024-11-15 16:03:30,241 [INFO] price_checker.py:457 - check_out: 31/01/2025
2024-11-15 16:03:30,241 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 16:03:30,241 [INFO] price_checker.py:457 - guests: 3
2024-11-15 16:03:30,241 [INFO] price_checker.py:457 - nightly_price: None
2024-11-15 16:03:30,241 [INFO] price_checker.py:457 - cleaning_fee: None
2024-11-15 16:03:30,241 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 16:03:30,241 [INFO] price_checker.py:457 - taxes: None
2024-11-15 16:03:30,241 [INFO] price_checker.py:457 - total: None
2024-11-15 16:03:30,241 [INFO] price_checker.py:559 - ✓ 成功获取 30/01/2025 的价格信息
2024-11-15 16:03:30,241 [INFO] price_checker.py:573 - 已完成 40/41 个日期的处理
2024-11-15 16:03:39,100 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 16:03:39,100 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w ._11jcbg2
2024-11-15 16:03:40,242 [INFO] price_checker.py:553 - [41/41] 处理日期: 31/01/2025
2024-11-15 16:03:40,242 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/716883705085875481
2024-11-15 16:03:40,242 [INFO] price_checker.py:255 - 入住日期: 31/01/2025
2024-11-15 16:03:45,364 [INFO] price_checker.py:271 - 开始检查日期 31/01/2025 的最小入住要求...
2024-11-15 16:03:45,368 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_1qvi71ld" role="button" aria-disabled="false" aria-label="31, Friday, January 2025. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 41px; height: 41px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-31/01/2025" data-is-day-blocked="false" style="width: 41px; height: 41px;">31</div></td>
2024-11-15 16:03:45,378 [INFO] price_checker.py:158 - 找到日期: 31/01/2025
2024-11-15 16:03:45,378 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-15 16:03:49,125 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 16:03:49,126 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[contains(@class, '_wgmchy')]//span[contains(text(), '$') and contains(text(), 'NZD')]
2024-11-15 16:03:55,421 [WARNING] price_checker.py:169 - 点击日期元素失败，尝试使用JavaScript点击: Message: element not interactable
  (Session info: chrome=126.0.6478.255)
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x0091195D]
	(No symbol) [0x00953BE4]
	(No symbol) [0x0094912F]
	(No symbol) [0x0097390C]
	(No symbol) [0x00948BB5]
	(No symbol) [0x00973BA4]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 16:03:56,529 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-15 16:03:56,535 [ERROR] price_checker.py:245 - 检查最小入住天数时出错: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 16:03:56,535 [ERROR] price_checker.py:246 - 错误类型: StaleElementReferenceException
2024-11-15 16:03:56,536 [ERROR] price_checker.py:247 - 错误堆栈: Traceback (most recent call last):
  File "C:\GitWork\Airbnb data Analyst\price_checker.py", line 176, in min_nights_check
    actions.move_to_element(date_element).perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\action_chains.py", line 94, in perform
    self.w3c_actions.perform()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\common\actions\action_builder.py", line 96, in perform
    self.driver.execute(Command.W3C_ACTIONS, enc)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 380, in execute
    self.error_handler.check_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\jiann\AppData\Local\Programs\Python\Python313\Lib\site-packages\selenium\webdriver\remote\errorhandler.py", line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found in the current frame
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00916BCF]
	(No symbol) [0x00918858]
	(No symbol) [0x009188D0]
	(No symbol) [0x0095830E]
	(No symbol) [0x00957885]
	(No symbol) [0x00993FA0]
	(No symbol) [0x0097390C]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]


2024-11-15 16:03:56,537 [WARNING] price_checker.py:248 - 使用默认值1晚
2024-11-15 16:03:56,537 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 1晚 (自动检测)
2024-11-15 16:03:56,537 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/716883705085875481?check_in=2025-01-31&check_out=2025-02-01&adults=3&children=0&infants=0
2024-11-15 16:03:59,138 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 16:03:59,138 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 16:04:01,656 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-15 16:04:01,659 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-15 16:04:03,670 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-15 16:04:03,670 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-15 16:04:09,165 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 16:04:09,165 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 16:04:13,704 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 16:04:13,704 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-15 16:04:19,191 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 16:04:23,740 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 16:04:23,740 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-15 16:04:29,226 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 16:04:33,785 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 16:04:33,785 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w ._11jcbg2
2024-11-15 16:04:39,265 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 16:04:43,828 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 16:04:43,828 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[contains(@class, '_wgmchy')]//span[contains(text(), '$') and contains(text(), 'NZD')]
2024-11-15 16:04:49,307 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 16:04:53,864 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-15 16:04:53,864 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-15 16:04:59,355 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 16:05:03,912 [WARNING] price_checker.py:384 - 等待价格详情容器超时
2024-11-15 16:05:03,912 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 16:05:09,396 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 16:05:13,955 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 16:05:19,455 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 16:05:24,010 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 16:05:34,054 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 16:05:39,547 [WARNING] price_checker.py:443 - 尝试点击价格展开按钮失败: Message: no such element: Unable to locate element: {"method":"xpath","selector":"//button[contains(@class, '_12wl7g09')]"}
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00952BFE]
	(No symbol) [0x00952CDB]
	(No symbol) [0x0098EBD2]
	(No symbol) [0x00973954]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 16:05:39,547 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 16:05:39,547 [WARNING] price_checker.py:452 - ✗ cleaning_fee 未获取到
2024-11-15 16:05:39,548 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 16:05:39,548 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 16:05:39,548 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 16:05:39,548 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 16:05:39,548 [INFO] price_checker.py:457 - check_in: 31/01/2025
2024-11-15 16:05:39,548 [INFO] price_checker.py:457 - check_out: 01/02/2025
2024-11-15 16:05:39,548 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 16:05:39,548 [INFO] price_checker.py:457 - guests: 3
2024-11-15 16:05:39,548 [INFO] price_checker.py:457 - nightly_price: None
2024-11-15 16:05:39,548 [INFO] price_checker.py:457 - cleaning_fee: None
2024-11-15 16:05:39,548 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 16:05:39,548 [INFO] price_checker.py:457 - taxes: None
2024-11-15 16:05:39,548 [INFO] price_checker.py:457 - total: None
2024-11-15 16:05:39,548 [INFO] price_checker.py:559 - ✓ 成功获取 31/01/2025 的价格信息
2024-11-15 16:05:39,549 [INFO] price_checker.py:573 - 已完成 50/50 个日期的处理
2024-11-15 16:05:44,114 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-15 16:05:49,549 [INFO] price_checker.py:582 - 
=== 价格数据收集统计 ===
2024-11-15 16:05:49,549 [INFO] price_checker.py:583 - 总可预订日期: 50
2024-11-15 16:05:49,549 [INFO] price_checker.py:584 - 成功收集: 50
2024-11-15 16:05:49,549 [INFO] price_checker.py:585 - 失败日期: 0
2024-11-15 16:05:49,586 [INFO] price_checker.py:496 - 价格数据已保存到日期目录: data/20241115_160549/airbnb_price_49525472.xlsx
2024-11-15 16:05:49,586 [INFO] price_checker.py:497 - 价格数据已保存到房间目录: data/room_49525472/airbnb_price_20241115_160549.xlsx
2024-11-15 16:05:49,587 [INFO] price_checker.py:501 - 共导出 50 条价格记录
2024-11-15 16:05:49,587 [INFO] price_checker.py:511 - 价格统计: 平均=220.68, 最高=242.0, 最低=202.0
2024-11-15 16:05:49,587 [INFO] price_checker.py:596 - ✓ 所有价格数据已导出到日期目录: data/20241115_160549/airbnb_price_49525472.xlsx
2024-11-15 16:05:49,587 [INFO] price_checker.py:597 - ✓ 所有价格数据已导出到房间目录: data/room_49525472/airbnb_price_20241115_160549.xlsx
2024-11-15 16:05:49,587 [INFO] advanced_analyzer.py:213 - 成功获取价格数据
2024-11-15 16:05:49,587 [ERROR] advanced_analyzer.py:299 - 处理URL失败: 'BitBrowserManager' object has no attribute 'close_tab'
2024-11-15 16:05:54,166 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-15 16:06:04,171 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-15 16:06:14,224 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-15 16:06:34,237 [WARNING] price_checker.py:443 - 尝试点击价格展开按钮失败: Message: no such element: Unable to locate element: {"method":"xpath","selector":"//button[contains(@class, '_12wl7g09')]"}
  (Session info: chrome=126.0.6478.255); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception
Stacktrace:
	GetHandleVerifier [0x00A7FD33+27651]
	(No symbol) [0x00A15554]
	(No symbol) [0x00911ADF]
	(No symbol) [0x00952BFE]
	(No symbol) [0x00952CDB]
	(No symbol) [0x0098EBD2]
	(No symbol) [0x00973954]
	(No symbol) [0x0098CA7D]
	(No symbol) [0x009736A6]
	(No symbol) [0x009474E1]
	(No symbol) [0x0094805D]
	GetHandleVerifier [0x00D36613+2872547]
	GetHandleVerifier [0x00D8BADD+3221933]
	GetHandleVerifier [0x00B02A94+563556]
	GetHandleVerifier [0x00B09DCC+593052]
	(No symbol) [0x00A1E3A4]
	(No symbol) [0x00A1AE08]
	(No symbol) [0x00A1AFA7]
	(No symbol) [0x00A0D0AE]
	BaseThreadInitThunk [0x74D37BA9+25]
	RtlInitializeExceptionChain [0x7704C0CB+107]
	RtlClearBits [0x7704C04F+191]

2024-11-15 16:06:34,237 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-15 16:06:34,237 [WARNING] price_checker.py:452 - ✗ cleaning_fee 未获取到
2024-11-15 16:06:34,237 [WARNING] price_checker.py:452 - ✗ service_fee 未获取到
2024-11-15 16:06:34,237 [WARNING] price_checker.py:452 - ✗ taxes 未获取到
2024-11-15 16:06:34,237 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-15 16:06:34,238 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-15 16:06:34,238 [INFO] price_checker.py:457 - check_in: 31/01/2025
2024-11-15 16:06:34,238 [INFO] price_checker.py:457 - check_out: 01/02/2025
2024-11-15 16:06:34,238 [INFO] price_checker.py:457 - min_nights: 1
2024-11-15 16:06:34,238 [INFO] price_checker.py:457 - guests: 3
2024-11-15 16:06:34,238 [INFO] price_checker.py:457 - nightly_price: None
2024-11-15 16:06:34,238 [INFO] price_checker.py:457 - cleaning_fee: None
2024-11-15 16:06:34,238 [INFO] price_checker.py:457 - service_fee: None
2024-11-15 16:06:34,238 [INFO] price_checker.py:457 - taxes: None
2024-11-15 16:06:34,238 [INFO] price_checker.py:457 - total: None
2024-11-15 16:06:34,238 [INFO] price_checker.py:559 - ✓ 成功获取 31/01/2025 的价格信息
2024-11-15 16:06:34,238 [INFO] price_checker.py:582 - 
=== 价格数据收集统计 ===
2024-11-15 16:06:34,239 [INFO] price_checker.py:583 - 总可预订日期: 41
2024-11-15 16:06:34,239 [INFO] price_checker.py:584 - 成功收集: 41
2024-11-15 16:06:34,239 [INFO] price_checker.py:585 - 失败日期: 0
2024-11-15 16:06:34,275 [INFO] price_checker.py:496 - 价格数据已保存到日期目录: data/20241115_160634/airbnb_price_716883705085875481.xlsx
2024-11-15 16:06:34,275 [INFO] price_checker.py:497 - 价格数据已保存到房间目录: data/room_716883705085875481/airbnb_price_20241115_160634.xlsx
2024-11-15 16:06:34,275 [INFO] price_checker.py:501 - 共导出 41 条价格记录
2024-11-15 16:06:34,275 [INFO] price_checker.py:511 - 价格统计: 平均=256.25, 最高=265.0, 最低=230.0
2024-11-15 16:06:34,276 [INFO] price_checker.py:596 - ✓ 所有价格数据已导出到日期目录: data/20241115_160634/airbnb_price_716883705085875481.xlsx
2024-11-15 16:06:34,276 [INFO] price_checker.py:597 - ✓ 所有价格数据已导出到房间目录: data/room_716883705085875481/airbnb_price_20241115_160634.xlsx
2024-11-15 16:06:34,276 [INFO] advanced_analyzer.py:213 - 成功获取价格数据
2024-11-15 16:06:34,276 [ERROR] advanced_analyzer.py:299 - 处理URL失败: 'BitBrowserManager' object has no attribute 'close_tab'
2024-11-15 16:06:55,905 [INFO] advanced_analyzer.py:461 - === 程序执行完成 ===
