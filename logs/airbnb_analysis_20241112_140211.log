2024-11-12 14:02:11,444 [INFO] advanced_analyzer.py:220 - === 开始Airbnb数据收集程序 ===
2024-11-12 14:02:11,623 [INFO] advanced_analyzer.py:36 - 成功读取 6 个房间ID
2024-11-12 14:02:11,623 [INFO] advanced_analyzer.py:231 - 生成 6 个URL
2024-11-12 14:02:11,623 [INFO] advanced_analyzer.py:235 - 创建数据目录: data/airbnb_data_20241112_140211
2024-11-12 14:02:11,623 [INFO] advanced_analyzer.py:122 - === 开始批量分析房源 ===
2024-11-12 14:02:13,371 [INFO] advanced_analyzer.py:80 - Chrome WebDriver 初始化成功
2024-11-12 14:02:13,371 [INFO] advanced_analyzer.py:135 - 
处理第 1/6 个房源
2024-11-12 14:02:13,371 [INFO] advanced_analyzer.py:87 - 
开始分析房源: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-12 14:02:13,371 [INFO] airbnb_calendar_checker.py:70 - 开始检查房源日历: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-12 14:02:14,446 [INFO] airbnb_calendar_checker.py:75 - 页面加载中...
2024-11-12 14:02:14,449 [INFO] airbnb_calendar_checker.py:82 - 页面基本加载完成
2024-11-12 14:02:29,632 [INFO] airbnb_calendar_checker.py:120 - 找到日历按钮: //button[contains(@aria-label, 'Choose')]
2024-11-12 14:02:29,636 [INFO] airbnb_calendar_checker.py:134 - 已滚动到日历按钮位置
2024-11-12 14:02:30,636 [INFO] airbnb_calendar_checker.py:139 - 日历按钮已准备就绪
2024-11-12 14:02:30,751 [INFO] airbnb_calendar_checker.py:148 - 直接点击日历按钮成功
2024-11-12 14:02:40,889 [INFO] airbnb_calendar_checker.py:184 - 日历内容已加载: //div[contains(@data-testid, 'calendar')]
2024-11-12 14:02:40,901 [INFO] airbnb_calendar_checker.py:199 - 找到 123 个日期单元格
2024-11-12 14:02:40,998 [INFO] airbnb_calendar_checker.py:211 - 找到 123 个日期单元格
2024-11-12 14:02:40,999 [INFO] airbnb_calendar_checker.py:256 - 原始单元格数量: 123
2024-11-12 14:02:40,999 [INFO] airbnb_calendar_checker.py:257 - 去重后数据条数: 123
2024-11-12 14:02:40,999 [INFO] airbnb_calendar_checker.py:258 - 处理的唯一日期数: 123
2024-11-12 14:02:40,999 [INFO] airbnb_calendar_checker.py:262 - 收集到 123 条有效日历数据
2024-11-12 14:02:40,999 [INFO] airbnb_calendar_checker.py:22 - 开始导出数据到Excel...
2024-11-12 14:02:40,999 [INFO] airbnb_calendar_checker.py:32 - 处理房源ID: 837352260137971048
2024-11-12 14:02:41,000 [INFO] airbnb_calendar_checker.py:37 - 将创建文件: data/airbnb_calendar_837352260137971048_20241112_140241.xlsx
2024-11-12 14:02:41,000 [INFO] airbnb_calendar_checker.py:41 - 创建DataFrame，共 123 行数据
2024-11-12 14:02:41,026 [INFO] airbnb_calendar_checker.py:52 - 数据已成功导出到Excel文件: data/airbnb_calendar_837352260137971048_20241112_140241.xlsx
2024-11-12 14:02:41,026 [INFO] airbnb_calendar_checker.py:57 - 文件创建成功，大小: 9.12 KB
2024-11-12 14:02:41,026 [INFO] airbnb_calendar_checker.py:265 - 日历数据已成功导出到: data/airbnb_calendar_837352260137971048_20241112_140241.xlsx
2024-11-12 14:02:41,027 [INFO] advanced_analyzer.py:96 - 成功获取日历数据: 123 条记录
2024-11-12 14:02:41,027 [INFO] price_checker.py:537 - 开始检查房源价格: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-12 14:02:41,027 [INFO] price_checker.py:530 - 找到 37 个可预订日期
2024-11-12 14:02:41,027 [INFO] price_checker.py:553 - [1/37] 处理日期: 18/11/2024
2024-11-12 14:02:41,027 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-12 14:02:41,027 [INFO] price_checker.py:255 - 入住日期: 18/11/2024
2024-11-12 14:02:46,201 [INFO] price_checker.py:271 - 开始检查日期 18/11/2024 的最小入住要求...
2024-11-12 14:02:46,205 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_sl5yz7r" role="button" aria-disabled="false" aria-label="18, Monday, November 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="0" style="width: 42px; height: 42px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-18/11/2024" data-is-day-blocked="false" style="width: 42px; height: 42px;">18</div></td>
2024-11-12 14:02:46,215 [INFO] price_checker.py:158 - 找到日期: 18/11/2024
2024-11-12 14:02:46,216 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-12 14:02:47,344 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-12 14:02:48,636 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_5v1jabe" role="button" aria-disabled="true" aria-label="18, Monday, November 2024. Selected check-in date There is a 2 night minimum stay requirement. " tabindex="0" style="width: 42px; height: 42px;"><div class="_h84ua7"><div class="_d82cel" style="transform: translateY(-100%) translateY(-12px);"><div class="_1mslrl4"><div class="_u7azij">2-night minimum</div><svg role="presentation" focusable="false" class="_8c7xtno" style="left: 10px;"><path class="_1s2t3cl" d="M0,0 20,0 10,10z"></path><path class="_c3dsty" d="M0,0 10,10 20,0"></path></svg></div></div><div class="_17slido1 notranslate" data-testid="calendar-day-18/11/2024" data-is-day-blocked="true" style="width: 42px; height: 42px;">18</div></div></td>
2024-11-12 14:02:48,645 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-12 14:02:48,645 [INFO] price_checker.py:218 - - aria-label: 18, Monday, November 2024. Selected check-in date There is a 2 night minimum stay requirement. 
2024-11-12 14:02:48,646 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-12 14:02:48,646 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-12 14:02:48,646 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 2晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-12 14:02:48,646 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 2晚 (自动检测)
2024-11-12 14:02:48,646 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/837352260137971048?check_in=2024-11-18&check_out=2024-11-20&adults=3&children=0&infants=0
2024-11-12 14:02:53,757 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-12 14:02:53,760 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-12 14:02:55,771 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-12 14:02:55,771 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-12 14:02:55,779 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-12 14:02:55,779 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-12 14:02:55,786 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-12 14:02:55,786 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-12 14:02:55,792 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-12 14:02:55,807 [INFO] price_checker.py:337 - 找到可见价格元素: $320 NZD 
$283 NZD 
night
$283 NZD per night, originally $320 NZD
2024-11-12 14:02:55,813 [INFO] price_checker.py:350 - 找到每晚价格元素: $320 NZD 
$283 NZD 
night
$283 NZD per night, originally $320 NZD
2024-11-12 14:02:55,813 [INFO] price_checker.py:356 - 成功解析折扣价格: $283 NZD
2024-11-12 14:02:55,814 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-12 14:02:55,820 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-12 14:02:56,323 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-12 14:02:56,331 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-12 14:02:56,337 [INFO] price_checker.py:403 - 找到价格元素: $59 NZD (HTML: <span class="_1k4xcdh">$59&nbsp;NZD</span>)
2024-11-12 14:02:56,337 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $59 NZD
2024-11-12 14:02:56,337 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-12 14:02:56,344 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-12 14:02:56,349 [INFO] price_checker.py:403 - 找到价格元素: $59 NZD (HTML: <span class="_1k4xcdh">$59&nbsp;NZD</span>)
2024-11-12 14:02:56,349 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $59 NZD
2024-11-12 14:02:56,349 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-12 14:02:56,356 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-12 14:02:56,362 [INFO] price_checker.py:403 - 找到价格元素: $87 NZD (HTML: <span class="_1k4xcdh">$87&nbsp;NZD</span>)
2024-11-12 14:02:56,362 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $87 NZD
2024-11-12 14:02:56,362 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-12 14:02:56,369 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-12 14:02:56,374 [INFO] price_checker.py:403 - 找到价格元素: $87 NZD (HTML: <span class="_1k4xcdh">$87&nbsp;NZD</span>)
2024-11-12 14:02:56,374 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $87 NZD
2024-11-12 14:02:56,374 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-12 14:02:56,381 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-12 14:02:56,386 [INFO] price_checker.py:403 - 找到价格元素: $81 NZD (HTML: <span class="_1k4xcdh">$81&nbsp;NZD</span>)
2024-11-12 14:02:56,387 [INFO] price_checker.py:416 - ✓ 成功设置税费: $81 NZD
2024-11-12 14:02:56,387 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-12 14:02:58,413 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-12 14:02:58,420 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-12 14:02:58,425 [INFO] price_checker.py:403 - 找到价格元素: $705 NZD (HTML: <span class="_j1kt73">$705&nbsp;NZD</span>)
2024-11-12 14:02:58,425 [INFO] price_checker.py:420 - ✓ 成功设置总价: $705 NZD
2024-11-12 14:02:58,425 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-12 14:02:58,434 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-12 14:02:58,441 [INFO] price_checker.py:403 - 找到价格元素: $705 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$705&nbsp;NZD</span></span>)
2024-11-12 14:02:58,441 [INFO] price_checker.py:420 - ✓ 成功设置总价: $705 NZD
2024-11-12 14:02:58,446 [INFO] price_checker.py:403 - 找到价格元素: $705 NZD (HTML: <span class="_j1kt73">$705&nbsp;NZD</span>)
2024-11-12 14:02:58,446 [INFO] price_checker.py:420 - ✓ 成功设置总价: $705 NZD
2024-11-12 14:02:58,452 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-12 14:02:58,452 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-12 14:02:58,452 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-12 14:02:58,452 [INFO] price_checker.py:450 - ✓ cleaning_fee: $59 NZD
2024-11-12 14:02:58,452 [INFO] price_checker.py:450 - ✓ service_fee: $87 NZD
2024-11-12 14:02:58,452 [INFO] price_checker.py:450 - ✓ taxes: $81 NZD
2024-11-12 14:02:58,452 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-12 14:02:58,452 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-12 14:02:58,452 [INFO] price_checker.py:457 - check_in: 18/11/2024
2024-11-12 14:02:58,452 [INFO] price_checker.py:457 - check_out: 20/11/2024
2024-11-12 14:02:58,452 [INFO] price_checker.py:457 - min_nights: 2
2024-11-12 14:02:58,453 [INFO] price_checker.py:457 - guests: 3
2024-11-12 14:02:58,453 [INFO] price_checker.py:457 - nightly_price: $283 NZD
2024-11-12 14:02:58,453 [INFO] price_checker.py:457 - cleaning_fee: $59 NZD
2024-11-12 14:02:58,453 [INFO] price_checker.py:457 - service_fee: $87 NZD
2024-11-12 14:02:58,453 [INFO] price_checker.py:457 - taxes: $81 NZD
2024-11-12 14:02:58,453 [INFO] price_checker.py:457 - total: 
2024-11-12 14:02:58,453 [INFO] price_checker.py:559 - ✓ 成功获取 18/11/2024 的价格信息
2024-11-12 14:02:58,453 [INFO] price_checker.py:565 - 根据最小入住要求(2晚)跳过接下来的 1 天
2024-11-12 14:02:58,453 [INFO] price_checker.py:553 - [2/37] 处理日期: 27/11/2024
2024-11-12 14:02:58,453 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-12 14:02:58,453 [INFO] price_checker.py:255 - 入住日期: 27/11/2024
2024-11-12 14:03:03,574 [INFO] price_checker.py:271 - 开始检查日期 27/11/2024 的最小入住要求...
2024-11-12 14:03:03,577 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="27, Wednesday, November 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 42px; height: 42px;"><div class="_697u988 notranslate" data-testid="calendar-day-27/11/2024" data-is-day-blocked="false" style="width: 42px; height: 42px;">27</div></td>
2024-11-12 14:03:03,583 [INFO] price_checker.py:158 - 找到日期: 27/11/2024
2024-11-12 14:03:03,584 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-12 14:03:04,711 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-12 14:03:05,991 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="27, Wednesday, November 2024. Selected check-in date There is a 3 night minimum stay requirement. " tabindex="-1" style="width: 42px; height: 42px;"><div class="_h84ua7"><div class="_d82cel" style="transform: translate(-50%, -100%) translate(21px, -12px);"><div class="_1mslrl4"><div class="_u7azij">3-night minimum</div><svg role="presentation" focusable="false" class="_1mjga4hj"><path class="_1s2t3cl" d="M0,0 20,0 10,10z"></path><path class="_c3dsty" d="M0,0 10,10 20,0"></path></svg></div></div><div class="_194zlzjz notranslate" data-testid="calendar-day-27/11/2024" data-is-day-blocked="true" style="width: 42px; height: 42px;">27</div></div></td>
2024-11-12 14:03:05,998 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-12 14:03:05,998 [INFO] price_checker.py:218 - - aria-label: 27, Wednesday, November 2024. Selected check-in date There is a 3 night minimum stay requirement. 
2024-11-12 14:03:05,998 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-12 14:03:05,998 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-12 14:03:05,998 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 3晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-12 14:03:05,999 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 3晚 (自动检测)
2024-11-12 14:03:05,999 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/837352260137971048?check_in=2024-11-27&check_out=2024-11-30&adults=3&children=0&infants=0
2024-11-12 14:03:11,132 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-12 14:03:11,134 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-12 14:03:13,144 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-12 14:03:13,144 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-12 14:03:13,149 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-12 14:03:13,149 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-12 14:03:13,153 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-12 14:03:13,153 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-12 14:03:13,157 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-12 14:03:13,167 [INFO] price_checker.py:337 - 找到可见价格元素: $365 NZD 
night
$365 NZD per night
2024-11-12 14:03:13,173 [INFO] price_checker.py:350 - 找到每晚价格元素: $365 NZD 
night
$365 NZD per night
2024-11-12 14:03:13,173 [INFO] price_checker.py:356 - 成功解析折扣价格: $365 NZD
2024-11-12 14:03:13,173 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-12 14:03:13,177 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-12 14:03:13,680 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-12 14:03:13,685 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-12 14:03:13,691 [INFO] price_checker.py:403 - 找到价格元素: $59 NZD (HTML: <span class="_1k4xcdh">$59&nbsp;NZD</span>)
2024-11-12 14:03:13,691 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $59 NZD
2024-11-12 14:03:13,691 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-12 14:03:13,695 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-12 14:03:13,700 [INFO] price_checker.py:403 - 找到价格元素: $59 NZD (HTML: <span class="_1k4xcdh">$59&nbsp;NZD</span>)
2024-11-12 14:03:13,700 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $59 NZD
2024-11-12 14:03:13,700 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-12 14:03:13,704 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-12 14:03:13,710 [INFO] price_checker.py:403 - 找到价格元素: $161 NZD (HTML: <span class="_1k4xcdh">$161&nbsp;NZD</span>)
2024-11-12 14:03:13,710 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $161 NZD
2024-11-12 14:03:13,710 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-12 14:03:13,715 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-12 14:03:13,720 [INFO] price_checker.py:403 - 找到价格元素: $161 NZD (HTML: <span class="_1k4xcdh">$161&nbsp;NZD</span>)
2024-11-12 14:03:13,720 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $161 NZD
2024-11-12 14:03:13,720 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-12 14:03:13,725 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-12 14:03:13,731 [INFO] price_checker.py:403 - 找到价格元素: $149 NZD (HTML: <span class="_1k4xcdh">$149&nbsp;NZD</span>)
2024-11-12 14:03:13,731 [INFO] price_checker.py:416 - ✓ 成功设置税费: $149 NZD
2024-11-12 14:03:13,731 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-12 14:03:15,755 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-12 14:03:15,760 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-12 14:03:15,765 [INFO] price_checker.py:403 - 找到价格元素: $1,302 NZD (HTML: <span class="_j1kt73">$1,302&nbsp;NZD</span>)
2024-11-12 14:03:15,765 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,302 NZD
2024-11-12 14:03:15,765 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-12 14:03:15,770 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-12 14:03:15,775 [INFO] price_checker.py:403 - 找到价格元素: $1,302 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$1,302&nbsp;NZD</span></span>)
2024-11-12 14:03:15,775 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,302 NZD
2024-11-12 14:03:15,781 [INFO] price_checker.py:403 - 找到价格元素: $1,302 NZD (HTML: <span class="_j1kt73">$1,302&nbsp;NZD</span>)
2024-11-12 14:03:15,781 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,302 NZD
2024-11-12 14:03:15,785 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-12 14:03:15,786 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-12 14:03:15,786 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-12 14:03:15,786 [INFO] price_checker.py:450 - ✓ cleaning_fee: $59 NZD
2024-11-12 14:03:15,786 [INFO] price_checker.py:450 - ✓ service_fee: $161 NZD
2024-11-12 14:03:15,786 [INFO] price_checker.py:450 - ✓ taxes: $149 NZD
2024-11-12 14:03:15,786 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-12 14:03:15,786 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-12 14:03:15,786 [INFO] price_checker.py:457 - check_in: 27/11/2024
2024-11-12 14:03:15,786 [INFO] price_checker.py:457 - check_out: 30/11/2024
2024-11-12 14:03:15,786 [INFO] price_checker.py:457 - min_nights: 3
2024-11-12 14:03:15,786 [INFO] price_checker.py:457 - guests: 3
2024-11-12 14:03:15,786 [INFO] price_checker.py:457 - nightly_price: $365 NZD
2024-11-12 14:03:15,786 [INFO] price_checker.py:457 - cleaning_fee: $59 NZD
2024-11-12 14:03:15,787 [INFO] price_checker.py:457 - service_fee: $161 NZD
2024-11-12 14:03:15,787 [INFO] price_checker.py:457 - taxes: $149 NZD
2024-11-12 14:03:15,787 [INFO] price_checker.py:457 - total: 
2024-11-12 14:03:15,787 [INFO] price_checker.py:559 - ✓ 成功获取 27/11/2024 的价格信息
2024-11-12 14:03:15,787 [INFO] price_checker.py:565 - 根据最小入住要求(3晚)跳过接下来的 2 天
2024-11-12 14:03:15,787 [INFO] price_checker.py:553 - [3/37] 处理日期: 28/11/2024
2024-11-12 14:03:15,787 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-12 14:03:15,787 [INFO] price_checker.py:255 - 入住日期: 28/11/2024
2024-11-12 14:03:20,890 [INFO] price_checker.py:271 - 开始检查日期 28/11/2024 的最小入住要求...
2024-11-12 14:03:20,893 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="28, Thursday, November 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 42px; height: 42px;"><div class="_697u988 notranslate" data-testid="calendar-day-28/11/2024" data-is-day-blocked="false" style="width: 42px; height: 42px;">28</div></td>
2024-11-12 14:03:20,903 [INFO] price_checker.py:158 - 找到日期: 28/11/2024
2024-11-12 14:03:20,903 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-12 14:03:22,060 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-12 14:03:23,345 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="28, Thursday, November 2024. Selected check-in date There is a 3 night minimum stay requirement. " tabindex="-1" style="width: 42px; height: 42px;"><div class="_h84ua7"><div class="_d82cel" style="transform: translate(-50%, -100%) translate(21px, -12px);"><div class="_1mslrl4"><div class="_u7azij">3-night minimum</div><svg role="presentation" focusable="false" class="_1mjga4hj"><path class="_1s2t3cl" d="M0,0 20,0 10,10z"></path><path class="_c3dsty" d="M0,0 10,10 20,0"></path></svg></div></div><div class="_194zlzjz notranslate" data-testid="calendar-day-28/11/2024" data-is-day-blocked="true" style="width: 42px; height: 42px;">28</div></div></td>
2024-11-12 14:03:23,353 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-12 14:03:23,353 [INFO] price_checker.py:218 - - aria-label: 28, Thursday, November 2024. Selected check-in date There is a 3 night minimum stay requirement. 
2024-11-12 14:03:23,353 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-12 14:03:23,353 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-12 14:03:23,353 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 3晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-12 14:03:23,353 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 3晚 (自动检测)
2024-11-12 14:03:23,353 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/837352260137971048?check_in=2024-11-28&check_out=2024-12-01&adults=3&children=0&infants=0
2024-11-12 14:03:28,436 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-12 14:03:28,439 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-12 14:03:30,447 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-12 14:03:30,447 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-12 14:03:30,452 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-12 14:03:30,453 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-12 14:03:30,457 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-12 14:03:30,457 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-12 14:03:30,461 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-12 14:03:30,471 [INFO] price_checker.py:337 - 找到可见价格元素: $365 NZD 
night
$365 NZD per night
2024-11-12 14:03:30,476 [INFO] price_checker.py:350 - 找到每晚价格元素: $365 NZD 
night
$365 NZD per night
2024-11-12 14:03:30,477 [INFO] price_checker.py:356 - 成功解析折扣价格: $365 NZD
2024-11-12 14:03:30,477 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-12 14:03:30,482 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-12 14:03:30,994 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-12 14:03:31,000 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-12 14:03:31,006 [INFO] price_checker.py:403 - 找到价格元素: $59 NZD (HTML: <span class="_1k4xcdh">$59&nbsp;NZD</span>)
2024-11-12 14:03:31,006 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $59 NZD
2024-11-12 14:03:31,006 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-12 14:03:31,010 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-12 14:03:31,016 [INFO] price_checker.py:403 - 找到价格元素: $59 NZD (HTML: <span class="_1k4xcdh">$59&nbsp;NZD</span>)
2024-11-12 14:03:31,016 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $59 NZD
2024-11-12 14:03:31,016 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-12 14:03:31,021 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-12 14:03:31,026 [INFO] price_checker.py:403 - 找到价格元素: $161 NZD (HTML: <span class="_1k4xcdh">$161&nbsp;NZD</span>)
2024-11-12 14:03:31,026 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $161 NZD
2024-11-12 14:03:31,026 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-12 14:03:31,030 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-12 14:03:31,036 [INFO] price_checker.py:403 - 找到价格元素: $161 NZD (HTML: <span class="_1k4xcdh">$161&nbsp;NZD</span>)
2024-11-12 14:03:31,036 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $161 NZD
2024-11-12 14:03:31,036 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-12 14:03:31,041 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-12 14:03:31,046 [INFO] price_checker.py:403 - 找到价格元素: $149 NZD (HTML: <span class="_1k4xcdh">$149&nbsp;NZD</span>)
2024-11-12 14:03:31,046 [INFO] price_checker.py:416 - ✓ 成功设置税费: $149 NZD
2024-11-12 14:03:31,046 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-12 14:03:33,070 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-12 14:03:33,075 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-12 14:03:33,080 [INFO] price_checker.py:403 - 找到价格元素: $1,302 NZD (HTML: <span class="_j1kt73">$1,302&nbsp;NZD</span>)
2024-11-12 14:03:33,080 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,302 NZD
2024-11-12 14:03:33,080 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-12 14:03:33,085 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-12 14:03:33,090 [INFO] price_checker.py:403 - 找到价格元素: $1,302 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$1,302&nbsp;NZD</span></span>)
2024-11-12 14:03:33,090 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,302 NZD
2024-11-12 14:03:33,095 [INFO] price_checker.py:403 - 找到价格元素: $1,302 NZD (HTML: <span class="_j1kt73">$1,302&nbsp;NZD</span>)
2024-11-12 14:03:33,095 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,302 NZD
2024-11-12 14:03:33,099 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-12 14:03:33,099 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-12 14:03:33,100 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-12 14:03:33,100 [INFO] price_checker.py:450 - ✓ cleaning_fee: $59 NZD
2024-11-12 14:03:33,100 [INFO] price_checker.py:450 - ✓ service_fee: $161 NZD
2024-11-12 14:03:33,100 [INFO] price_checker.py:450 - ✓ taxes: $149 NZD
2024-11-12 14:03:33,100 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-12 14:03:33,100 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-12 14:03:33,100 [INFO] price_checker.py:457 - check_in: 28/11/2024
2024-11-12 14:03:33,100 [INFO] price_checker.py:457 - check_out: 01/12/2024
2024-11-12 14:03:33,100 [INFO] price_checker.py:457 - min_nights: 3
2024-11-12 14:03:33,100 [INFO] price_checker.py:457 - guests: 3
2024-11-12 14:03:33,100 [INFO] price_checker.py:457 - nightly_price: $365 NZD
2024-11-12 14:03:33,100 [INFO] price_checker.py:457 - cleaning_fee: $59 NZD
2024-11-12 14:03:33,101 [INFO] price_checker.py:457 - service_fee: $161 NZD
2024-11-12 14:03:33,101 [INFO] price_checker.py:457 - taxes: $149 NZD
2024-11-12 14:03:33,101 [INFO] price_checker.py:457 - total: 
2024-11-12 14:03:33,101 [INFO] price_checker.py:559 - ✓ 成功获取 28/11/2024 的价格信息
2024-11-12 14:03:33,101 [INFO] price_checker.py:565 - 根据最小入住要求(3晚)跳过接下来的 2 天
2024-11-12 14:03:33,101 [INFO] price_checker.py:573 - 已完成 5/37 个日期的处理
2024-11-12 14:03:43,101 [INFO] price_checker.py:553 - [4/37] 处理日期: 29/11/2024
2024-11-12 14:03:43,101 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-12 14:03:43,101 [INFO] price_checker.py:255 - 入住日期: 29/11/2024
2024-11-12 14:03:48,199 [INFO] price_checker.py:271 - 开始检查日期 29/11/2024 的最小入住要求...
2024-11-12 14:03:48,202 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="29, Friday, November 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 42px; height: 42px;"><div class="_697u988 notranslate" data-testid="calendar-day-29/11/2024" data-is-day-blocked="false" style="width: 42px; height: 42px;">29</div></td>
2024-11-12 14:03:48,209 [INFO] price_checker.py:158 - 找到日期: 29/11/2024
2024-11-12 14:03:48,209 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-12 14:03:49,337 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-12 14:03:50,625 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="29, Friday, November 2024. Selected check-in date There is a 3 night minimum stay requirement. " tabindex="-1" style="width: 42px; height: 42px;"><div class="_h84ua7"><div class="_d82cel" style="transform: translate(-50%, -100%) translate(21px, -12px);"><div class="_1mslrl4"><div class="_u7azij">3-night minimum</div><svg role="presentation" focusable="false" class="_1mjga4hj"><path class="_1s2t3cl" d="M0,0 20,0 10,10z"></path><path class="_c3dsty" d="M0,0 10,10 20,0"></path></svg></div></div><div class="_194zlzjz notranslate" data-testid="calendar-day-29/11/2024" data-is-day-blocked="true" style="width: 42px; height: 42px;">29</div></div></td>
2024-11-12 14:03:50,632 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-12 14:03:50,633 [INFO] price_checker.py:218 - - aria-label: 29, Friday, November 2024. Selected check-in date There is a 3 night minimum stay requirement. 
2024-11-12 14:03:50,633 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-12 14:03:50,633 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-12 14:03:50,633 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 3晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-12 14:03:50,633 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 3晚 (自动检测)
2024-11-12 14:03:50,633 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/837352260137971048?check_in=2024-11-29&check_out=2024-12-02&adults=3&children=0&infants=0
2024-11-12 14:03:55,716 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-12 14:03:55,718 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-12 14:03:57,726 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-12 14:03:57,727 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-12 14:03:57,732 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-12 14:03:57,732 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-12 14:03:57,737 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-12 14:03:57,737 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-12 14:03:57,740 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-12 14:03:57,750 [INFO] price_checker.py:337 - 找到可见价格元素: $365 NZD 
night
$365 NZD per night
2024-11-12 14:03:57,756 [INFO] price_checker.py:350 - 找到每晚价格元素: $365 NZD 
night
$365 NZD per night
2024-11-12 14:03:57,756 [INFO] price_checker.py:356 - 成功解析折扣价格: $365 NZD
2024-11-12 14:03:57,756 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-12 14:03:57,759 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-12 14:03:58,262 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-12 14:03:58,268 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-12 14:03:58,275 [INFO] price_checker.py:403 - 找到价格元素: $59 NZD (HTML: <span class="_1k4xcdh">$59&nbsp;NZD</span>)
2024-11-12 14:03:58,276 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $59 NZD
2024-11-12 14:03:58,276 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-12 14:03:58,290 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-12 14:03:58,299 [INFO] price_checker.py:403 - 找到价格元素: $59 NZD (HTML: <span class="_1k4xcdh">$59&nbsp;NZD</span>)
2024-11-12 14:03:58,299 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $59 NZD
2024-11-12 14:03:58,299 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-12 14:03:58,306 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-12 14:03:58,314 [INFO] price_checker.py:403 - 找到价格元素: $161 NZD (HTML: <span class="_1k4xcdh">$161&nbsp;NZD</span>)
2024-11-12 14:03:58,315 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $161 NZD
2024-11-12 14:03:58,315 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-12 14:03:58,320 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-12 14:03:58,329 [INFO] price_checker.py:403 - 找到价格元素: $161 NZD (HTML: <span class="_1k4xcdh">$161&nbsp;NZD</span>)
2024-11-12 14:03:58,329 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $161 NZD
2024-11-12 14:03:58,329 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-12 14:03:58,337 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-12 14:03:58,345 [INFO] price_checker.py:403 - 找到价格元素: $149 NZD (HTML: <span class="_1k4xcdh">$149&nbsp;NZD</span>)
2024-11-12 14:03:58,345 [INFO] price_checker.py:416 - ✓ 成功设置税费: $149 NZD
2024-11-12 14:03:58,345 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-12 14:04:00,383 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-12 14:04:00,387 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-12 14:04:00,392 [INFO] price_checker.py:403 - 找到价格元素: $1,302 NZD (HTML: <span class="_j1kt73">$1,302&nbsp;NZD</span>)
2024-11-12 14:04:00,393 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,302 NZD
2024-11-12 14:04:00,393 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-12 14:04:00,397 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-12 14:04:00,403 [INFO] price_checker.py:403 - 找到价格元素: $1,302 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$1,302&nbsp;NZD</span></span>)
2024-11-12 14:04:00,404 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,302 NZD
2024-11-12 14:04:00,408 [INFO] price_checker.py:403 - 找到价格元素: $1,302 NZD (HTML: <span class="_j1kt73">$1,302&nbsp;NZD</span>)
2024-11-12 14:04:00,408 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,302 NZD
2024-11-12 14:04:00,414 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-12 14:04:00,414 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-12 14:04:00,414 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-12 14:04:00,414 [INFO] price_checker.py:450 - ✓ cleaning_fee: $59 NZD
2024-11-12 14:04:00,414 [INFO] price_checker.py:450 - ✓ service_fee: $161 NZD
2024-11-12 14:04:00,414 [INFO] price_checker.py:450 - ✓ taxes: $149 NZD
2024-11-12 14:04:00,415 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-12 14:04:00,415 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-12 14:04:00,415 [INFO] price_checker.py:457 - check_in: 29/11/2024
2024-11-12 14:04:00,415 [INFO] price_checker.py:457 - check_out: 02/12/2024
2024-11-12 14:04:00,415 [INFO] price_checker.py:457 - min_nights: 3
2024-11-12 14:04:00,415 [INFO] price_checker.py:457 - guests: 3
2024-11-12 14:04:00,415 [INFO] price_checker.py:457 - nightly_price: $365 NZD
2024-11-12 14:04:00,415 [INFO] price_checker.py:457 - cleaning_fee: $59 NZD
2024-11-12 14:04:00,415 [INFO] price_checker.py:457 - service_fee: $161 NZD
2024-11-12 14:04:00,415 [INFO] price_checker.py:457 - taxes: $149 NZD
2024-11-12 14:04:00,415 [INFO] price_checker.py:457 - total: 
2024-11-12 14:04:00,415 [INFO] price_checker.py:559 - ✓ 成功获取 29/11/2024 的价格信息
2024-11-12 14:04:00,415 [INFO] price_checker.py:565 - 根据最小入住要求(3晚)跳过接下来的 2 天
2024-11-12 14:04:00,415 [INFO] price_checker.py:553 - [5/37] 处理日期: 30/11/2024
2024-11-12 14:04:00,416 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-12 14:04:00,416 [INFO] price_checker.py:255 - 入住日期: 30/11/2024
2024-11-12 14:04:05,518 [INFO] price_checker.py:271 - 开始检查日期 30/11/2024 的最小入住要求...
2024-11-12 14:04:05,520 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_1qvi71ld" role="button" aria-disabled="false" aria-label="30, Saturday, November 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 42px; height: 42px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-30/11/2024" data-is-day-blocked="false" style="width: 42px; height: 42px;">30</div></td>
2024-11-12 14:04:05,527 [INFO] price_checker.py:158 - 找到日期: 30/11/2024
2024-11-12 14:04:05,527 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-12 14:04:06,665 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-12 14:04:07,952 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1jaqd3t0" role="button" aria-disabled="true" aria-label="30, Saturday, November 2024. Selected check-in date There is a 3 night minimum stay requirement. " tabindex="-1" style="width: 42px; height: 42px;"><div class="_h84ua7"><div class="_d82cel" style="transform: translate(-100%, -100%) translate(42px, -12px);"><div class="_1mslrl4"><div class="_u7azij">3-night minimum</div><svg role="presentation" focusable="false" class="_8c7xtno" style="right: 10px;"><path class="_1s2t3cl" d="M0,0 20,0 10,10z"></path><path class="_c3dsty" d="M0,0 10,10 20,0"></path></svg></div></div><div class="_17slido1 notranslate" data-testid="calendar-day-30/11/2024" data-is-day-blocked="true" style="width: 42px; height: 42px;">30</div></div></td>
2024-11-12 14:04:07,960 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-12 14:04:07,960 [INFO] price_checker.py:218 - - aria-label: 30, Saturday, November 2024. Selected check-in date There is a 3 night minimum stay requirement. 
2024-11-12 14:04:07,960 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-12 14:04:07,960 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-12 14:04:07,960 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 3晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-12 14:04:07,960 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 3晚 (自动检测)
2024-11-12 14:04:07,960 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/837352260137971048?check_in=2024-11-30&check_out=2024-12-03&adults=3&children=0&infants=0
2024-11-12 14:04:13,057 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-12 14:04:13,060 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-12 14:04:15,068 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-12 14:04:15,068 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-12 14:04:15,073 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-12 14:04:15,074 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-12 14:04:15,079 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-12 14:04:15,079 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-12 14:04:15,082 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-12 14:04:15,092 [INFO] price_checker.py:337 - 找到可见价格元素: $365 NZD 
night
$365 NZD per night
2024-11-12 14:04:15,098 [INFO] price_checker.py:350 - 找到每晚价格元素: $365 NZD 
night
$365 NZD per night
2024-11-12 14:04:15,098 [INFO] price_checker.py:356 - 成功解析折扣价格: $365 NZD
2024-11-12 14:04:15,098 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-12 14:04:15,101 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-12 14:04:15,604 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-12 14:04:15,609 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-12 14:04:15,615 [INFO] price_checker.py:403 - 找到价格元素: $59 NZD (HTML: <span class="_1k4xcdh">$59&nbsp;NZD</span>)
2024-11-12 14:04:15,615 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $59 NZD
2024-11-12 14:04:15,615 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-12 14:04:15,619 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-12 14:04:15,625 [INFO] price_checker.py:403 - 找到价格元素: $59 NZD (HTML: <span class="_1k4xcdh">$59&nbsp;NZD</span>)
2024-11-12 14:04:15,625 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $59 NZD
2024-11-12 14:04:15,625 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-12 14:04:15,629 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-12 14:04:15,635 [INFO] price_checker.py:403 - 找到价格元素: $161 NZD (HTML: <span class="_1k4xcdh">$161&nbsp;NZD</span>)
2024-11-12 14:04:15,635 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $161 NZD
2024-11-12 14:04:15,635 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-12 14:04:15,640 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-12 14:04:15,645 [INFO] price_checker.py:403 - 找到价格元素: $161 NZD (HTML: <span class="_1k4xcdh">$161&nbsp;NZD</span>)
2024-11-12 14:04:15,645 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $161 NZD
2024-11-12 14:04:15,645 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-12 14:04:15,649 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-12 14:04:15,654 [INFO] price_checker.py:403 - 找到价格元素: $149 NZD (HTML: <span class="_1k4xcdh">$149&nbsp;NZD</span>)
2024-11-12 14:04:15,654 [INFO] price_checker.py:416 - ✓ 成功设置税费: $149 NZD
2024-11-12 14:04:15,654 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-12 14:04:17,680 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-12 14:04:17,684 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-12 14:04:17,690 [INFO] price_checker.py:403 - 找到价格元素: $1,302 NZD (HTML: <span class="_j1kt73">$1,302&nbsp;NZD</span>)
2024-11-12 14:04:17,690 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,302 NZD
2024-11-12 14:04:17,690 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-12 14:04:17,695 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-12 14:04:17,700 [INFO] price_checker.py:403 - 找到价格元素: $1,302 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$1,302&nbsp;NZD</span></span>)
2024-11-12 14:04:17,700 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,302 NZD
2024-11-12 14:04:17,705 [INFO] price_checker.py:403 - 找到价格元素: $1,302 NZD (HTML: <span class="_j1kt73">$1,302&nbsp;NZD</span>)
2024-11-12 14:04:17,705 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,302 NZD
2024-11-12 14:04:17,710 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-12 14:04:17,710 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-12 14:04:17,710 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-12 14:04:17,711 [INFO] price_checker.py:450 - ✓ cleaning_fee: $59 NZD
2024-11-12 14:04:17,711 [INFO] price_checker.py:450 - ✓ service_fee: $161 NZD
2024-11-12 14:04:17,711 [INFO] price_checker.py:450 - ✓ taxes: $149 NZD
2024-11-12 14:04:17,711 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-12 14:04:17,711 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-12 14:04:17,711 [INFO] price_checker.py:457 - check_in: 30/11/2024
2024-11-12 14:04:17,711 [INFO] price_checker.py:457 - check_out: 03/12/2024
2024-11-12 14:04:17,711 [INFO] price_checker.py:457 - min_nights: 3
2024-11-12 14:04:17,711 [INFO] price_checker.py:457 - guests: 3
2024-11-12 14:04:17,711 [INFO] price_checker.py:457 - nightly_price: $365 NZD
2024-11-12 14:04:17,711 [INFO] price_checker.py:457 - cleaning_fee: $59 NZD
2024-11-12 14:04:17,711 [INFO] price_checker.py:457 - service_fee: $161 NZD
2024-11-12 14:04:17,711 [INFO] price_checker.py:457 - taxes: $149 NZD
2024-11-12 14:04:17,711 [INFO] price_checker.py:457 - total: 
2024-11-12 14:04:17,712 [INFO] price_checker.py:559 - ✓ 成功获取 30/11/2024 的价格信息
2024-11-12 14:04:17,712 [INFO] price_checker.py:565 - 根据最小入住要求(3晚)跳过接下来的 2 天
2024-11-12 14:04:17,712 [INFO] price_checker.py:553 - [6/37] 处理日期: 01/12/2024
2024-11-12 14:04:17,712 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-12 14:04:17,712 [INFO] price_checker.py:255 - 入住日期: 01/12/2024
2024-11-12 14:04:22,809 [INFO] price_checker.py:271 - 开始检查日期 01/12/2024 的最小入住要求...
2024-11-12 14:04:22,812 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_11r6uykv" role="button" aria-disabled="false" aria-label="1, Sunday, December 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 42px; height: 42px;"><div class="_5nf23wc notranslate" data-testid="calendar-day-01/12/2024" data-is-day-blocked="false" style="width: 42px; height: 42px;">1</div></td>
2024-11-12 14:04:22,819 [INFO] price_checker.py:158 - 找到日期: 01/12/2024
2024-11-12 14:04:22,819 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-12 14:04:23,955 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-12 14:04:25,235 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_x0oa30i" role="button" aria-disabled="true" aria-label="1, Sunday, December 2024. Selected check-in date There is a 3 night minimum stay requirement. " tabindex="-1" style="width: 42px; height: 42px;"><div class="_h84ua7"><div class="_1bf91cf3 notranslate" data-testid="calendar-day-01/12/2024" data-is-day-blocked="true" style="width: 42px; height: 42px;">1</div><div class="_dg17u6n" style="transform: translateX(-100%) translate(43px, 12px);"><div class="_1mslrl4"><div class="_u7azij">3-night minimum</div><svg role="presentation" focusable="false" class="_17sgn78l" style="right: 10px;"><path class="_1s2t3cl" d="M0,10 20,10 10,0z"></path><path class="_c3dsty" d="M0,10 10,0 20,10"></path></svg></div></div></div></td>
2024-11-12 14:04:25,242 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-12 14:04:25,242 [INFO] price_checker.py:218 - - aria-label: 1, Sunday, December 2024. Selected check-in date There is a 3 night minimum stay requirement. 
2024-11-12 14:04:25,242 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-12 14:04:25,242 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-12 14:04:25,242 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 3晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-12 14:04:25,242 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 3晚 (自动检测)
2024-11-12 14:04:25,243 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/837352260137971048?check_in=2024-12-01&check_out=2024-12-04&adults=3&children=0&infants=0
2024-11-12 14:04:30,334 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-12 14:04:30,337 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-12 14:04:32,345 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-12 14:04:32,345 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-12 14:04:32,350 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-12 14:04:32,350 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-12 14:04:32,355 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-12 14:04:32,355 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-12 14:04:32,358 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-12 14:04:32,368 [INFO] price_checker.py:337 - 找到可见价格元素: $365 NZD 
night
$365 NZD per night
2024-11-12 14:04:32,374 [INFO] price_checker.py:350 - 找到每晚价格元素: $365 NZD 
night
$365 NZD per night
2024-11-12 14:04:32,374 [INFO] price_checker.py:356 - 成功解析折扣价格: $365 NZD
2024-11-12 14:04:32,374 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-12 14:04:32,378 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-12 14:04:32,880 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-12 14:04:32,886 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-12 14:04:32,894 [INFO] price_checker.py:403 - 找到价格元素: $59 NZD (HTML: <span class="_1k4xcdh">$59&nbsp;NZD</span>)
2024-11-12 14:04:32,894 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $59 NZD
2024-11-12 14:04:32,894 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-12 14:04:32,909 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-12 14:04:32,917 [INFO] price_checker.py:403 - 找到价格元素: $59 NZD (HTML: <span class="_1k4xcdh">$59&nbsp;NZD</span>)
2024-11-12 14:04:32,917 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $59 NZD
2024-11-12 14:04:32,917 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-12 14:04:32,925 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-12 14:04:32,933 [INFO] price_checker.py:403 - 找到价格元素: $161 NZD (HTML: <span class="_1k4xcdh">$161&nbsp;NZD</span>)
2024-11-12 14:04:32,933 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $161 NZD
2024-11-12 14:04:32,933 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-12 14:04:32,940 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-12 14:04:32,948 [INFO] price_checker.py:403 - 找到价格元素: $161 NZD (HTML: <span class="_1k4xcdh">$161&nbsp;NZD</span>)
2024-11-12 14:04:32,948 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $161 NZD
2024-11-12 14:04:32,948 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-12 14:04:32,954 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-12 14:04:32,962 [INFO] price_checker.py:403 - 找到价格元素: $149 NZD (HTML: <span class="_1k4xcdh">$149&nbsp;NZD</span>)
2024-11-12 14:04:32,962 [INFO] price_checker.py:416 - ✓ 成功设置税费: $149 NZD
2024-11-12 14:04:32,963 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-12 14:04:34,995 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-12 14:04:35,000 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-12 14:04:35,005 [INFO] price_checker.py:403 - 找到价格元素: $1,302 NZD (HTML: <span class="_j1kt73">$1,302&nbsp;NZD</span>)
2024-11-12 14:04:35,005 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,302 NZD
2024-11-12 14:04:35,005 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-12 14:04:35,010 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-12 14:04:35,015 [INFO] price_checker.py:403 - 找到价格元素: $1,302 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$1,302&nbsp;NZD</span></span>)
2024-11-12 14:04:35,015 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,302 NZD
2024-11-12 14:04:35,021 [INFO] price_checker.py:403 - 找到价格元素: $1,302 NZD (HTML: <span class="_j1kt73">$1,302&nbsp;NZD</span>)
2024-11-12 14:04:35,021 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,302 NZD
2024-11-12 14:04:35,026 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-12 14:04:35,026 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-12 14:04:35,026 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-12 14:04:35,026 [INFO] price_checker.py:450 - ✓ cleaning_fee: $59 NZD
2024-11-12 14:04:35,026 [INFO] price_checker.py:450 - ✓ service_fee: $161 NZD
2024-11-12 14:04:35,026 [INFO] price_checker.py:450 - ✓ taxes: $149 NZD
2024-11-12 14:04:35,026 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-12 14:04:35,026 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-12 14:04:35,026 [INFO] price_checker.py:457 - check_in: 01/12/2024
2024-11-12 14:04:35,026 [INFO] price_checker.py:457 - check_out: 04/12/2024
2024-11-12 14:04:35,027 [INFO] price_checker.py:457 - min_nights: 3
2024-11-12 14:04:35,027 [INFO] price_checker.py:457 - guests: 3
2024-11-12 14:04:35,027 [INFO] price_checker.py:457 - nightly_price: $365 NZD
2024-11-12 14:04:35,027 [INFO] price_checker.py:457 - cleaning_fee: $59 NZD
2024-11-12 14:04:35,027 [INFO] price_checker.py:457 - service_fee: $161 NZD
2024-11-12 14:04:35,027 [INFO] price_checker.py:457 - taxes: $149 NZD
2024-11-12 14:04:35,027 [INFO] price_checker.py:457 - total: 
2024-11-12 14:04:35,027 [INFO] price_checker.py:559 - ✓ 成功获取 01/12/2024 的价格信息
2024-11-12 14:04:35,027 [INFO] price_checker.py:565 - 根据最小入住要求(3晚)跳过接下来的 2 天
2024-11-12 14:04:35,027 [INFO] price_checker.py:553 - [7/37] 处理日期: 02/12/2024
2024-11-12 14:04:35,027 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-12 14:04:35,027 [INFO] price_checker.py:255 - 入住日期: 02/12/2024
2024-11-12 14:04:40,117 [INFO] price_checker.py:271 - 开始检查日期 02/12/2024 的最小入住要求...
2024-11-12 14:04:40,121 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_sl5yz7r" role="button" aria-disabled="false" aria-label="2, Monday, December 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 42px; height: 42px;"><div class="_1xnkk5ra notranslate" data-testid="calendar-day-02/12/2024" data-is-day-blocked="false" style="width: 42px; height: 42px;">2</div></td>
2024-11-12 14:04:40,128 [INFO] price_checker.py:158 - 找到日期: 02/12/2024
2024-11-12 14:04:40,129 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-12 14:04:41,254 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-12 14:04:42,531 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_5v1jabe" role="button" aria-disabled="true" aria-label="2, Monday, December 2024. Selected check-in date There is a 3 night minimum stay requirement. " tabindex="-1" style="width: 42px; height: 42px;"><div class="_h84ua7"><div class="_d82cel" style="transform: translateY(-100%) translateY(-12px);"><div class="_1mslrl4"><div class="_u7azij">3-night minimum</div><svg role="presentation" focusable="false" class="_8c7xtno" style="left: 10px;"><path class="_1s2t3cl" d="M0,0 20,0 10,10z"></path><path class="_c3dsty" d="M0,0 10,10 20,0"></path></svg></div></div><div class="_17slido1 notranslate" data-testid="calendar-day-02/12/2024" data-is-day-blocked="true" style="width: 42px; height: 42px;">2</div></div></td>
2024-11-12 14:04:42,540 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-12 14:04:42,540 [INFO] price_checker.py:218 - - aria-label: 2, Monday, December 2024. Selected check-in date There is a 3 night minimum stay requirement. 
2024-11-12 14:04:42,540 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-12 14:04:42,540 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-12 14:04:42,540 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 3晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-12 14:04:42,540 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 3晚 (自动检测)
2024-11-12 14:04:42,540 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/837352260137971048?check_in=2024-12-02&check_out=2024-12-05&adults=3&children=0&infants=0
2024-11-12 14:04:47,634 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-12 14:04:47,636 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-12 14:04:49,645 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-12 14:04:49,645 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-12 14:04:49,650 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-12 14:04:49,650 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-12 14:04:49,654 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-12 14:04:49,654 [INFO] price_checker.py:327 - 尝试价格选择器: css - div._wgmchy div._1k1ce2w span._1qgfaxb1
2024-11-12 14:04:49,658 [INFO] price_checker.py:332 - 找到 1 个价格元素
2024-11-12 14:04:49,668 [INFO] price_checker.py:337 - 找到可见价格元素: $365 NZD 
night
$365 NZD per night
2024-11-12 14:04:49,676 [INFO] price_checker.py:350 - 找到每晚价格元素: $365 NZD 
night
$365 NZD per night
2024-11-12 14:04:49,676 [INFO] price_checker.py:356 - 成功解析折扣价格: $365 NZD
2024-11-12 14:04:49,676 [INFO] price_checker.py:369 - 开始获取价格详情...
2024-11-12 14:04:49,680 [INFO] price_checker.py:377 - 价格详情容器已加载
2024-11-12 14:04:50,182 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Cleaning fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-12 14:04:50,187 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-12 14:04:50,193 [INFO] price_checker.py:403 - 找到价格元素: $59 NZD (HTML: <span class="_1k4xcdh">$59&nbsp;NZD</span>)
2024-11-12 14:04:50,193 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $59 NZD
2024-11-12 14:04:50,193 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'Cleaning fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-12 14:04:50,198 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-12 14:04:50,202 [INFO] price_checker.py:403 - 找到价格元素: $59 NZD (HTML: <span class="_1k4xcdh">$59&nbsp;NZD</span>)
2024-11-12 14:04:50,202 [INFO] price_checker.py:408 - ✓ 成功设置清洁费: $59 NZD
2024-11-12 14:04:50,203 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Airbnb service fee']]//span[contains(@class, '_1k4xcdh')]
2024-11-12 14:04:50,207 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-12 14:04:50,212 [INFO] price_checker.py:403 - 找到价格元素: $161 NZD (HTML: <span class="_1k4xcdh">$161&nbsp;NZD</span>)
2024-11-12 14:04:50,212 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $161 NZD
2024-11-12 14:04:50,212 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'service fee')]]//span[contains(@class, '_1k4xcdh')]
2024-11-12 14:04:50,217 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-12 14:04:50,221 [INFO] price_checker.py:403 - 找到价格元素: $161 NZD (HTML: <span class="_1k4xcdh">$161&nbsp;NZD</span>)
2024-11-12 14:04:50,222 [INFO] price_checker.py:412 - ✓ 成功设置服务费: $161 NZD
2024-11-12 14:04:50,222 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[text()='Taxes']]//span[contains(@class, '_1k4xcdh')]
2024-11-12 14:04:50,227 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-12 14:04:50,231 [INFO] price_checker.py:403 - 找到价格元素: $149 NZD (HTML: <span class="_1k4xcdh">$149&nbsp;NZD</span>)
2024-11-12 14:04:50,232 [INFO] price_checker.py:416 - ✓ 成功设置税费: $149 NZD
2024-11-12 14:04:50,232 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_14omvfj')][.//div[contains(text(), 'tax')]]//span[contains(@class, '_1k4xcdh')]
2024-11-12 14:04:52,255 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_j1kt73')]
2024-11-12 14:04:52,260 [INFO] price_checker.py:398 - 找到 1 个匹配元素
2024-11-12 14:04:52,265 [INFO] price_checker.py:403 - 找到价格元素: $1,302 NZD (HTML: <span class="_j1kt73">$1,302&nbsp;NZD</span>)
2024-11-12 14:04:52,265 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,302 NZD
2024-11-12 14:04:52,265 [INFO] price_checker.py:389 - 尝试使用选择器获取价格详情: //div[contains(@class, '_1avmy66')]//span[contains(@class, '_1qs94rc')]//span
2024-11-12 14:04:52,270 [INFO] price_checker.py:398 - 找到 3 个匹配元素
2024-11-12 14:04:52,275 [INFO] price_checker.py:403 - 找到价格元素: $1,302 NZD (HTML: <span aria-hidden="false"><span class="_j1kt73">$1,302&nbsp;NZD</span></span>)
2024-11-12 14:04:52,275 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,302 NZD
2024-11-12 14:04:52,280 [INFO] price_checker.py:403 - 找到价格元素: $1,302 NZD (HTML: <span class="_j1kt73">$1,302&nbsp;NZD</span>)
2024-11-12 14:04:52,280 [INFO] price_checker.py:420 - ✓ 成功设置总价: $1,302 NZD
2024-11-12 14:04:52,285 [INFO] price_checker.py:403 - 找到价格元素:  (HTML: <span class="a8jt5op atm_3f_idpfg4 atm_7h_hxbz6r atm_7i_ysn8ba atm_e2_t94yts atm_ks_zryt35 atm_l8_idpfg4 atm_mk_stnw88 atm_vv_1q9ccgz atm_vy_t94yts dir dir-ltr"></span>)
2024-11-12 14:04:52,286 [INFO] price_checker.py:420 - ✓ 成功设置总价: 
2024-11-12 14:04:52,286 [INFO] price_checker.py:446 - 验证价格信息完整性:
2024-11-12 14:04:52,286 [INFO] price_checker.py:450 - ✓ cleaning_fee: $59 NZD
2024-11-12 14:04:52,286 [INFO] price_checker.py:450 - ✓ service_fee: $161 NZD
2024-11-12 14:04:52,286 [INFO] price_checker.py:450 - ✓ taxes: $149 NZD
2024-11-12 14:04:52,286 [WARNING] price_checker.py:452 - ✗ total 未获取到
2024-11-12 14:04:52,286 [INFO] price_checker.py:455 - 终价格信息获取结果:
2024-11-12 14:04:52,286 [INFO] price_checker.py:457 - check_in: 02/12/2024
2024-11-12 14:04:52,286 [INFO] price_checker.py:457 - check_out: 05/12/2024
2024-11-12 14:04:52,286 [INFO] price_checker.py:457 - min_nights: 3
2024-11-12 14:04:52,286 [INFO] price_checker.py:457 - guests: 3
2024-11-12 14:04:52,286 [INFO] price_checker.py:457 - nightly_price: $365 NZD
2024-11-12 14:04:52,286 [INFO] price_checker.py:457 - cleaning_fee: $59 NZD
2024-11-12 14:04:52,286 [INFO] price_checker.py:457 - service_fee: $161 NZD
2024-11-12 14:04:52,287 [INFO] price_checker.py:457 - taxes: $149 NZD
2024-11-12 14:04:52,287 [INFO] price_checker.py:457 - total: 
2024-11-12 14:04:52,287 [INFO] price_checker.py:559 - ✓ 成功获取 02/12/2024 的价格信息
2024-11-12 14:04:52,287 [INFO] price_checker.py:565 - 根据最小入住要求(3晚)跳过接下来的 2 天
2024-11-12 14:04:52,287 [INFO] price_checker.py:553 - [8/37] 处理日期: 03/12/2024
2024-11-12 14:04:52,287 [INFO] price_checker.py:254 - 开始获取价格信息: https://www.airbnb.co.nz/rooms/837352260137971048
2024-11-12 14:04:52,287 [INFO] price_checker.py:255 - 入住日期: 03/12/2024
2024-11-12 14:04:57,371 [INFO] price_checker.py:271 - 开始检查日期 03/12/2024 的最小入住要求...
2024-11-12 14:04:57,374 [INFO] price_checker.py:152 - 初始元素HTML: <td class="_2byvyib" role="button" aria-disabled="false" aria-label="3, Tuesday, December 2024. Available There is a 1 night minimum stay requirement. Select as check-in date. " tabindex="-1" style="width: 42px; height: 42px;"><div class="_697u988 notranslate" data-testid="calendar-day-03/12/2024" data-is-day-blocked="false" style="width: 42px; height: 42px;">3</div></td>
2024-11-12 14:04:57,383 [INFO] price_checker.py:158 - 找到日期: 03/12/2024
2024-11-12 14:04:57,383 [INFO] price_checker.py:164 - 点击日期元素...
2024-11-12 14:04:58,508 [INFO] price_checker.py:174 - 移动到日期元素...
2024-11-12 14:04:59,784 [INFO] price_checker.py:210 - 更新后元素HTML: <td class="_1fmu67uy" role="button" aria-disabled="true" aria-label="3, Tuesday, December 2024. Selected check-in date There is a 3 night minimum stay requirement. " tabindex="-1" style="width: 42px; height: 42px;"><div class="_h84ua7"><div class="_d82cel" style="transform: translateY(-100%) translateY(-12px);"><div class="_1mslrl4"><div class="_u7azij">3-night minimum</div><svg role="presentation" focusable="false" class="_8c7xtno" style="left: 10px;"><path class="_1s2t3cl" d="M0,0 20,0 10,10z"></path><path class="_c3dsty" d="M0,0 10,10 20,0"></path></svg></div></div><div class="_194zlzjz notranslate" data-testid="calendar-day-03/12/2024" data-is-day-blocked="true" style="width: 42px; height: 42px;">3</div></div></td>
2024-11-12 14:04:59,791 [INFO] price_checker.py:217 - 更新后元素属性:
2024-11-12 14:04:59,791 [INFO] price_checker.py:218 - - aria-label: 3, Tuesday, December 2024. Selected check-in date There is a 3 night minimum stay requirement. 
2024-11-12 14:04:59,791 [INFO] price_checker.py:219 - - aria-disabled: true
2024-11-12 14:04:59,791 [INFO] price_checker.py:220 - - data-is-day-blocked: None
2024-11-12 14:04:59,792 [INFO] price_checker.py:235 - ✓ 成功找到最小入住要求: 3晚 (匹配模式: (\d+)\s*night minimum stay)
2024-11-12 14:04:59,792 [INFO] price_checker.py:273 - 最终使用的最小入住天数: 3晚 (自动检测)
2024-11-12 14:04:59,792 [INFO] price_checker.py:296 - 访问URL: https://www.airbnb.co.nz/rooms/837352260137971048?check_in=2024-12-03&check_out=2024-12-06&adults=3&children=0&infants=0
2024-11-12 14:05:04,884 [INFO] price_checker.py:303 - 检查页面状态...
2024-11-12 14:05:04,887 [INFO] price_checker.py:305 - 页面状态: complete
2024-11-12 14:05:06,895 [INFO] price_checker.py:318 - 价格容器已加载并可见
2024-11-12 14:05:06,895 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_1y74zjx')]
2024-11-12 14:05:06,900 [INFO] price_checker.py:332 - 找到 0 个价格元素
2024-11-12 14:05:06,901 [INFO] price_checker.py:327 - 尝试价格选择器: xpath - //div[@data-testid='book-it-default']//span[contains(@class, '_tyxjp1')]
2024-11-12 14:05:11,030 [INFO] advanced_analyzer.py:290 - === 程序执行完成 ===
